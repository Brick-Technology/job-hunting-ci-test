var background=function(){"use strict";var qT=Object.defineProperty;var $T=Object.getPrototypeOf;var KT=Reflect.get;var Dm=Ae=>{throw TypeError(Ae)};var UT=(Ae,Ee,Le)=>Ee in Ae?qT(Ae,Ee,{enumerable:!0,configurable:!0,writable:!0,value:Le}):Ae[Ee]=Le;var U=(Ae,Ee,Le)=>UT(Ae,typeof Ee!="symbol"?Ee+"":Ee,Le),Om=(Ae,Ee,Le)=>Ee.has(Ae)||Dm("Cannot "+Le),Mt=(Ae,Ee)=>Object(Ee)!==Ee?Dm('Cannot use the "in" operator on this value'):Ae.has(Ee),r=(Ae,Ee,Le)=>(Om(Ae,Ee,"read from private field"),Le?Le.call(Ae):Ee.get(Ae)),f=(Ae,Ee,Le)=>Ee.has(Ae)?Dm("Cannot add the same private member more than once"):Ee instanceof WeakSet?Ee.add(Ae):Ee.set(Ae,Le),y=(Ae,Ee,Le,fn)=>(Om(Ae,Ee,"write to private field"),fn?fn.call(Ae,Le):Ee.set(Ae,Le),Le),E=(Ae,Ee,Le)=>(Om(Ae,Ee,"access private method"),Le);var Ho=(Ae,Ee,Le,fn)=>({set _(Wl){y(Ae,Ee,Wl,Le)},get _(){return r(Ae,Ee,fn)}}),MS=(Ae,Ee,Le)=>KT($T(Ae),Le,Ee);var hS,fS,Pi,Kr,pS,mS,_i,Ur,Hr,Cr,gS,cu,uu,Tn,In,Ti,Ii,An,du,Vh,pa,lu,hu,Nm,ma,Rn,fu,pu,wS,Mi,ga,mu,Fn,wa,gu,wu,yu,vu,ya,va,Dn,Lm,AS,ar,On,Nn,Ln,Su,Bn,jn,kr,NS,LS,BS,jS,ba,Sa,Ct,Ca,ka,Ea,xa,Xh,Pa,_a,wf,Wr,qn,zr,Ta,Cu,Ai,$n,ku,Eu,Kn,qt,Un,Ia,xu,Ri,Pu,yS,_u,Fi,Tu,Ma,Iu,Hn,Mu,Wn,$t,Au,zn,Ru,Vr,$S,KS,Um,Gr,Fu,Du,Ou,Nu,Lu,Aa,Ra,Fa,Bu,Vn,Zt,Zh,ju,qu,Gn,Da,$u,Jn,Oa,Jr,or,Na,La,Ku,Uu,Er,Xn,Ba,Pt,Yn,ja,xr,qa,Hu,Hm,Qn,Zn,_t,es,ts,rs,$a,Wu,Ka,Ua,Ha,US,HS,Kt,is,Di,ns,Wa,zu,za,WS,zS,Vu,ss,Va,Gu,Ju,Xu,Ga,Ut,Yu,as,os,Ja,Xa,Qu,tg,cr,Ya,Xr,ef,VS,Qa,Dt,Za,Oi,cs,ur,eo,Zu,us,tf,Ot,JS,XS,YS,ed,Ni,rg,ig,Pr,dr,Li,kt,QS,ZS,eC,yf,vf,td,Bi,to,ji,ds,rd,qi,id,nd,sd,ad,od,Yr,ze,tC,rC,iC,nC,sC,aC,bf,Ls,ls,ro,$i,io,no,cd,_r,ud,dd,ld,hd,fd,pd,md,gd,wd,yd,vd,bd,Sd,Cd,kd,Tr,so,ao,Ed,xd,Pd,_d,Td,Id,Md,Ad,rf,dC,Ki,Ui,Hi,Wi,hs,fs,oo,Me,ps,zi,co,Ir,Qr,Vi,Et,uo,Rd,nf,Gi,ue,lC,ng,hn,Sf,sg,Cf,Bl,hC,fC,pC,ag,mC,Wo,gC,wC,og,yC,vC,kf,bC,cg,SC,ug,dg,Fd,Ji,lo,Dd,er,ms,ho,gs,Od,Tt,Pe,lg,CC,kC,EC,hg,fg,pg,xC,PC,_C,TC,zo,Xi,fo,Yi,mg,gg,Ht,lr,po,Xe,Vt,ws,IC,Ef,Nd,Ld,Zr,Qi,ys,mo,Bd,ei,go,jd,Mr,ti,qd,$d,Kd,Zi,Re,hr,en,vs,tn,wo,yo,Ke,et,vo,rn,bo,So,Co,bs,ri,sf,Ud,Hd,Ce,MC,AC,RC,wg,Wd,ko,FC,DC,OC,NC,LC,yg,vg,BC,jC,bg,qC,Sg,ii,ni,Wt,nn,sn,Ar,Eo,an,xo,vS,zd,Po,dt,on,lt,Ss,Vd,cn,Cs,ks,un,Gd,Es,Jd,_o,af,Nt,Cg,kg,Xd,Yd,Qd,Zd,of,Vo,cf,To,el,ht,tl,rl,Io,si,ai,tt,il,xs,$C,uf,nl,sl,al,ol,Eg,Ps,cl,It,Gt,oi,bS,SS,Mo,dn,ci,ul,Rr,Ao,dl,Ts,ui,ll,hl,Is,Ms,Ro,As,fl,pl,Fo,ml,df,rE,gl,lf,iE,wl,hf,nE,Rs,uE,Xg,yl,Fr,Do,ln,vl,Oo,No,bl,Sl,Dr,dE,lE,ff,hE,fE,Fs,Cl,ft,Ge,zt,mE,Yg,Qg,Zg,kl,pf,Lo,gE,wE,El,ew,Bo,mf,yE,jo,xl,Pl,_l,di,Or,Ds,Tl,Il,Ml,Os,Ns,Al,qo,Rl,$o,li,hi,Ko,Uo,fi;function Ae(n){return n==null||typeof n=="function"?{main:n}:n}const Ee="BOSS",Le="51JOB",fn="ZHILIAN",Wl="LAGOU",ow="LIEPIN",zl="AUTOMATE_ERROR_UNKNOW",gi="AUTOMATE_ERROR_HUMAN_VALID",ME=()=>!1,gt=[];for(let n=0;n<256;++n)gt.push((n+256).toString(16).slice(1));function AE(n,i=0){return(gt[n[i+0]]+gt[n[i+1]]+gt[n[i+2]]+gt[n[i+3]]+"-"+gt[n[i+4]]+gt[n[i+5]]+"-"+gt[n[i+6]]+gt[n[i+7]]+"-"+gt[n[i+8]]+gt[n[i+9]]+"-"+gt[n[i+10]]+gt[n[i+11]]+gt[n[i+12]]+gt[n[i+13]]+gt[n[i+14]]+gt[n[i+15]]).toLowerCase()}let Hf;const RE=new Uint8Array(16);function FE(){if(!Hf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Hf=crypto.getRandomValues.bind(crypto)}return Hf(RE)}const cw={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function DE(n,i,e){var s;if(cw.randomUUID&&!n)return cw.randomUUID();n=n||{};const t=n.random??((s=n.rng)==null?void 0:s.call(n))??FE();if(t.length<16)throw new Error("Random bytes length must be >= 16");return t[6]=t[6]&15|64,t[8]=t[8]&63|128,AE(t)}const uw="Iv23liutsRB7F1OJkVIL",OE="762e843b1d346533626fe2e9362834c30ad1408c",NE="https://github.com/apps/job-hunting-github-app/installations/new",LE="https://github.com/login/oauth/authorize",BE="https://github.com/login/oauth/access_token",jE="https://api.github.com/user",qE="https://github.com/lastsunday/job-hunting-github-app/blob/main/INSTALL",$E=3e4,dw="KEY_GITHUB_USER",lw="KEY_GITHUB_OAUTH_TOKEN";var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function hw(n){if(n.__esModule)return n;var i=n.default;if(typeof i=="function"){var e=function t(){return this instanceof t?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};e.prototype=i.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(t){var s=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,s.get?s:{enumerable:!0,get:function(){return n[t]}})}),e}var Vl={exports:{}},KE=Vl.exports,fw;function UE(){return fw||(fw=1,function(n,i){(function(e,t){n.exports=t()})(KE,function(){var e=1e3,t=6e4,s=36e5,a="millisecond",o="second",c="minute",u="hour",d="day",p="week",h="month",l="quarter",m="year",S="date",g="Invalid Date",w=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(j){var $=["th","st","nd","rd"],J=j%100;return"["+j+($[(J-20)%10]||$[J]||$[0])+"]"}},C=function(j,$,J){var L=String(j);return!L||L.length>=$?j:""+Array($+1-L.length).join(J)+j},b={s:C,z:function(j){var $=-j.utcOffset(),J=Math.abs($),L=Math.floor(J/60),F=J%60;return($<=0?"+":"-")+C(L,2,"0")+":"+C(F,2,"0")},m:function j($,J){if($.date()<J.date())return-j(J,$);var L=12*(J.year()-$.year())+(J.month()-$.month()),F=$.clone().add(L,h),q=J-F<0,B=$.clone().add(L+(q?-1:1),h);return+(-(L+(J-F)/(q?F-B:B-F))||0)},a:function(j){return j<0?Math.ceil(j)||0:Math.floor(j)},p:function(j){return{M:h,y:m,w:p,d,D:S,h:u,m:c,s:o,ms:a,Q:l}[j]||String(j||"").toLowerCase().replace(/s$/,"")},u:function(j){return j===void 0}},D="en",A={};A[D]=k;var R="$isDayjsObject",x=function(j){return j instanceof T||!(!j||!j[R])},N=function j($,J,L){var F;if(!$)return D;if(typeof $=="string"){var q=$.toLowerCase();A[q]&&(F=q),J&&(A[q]=J,F=q);var B=$.split("-");if(!F&&B.length>1)return j(B[0])}else{var G=$.name;A[G]=$,F=G}return!L&&F&&(D=F),F||!L&&D},M=function(j,$){if(x(j))return j.clone();var J=typeof $=="object"?$:{};return J.date=j,J.args=arguments,new T(J)},O=b;O.l=N,O.i=x,O.w=function(j,$){return M(j,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var T=function(){function j(J){this.$L=N(J.locale,null,!0),this.parse(J),this.$x=this.$x||J.x||{},this[R]=!0}var $=j.prototype;return $.parse=function(J){this.$d=function(L){var F=L.date,q=L.utc;if(F===null)return new Date(NaN);if(O.u(F))return new Date;if(F instanceof Date)return new Date(F);if(typeof F=="string"&&!/Z$/i.test(F)){var B=F.match(w);if(B){var G=B[2]-1||0,Y=(B[7]||"0").substring(0,3);return q?new Date(Date.UTC(B[1],G,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Y)):new Date(B[1],G,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Y)}}return new Date(F)}(J),this.init()},$.init=function(){var J=this.$d;this.$y=J.getFullYear(),this.$M=J.getMonth(),this.$D=J.getDate(),this.$W=J.getDay(),this.$H=J.getHours(),this.$m=J.getMinutes(),this.$s=J.getSeconds(),this.$ms=J.getMilliseconds()},$.$utils=function(){return O},$.isValid=function(){return this.$d.toString()!==g},$.isSame=function(J,L){var F=M(J);return this.startOf(L)<=F&&F<=this.endOf(L)},$.isAfter=function(J,L){return M(J)<this.startOf(L)},$.isBefore=function(J,L){return this.endOf(L)<M(J)},$.$g=function(J,L,F){return O.u(J)?this[L]:this.set(F,J)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(J,L){var F=this,q=!!O.u(L)||L,B=O.p(J),G=function(Se,ce){var P=O.w(F.$u?Date.UTC(F.$y,ce,Se):new Date(F.$y,ce,Se),F);return q?P:P.endOf(d)},Y=function(Se,ce){return O.w(F.toDate()[Se].apply(F.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(ce)),F)},te=this.$W,V=this.$M,W=this.$D,ie="set"+(this.$u?"UTC":"");switch(B){case m:return q?G(1,0):G(31,11);case h:return q?G(1,V):G(0,V+1);case p:var he=this.$locale().weekStart||0,ae=(te<he?te+7:te)-he;return G(q?W-ae:W+(6-ae),V);case d:case S:return Y(ie+"Hours",0);case u:return Y(ie+"Minutes",1);case c:return Y(ie+"Seconds",2);case o:return Y(ie+"Milliseconds",3);default:return this.clone()}},$.endOf=function(J){return this.startOf(J,!1)},$.$set=function(J,L){var F,q=O.p(J),B="set"+(this.$u?"UTC":""),G=(F={},F[d]=B+"Date",F[S]=B+"Date",F[h]=B+"Month",F[m]=B+"FullYear",F[u]=B+"Hours",F[c]=B+"Minutes",F[o]=B+"Seconds",F[a]=B+"Milliseconds",F)[q],Y=q===d?this.$D+(L-this.$W):L;if(q===h||q===m){var te=this.clone().set(S,1);te.$d[G](Y),te.init(),this.$d=te.set(S,Math.min(this.$D,te.daysInMonth())).$d}else G&&this.$d[G](Y);return this.init(),this},$.set=function(J,L){return this.clone().$set(J,L)},$.get=function(J){return this[O.p(J)]()},$.add=function(J,L){var F,q=this;J=Number(J);var B=O.p(L),G=function(V){var W=M(q);return O.w(W.date(W.date()+Math.round(V*J)),q)};if(B===h)return this.set(h,this.$M+J);if(B===m)return this.set(m,this.$y+J);if(B===d)return G(1);if(B===p)return G(7);var Y=(F={},F[c]=t,F[u]=s,F[o]=e,F)[B]||1,te=this.$d.getTime()+J*Y;return O.w(te,this)},$.subtract=function(J,L){return this.add(-1*J,L)},$.format=function(J){var L=this,F=this.$locale();if(!this.isValid())return F.invalidDate||g;var q=J||"YYYY-MM-DDTHH:mm:ssZ",B=O.z(this),G=this.$H,Y=this.$m,te=this.$M,V=F.weekdays,W=F.months,ie=F.meridiem,he=function(ce,P,I,K){return ce&&(ce[P]||ce(L,q))||I[P].slice(0,K)},ae=function(ce){return O.s(G%12||12,ce,"0")},Se=ie||function(ce,P,I){var K=ce<12?"AM":"PM";return I?K.toLowerCase():K};return q.replace(v,function(ce,P){return P||function(I){switch(I){case"YY":return String(L.$y).slice(-2);case"YYYY":return O.s(L.$y,4,"0");case"M":return te+1;case"MM":return O.s(te+1,2,"0");case"MMM":return he(F.monthsShort,te,W,3);case"MMMM":return he(W,te);case"D":return L.$D;case"DD":return O.s(L.$D,2,"0");case"d":return String(L.$W);case"dd":return he(F.weekdaysMin,L.$W,V,2);case"ddd":return he(F.weekdaysShort,L.$W,V,3);case"dddd":return V[L.$W];case"H":return String(G);case"HH":return O.s(G,2,"0");case"h":return ae(1);case"hh":return ae(2);case"a":return Se(G,Y,!0);case"A":return Se(G,Y,!1);case"m":return String(Y);case"mm":return O.s(Y,2,"0");case"s":return String(L.$s);case"ss":return O.s(L.$s,2,"0");case"SSS":return O.s(L.$ms,3,"0");case"Z":return B}return null}(ce)||B.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(J,L,F){var q,B=this,G=O.p(L),Y=M(J),te=(Y.utcOffset()-this.utcOffset())*t,V=this-Y,W=function(){return O.m(B,Y)};switch(G){case m:q=W()/12;break;case h:q=W();break;case l:q=W()/3;break;case p:q=(V-te)/6048e5;break;case d:q=(V-te)/864e5;break;case u:q=V/s;break;case c:q=V/t;break;case o:q=V/e;break;default:q=V}return F?q:O.a(q)},$.daysInMonth=function(){return this.endOf(h).$D},$.$locale=function(){return A[this.$L]},$.locale=function(J,L){if(!J)return this.$L;var F=this.clone(),q=N(J,L,!0);return q&&(F.$L=q),F},$.clone=function(){return O.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},j}(),_=T.prototype;return M.prototype=_,[["$ms",a],["$s",o],["$m",c],["$H",u],["$W",d],["$M",h],["$y",m],["$D",S]].forEach(function(j){_[j[1]]=function($){return this.$g($,j[0],j[1])}}),M.extend=function(j,$){return j.$i||(j($,T,M),j.$i=!0),M},M.locale=N,M.isDayjs=x,M.unix=function(j){return M(1e3*j)},M.en=A[D],M.Ls=A,M.p={},M})}(Vl)),Vl.exports}var HE=UE();const Vf=zf(HE),pw="YYYY-MM-DD HH:mm:ss.SSS";function At(n){console.log(`${Vf(new Date).format(pw)} ${n}`)}function WT(n){}function Lr(n){console.error(`${Vf(new Date).format(pw)} ${n}`),console.error(n)}const mw="CONTENT_SCRIPT",gw="BACKGROUND",ww="OFFSCREEN",yw="WEB_WORKER",vw=[{regex:/.*worker.*\.js/,world:yw},{regex:/.*offscreen.*\.html/,world:ww},{regex:/.*background.*\.js/,world:gw}],WE=(()=>{let n=mw;return(()=>{const t=location.pathname;At(`[App] location pathname = ${t}`);for(let s=0;s<vw.length;s++){const{regex:a,world:o}=vw[s];a.test(t)&&(n=o)}At(`[App] world = ${n}`)})(),{setWorld(t){n=t},getWorld(){return n},isWorld(t){return n==t}}})(),pn=mw,Jt=gw,$s=ww,Ks=yw,zE=()=>WE.getWorld(),Gf=new Map;let zT=0;function Oe(n,i,{onMessageCallback:e=null,invokeEnv:t=null}={}){t??(t=zE());let s=XE();return new Promise((o,c)=>{try{GE(s,{resolve:o,reject:c});let u={action:n,callbackId:s,param:i,from:pn,to:Jt,invokeEnv:t};if(ME(),e&&e(u),t==pn)""+u.from+u.to+u.action+u.invokeEnv+u.callbackId+u.error;else if(t==Jt)u.from=Jt,u.to=$s,""+u.from+u.to+u.action+u.invokeEnv+u.callbackId+u.error;else if(t==Ks)u.from=Ks,u.to=$s,""+u.from+u.to+u.action+u.invokeEnv+u.callbackId+u.error;else{c(`unknow invokeEnv = ${t}`);return}VE(u)}catch(u){Lr(u),c(u)}})}const Zo=1024*1024*50;async function VE(n){let i=n.param;if(typeof i=="string"&&i.length>Zo){let e=i.length,t=parseInt(e/Zo);e%Zo>0&&(t+=1);for(let s=0;s<t;s++){let a=s*Zo,o=s+1;if(n.chunk=o,n.chunkTotal=t,o==t)n.param=i.slice(a,e),await Jf(n);else{let c=o*Zo;n.param=i.slice(a,c),await Jf(n)}}}else await Jf(n)}async function Jf(n){n.invokeEnv==Ks?postMessage({data:n}):await chrome.runtime.sendMessage(n)}function GE(n,i){Gf.set(n,i)}function JE(n){let i=Gf.get(n);return Gf.delete(n),i}function XE(){return DE()}function wi(n,i){n.invokeEnv==Ks?(n.from=Jt,n.to=$s):(n.from=Jt,n.to=pn),""+n.from+n.to+n.action+n.invokeEnv+n.callbackId+n.error;let e=JSON.parse(JSON.stringify(n));e.data=i,n.tabId?chrome.tabs.sendMessage(n.tabId,e):chrome.runtime.sendMessage(e)}function tr(n,i){n.invokeEnv==Ks?(n.from=Jt,n.to=$s):(n.from=Jt,n.to=pn),Lr("[Message][send]["+n.from+" -> "+n.to+"] message [action="+n.action+",invokeEnv="+n.invokeEnv+",callbackId="+n.callbackId+",error="+n.error+"]"),n.tabId?chrome.tabs.sendMessage(n.tabId,n):chrome.runtime.sendMessage(n)}const YE=(n,i,e)=>{if(n){if(n.from==pn&&n.to==Jt){i.tab&&(n.tabId=i.tab.id),""+n.from+n.to+n.action+n.invokeEnv+n.callbackId+n.error;let t=n.action;e.has(t)?e.get(t)(n,n.param):(n.from=Jt,n.to=$s,""+n.from+n.to+n.action+n.invokeEnv+n.callbackId+n.error,chrome.runtime.sendMessage(n))}else if(n.from==$s&&n.to==Jt){const t=n.invokeEnv;if(""+n.from+n.to+n.action+t+n.callbackId+n.error,t==pn)n.from=Jt,n.to=pn,""+n.from+n.to+n.action+t+n.callbackId+n.error,n.tabId?chrome.tabs.sendMessage(n.tabId,n):chrome.runtime.sendMessage(n);else if(t==Jt){let s=JE(n.callbackId);s?n.error?(n.message=n.error,s.reject(n)):s.resolve(n):Lr(`callbackId = ${n.callbackId} lost callback promiseHook`)}else if(t==Ks){""+n.from+n.to+n.action+t+n.callbackId+n.error;let s=n.action;e.get(s)(n,n.param)}}}};function QE(){return{mergeServiceMethod:(i,e)=>{let t=Object.keys(e);for(let s=0;s<t.length;s++){let a=t[s];i.set(a,e[a])}}}}class bw{constructor(){U(this,"accessToken");U(this,"expiresIn");U(this,"refreshToken");U(this,"refreshTokenExpiresIn");U(this,"scope");U(this,"tokenType")}}const Sw={batchAddOrUpdateJobBrowse:async function(n){return await Oe(this.batchAddOrUpdateJobBrowse.name,n)},batchAddOrUpdateJob:async function(n){return await Oe(this.batchAddOrUpdateJob.name,n)},searchJob:async function(n){return(await Oe(this.searchJob.name,n)).data},getJobBrowseInfoByIds:async function(n){return(await Oe(this.getJobBrowseInfoByIds.name,n)).data},statisticJobBrowse:async function(){return(await Oe(this.statisticJobBrowse.name,{})).data},statisticJobSearchGroupByAvgSalary:async function(n){return(await Oe(this.statisticJobSearchGroupByAvgSalary.name,n)).data},getJobByDetailUrl:async function(n){return(await Oe(this.getJobByDetailUrl.name,n)).data},addJobBrowseDetailHistory:async function(n){return await Oe(this.addJobBrowseDetailHistory.name,n)},jobGetByIds:async function(n){return(await Oe(this.jobGetByIds.name,n)).data},jobTagAddOrUpdate:async function(n){return Oe(this.jobTagAddOrUpdate.name,n)},jobTagBatchAddOrUpdate:async function(n){return Oe(this.jobTagBatchAddOrUpdate.name,n)},jobTagGetAllDTOByJobId:async function(n){return(await Oe(this.jobTagGetAllDTOByJobId.name,n)).data},jobTagGetAllDTOByJobIds:async function(n){return(await Oe(this.jobTagGetAllDTOByJobIds.name,n)).data},jobTagSearch:async function(n){return(await Oe(this.jobTagSearch.name,n)).data},jobTagDeleteByJobIds:async function(n){return Oe(this.jobTagDeleteByJobIds.name,n)},jobTagNameStatistic:async function(n){return(await Oe(this.jobTagNameStatistic.name,n)).data},jobStatisticGroupByPublishDate:async function(n){return(await Oe(this.jobStatisticGroupByPublishDate.name,n)).data},jobStatisticGroupByPlatform:async function(n){return(await Oe(this.jobStatisticGroupByPlatform.name,n)).data},jobTagExport:async function(n){return(await Oe(this.jobTagExport.name,n)).data},jobStatisticJobCompanyTagGroupByPlatform:async function(n){return(await Oe(this.jobStatisticJobCompanyTagGroupByPlatform.name,n)).data},jobStatisticJobCompanyTagGroupByCompany:async function(n){return(await Oe(this.jobStatisticJobCompanyTagGroupByCompany.name,n)).data}},Gl={getConfigByKey:async function(n){return(await Oe(this.getConfigByKey.name,n)).data},getAllConfig:async function(){return(await Oe(this.getAllConfig.name,{})).data},addOrUpdateConfig:async function(n){return await Oe(this.addOrUpdateConfig.name,n)}},ZE={appBackgroundTaskRun:async function(n){return(await Oe(this.appBackgroundTaskRun.name,n)).data}};async function e0(n,i){return(await Oe("httpFetchGetText",n,{onMessageCallback:t=>{i(()=>{Cw(t.callbackId)})}})).data}async function t0(n,i){return(await Oe("httpFetchJson",n,{onMessageCallback:t=>{i&&i(()=>{Cw(t.callbackId)})}})).data}async function Cw(n){await Oe("httpFetchGetTextAbort",n)}class kw{constructor(){U(this,"login");U(this,"id");U(this,"nodeId");U(this,"avatarUrl");U(this,"gravatarId");U(this,"url");U(this,"htmlUrl");U(this,"followersUrl");U(this,"followingUrl");U(this,"gistsUrl");U(this,"starredUrl");U(this,"subscriptionsUrl");U(this,"organizationsUrl");U(this,"reposUrl");U(this,"eventsUrl");U(this,"receivedEventsUrl");U(this,"type");U(this,"siteAdmin");U(this,"name");U(this,"company");U(this,"blog");U(this,"location");U(this,"email");U(this,"hireable");U(this,"bio");U(this,"twitterUsername");U(this,"publicRepos");U(this,"publicGists");U(this,"followers");U(this,"following");U(this,"createdAt");U(this,"updatedAt")}}var Jl={exports:{}};function r0(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Xl={exports:{}};const Ew=hw(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var i0=Xl.exports,xw;function n0(){return xw||(xw=1,function(n,i){(function(e,t){n.exports=t()})(i0,function(){var e=e||function(t,s){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof Wf<"u"&&Wf.crypto&&(a=Wf.crypto),!a&&typeof r0=="function")try{a=Ew}catch{}var o=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function k(){}return function(C){var b;return k.prototype=C,b=new k,k.prototype=null,b}}(),u={},d=u.lib={},p=d.Base=function(){return{extend:function(k){var C=c(this);return k&&C.mixIn(k),(!C.hasOwnProperty("init")||this.init===C.init)&&(C.init=function(){C.$super.init.apply(this,arguments)}),C.init.prototype=C,C.$super=this,C},create:function(){var k=this.extend();return k.init.apply(k,arguments),k},init:function(){},mixIn:function(k){for(var C in k)k.hasOwnProperty(C)&&(this[C]=k[C]);k.hasOwnProperty("toString")&&(this.toString=k.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=d.WordArray=p.extend({init:function(k,C){k=this.words=k||[],C!=s?this.sigBytes=C:this.sigBytes=k.length*4},toString:function(k){return(k||m).stringify(this)},concat:function(k){var C=this.words,b=k.words,D=this.sigBytes,A=k.sigBytes;if(this.clamp(),D%4)for(var R=0;R<A;R++){var x=b[R>>>2]>>>24-R%4*8&255;C[D+R>>>2]|=x<<24-(D+R)%4*8}else for(var N=0;N<A;N+=4)C[D+N>>>2]=b[N>>>2];return this.sigBytes+=A,this},clamp:function(){var k=this.words,C=this.sigBytes;k[C>>>2]&=4294967295<<32-C%4*8,k.length=t.ceil(C/4)},clone:function(){var k=p.clone.call(this);return k.words=this.words.slice(0),k},random:function(k){for(var C=[],b=0;b<k;b+=4)C.push(o());return new h.init(C,k)}}),l=u.enc={},m=l.Hex={stringify:function(k){for(var C=k.words,b=k.sigBytes,D=[],A=0;A<b;A++){var R=C[A>>>2]>>>24-A%4*8&255;D.push((R>>>4).toString(16)),D.push((R&15).toString(16))}return D.join("")},parse:function(k){for(var C=k.length,b=[],D=0;D<C;D+=2)b[D>>>3]|=parseInt(k.substr(D,2),16)<<24-D%8*4;return new h.init(b,C/2)}},S=l.Latin1={stringify:function(k){for(var C=k.words,b=k.sigBytes,D=[],A=0;A<b;A++){var R=C[A>>>2]>>>24-A%4*8&255;D.push(String.fromCharCode(R))}return D.join("")},parse:function(k){for(var C=k.length,b=[],D=0;D<C;D++)b[D>>>2]|=(k.charCodeAt(D)&255)<<24-D%4*8;return new h.init(b,C)}},g=l.Utf8={stringify:function(k){try{return decodeURIComponent(escape(S.stringify(k)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(k){return S.parse(unescape(encodeURIComponent(k)))}},w=d.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(k){typeof k=="string"&&(k=g.parse(k)),this._data.concat(k),this._nDataBytes+=k.sigBytes},_process:function(k){var C,b=this._data,D=b.words,A=b.sigBytes,R=this.blockSize,x=R*4,N=A/x;k?N=t.ceil(N):N=t.max((N|0)-this._minBufferSize,0);var M=N*R,O=t.min(M*4,A);if(M){for(var T=0;T<M;T+=R)this._doProcessBlock(D,T);C=D.splice(0,M),b.sigBytes-=O}return new h.init(C,O)},clone:function(){var k=p.clone.call(this);return k._data=this._data.clone(),k},_minBufferSize:0});d.Hasher=w.extend({cfg:p.extend(),init:function(k){this.cfg=this.cfg.extend(k),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(k){return this._append(k),this._process(),this},finalize:function(k){k&&this._append(k);var C=this._doFinalize();return C},blockSize:16,_createHelper:function(k){return function(C,b){return new k.init(b).finalize(C)}},_createHmacHelper:function(k){return function(C,b){return new v.HMAC.init(k,b).finalize(C)}}});var v=u.algo={};return u}(Math);return e})}(Xl)),Xl.exports}var s0=Jl.exports,Pw;function a0(){return Pw||(Pw=1,function(n,i){(function(e,t){n.exports=t(n0())})(s0,function(e){return function(t){var s=e,a=s.lib,o=a.WordArray,c=a.Hasher,u=s.algo,d=[],p=[];(function(){function m(v){for(var k=t.sqrt(v),C=2;C<=k;C++)if(!(v%C))return!1;return!0}function S(v){return(v-(v|0))*4294967296|0}for(var g=2,w=0;w<64;)m(g)&&(w<8&&(d[w]=S(t.pow(g,.5))),p[w]=S(t.pow(g,.3333333333333333)),w++),g++})();var h=[],l=u.SHA256=c.extend({_doReset:function(){this._hash=new o.init(d.slice(0))},_doProcessBlock:function(m,S){for(var g=this._hash.words,w=g[0],v=g[1],k=g[2],C=g[3],b=g[4],D=g[5],A=g[6],R=g[7],x=0;x<64;x++){if(x<16)h[x]=m[S+x]|0;else{var N=h[x-15],M=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,O=h[x-2],T=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;h[x]=M+h[x-7]+T+h[x-16]}var _=b&D^~b&A,j=w&v^w&k^v&k,$=(w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22),J=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),L=R+J+_+p[x]+h[x],F=$+j;R=A,A=D,D=b,b=C+L|0,C=k,k=v,v=w,w=L+F|0}g[0]=g[0]+w|0,g[1]=g[1]+v|0,g[2]=g[2]+k|0,g[3]=g[3]+C|0,g[4]=g[4]+b|0,g[5]=g[5]+D|0,g[6]=g[6]+A|0,g[7]=g[7]+R|0},_doFinalize:function(){var m=this._data,S=m.words,g=this._nDataBytes*8,w=m.sigBytes*8;return S[w>>>5]|=128<<24-w%32,S[(w+64>>>9<<4)+14]=t.floor(g/4294967296),S[(w+64>>>9<<4)+15]=g,m.sigBytes=S.length*4,this._process(),this._hash},clone:function(){var m=c.clone.call(this);return m._hash=this._hash.clone(),m}});s.SHA256=c._createHelper(l),s.HmacSHA256=c._createHmacHelper(l)}(Math),e.SHA256})}(Jl)),Jl.exports}a0();function o0(n){return Math.floor(Math.random()*n)}function c0(n){return n.replace(/\_(\w)/g,function(i,e){return e.toUpperCase()})}function _w(n,i){let e=Object.assign({},n),t=Object.keys(i);for(let s=0;s<t.length;s++){let a=t[s];e[c0(a)]=i[a]}return e}function ec(n,i){return new Promise(e=>setTimeout(e,n+o0(i)))}function u0(n){let i=new URL(n);return i.origin+i.pathname}function d0(n){const i={};for(const[e,t]of n)i[e]=t;return i}class Tw{constructor(){U(this,"key");U(this,"value");U(this,"createDatetime");U(this,"updateDatetime")}}const Xf=new Map,l0={authOauth2Login:async function(n,i){try{chrome.tabs.create({url:`${LE}?client_id=${uw}`}),Xf.set(n)}catch(e){tr(n,"[background] authOauth2Login error : "+e.message)}},authInstallAndLogin:async function(n,i){try{chrome.tabs.create({url:`${NE}`}),Xf.set(n)}catch(e){tr(n,"[background] authInstallAndLogin error : "+e.message)}},authGetToken:async function(n,i){try{wi(n,await Mw())}catch(e){tr(n,"[background] authGetToken error : "+e.message)}},authSetToken:async function(n,i){try{await Iw(i),wi(n,{})}catch(e){tr(n,"[background] authSetToken error : "+e.message)}}};function h0(){return Xf}async function Iw(n){let i=new Tw;return i.key=lw,i.value=JSON.stringify(n),Gl.addOrUpdateConfig(i)}async function Mw(){let n=new bw,i=await Gl.getConfigByKey(lw);if(i){let e=JSON.parse(i.value);if(e)return Object.assign(n,e),n}return null}var Yf=function(n,i){return Yf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])},Yf(n,i)};function Br(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");Yf(n,i);function e(){this.constructor=n}n.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}function f0(n,i,e,t){function s(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function c(p){try{d(t.next(p))}catch(h){o(h)}}function u(p){try{d(t.throw(p))}catch(h){o(h)}}function d(p){p.done?a(p.value):s(p.value).then(c,u)}d((t=t.apply(n,[])).next())})}function Aw(n,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},t,s,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(d){return function(p){return u([d,p])}}function u(d){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(e=0)),e;)try{if(t=1,s&&(a=d[0]&2?s.return:d[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,d[1])).done)return a;switch(s=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return e.label++,{value:d[1],done:!1};case 5:e.label++,s=d[1],d=[0];continue;case 7:d=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){e=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){e.label=d[1];break}if(d[0]===6&&e.label<a[1]){e.label=a[1],a=d;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(d);break}a[2]&&e.ops.pop(),e.trys.pop();continue}d=i.call(n,e)}catch(p){d=[6,p],s=0}finally{t=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Us(n){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&n[i],t=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function mn(n,i){var e=typeof Symbol=="function"&&n[Symbol.iterator];if(!e)return n;var t=e.call(n),s,a=[],o;try{for(;(i===void 0||i-- >0)&&!(s=t.next()).done;)a.push(s.value)}catch(c){o={error:c}}finally{try{s&&!s.done&&(e=t.return)&&e.call(t)}finally{if(o)throw o.error}}return a}function Hs(n,i,e){if(arguments.length===2)for(var t=0,s=i.length,a;t<s;t++)(a||!(t in i))&&(a||(a=Array.prototype.slice.call(i,0,t)),a[t]=i[t]);return n.concat(a||Array.prototype.slice.call(i))}function Ws(n){return this instanceof Ws?(this.v=n,this):new Ws(n)}function p0(n,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(n,i||[]),s,a=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(l){t[l]&&(s[l]=function(m){return new Promise(function(S,g){a.push([l,m,S,g])>1||c(l,m)})})}function c(l,m){try{u(t[l](m))}catch(S){h(a[0][3],S)}}function u(l){l.value instanceof Ws?Promise.resolve(l.value.v).then(d,p):h(a[0][2],l)}function d(l){c("next",l)}function p(l){c("throw",l)}function h(l,m){l(m),a.shift(),a.length&&c(a[0][0],a[0][1])}}function m0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],e;return i?i.call(n):(n=typeof Us=="function"?Us(n):n[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(a){e[a]=n[a]&&function(o){return new Promise(function(c,u){o=n[a](o),s(c,u,o.done,o.value)})}}function s(a,o,c,u){Promise.resolve(u).then(function(d){a({value:d,done:c})},o)}}function Ne(n){return typeof n=="function"}function Qf(n){var i=function(t){Error.call(t),t.stack=new Error().stack},e=n(i);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Zf=Qf(function(n){return function(e){n(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,s){return s+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Yl(n,i){if(n){var e=n.indexOf(i);0<=e&&n.splice(e,1)}}var tc=function(){function n(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}return n.prototype.unsubscribe=function(){var i,e,t,s,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var c=Us(o),u=c.next();!u.done;u=c.next()){var d=u.value;d.remove(this)}}catch(g){i={error:g}}finally{try{u&&!u.done&&(e=c.return)&&e.call(c)}finally{if(i)throw i.error}}else o.remove(this);var p=this.initialTeardown;if(Ne(p))try{p()}catch(g){a=g instanceof Zf?g.errors:[g]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var l=Us(h),m=l.next();!m.done;m=l.next()){var S=m.value;try{Dw(S)}catch(g){a=a??[],g instanceof Zf?a=Hs(Hs([],mn(a)),mn(g.errors)):a.push(g)}}}catch(g){t={error:g}}finally{try{m&&!m.done&&(s=l.return)&&s.call(l)}finally{if(t)throw t.error}}}if(a)throw new Zf(a)}},n.prototype.add=function(i){var e;if(i&&i!==this)if(this.closed)Dw(i);else{if(i instanceof n){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(i)}},n.prototype._hasParent=function(i){var e=this._parentage;return e===i||Array.isArray(e)&&e.includes(i)},n.prototype._addParent=function(i){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i},n.prototype._removeParent=function(i){var e=this._parentage;e===i?this._parentage=null:Array.isArray(e)&&Yl(e,i)},n.prototype.remove=function(i){var e=this._finalizers;e&&Yl(e,i),i instanceof n&&i._removeParent(this)},n.EMPTY=function(){var i=new n;return i.closed=!0,i}(),n}(),Rw=tc.EMPTY;function Fw(n){return n instanceof tc||n&&"closed"in n&&Ne(n.remove)&&Ne(n.add)&&Ne(n.unsubscribe)}function Dw(n){Ne(n)?n():n.unsubscribe()}var g0={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},w0={setTimeout:function(n,i){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];return setTimeout.apply(void 0,Hs([n,i],mn(e)))},clearTimeout:function(n){return clearTimeout(n)},delegate:void 0};function Ow(n){w0.setTimeout(function(){throw n})}function zs(){}function Ql(n){n()}var ep=function(n){Br(i,n);function i(e){var t=n.call(this)||this;return t.isStopped=!1,e?(t.destination=e,Fw(e)&&e.add(t)):t.destination=b0,t}return i.create=function(e,t,s){return new Zl(e,t,s)},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this),this.destination=null)},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},i.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(tc),y0=function(){function n(i){this.partialObserver=i}return n.prototype.next=function(i){var e=this.partialObserver;if(e.next)try{e.next(i)}catch(t){eh(t)}},n.prototype.error=function(i){var e=this.partialObserver;if(e.error)try{e.error(i)}catch(t){eh(t)}else eh(i)},n.prototype.complete=function(){var i=this.partialObserver;if(i.complete)try{i.complete()}catch(e){eh(e)}},n}(),Zl=function(n){Br(i,n);function i(e,t,s){var a=n.call(this)||this,o;return Ne(e)||!e?o={next:e??void 0,error:t??void 0,complete:s??void 0}:o=e,a.destination=new y0(o),a}return i}(ep);function eh(n){Ow(n)}function v0(n){throw n}var b0={closed:!0,next:zs,error:v0,complete:zs},tp=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function fr(n){return n}function S0(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Nw(n)}function Nw(n){return n.length===0?fr:n.length===1?n[0]:function(e){return n.reduce(function(t,s){return s(t)},e)}}var rt=function(){function n(i){i&&(this._subscribe=i)}return n.prototype.lift=function(i){var e=new n;return e.source=this,e.operator=i,e},n.prototype.subscribe=function(i,e,t){var s=this,a=k0(i)?i:new Zl(i,e,t);return Ql(function(){var o=s,c=o.operator,u=o.source;a.add(c?c.call(a,u):u?s._subscribe(a):s._trySubscribe(a))}),a},n.prototype._trySubscribe=function(i){try{return this._subscribe(i)}catch(e){i.error(e)}},n.prototype.forEach=function(i,e){var t=this;return e=Lw(e),new e(function(s,a){var o=new Zl({next:function(c){try{i(c)}catch(u){a(u),o.unsubscribe()}},error:a,complete:s});t.subscribe(o)})},n.prototype._subscribe=function(i){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(i)},n.prototype[tp]=function(){return this},n.prototype.pipe=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return Nw(i)(this)},n.prototype.toPromise=function(i){var e=this;return i=Lw(i),new i(function(t,s){var a;e.subscribe(function(o){return a=o},function(o){return s(o)},function(){return t(a)})})},n.create=function(i){return new n(i)},n}();function Lw(n){var i;return(i=n??g0.Promise)!==null&&i!==void 0?i:Promise}function C0(n){return n&&Ne(n.next)&&Ne(n.error)&&Ne(n.complete)}function k0(n){return n&&n instanceof ep||C0(n)&&Fw(n)}function E0(n){return Ne(n==null?void 0:n.lift)}function wt(n){return function(i){if(E0(i))return i.lift(function(e){try{return n(e,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function nt(n,i,e,t,s){return new x0(n,i,e,t,s)}var x0=function(n){Br(i,n);function i(e,t,s,a,o,c){var u=n.call(this,e)||this;return u.onFinalize=o,u.shouldUnsubscribe=c,u._next=t?function(d){try{t(d)}catch(p){e.error(p)}}:n.prototype._next,u._error=a?function(d){try{a(d)}catch(p){e.error(p)}finally{this.unsubscribe()}}:n.prototype._error,u._complete=s?function(){try{s()}catch(d){e.error(d)}finally{this.unsubscribe()}}:n.prototype._complete,u}return i.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;n.prototype.unsubscribe.call(this),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},i}(ep),P0=Qf(function(n){return function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Bw=function(n){Br(i,n);function i(){var e=n.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i.prototype.lift=function(e){var t=new jw(this,this);return t.operator=e,t},i.prototype._throwIfClosed=function(){if(this.closed)throw new P0},i.prototype.next=function(e){var t=this;Ql(function(){var s,a;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=Us(t.currentObservers),c=o.next();!c.done;c=o.next()){var u=c.value;u.next(e)}}catch(d){s={error:d}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(s)throw s.error}}}})},i.prototype.error=function(e){var t=this;Ql(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var s=t.observers;s.length;)s.shift().error(e)}})},i.prototype.complete=function(){var e=this;Ql(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),i.prototype._trySubscribe=function(e){return this._throwIfClosed(),n.prototype._trySubscribe.call(this,e)},i.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},i.prototype._innerSubscribe=function(e){var t=this,s=this,a=s.hasError,o=s.isStopped,c=s.observers;return a||o?Rw:(this.currentObservers=null,c.push(e),new tc(function(){t.currentObservers=null,Yl(c,e)}))},i.prototype._checkFinalizedStatuses=function(e){var t=this,s=t.hasError,a=t.thrownError,o=t.isStopped;s?e.error(a):o&&e.complete()},i.prototype.asObservable=function(){var e=new rt;return e.source=this,e},i.create=function(e,t){return new jw(e,t)},i}(rt),jw=function(n){Br(i,n);function i(e,t){var s=n.call(this)||this;return s.destination=e,s.source=t,s}return i.prototype.next=function(e){var t,s;(s=(t=this.destination)===null||t===void 0?void 0:t.next)===null||s===void 0||s.call(t,e)},i.prototype.error=function(e){var t,s;(s=(t=this.destination)===null||t===void 0?void 0:t.error)===null||s===void 0||s.call(t,e)},i.prototype.complete=function(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)},i.prototype._subscribe=function(e){var t,s;return(s=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&s!==void 0?s:Rw},i}(Bw),rp={now:function(){return(rp.delegate||Date).now()},delegate:void 0},_0=function(n){Br(i,n);function i(e,t,s){e===void 0&&(e=1/0),t===void 0&&(t=1/0),s===void 0&&(s=rp);var a=n.call(this)||this;return a._bufferSize=e,a._windowTime=t,a._timestampProvider=s,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=t===1/0,a._bufferSize=Math.max(1,e),a._windowTime=Math.max(1,t),a}return i.prototype.next=function(e){var t=this,s=t.isStopped,a=t._buffer,o=t._infiniteTimeWindow,c=t._timestampProvider,u=t._windowTime;s||(a.push(e),!o&&a.push(c.now()+u)),this._trimBuffer(),n.prototype.next.call(this,e)},i.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),s=this,a=s._infiniteTimeWindow,o=s._buffer,c=o.slice(),u=0;u<c.length&&!e.closed;u+=a?1:2)e.next(c[u]);return this._checkFinalizedStatuses(e),t},i.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,s=e._timestampProvider,a=e._buffer,o=e._infiniteTimeWindow,c=(o?1:2)*t;if(t<1/0&&c<a.length&&a.splice(0,a.length-c),!o){for(var u=s.now(),d=0,p=1;p<a.length&&a[p]<=u;p+=2)d=p;d&&a.splice(0,d+1)}},i}(Bw),T0=function(n){Br(i,n);function i(e,t){return n.call(this)||this}return i.prototype.schedule=function(e,t){return this},i}(tc),qw={setInterval:function(n,i){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];return setInterval.apply(void 0,Hs([n,i],mn(e)))},clearInterval:function(n){return clearInterval(n)},delegate:void 0},I0=function(n){Br(i,n);function i(e,t){var s=n.call(this,e,t)||this;return s.scheduler=e,s.work=t,s.pending=!1,s}return i.prototype.schedule=function(e,t){var s;if(t===void 0&&(t=0),this.closed)return this;this.state=e;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,t)),this.pending=!0,this.delay=t,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(o,this.id,t),this},i.prototype.requestAsyncId=function(e,t,s){return s===void 0&&(s=0),qw.setInterval(e.flush.bind(e,this),s)},i.prototype.recycleAsyncId=function(e,t,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return t;t!=null&&qw.clearInterval(t)},i.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(e,t);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(e,t){var s=!1,a;try{this.work(e)}catch(o){s=!0,a=o||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),a},i.prototype.unsubscribe=function(){if(!this.closed){var e=this,t=e.id,s=e.scheduler,a=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Yl(a,this),t!=null&&(this.id=this.recycleAsyncId(s,t,null)),this.delay=null,n.prototype.unsubscribe.call(this)}},i}(T0),$w=function(){function n(i,e){e===void 0&&(e=n.now),this.schedulerActionCtor=i,this.now=e}return n.prototype.schedule=function(i,e,t){return e===void 0&&(e=0),new this.schedulerActionCtor(this,i).schedule(t,e)},n.now=rp.now,n}(),M0=function(n){Br(i,n);function i(e,t){t===void 0&&(t=$w.now);var s=n.call(this,e,t)||this;return s.actions=[],s._active=!1,s}return i.prototype.flush=function(e){var t=this.actions;if(this._active){t.push(e);return}var s;this._active=!0;do if(s=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}},i}($w),A0=new M0(I0),R0=A0,gn=new rt(function(n){return n.complete()});function F0(n){return n&&Ne(n.schedule)}function ip(n){return n[n.length-1]}function D0(n){return Ne(ip(n))?n.pop():void 0}function rc(n){return F0(ip(n))?n.pop():void 0}function O0(n,i){return typeof ip(n)=="number"?n.pop():i}var np=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function Kw(n){return Ne(n==null?void 0:n.then)}function Uw(n){return Ne(n[tp])}function Hw(n){return Symbol.asyncIterator&&Ne(n==null?void 0:n[Symbol.asyncIterator])}function Ww(n){return new TypeError("You provided "+(n!==null&&typeof n=="object"?"an invalid object":"'"+n+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function N0(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zw=N0();function Vw(n){return Ne(n==null?void 0:n[zw])}function Gw(n){return p0(this,arguments,function(){var e,t,s,a;return Aw(this,function(o){switch(o.label){case 0:e=n.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Ws(e.read())];case 3:return t=o.sent(),s=t.value,a=t.done,a?[4,Ws(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Ws(s)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function Jw(n){return Ne(n==null?void 0:n.getReader)}function xt(n){if(n instanceof rt)return n;if(n!=null){if(Uw(n))return L0(n);if(np(n))return B0(n);if(Kw(n))return j0(n);if(Hw(n))return Xw(n);if(Vw(n))return q0(n);if(Jw(n))return $0(n)}throw Ww(n)}function L0(n){return new rt(function(i){var e=n[tp]();if(Ne(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function B0(n){return new rt(function(i){for(var e=0;e<n.length&&!i.closed;e++)i.next(n[e]);i.complete()})}function j0(n){return new rt(function(i){n.then(function(e){i.closed||(i.next(e),i.complete())},function(e){return i.error(e)}).then(null,Ow)})}function q0(n){return new rt(function(i){var e,t;try{for(var s=Us(n),a=s.next();!a.done;a=s.next()){var o=a.value;if(i.next(o),i.closed)return}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}i.complete()})}function Xw(n){return new rt(function(i){K0(n,i).catch(function(e){return i.error(e)})})}function $0(n){return Xw(Gw(n))}function K0(n,i){var e,t,s,a;return f0(this,void 0,void 0,function(){var o,c;return Aw(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=m0(n),u.label=1;case 1:return[4,e.next()];case 2:if(t=u.sent(),!!t.done)return[3,4];if(o=t.value,i.next(o),i.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=u.sent(),s={error:c},[3,11];case 6:return u.trys.push([6,,9,10]),t&&!t.done&&(a=e.return)?[4,a.call(e)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return i.complete(),[2]}})})}function yi(n,i,e,t,s){t===void 0&&(t=0),s===void 0&&(s=!1);var a=i.schedule(function(){e(),s?n.add(this.schedule(null,t)):this.unsubscribe()},t);if(n.add(a),!s)return a}function Yw(n,i){return i===void 0&&(i=0),wt(function(e,t){e.subscribe(nt(t,function(s){return yi(t,n,function(){return t.next(s)},i)},function(){return yi(t,n,function(){return t.complete()},i)},function(s){return yi(t,n,function(){return t.error(s)},i)}))})}function Qw(n,i){return i===void 0&&(i=0),wt(function(e,t){t.add(n.schedule(function(){return e.subscribe(t)},i))})}function U0(n,i){return xt(n).pipe(Qw(i),Yw(i))}function H0(n,i){return xt(n).pipe(Qw(i),Yw(i))}function W0(n,i){return new rt(function(e){var t=0;return i.schedule(function(){t===n.length?e.complete():(e.next(n[t++]),e.closed||this.schedule())})})}function z0(n,i){return new rt(function(e){var t;return yi(e,i,function(){t=n[zw](),yi(e,i,function(){var s,a,o;try{s=t.next(),a=s.value,o=s.done}catch(c){e.error(c);return}o?e.complete():e.next(a)},0,!0)}),function(){return Ne(t==null?void 0:t.return)&&t.return()}})}function Zw(n,i){if(!n)throw new Error("Iterable cannot be null");return new rt(function(e){yi(e,i,function(){var t=n[Symbol.asyncIterator]();yi(e,i,function(){t.next().then(function(s){s.done?e.complete():e.next(s.value)})},0,!0)})})}function V0(n,i){return Zw(Gw(n),i)}function G0(n,i){if(n!=null){if(Uw(n))return U0(n,i);if(np(n))return W0(n,i);if(Kw(n))return H0(n,i);if(Hw(n))return Zw(n,i);if(Vw(n))return z0(n,i);if(Jw(n))return V0(n,i)}throw Ww(n)}function _e(n,i){return i?G0(n,i):xt(n)}function pr(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=rc(n);return _e(n,e)}var sp=Qf(function(n){return function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}});function st(n,i){return new Promise(function(e,t){var s=new Zl({next:function(a){e(a),s.unsubscribe()},error:t,complete:function(){t(new sp)}});n.subscribe(s)})}function J0(n){return n instanceof Date&&!isNaN(n)}function Je(n,i){return wt(function(e,t){var s=0;e.subscribe(nt(t,function(a){t.next(n.call(i,a,s++))}))})}var X0=Array.isArray;function Y0(n,i){return X0(i)?n.apply(void 0,Hs([],mn(i))):n(i)}function ey(n){return Je(function(i){return Y0(n,i)})}var Q0=Array.isArray,Z0=Object.getPrototypeOf,ex=Object.prototype,tx=Object.keys;function rx(n){if(n.length===1){var i=n[0];if(Q0(i))return{args:i,keys:null};if(ix(i)){var e=tx(i);return{args:e.map(function(t){return i[t]}),keys:e}}}return{args:n,keys:null}}function ix(n){return n&&typeof n=="object"&&Z0(n)===ex}function nx(n,i){return n.reduce(function(e,t,s){return e[t]=i[s],e},{})}function th(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=rc(n),t=D0(n),s=rx(n),a=s.args,o=s.keys;if(a.length===0)return _e([],e);var c=new rt(sx(a,e,o?function(u){return nx(o,u)}:fr));return t?c.pipe(ey(t)):c}function sx(n,i,e){return e===void 0&&(e=fr),function(t){ty(i,function(){for(var s=n.length,a=new Array(s),o=s,c=s,u=function(p){ty(i,function(){var h=_e(n[p],i),l=!1;h.subscribe(nt(t,function(m){a[p]=m,l||(l=!0,c--),c||t.next(e(a.slice()))},function(){--o||t.complete()}))},t)},d=0;d<s;d++)u(d)},t)}}function ty(n,i,e){n?yi(e,n,i):i()}function ry(n,i,e,t,s,a,o,c){var u=[],d=0,p=0,h=!1,l=function(){h&&!u.length&&!d&&i.complete()},m=function(g){return d<t?S(g):u.push(g)},S=function(g){a&&i.next(g),d++;var w=!1;xt(e(g,p++)).subscribe(nt(i,function(v){s==null||s(v),a?m(v):i.next(v)},function(){w=!0},void 0,function(){if(w)try{d--;for(var v=function(){var k=u.shift();o||S(k)};u.length&&d<t;)v();l()}catch(k){i.error(k)}}))};return n.subscribe(nt(i,m,function(){h=!0,l()})),function(){c==null||c()}}function at(n,i,e){return e===void 0&&(e=1/0),Ne(i)?at(function(t,s){return Je(function(a,o){return i(t,a,s,o)})(xt(n(t,s)))},e):(typeof i=="number"&&(e=i),wt(function(t,s){return ry(t,s,n,e)}))}function iy(n){return n===void 0&&(n=1/0),at(fr,n)}function ax(){return iy(1)}function ap(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return ax()(_e(n,rc(n)))}function wn(n){return new rt(function(i){xt(n()).subscribe(i)})}var ox=["addListener","removeListener"],cx=["addEventListener","removeEventListener"],ux=["on","off"];function op(n,i,e,t){if(Ne(e)&&(t=e,e=void 0),t)return op(n,i,e).pipe(ey(t));var s=mn(hx(n)?cx.map(function(c){return function(u){return n[c](i,u,e)}}):dx(n)?ox.map(ny(n,i)):lx(n)?ux.map(ny(n,i)):[],2),a=s[0],o=s[1];if(!a&&np(n))return at(function(c){return op(c,i,e)})(xt(n));if(!a)throw new TypeError("Invalid event target");return new rt(function(c){var u=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];return c.next(1<d.length?d:d[0])};return a(u),function(){return o(u)}})}function ny(n,i){return function(e){return function(t){return n[e](i,t)}}}function dx(n){return Ne(n.addListener)&&Ne(n.removeListener)}function lx(n){return Ne(n.on)&&Ne(n.off)}function hx(n){return Ne(n.addEventListener)&&Ne(n.removeEventListener)}function cp(n,i,e){return n===void 0&&(n=0),e===void 0&&(e=R0),new rt(function(t){var s=J0(n)?+n-e.now():n;s<0&&(s=0);var a=0;return e.schedule(function(){t.closed||(t.next(a++),t.complete())},s)})}function ic(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=rc(n),t=O0(n,1/0),s=n;return s.length?s.length===1?xt(s[0]):iy(t)(_e(s,e)):gn}var sy=new rt(zs),fx=Array.isArray;function px(n){return n.length===1&&fx(n[0])?n[0]:n}function yn(n,i){return wt(function(e,t){var s=0;e.subscribe(nt(t,function(a){return n.call(i,a,s++)&&t.next(a)}))})}function ay(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n=px(n),n.length===1?xt(n[0]):new rt(oy(n))}function oy(n){return function(i){for(var e=[],t=function(a){e.push(xt(n[a]).subscribe(nt(i,function(o){if(e){for(var c=0;c<e.length;c++)c!==a&&e[c].unsubscribe();e=null}i.next(o)})))},s=0;e&&!i.closed&&s<n.length;s++)t(s)}}function nc(n){return wt(function(i,e){var t=null,s=!1,a;t=i.subscribe(nt(e,void 0,void 0,function(o){a=xt(n(o,nc(n)(i))),t?(t.unsubscribe(),t=null,a.subscribe(e)):s=!0})),s&&(t.unsubscribe(),t=null,a.subscribe(e))})}function cy(n){return wt(function(i,e){var t=!1;i.subscribe(nt(e,function(s){t=!0,e.next(s)},function(){t||e.next(n),e.complete()}))})}function up(n){return n<=0?function(){return gn}:wt(function(i,e){var t=0;i.subscribe(nt(e,function(s){++t<=n&&(e.next(s),n<=t&&e.complete())}))})}function rh(){return wt(function(n,i){n.subscribe(nt(i,zs))})}function mx(n){return Je(function(){return n})}function gx(n,i){return at(function(e,t){return xt(n(e,t)).pipe(up(1),mx(e))})}function ih(n){return n===void 0&&(n=wx),wt(function(i,e){var t=!1;i.subscribe(nt(e,function(s){t=!0,e.next(s)},function(){return t?e.complete():e.error(n())}))})}function wx(){return new sp}function Vs(n,i){var e=arguments.length>=2;return function(t){return t.pipe(n?yn(function(s,a){return n(s,a,t)}):fr,up(1),e?cy(i):ih(function(){return new sp}))}}function yx(n,i,e){return e===void 0&&(e=1/0),wt(function(t,s){var a=i;return ry(t,s,function(o,c){return n(a,o,c)},e,function(o){a=o},!1,void 0,function(){return a=null})})}function yt(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.length?wt(function(e,t){oy(Hs([e],mn(n)))(t)}):fr}function nh(n){n===void 0&&(n=1/0);var i;n&&typeof n=="object"?i=n:i={count:n};var e=i.count,t=e===void 0?1/0:e,s=i.delay,a=i.resetOnSuccess,o=a===void 0?!1:a;return t<=0?fr:wt(function(c,u){var d=0,p,h=function(){var l=!1;p=c.subscribe(nt(u,function(m){o&&(d=0),u.next(m)},void 0,function(m){if(d++<t){var S=function(){p?(p.unsubscribe(),p=null,h()):l=!0};if(s!=null){var g=typeof s=="number"?cp(s):xt(s(m,d)),w=nt(u,function(){w.unsubscribe(),S()},function(){u.complete()});g.subscribe(w)}else S()}else u.error(m)})),l&&(p.unsubscribe(),p=null,h())};h()})}function vx(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var e=rc(n);return wt(function(t,s){(e?ap(n,t,e):ap(n,t)).subscribe(s)})}function sh(n,i){return wt(function(e,t){var s=null,a=0,o=!1,c=function(){return o&&!s&&t.complete()};e.subscribe(nt(t,function(u){s==null||s.unsubscribe();var d=0,p=a++;xt(n(u,p)).subscribe(s=nt(t,function(h){return t.next(i?i(u,h,p,d++):h)},function(){s=null,c()}))},function(){o=!0,c()}))})}function bx(n){return wt(function(i,e){xt(n).subscribe(nt(e,function(){return e.complete()},zs)),!e.closed&&i.subscribe(e)})}function ah(n,i,e){var t=Ne(n)||i||e?{next:n,error:i,complete:e}:n;return t?wt(function(s,a){var o;(o=t.subscribe)===null||o===void 0||o.call(t);var c=!0;s.subscribe(nt(a,function(u){var d;(d=t.next)===null||d===void 0||d.call(t,u),a.next(u)},function(){var u;c=!1,(u=t.complete)===null||u===void 0||u.call(t),a.complete()},function(u){var d;c=!1,(d=t.error)===null||d===void 0||d.call(t,u),a.error(u)},function(){var u,d;c&&((u=t.unsubscribe)===null||u===void 0||u.call(t)),(d=t.finalize)===null||d===void 0||d.call(t)}))}):fr}function Sx(n){return{all:n=n||new Map,on:function(i,e){var t=n.get(i);t?t.push(e):n.set(i,[e])},off:function(i,e){var t=n.get(i);t&&(e?t.splice(t.indexOf(e)>>>0,1):n.set(i,[]))},emit:function(i,e){var t=n.get(i);t&&t.slice().map(function(s){s(e)}),(t=n.get("*"))&&t.slice().map(function(s){s(i,e)})}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */Symbol.dispose??(Symbol.dispose=Symbol("dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("asyncDispose"));const we=Symbol.dispose,rr=Symbol.asyncDispose;fS=we,hS=Symbol.toStringTag;const gm=class gm{constructor(){f(this,Pi,!1);f(this,Kr,[]);U(this,fS,this.dispose);U(this,hS,"DisposableStack")}get disposed(){return r(this,Pi)}dispose(){if(!r(this,Pi)){y(this,Pi,!0);for(const i of r(this,Kr).reverse())i[we]()}}use(i){return i&&r(this,Kr).push(i),i}adopt(i,e){return r(this,Kr).push({[we](){e(i)}}),i}defer(i){r(this,Kr).push({[we](){i()}})}move(){if(r(this,Pi))throw new ReferenceError("a disposed stack can not use anything new");const i=new gm;return y(i,Kr,r(this,Kr)),y(this,Pi,!0),i}};Pi=new WeakMap,Kr=new WeakMap;let Qe=gm;mS=rr,pS=Symbol.toStringTag;const wm=class wm{constructor(){f(this,_i,!1);f(this,Ur,[]);U(this,mS,this.dispose);U(this,pS,"AsyncDisposableStack")}get disposed(){return r(this,_i)}async dispose(){if(!r(this,_i)){y(this,_i,!0);for(const i of r(this,Ur).reverse())await i[rr]()}}use(i){return i&&r(this,Ur).push(i),i}adopt(i,e){return r(this,Ur).push({[rr](){return e(i)}}),i}defer(i){r(this,Ur).push({[rr](){return i()}})}move(){if(r(this,_i))throw new ReferenceError("a disposed stack can not use anything new");const i=new wm;return y(i,Ur,r(this,Ur)),y(this,_i,!0),i}};_i=new WeakMap,Ur=new WeakMap;let oh=wm;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let pe=(gS=class{constructor(i=Sx(new Map)){f(this,Hr);f(this,Cr,new Map);y(this,Hr,i)}on(i,e){const t=r(this,Cr).get(i);return t===void 0?r(this,Cr).set(i,[e]):t.push(e),r(this,Hr).on(i,e),this}off(i,e){const t=r(this,Cr).get(i)??[];if(e===void 0){for(const a of t)r(this,Hr).off(i,a);return r(this,Cr).delete(i),this}const s=t.lastIndexOf(e);return s>-1&&r(this,Hr).off(i,...t.splice(s,1)),this}emit(i,e){return r(this,Hr).emit(i,e),this.listenerCount(i)>0}once(i,e){const t=s=>{e(s),this.off(i,t)};return this.on(i,t)}listenerCount(i){var e;return((e=r(this,Cr).get(i))==null?void 0:e.length)||0}removeAllListeners(i){return i!==void 0?this.off(i):(this[we](),this)}[we](){for(const[i,e]of r(this,Cr))for(const t of e)r(this,Hr).off(i,t);r(this,Cr).clear()}},Hr=new WeakMap,Cr=new WeakMap,gS);/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const uy=!!(typeof process<"u"&&process.version),vi={value:{get fs(){throw new Error("fs is not available in this environment")},get ScreenRecorder(){throw new Error("ScreenRecorder is not available in this environment")}}},dy="24.1.1";/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const ee=(n,i)=>{if(!n)throw new Error(i)};/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function dp(n,i=!1){if(i){const e=atob(n);return Uint8Array.from(e,t=>t.codePointAt(0))}return new TextEncoder().encode(n)}function ly(n){return hy(new TextEncoder().encode(n))}function hy(n){const e=[];for(let s=0;s<n.length;s+=65534){const a=n.subarray(s,s+65534);e.push(String.fromCodePoint.apply(null,a))}const t=e.join("");return btoa(t)}function Cx(n){let i=0;for(const s of n)i+=s.length;const e=new Uint8Array(i);let t=0;for(const s of n)e.set(s,t),t+=s.length;return e}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let lp=null;async function kx(){return lp||(lp=(await Promise.resolve().then(()=>B1)).default),lp}const Gs=n=>uy?async(...i)=>{(await kx())(n)(i)}:(...i)=>{const e=globalThis.__PUPPETEER_DEBUG;!e||!(e==="*"||(e.endsWith("*")?n.startsWith(e):n===e))||console.log(`${n}:`,...i)};/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class ch extends Error{constructor(i,e){super(i,e),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class uh extends ch{}class dh extends ch{}class vn extends ch{constructor(){super(...arguments);f(this,cu);f(this,uu,"")}set code(e){y(this,cu,e)}get code(){return r(this,cu)}set originalMessage(e){y(this,uu,e)}get originalMessage(){return r(this,uu)}}cu=new WeakMap,uu=new WeakMap;class be extends ch{}class ir extends vn{}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Ex={letter:{cm:{width:21.59,height:27.94},in:{width:8.5,height:11}},legal:{cm:{width:21.59,height:35.56},in:{width:8.5,height:14}},tabloid:{cm:{width:27.94,height:43.18},in:{width:11,height:17}},ledger:{cm:{width:43.18,height:27.94},in:{width:17,height:11}},a0:{cm:{width:84.1,height:118.9},in:{width:33.1102,height:46.811}},a1:{cm:{width:59.4,height:84.1},in:{width:23.3858,height:33.1102}},a2:{cm:{width:42,height:59.4},in:{width:16.5354,height:23.3858}},a3:{cm:{width:29.7,height:42},in:{width:11.6929,height:16.5354}},a4:{cm:{width:21,height:29.7},in:{width:8.2677,height:11.6929}},a5:{cm:{width:14.8,height:21},in:{width:5.8268,height:8.2677}},a6:{cm:{width:10.5,height:14.8},in:{width:4.1339,height:5.8268}}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const le=Gs("puppeteer:error"),fy=Object.freeze({width:800,height:600}),lh=Symbol("Source URL for Puppeteer evaluation scripts"),Mn=class Mn{constructor(){f(this,Tn);f(this,In)}static fromCallSite(i,e){const t=new Mn;return y(t,Tn,i),y(t,In,e.toString()),t}get functionName(){return r(this,Tn)}get siteString(){return r(this,In)}toString(){return`pptr:${[r(this,Tn),encodeURIComponent(r(this,In))].join(";")}`}};Tn=new WeakMap,In=new WeakMap,U(Mn,"INTERNAL_URL","pptr:internal"),U(Mn,"parse",i=>{i=i.slice(5);const[e="",t=""]=i.split(";"),s=new Mn;return y(s,Tn,e),y(s,In,decodeURIComponent(t)),s}),U(Mn,"isPuppeteerURL",i=>i.startsWith("pptr:"));let Bt=Mn;const ot=(n,i)=>{if(Object.prototype.hasOwnProperty.call(i,lh))return i;const e=Error.prepareStackTrace;Error.prepareStackTrace=(s,a)=>a[2];const t=new Error().stack;return Error.prepareStackTrace=e,Object.assign(i,{[lh]:Bt.fromCallSite(n,t)})},py=n=>{if(Object.prototype.hasOwnProperty.call(n,lh))return n[lh]},jr=n=>typeof n=="string"||n instanceof String,xx=n=>typeof n=="number"||n instanceof Number,Px=n=>typeof n=="object"&&(n==null?void 0:n.constructor)===Object,_x=n=>typeof n=="object"&&(n==null?void 0:n.constructor)===RegExp,Tx=n=>typeof n=="object"&&(n==null?void 0:n.constructor)===Date;function hp(n,...i){if(jr(n))return ee(i.length===0,"Cannot evaluate a string with arguments"),n;function e(t){return Object.is(t,void 0)?"undefined":JSON.stringify(t)}return`(${n})(${i.map(e).join(",")})`}async function my(n,i){const e=[],t=n.getReader();if(i){const s=await vi.value.fs.promises.open(i,"w+");try{for(;;){const{done:a,value:o}=await t.read();if(a)break;e.push(o),await s.writeFile(o)}}finally{await s.close()}}else for(;;){const{done:s,value:a}=await t.read();if(s)break;e.push(a)}try{const s=Cx(e);return s.length===0?null:s}catch(s){return le(s),null}}async function gy(n,i){return new ReadableStream({async pull(e){function t(c,u){return u?Uint8Array.from(atob(c),p=>p.codePointAt(0)):new TextEncoder().encode(c)}const{data:s,base64Encoded:a,eof:o}=await n.send("IO.read",{handle:i});e.enqueue(t(s,a??!1)),o&&(await n.send("IO.close",{handle:i}),e.close())}})}function Ix(n){let i=null;return new Set(["alert","confirm","prompt","beforeunload"]).has(n)&&(i=n),ee(i,`Unknown javascript dialog type: ${n}`),i}function Rt(n,i){return n===0?sy:cp(n).pipe(Je(()=>{throw new uh(`Timed out after waiting ${n}ms`,{cause:i})}))}const wy="__puppeteer_utility_world__"+dy,hh=/^[\x20\t]*\/\/[@#] sourceURL=\s{0,10}(\S*?)\s{0,10}$/m;function yy(n){return`//# sourceURL=${n}`}const Mx=500;function vy(n={},i="in"){var o,c,u,d;const e={scale:1,displayHeaderFooter:!1,headerTemplate:"",footerTemplate:"",printBackground:!1,landscape:!1,pageRanges:"",preferCSSPageSize:!1,omitBackground:!1,outline:!1,tagged:!0,waitForFonts:!0};let t=8.5,s=11;if(n.format){const p=Ex[n.format.toLowerCase()][i];ee(p,"Unknown paper format: "+n.format),t=p.width,s=p.height}else t=Js(n.width,i)??t,s=Js(n.height,i)??s;const a={top:Js((o=n.margin)==null?void 0:o.top,i)||0,left:Js((c=n.margin)==null?void 0:c.left,i)||0,bottom:Js((u=n.margin)==null?void 0:u.bottom,i)||0,right:Js((d=n.margin)==null?void 0:d.right,i)||0};return n.outline&&(n.tagged=!0),{...e,...n,width:t,height:s,margin:a}}const fp={px:1,in:96,cm:37.8,mm:3.78};function Js(n,i="in"){if(typeof n>"u")return;let e;if(xx(n))e=n;else if(jr(n)){const t=n;let s=t.substring(t.length-2).toLowerCase(),a="";s in fp?a=t.substring(0,t.length-2):(s="px",a=t);const o=Number(a);ee(!isNaN(o),"Failed to parse parameter value: "+t),e=o*fp[s]}else throw new Error("page.pdf() Cannot handle parameter type: "+typeof n);return e/fp[i]}function De(n,i){return new rt(e=>{const t=s=>{e.next(s)};return n.on(i,t),()=>{n.off(i,t)}})}function bn(n,i){return n?op(n,"abort").pipe(Je(()=>{throw n.reason instanceof Error?(n.reason.cause=i,n.reason):new Error(n.reason,{cause:i})})):sy}function sc(n){return at(i=>_e(Promise.resolve(n(i))).pipe(yn(e=>e),Je(()=>i)))}const pp=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardReadWrite"],["clipboard-sanitized-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["persistent-storage","durableStorage"],["idle-detection","idleDetection"],["midi-sysex","midiSysex"]]);let by=class extends pe{constructor(){super()}async waitForTarget(i,e={}){const{timeout:t=3e4,signal:s}=e;return await st(ic(De(this,"targetcreated"),De(this,"targetchanged"),_e(this.targets())).pipe(sc(i),yt(bn(s),Rt(t))))}async pages(){return(await Promise.all(this.browserContexts().map(e=>e.pages()))).reduce((e,t)=>e.concat(t),[])}async cookies(){return await this.defaultBrowserContext().cookies()}async setCookie(...i){return await this.defaultBrowserContext().setCookie(...i)}async deleteCookie(...i){return await this.defaultBrowserContext().deleteCookie(...i)}isConnected(){return this.connected}[we](){return this.process()?void this.close().catch(le):void this.disconnect().catch(le)}[rr](){return this.process()?this.close():this.disconnect()}};/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let qe=(Rn=class{constructor(i){f(this,hu);f(this,Ti,!1);f(this,Ii,!1);f(this,An);f(this,du);f(this,Vh,new Promise(i=>{y(this,du,i)}));f(this,pa);f(this,lu);f(this,ma);i&&i.timeout>0&&(y(this,lu,new uh(i.message)),y(this,pa,setTimeout(()=>{this.reject(r(this,lu))},i.timeout)))}static create(i){return new Rn(i)}static async race(i){const e=new Set;try{const t=i.map(s=>s instanceof Rn?(r(s,pa)&&e.add(s),s.valueOrThrow()):s);return await Promise.race(t)}finally{for(const t of e)t.reject(new Error("Timeout cleared"))}}resolve(i){r(this,Ii)||r(this,Ti)||(y(this,Ti,!0),E(this,hu,Nm).call(this,i))}reject(i){r(this,Ii)||r(this,Ti)||(y(this,Ii,!0),E(this,hu,Nm).call(this,i))}resolved(){return r(this,Ti)}finished(){return r(this,Ti)||r(this,Ii)}value(){return r(this,An)}valueOrThrow(){return r(this,ma)||y(this,ma,(async()=>{if(await r(this,Vh),r(this,Ii))throw r(this,An);return r(this,An)})()),r(this,ma)}},Ti=new WeakMap,Ii=new WeakMap,An=new WeakMap,du=new WeakMap,Vh=new WeakMap,pa=new WeakMap,lu=new WeakMap,hu=new WeakSet,Nm=function(i){clearTimeout(r(this,pa)),y(this,An,i),r(this,du).call(this)},ma=new WeakMap,Rn);/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let mp=(Mi=class{constructor(){f(this,ga,!1);f(this,mu,[])}async acquire(i){if(!r(this,ga))return y(this,ga,!0),new Mi.Guard(this);const e=qe.create();return r(this,mu).push(e.resolve.bind(e)),await e.valueOrThrow(),new Mi.Guard(this,i)}release(){const i=r(this,mu).shift();if(!i){y(this,ga,!1);return}i()}},ga=new WeakMap,mu=new WeakMap,U(Mi,"Guard",(wS=class{constructor(e,t){f(this,fu);f(this,pu);y(this,fu,e),y(this,pu,t)}[we](){var e;return(e=r(this,pu))==null||e.call(this),r(this,fu).release()}},fu=new WeakMap,pu=new WeakMap,wS)),Mi);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Sy extends pe{constructor(){super();f(this,Fn);f(this,wa,0)}startScreenshot(){const e=r(this,Fn)||new mp;return y(this,Fn,e),Ho(this,wa)._++,e.acquire(()=>{Ho(this,wa)._--,r(this,wa)===0&&y(this,Fn,void 0)})}waitForScreenshotOperations(){var e;return(e=r(this,Fn))==null?void 0:e.acquire()}async waitForTarget(e,t={}){const{timeout:s=3e4}=t;return await st(ic(De(this,"targetcreated"),De(this,"targetchanged"),_e(this.targets())).pipe(sc(e),yt(Rt(s))))}async deleteCookie(...e){return await this.setCookie(...e.map(t=>({...t,expires:1})))}get closed(){return!this.browser().browserContexts().includes(this)}get id(){}[we](){return void this.close().catch(le)}[rr](){return this.close()}}Fn=new WeakMap,wa=new WeakMap;var Ue;(function(n){n.Disconnected=Symbol("CDPSession.Disconnected"),n.Swapped=Symbol("CDPSession.Swapped"),n.Ready=Symbol("CDPSession.Ready"),n.SessionAttached="sessionattached",n.SessionDetached="sessiondetached"})(Ue||(Ue={}));class ac extends pe{constructor(){super()}parentSession(){}}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Cy{constructor(i,e,t=""){f(this,gu);f(this,wu);f(this,yu);U(this,"handled",!1);y(this,gu,i),y(this,wu,e),y(this,yu,t)}type(){return r(this,gu)}message(){return r(this,wu)}defaultValue(){return r(this,yu)}async accept(i){ee(!this.handled,"Cannot accept dialog which is already handled!"),this.handled=!0,await this.handle({accept:!0,text:i})}async dismiss(){ee(!this.handled,"Cannot dismiss dialog which is already handled!"),this.handled=!0,await this.handle({accept:!1})}}gu=new WeakMap,wu=new WeakMap,yu=new WeakMap;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const fh=Symbol("_isElementHandle");/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Xt(n){return typeof n=="object"&&n!==null&&"name"in n&&"message"in n}function ky(n,i,e){return n.message=i,n.originalMessage=e??n.originalMessage,n}function Ey(n){let i=n.error.message;return n.error&&typeof n.error=="object"&&"data"in n.error&&(i+=` ${n.error.data}`),i}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const xy=new Map,Ax=n=>{let i=xy.get(n);return i||(i=new Function(`return ${n}`)(),xy.set(n,i),i)};function mr(n){let i=n.toString();try{new Function(`(${i})`)}catch(e){if(e.message.includes("Refused to evaluate a string as JavaScript because 'unsafe-eval' is not an allowed source of script in the following Content Security Policy directive"))return i;let t="function ";i.startsWith("async ")&&(t=`async ${t}`,i=i.substring(6)),i=`${t}${i}`;try{new Function(`(${i})`)}catch{throw new Error("Passed function cannot be serialized!")}}return i}const Xs=(n,i)=>{let e=mr(n);for(const[t,s]of Object.entries(i))e=e.replace(new RegExp(`PLACEHOLDER\\(\\s*(?:'${t}'|"${t}")\\s*\\)`,"g"),`(${s})`);return Ax(e)};/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var ph=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},gp=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});const Rx=20;async function*Fx(n,i){const e={stack:[],error:void 0,hasError:!1};try{const s=await ph(e,await n.evaluateHandle(async(c,u)=>{const d=[];for(;d.length<u;){const p=await c.next();if(p.done)break;d.push(p.value)}return d},i),!1).getProperties(),a=s.values();return ph(e,new Qe,!1).defer(()=>{for(const c of a){const u={stack:[],error:void 0,hasError:!1};try{ph(u,c,!1)[we]()}catch(d){u.error=d,u.hasError=!0}finally{gp(u)}}}),yield*a,s.size===0}catch(t){e.error=t,e.hasError=!0}finally{gp(e)}}async function*Dx(n){let i=Rx;for(;!(yield*Fx(n,i));)i<<=1}async function*Py(n){const i={stack:[],error:void 0,hasError:!1};try{const e=ph(i,await n.evaluateHandle(t=>async function*(){yield*t}()),!1);yield*Dx(e)}catch(e){i.error=e,i.hasError=!0}finally{gp(i)}}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Gh=class Gh{constructor(i){f(this,vu);y(this,vu,i)}async get(i){return await r(this,vu).call(this,i)}};vu=new WeakMap,U(Gh,"create",i=>new Gh(i));let jt=Gh;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var mh=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},gh=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});class qr{static get _querySelector(){if(this.querySelector)return this.querySelector;if(!this.querySelectorAll)throw new Error("Cannot create default `querySelector`.");return this.querySelector=Xs(async(i,e,t)=>{const a=PLACEHOLDER("querySelectorAll")(i,e,t);for await(const o of a)return o;return null},{querySelectorAll:mr(this.querySelectorAll)})}static get _querySelectorAll(){if(this.querySelectorAll)return this.querySelectorAll;if(!this.querySelector)throw new Error("Cannot create default `querySelectorAll`.");return this.querySelectorAll=Xs(async function*(i,e,t){const a=await PLACEHOLDER("querySelector")(i,e,t);a&&(yield a)},{querySelector:mr(this.querySelector)})}static async*queryAll(i,e){const t={stack:[],error:void 0,hasError:!1};try{const s=mh(t,await i.evaluateHandle(this._querySelectorAll,e,jt.create(a=>a.puppeteerUtil)),!1);yield*Py(s)}catch(s){t.error=s,t.hasError=!0}finally{gh(t)}}static async queryOne(i,e){const t={stack:[],error:void 0,hasError:!1};try{const s=mh(t,await i.evaluateHandle(this._querySelector,e,jt.create(a=>a.puppeteerUtil)),!1);return fh in s?s.move():null}catch(s){t.error=s,t.hasError=!0}finally{gh(t)}}static async waitFor(i,e,t){const s={stack:[],error:void 0,hasError:!1};try{let a;const o=mh(s,await(async()=>{if(!(fh in i)){a=i;return}return a=i.frame,await a.isolatedRealm().adoptHandle(i)})(),!1),{visible:c=!1,hidden:u=!1,timeout:d,signal:p}=t,h=c||u?"raf":t.polling;try{const l={stack:[],error:void 0,hasError:!1};try{p==null||p.throwIfAborted();const m=mh(l,await a.isolatedRealm().waitForFunction(async(S,g,w,v,k)=>{const b=await S.createFunction(g)(v??document,w,S);return S.checkVisibility(b,k)},{polling:h,root:o,timeout:d,signal:p},jt.create(S=>S.puppeteerUtil),mr(this._querySelector),e,o,c?!0:u?!1:void 0),!1);if(p!=null&&p.aborted)throw p.reason;return fh in m?await a.mainRealm().transferHandle(m):null}catch(m){l.error=m,l.hasError=!0}finally{gh(l)}}catch(l){throw!Xt(l)||l.name==="AbortError"||(l.message=`Waiting for selector \`${e}\` failed: ${l.message}`),l}}catch(a){s.error=a,s.hasError=!0}finally{gh(s)}}}U(qr,"querySelectorAll"),U(qr,"querySelector");class Ys{static async*map(i,e){for await(const t of i)yield await e(t)}static async*flatMap(i,e){for await(const t of i)yield*e(t)}static async collect(i){const e=[];for await(const t of i)e.push(t);return e}static async first(i){for await(const e of i)return e}}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Ox=n=>["name","role"].includes(n),Nx=/\[\s*(?<attribute>\w+)\s*=\s*(?<quote>"|')(?<value>\\.|.*?(?=\k<quote>))\k<quote>\s*\]/g,Lx=n=>{if(n.length>1e4)throw new Error(`Selector ${n} is too long`);const i={},e=n.replace(Nx,(t,s,a,o)=>(ee(Ox(s),`Unknown aria attribute "${s}" in selector`),i[s]=o,""));return e&&!i.name&&(i.name=e),i},bu=class bu extends qr{static async*queryAll(i,e){const{name:t,role:s}=Lx(e);yield*i.queryAXTree(t,s)}};U(bu,"querySelector",async(i,e,{ariaQuerySelector:t})=>await t(i,e)),U(bu,"queryOne",async(i,e)=>await Ys.first(bu.queryAll(i,e))??null);let Sn=bu;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class wh extends qr{}U(wh,"querySelector",(i,e,{cssQuerySelector:t})=>t(i,e)),U(wh,"querySelectorAll",(i,e,{cssQuerySelectorAll:t})=>t(i,e));const Bx='"use strict";var g=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var l=(t,e)=>{for(var r in e)g(t,r,{get:e[r],enumerable:!0})},J=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of B(e))!Y.call(t,n)&&n!==r&&g(t,n,{get:()=>e[n],enumerable:!(o=X(e,n))||o.enumerable});return t};var z=t=>J(g({},"__esModule",{value:!0}),t);var pe={};l(pe,{default:()=>he});module.exports=z(pe);var N=class extends Error{constructor(e,r){super(e,r),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},p=class extends N{};var c=class t{static create(e){return new t(e)}static async race(e){let r=new Set;try{let o=e.map(n=>n instanceof t?(n.#n&&r.add(n),n.valueOrThrow()):n);return await Promise.race(o)}finally{for(let o of r)o.reject(new Error("Timeout cleared"))}}#e=!1;#r=!1;#o;#t;#a=new Promise(e=>{this.#t=e});#n;#i;constructor(e){e&&e.timeout>0&&(this.#i=new p(e.message),this.#n=setTimeout(()=>{this.reject(this.#i)},e.timeout))}#l(e){clearTimeout(this.#n),this.#o=e,this.#t()}resolve(e){this.#r||this.#e||(this.#e=!0,this.#l(e))}reject(e){this.#r||this.#e||(this.#r=!0,this.#l(e))}resolved(){return this.#e}finished(){return this.#e||this.#r}value(){return this.#o}#s;valueOrThrow(){return this.#s||(this.#s=(async()=>{if(await this.#a,this.#r)throw this.#o;return this.#o})()),this.#s}};var L=new Map,F=t=>{let e=L.get(t);return e||(e=new Function(`return ${t}`)(),L.set(t,e),e)};var x={};l(x,{ariaQuerySelector:()=>G,ariaQuerySelectorAll:()=>b});var G=(t,e)=>globalThis.__ariaQuerySelector(t,e),b=async function*(t,e){yield*await globalThis.__ariaQuerySelectorAll(t,e)};var E={};l(E,{cssQuerySelector:()=>K,cssQuerySelectorAll:()=>Z});var K=(t,e)=>t.querySelector(e),Z=function(t,e){return t.querySelectorAll(e)};var A={};l(A,{customQuerySelectors:()=>P});var v=class{#e=new Map;register(e,r){if(!r.queryOne&&r.queryAll){let o=r.queryAll;r.queryOne=(n,i)=>{for(let s of o(n,i))return s;return null}}else if(r.queryOne&&!r.queryAll){let o=r.queryOne;r.queryAll=(n,i)=>{let s=o(n,i);return s?[s]:[]}}else if(!r.queryOne||!r.queryAll)throw new Error("At least one query method must be defined.");this.#e.set(e,{querySelector:r.queryOne,querySelectorAll:r.queryAll})}unregister(e){this.#e.delete(e)}get(e){return this.#e.get(e)}clear(){this.#e.clear()}},P=new v;var R={};l(R,{pierceQuerySelector:()=>ee,pierceQuerySelectorAll:()=>te});var ee=(t,e)=>{let r=null,o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&!r&&s.matches(e)&&(r=s)}while(!r&&i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r},te=(t,e)=>{let r=[],o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&s.matches(e)&&r.push(s)}while(i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r};var u=(t,e)=>{if(!t)throw new Error(e)};var y=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=new MutationObserver(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())}),this.#o.observe(this.#r,{childList:!0,subtree:!0,attributes:!0})}async stop(){u(this.#t,"Polling never started."),this.#t.finished()||this.#t.reject(new Error("Polling stopped")),this.#o&&(this.#o.disconnect(),this.#o=void 0)}result(){return u(this.#t,"Polling never started."),this.#t.valueOrThrow()}},w=class{#e;#r;constructor(e){this.#e=e}async start(){let e=this.#r=c.create(),r=await this.#e();if(r){e.resolve(r);return}let o=async()=>{if(e.finished())return;let n=await this.#e();if(!n){window.requestAnimationFrame(o);return}e.resolve(n),await this.stop()};window.requestAnimationFrame(o)}async stop(){u(this.#r,"Polling never started."),this.#r.finished()||this.#r.reject(new Error("Polling stopped"))}result(){return u(this.#r,"Polling never started."),this.#r.valueOrThrow()}},S=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=setInterval(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())},this.#r)}async stop(){u(this.#t,"Polling never started."),this.#t.finished()||this.#t.reject(new Error("Polling stopped")),this.#o&&(clearInterval(this.#o),this.#o=void 0)}result(){return u(this.#t,"Polling never started."),this.#t.valueOrThrow()}};var _={};l(_,{PCombinator:()=>H,pQuerySelector:()=>fe,pQuerySelectorAll:()=>$});var a=class{static async*map(e,r){for await(let o of e)yield await r(o)}static async*flatMap(e,r){for await(let o of e)yield*r(o)}static async collect(e){let r=[];for await(let o of e)r.push(o);return r}static async first(e){for await(let r of e)return r}};var C={};l(C,{textQuerySelectorAll:()=>m});var re=new Set(["checkbox","image","radio"]),oe=t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement&&!re.has(t.type),ne=new Set(["SCRIPT","STYLE"]),f=t=>!ne.has(t.nodeName)&&!document.head?.contains(t),I=new WeakMap,j=t=>{for(;t;)I.delete(t),t instanceof ShadowRoot?t=t.host:t=t.parentNode},W=new WeakSet,se=new MutationObserver(t=>{for(let e of t)j(e.target)}),d=t=>{let e=I.get(t);if(e||(e={full:"",immediate:[]},!f(t)))return e;let r="";if(oe(t))e.full=t.value,e.immediate.push(t.value),t.addEventListener("input",o=>{j(o.target)},{once:!0,capture:!0});else{for(let o=t.firstChild;o;o=o.nextSibling){if(o.nodeType===Node.TEXT_NODE){e.full+=o.nodeValue??"",r+=o.nodeValue??"";continue}r&&e.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(e.full+=d(o).full)}r&&e.immediate.push(r),t instanceof Element&&t.shadowRoot&&(e.full+=d(t.shadowRoot).full),W.has(t)||(se.observe(t,{childList:!0,characterData:!0,subtree:!0}),W.add(t))}return I.set(t,e),e};var m=function*(t,e){let r=!1;for(let o of t.childNodes)if(o instanceof Element&&f(o)){let n;o.shadowRoot?n=m(o.shadowRoot,e):n=m(o,e);for(let i of n)yield i,r=!0}r||t instanceof Element&&f(t)&&d(t).full.includes(e)&&(yield t)};var k={};l(k,{checkVisibility:()=>le,pierce:()=>T,pierceAll:()=>O});var ie=["hidden","collapse"],le=(t,e)=>{if(!t)return e===!1;if(e===void 0)return t;let r=t.nodeType===Node.TEXT_NODE?t.parentElement:t,o=window.getComputedStyle(r),n=o&&!ie.includes(o.visibility)&&!ae(r);return e===n?t:!1};function ae(t){let e=t.getBoundingClientRect();return e.width===0||e.height===0}var ce=t=>"shadowRoot"in t&&t.shadowRoot instanceof ShadowRoot;function*T(t){ce(t)?yield t.shadowRoot:yield t}function*O(t){t=T(t).next().value,yield t;let e=[document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT)];for(let r of e){let o;for(;o=r.nextNode();)o.shadowRoot&&(yield o.shadowRoot,e.push(document.createTreeWalker(o.shadowRoot,NodeFilter.SHOW_ELEMENT)))}}var Q={};l(Q,{xpathQuerySelectorAll:()=>q});var q=function*(t,e,r=-1){let n=(t.ownerDocument||document).evaluate(e,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),i=[],s;for(;(s=n.iterateNext())&&(i.push(s),!(r&&i.length===r)););for(let h=0;h<i.length;h++)s=i[h],yield s,delete i[h]};var ue=/[-\\w\\P{ASCII}*]/u,H=(r=>(r.Descendent=">>>",r.Child=">>>>",r))(H||{}),V=t=>"querySelectorAll"in t,M=class{#e;#r=[];#o=void 0;elements;constructor(e,r){this.elements=[e],this.#e=r,this.#t()}async run(){if(typeof this.#o=="string")switch(this.#o.trimStart()){case":scope":this.#t();break}for(;this.#o!==void 0;this.#t()){let e=this.#o;typeof e=="string"?e[0]&&ue.test(e[0])?this.elements=a.flatMap(this.elements,async function*(r){V(r)&&(yield*r.querySelectorAll(e))}):this.elements=a.flatMap(this.elements,async function*(r){if(!r.parentElement){if(!V(r))return;yield*r.querySelectorAll(e);return}let o=0;for(let n of r.parentElement.children)if(++o,n===r)break;yield*r.parentElement.querySelectorAll(`:scope>:nth-child(${o})${e}`)}):this.elements=a.flatMap(this.elements,async function*(r){switch(e.name){case"text":yield*m(r,e.value);break;case"xpath":yield*q(r,e.value);break;case"aria":yield*b(r,e.value);break;default:let o=P.get(e.name);if(!o)throw new Error(`Unknown selector type: ${e.name}`);yield*o.querySelectorAll(r,e.value)}})}}#t(){if(this.#r.length!==0){this.#o=this.#r.shift();return}if(this.#e.length===0){this.#o=void 0;return}let e=this.#e.shift();switch(e){case">>>>":{this.elements=a.flatMap(this.elements,T),this.#t();break}case">>>":{this.elements=a.flatMap(this.elements,O),this.#t();break}default:this.#r=e,this.#t();break}}},D=class{#e=new WeakMap;calculate(e,r=[]){if(e===null)return r;e instanceof ShadowRoot&&(e=e.host);let o=this.#e.get(e);if(o)return[...o,...r];let n=0;for(let s=e.previousSibling;s;s=s.previousSibling)++n;let i=this.calculate(e.parentNode,[n]);return this.#e.set(e,i),[...i,...r]}},U=(t,e)=>{if(t.length+e.length===0)return 0;let[r=-1,...o]=t,[n=-1,...i]=e;return r===n?U(o,i):r<n?-1:1},de=async function*(t){let e=new Set;for await(let o of t)e.add(o);let r=new D;yield*[...e.values()].map(o=>[o,r.calculate(o)]).sort(([,o],[,n])=>U(o,n)).map(([o])=>o)},$=function(t,e){let r=JSON.parse(e);if(r.some(o=>{let n=0;return o.some(i=>(typeof i=="string"?++n:n=0,n>1))}))throw new Error("Multiple deep combinators found in sequence.");return de(a.flatMap(r,o=>{let n=new M(t,o);return n.run(),n.elements}))},fe=async function(t,e){for await(let r of $(t,e))return r;return null};var me=Object.freeze({...x,...A,...R,..._,...C,...k,...Q,...E,Deferred:c,createFunction:F,createTextContent:d,IntervalPoller:S,isSuitableNodeForTextMatching:f,MutationPoller:y,RAFPoller:w}),he=me;\n';/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class jx{constructor(){f(this,Dn);f(this,ya,!1);f(this,va,new Set)}append(i){E(this,Dn,Lm).call(this,()=>{r(this,va).add(i)})}pop(i){E(this,Dn,Lm).call(this,()=>{r(this,va).delete(i)})}inject(i,e=!1){(r(this,ya)||e)&&i(E(this,Dn,AS).call(this)),y(this,ya,!1)}}ya=new WeakMap,va=new WeakMap,Dn=new WeakSet,Lm=function(i){i(),y(this,ya,!0)},AS=function(){return`(() => {
      const module = {};
      ${Bx}
      ${[...r(this,va)].map(i=>`(${i})(module.exports.default);`).join("")}
      return module.exports.default;
    })()`};const oc=new jx;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class qx{constructor(){f(this,ar,new Map)}get(i){const e=r(this,ar).get(i);return e?e[1]:void 0}register(i,e){var a;ee(!r(this,ar).has(i),`Cannot register over existing handler: ${i}`),ee(/^[a-zA-Z]+$/.test(i),"Custom query handler names may only contain [a-zA-Z]"),ee(e.queryAll||e.queryOne,"At least one query method must be implemented.");const t=(a=class extends qr{},U(a,"querySelectorAll",Xs((o,c,u)=>u.customQuerySelectors.get(PLACEHOLDER("name")).querySelectorAll(o,c),{name:JSON.stringify(i)})),U(a,"querySelector",Xs((o,c,u)=>u.customQuerySelectors.get(PLACEHOLDER("name")).querySelector(o,c),{name:JSON.stringify(i)})),a),s=Xs(o=>{o.customQuerySelectors.register(PLACEHOLDER("name"),{queryAll:PLACEHOLDER("queryAll"),queryOne:PLACEHOLDER("queryOne")})},{name:JSON.stringify(i),queryAll:e.queryAll?mr(e.queryAll):String(void 0),queryOne:e.queryOne?mr(e.queryOne):String(void 0)}).toString();r(this,ar).set(i,[s,t]),oc.append(s)}unregister(i){const e=r(this,ar).get(i);if(!e)throw new Error(`Cannot unregister unknown handler: ${i}`);oc.pop(e[0]),r(this,ar).delete(i)}names(){return[...r(this,ar).keys()]}clear(){for(const[i]of r(this,ar))oc.pop(i);r(this,ar).clear()}}ar=new WeakMap;const wp=new qx;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class yp extends qr{}U(yp,"querySelector",(i,e,{pierceQuerySelector:t})=>t(i,e)),U(yp,"querySelectorAll",(i,e,{pierceQuerySelectorAll:t})=>t(i,e));/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class vp extends qr{}U(vp,"querySelectorAll",(i,e,{pQuerySelectorAll:t})=>t(i,e)),U(vp,"querySelector",(i,e,{pQuerySelector:t})=>t(i,e));var Qs={attribute:/\[\s*(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?(?<name>[-\w\P{ASCII}]+)\s*(?:(?<operator>\W?=)\s*(?<value>.+?)\s*(\s(?<caseSensitive>[iIsS]))?\s*)?\]/gu,id:/#(?<name>[-\w\P{ASCII}]+)/gu,class:/\.(?<name>[-\w\P{ASCII}]+)/gu,comma:/\s*,\s*/g,combinator:/\s*[\s>+~]\s*/g,"pseudo-element":/::(?<name>[-\w\P{ASCII}]+)(?:\((?<argument>¶*)\))?/gu,"pseudo-class":/:(?<name>[-\w\P{ASCII}]+)(?:\((?<argument>¶*)\))?/gu,universal:/(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?\*/gu,type:/(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?(?<name>[-\w\P{ASCII}]+)/gu},$x=new Set(["combinator","comma"]),Kx=n=>{switch(n){case"pseudo-element":case"pseudo-class":return new RegExp(Qs[n].source.replace("(?<argument>¶*)","(?<argument>.*)"),"gu");default:return Qs[n]}};function Ux(n,i){let e=0,t="";for(;i<n.length;i++){const s=n[i];switch(s){case"(":++e;break;case")":--e;break}if(t+=s,e===0)return t}return t}function Hx(n,i=Qs){if(!n)return[];const e=[n];for(const[s,a]of Object.entries(i))for(let o=0;o<e.length;o++){const c=e[o];if(typeof c!="string")continue;a.lastIndex=0;const u=a.exec(c);if(!u)continue;const d=u.index-1,p=[],h=u[0],l=c.slice(0,d+1);l&&p.push(l),p.push({...u.groups,type:s,content:h});const m=c.slice(d+h.length+1);m&&p.push(m),e.splice(o,1,...p)}let t=0;for(const s of e)switch(typeof s){case"string":throw new Error(`Unexpected sequence ${s} found at index ${t}`);case"object":t+=s.content.length,s.pos=[t-s.content.length,t],$x.has(s.type)&&(s.content=s.content.trim()||" ");break}return e}var Wx=/(['"])([^\\\n]+?)\1/g,zx=/\\./g;function Vx(n,i=Qs){if(n=n.trim(),n==="")return[];const e=[];n=n.replace(zx,(a,o)=>(e.push({value:a,offset:o}),"".repeat(a.length))),n=n.replace(Wx,(a,o,c,u)=>(e.push({value:a,offset:u}),`${o}${"".repeat(c.length)}${o}`));{let a=0,o;for(;(o=n.indexOf("(",a))>-1;){const c=Ux(n,o);e.push({value:c,offset:o}),n=`${n.substring(0,o)}(${"¶".repeat(c.length-2)})${n.substring(o+c.length)}`,a=o+c.length}}const t=Hx(n,i),s=new Set;for(const a of e.reverse())for(const o of t){const{offset:c,value:u}=a;if(!(o.pos[0]<=c&&c+u.length<=o.pos[1]))continue;const{content:d}=o,p=c-o.pos[0];o.content=d.slice(0,p)+u+d.slice(p+u.length),o.content!==d&&s.add(o)}for(const a of s){const o=Kx(a.type);if(!o)throw new Error(`Unknown token type: ${a.type}`);o.lastIndex=0;const c=o.exec(a.content);if(!c)throw new Error(`Unable to parse content for ${a.type}: ${a.content}`);Object.assign(a,c.groups)}return t}function gr(n){if(Array.isArray(n))return n.map(i=>i.content).join("");switch(n.type){case"list":return n.list.map(gr).join(",");case"relative":return n.combinator+gr(n.right);case"complex":return gr(n.left)+n.combinator+gr(n.right);case"compound":return n.list.map(gr).join("");default:return n.content}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */Qs.nesting=/&/g,Qs.combinator=/\s*(>>>>?|[\s>+~])\s*/g;const Gx=/\\[\s\S]/g,Jx=n=>n.length<=1?n:((n[0]==='"'||n[0]==="'")&&n.endsWith(n[0])&&(n=n.slice(1,-1)),n.replace(Gx,i=>i[1]));function Xx(n){let i=!0,e=!1,t=!1;const s=Vx(n);if(s.length===0)return[[],i,t,!1];let a=[],o=[a];const c=[o],u=[];for(const d of s){switch(d.type){case"combinator":switch(d.content){case">>>":i=!1,u.length&&(a.push(gr(u)),u.splice(0)),a=[],o.push(">>>"),o.push(a);continue;case">>>>":i=!1,u.length&&(a.push(gr(u)),u.splice(0)),a=[],o.push(">>>>"),o.push(a);continue}break;case"pseudo-element":if(!d.name.startsWith("-p-"))break;i=!1,u.length&&(a.push(gr(u)),u.splice(0));const p=d.name.slice(3);p==="aria"&&(e=!0),a.push({name:p,value:Jx(d.argument??"")});continue;case"pseudo-class":t=!0;break;case"comma":u.length&&(a.push(gr(u)),u.splice(0)),a=[],o=[a],c.push(o);continue}u.push(d)}return u.length&&a.push(gr(u)),[c,i,t,e]}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class _y extends qr{}U(_y,"querySelectorAll",(i,e,{textQuerySelectorAll:t})=>t(i,e));/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class bp extends qr{}U(bp,"querySelectorAll",(i,e,{xpathQuerySelectorAll:t})=>t(i,e)),U(bp,"querySelector",(i,e,{xpathQuerySelectorAll:t})=>{for(const s of t(i,e,1))return s;return null});/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Yx={aria:Sn,pierce:yp,xpath:bp,text:_y},Qx=["=","/"];function yh(n){for(const i of[wp.names().map(e=>[e,wp.get(e)]),Object.entries(Yx)])for(const[e,t]of i)for(const s of Qx){const a=`${e}${s}`;if(n.startsWith(a))return n=n.slice(a.length),{updatedSelector:n,polling:e==="aria"?"raf":"mutation",QueryHandler:t}}try{const[i,e,t,s]=Xx(n);return e?{updatedSelector:n,polling:t?"raf":"mutation",QueryHandler:wh}:{updatedSelector:JSON.stringify(i),polling:s?"raf":"mutation",QueryHandler:vp}}catch{return{updatedSelector:n,polling:"mutation",QueryHandler:wh}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Zx=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},eP=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});const cc=new WeakSet;function tP(n,i){let e=!1;if(n.prototype[we]){const t=n.prototype[we];n.prototype[we]=function(){if(cc.has(this)){cc.delete(this);return}return t.call(this)},e=!0}if(n.prototype[rr]){const t=n.prototype[rr];n.prototype[rr]=function(){if(cc.has(this)){cc.delete(this);return}return t.call(this)},e=!0}return e&&(n.prototype.move=function(){return cc.add(this),this}),n}function se(n=i=>`Attempted to use disposed ${i.constructor.name}.`){return(i,e)=>function(...t){if(this.disposed)throw new Error(n(this));return i.call(this,...t)}}function bi(n,i){return function(...e){if(!this.disposed)return n.call(this,...e)}}function nr(n,i){const e=new WeakMap;let t=-1;return function(...s){if(t===-1&&(t=s.length),t!==s.length)throw new Error("Memoized method was called with the wrong number of arguments");let a=!1,o=e;for(const c of s)o.has(c)||(a=!0,o.set(c,new WeakMap)),o=o.get(c);if(a)return n.call(this,...s)}}function rP(n=function(){return this}){return(i,e)=>{const t=new WeakMap;return async function(...s){const a={stack:[],error:void 0,hasError:!1};try{const o=n.call(this);let c=t.get(o);c||(c=new mp,t.set(o,c));const u=Zx(a,await c.acquire(),!0);return await i.call(this,...s)}catch(o){a.error=o,a.hasError=!0}finally{const o=eP(a);o&&await o}}}}const vh=new WeakMap,Ty=function(n){const i=vh.get(this)??new Map;if(i.has(n))return;const e=n!==void 0?(t,s)=>{n.includes(t)&&this.emit(t,s)}:(t,s)=>{this.emit(t,s)};i.set(n,e),vh.set(this,i)};function bh(n){return({set:i,get:e},t)=>(t.addInitializer(function(){return Ty.apply(this,[n])}),{set(s){const a=vh.get(this).get(n),o=e.call(this);o!==void 0&&o.off("*",a),s!==void 0&&(s.on("*",a),i.call(this,s))},init(s){if(s===void 0)return s;Ty.apply(this,[n]);const a=vh.get(this).get(n);return s.on("*",a),s}})}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Iy=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},Sp=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},iP=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},nP=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});let Cn=(()=>{var c;let n=[tP],i,e=[],t,s=[],a,o;return c=class{constructor(){Iy(this,s)}async evaluate(d,...p){return d=ot(this.evaluate.name,d),await this.realm.evaluate(d,this,...p)}async evaluateHandle(d,...p){return d=ot(this.evaluateHandle.name,d),await this.realm.evaluateHandle(d,this,...p)}async getProperty(d){return await this.evaluateHandle((p,h)=>p[h],d)}async getProperties(){const d=await this.evaluate(l=>{var g;const m=[],S=Object.getOwnPropertyDescriptors(l);for(const w in S)(g=S[w])!=null&&g.enumerable&&m.push(w);return m}),p=new Map,h=await Promise.all(d.map(l=>this.getProperty(l)));for(const[l,m]of Object.entries(d)){const S={stack:[],error:void 0,hasError:!1};try{const g=iP(S,h[l],!1);g&&p.set(m,g.move())}catch(g){S.error=g,S.hasError=!0}finally{nP(S)}}return p}[(a=[se()],o=[se()],we)](){return void this.dispose().catch(le)}[rr](){return this.dispose()}},t=c,(()=>{const d=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;Sp(c,null,a,{kind:"method",name:"getProperty",static:!1,private:!1,access:{has:p=>"getProperty"in p,get:p=>p.getProperty},metadata:d},null,s),Sp(c,null,o,{kind:"method",name:"getProperties",static:!1,private:!1,access:{has:p=>"getProperties"in p,get:p=>p.getProperties},metadata:d},null,s),Sp(null,i={value:t},n,{kind:"class",name:t.name,metadata:d},null,e),t=i.value,d&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d}),Iy(t,e)})(),t})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var sP=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},Fe=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},uc=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},dc=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t}),aP=function(n,i,e){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",i):i})};function Te(n,i){return async function(...e){if(this.realm===this.frame.isolatedRealm())return await n.call(this,...e);let t;this.isolatedHandle?t=this.isolatedHandle:this.isolatedHandle=t=await this.frame.isolatedRealm().adoptHandle(this);const s=await n.call(t,...e);return s===t?this:s instanceof Cn?await this.realm.transferHandle(s):(Array.isArray(s)&&await Promise.all(s.map(async(a,o,c)=>{a instanceof Cn&&(c[o]=await this.realm.transferHandle(a))})),s instanceof Map&&await Promise.all([...s.entries()].map(async([a,o])=>{o instanceof Cn&&s.set(a,await this.realm.transferHandle(o))})),s)}}let My=(()=>{var F,Bm,jm,qm,RS,$m,Km,FS,DS,OS,ae;let n=Cn,i=[],e,t,s,a,o,c,u,d,p,h,l,m,S,g,w,v,k,C,b,D,A,R,x,N,M,O,T,_,j,$,J,L;return ae=class extends n{constructor(P){super();f(this,F);U(this,"isolatedHandle",sP(this,i));U(this,"handle");this.handle=P,this[fh]=!0}get id(){return this.handle.id}get disposed(){return this.handle.disposed}async getProperty(P){return await this.handle.getProperty(P)}async getProperties(){return await this.handle.getProperties()}async evaluate(P,...I){return P=ot(this.evaluate.name,P),await this.handle.evaluate(P,...I)}async evaluateHandle(P,...I){return P=ot(this.evaluateHandle.name,P),await this.handle.evaluateHandle(P,...I)}async jsonValue(){return await this.handle.jsonValue()}toString(){return this.handle.toString()}remoteObject(){return this.handle.remoteObject()}async dispose(){var P;await Promise.all([this.handle.dispose(),(P=this.isolatedHandle)==null?void 0:P.dispose()])}asElement(){return this}async $(P){const{updatedSelector:I,QueryHandler:K}=yh(P);return await K.queryOne(this,I)}async $$(P,I){return(I==null?void 0:I.isolate)===!1?await E(this,F,jm).call(this,P):await r(this,F,Bm).call(this,P)}async $eval(P,I,...K){const z={stack:[],error:void 0,hasError:!1};try{I=ot(this.$eval.name,I);const X=uc(z,await this.$(P),!1);if(!X)throw new Error(`Error: failed to find element matching selector "${P}"`);return await X.evaluate(I,...K)}catch(X){z.error=X,z.hasError=!0}finally{dc(z)}}async $$eval(P,I,...K){const z={stack:[],error:void 0,hasError:!1};try{I=ot(this.$$eval.name,I);const X=await this.$$(P),Z=uc(z,await this.evaluateHandle((ge,...oe)=>oe,...X),!1),[ne]=await Promise.all([Z.evaluate(I,...K),...X.map(ge=>ge.dispose())]);return ne}catch(X){z.error=X,z.hasError=!0}finally{dc(z)}}async waitForSelector(P,I={}){const{updatedSelector:K,QueryHandler:z,polling:X}=yh(P);return await z.waitFor(this,K,{polling:X,...I})}async isVisible(){return await E(this,F,qm).call(this,!0)}async isHidden(){return await E(this,F,qm).call(this,!1)}async toElement(P){if(!await this.evaluate((K,z)=>K.nodeName===z.toUpperCase(),P))throw new Error(`Element is not a(n) \`${P}\` element`);return this}async clickablePoint(P){const I=await E(this,F,RS).call(this);if(!I)throw new Error("Node is either not clickable or not an Element");return P!==void 0?{x:I.x+P.x,y:I.y+P.y}:{x:I.x+I.width/2,y:I.y+I.height/2}}async hover(){await this.scrollIntoViewIfNeeded();const{x:P,y:I}=await this.clickablePoint();await this.frame.page().mouse.move(P,I)}async click(P={}){await this.scrollIntoViewIfNeeded();const{x:I,y:K}=await this.clickablePoint(P.offset);await this.frame.page().mouse.click(I,K,P)}async drag(P){await this.scrollIntoViewIfNeeded();const I=this.frame.page();if(I.isDragInterceptionEnabled()){const K=await this.clickablePoint();return P instanceof ae&&(P=await P.clickablePoint()),await I.mouse.drag(K,P)}try{I._isDragging||(I._isDragging=!0,await this.hover(),await I.mouse.down()),P instanceof ae?await P.hover():await I.mouse.move(P.x,P.y)}catch(K){throw I._isDragging=!1,K}}async dragEnter(P={items:[],dragOperationsMask:1}){const I=this.frame.page();await this.scrollIntoViewIfNeeded();const K=await this.clickablePoint();await I.mouse.dragEnter(K,P)}async dragOver(P={items:[],dragOperationsMask:1}){const I=this.frame.page();await this.scrollIntoViewIfNeeded();const K=await this.clickablePoint();await I.mouse.dragOver(K,P)}async drop(P={items:[],dragOperationsMask:1}){const I=this.frame.page();if("items"in P){await this.scrollIntoViewIfNeeded();const K=await this.clickablePoint();await I.mouse.drop(K,P)}else await P.drag(this),I._isDragging=!1,await I.mouse.up()}async dragAndDrop(P,I){const K=this.frame.page();ee(K.isDragInterceptionEnabled(),"Drag Interception is not enabled!"),await this.scrollIntoViewIfNeeded();const z=await this.clickablePoint(),X=await P.clickablePoint();await K.mouse.dragAndDrop(z,X,I)}async select(...P){for(const I of P)ee(jr(I),'Values must be strings. Found value "'+I+'" of type "'+typeof I+'"');return await this.evaluate((I,K)=>{const z=new Set(K);if(!(I instanceof HTMLSelectElement))throw new Error("Element is not a <select> element.");const X=new Set;if(I.multiple)for(const Z of I.options)Z.selected=z.has(Z.value),Z.selected&&X.add(Z.value);else{for(const Z of I.options)Z.selected=!1;for(const Z of I.options)if(z.has(Z.value)){Z.selected=!0,X.add(Z.value);break}}return I.dispatchEvent(new Event("input",{bubbles:!0})),I.dispatchEvent(new Event("change",{bubbles:!0})),[...X.values()]},P)}async tap(){await this.scrollIntoViewIfNeeded();const{x:P,y:I}=await this.clickablePoint();await this.frame.page().touchscreen.tap(P,I)}async touchStart(){await this.scrollIntoViewIfNeeded();const{x:P,y:I}=await this.clickablePoint();return await this.frame.page().touchscreen.touchStart(P,I)}async touchMove(P){await this.scrollIntoViewIfNeeded();const{x:I,y:K}=await this.clickablePoint();if(P)return await P.move(I,K);await this.frame.page().touchscreen.touchMove(I,K)}async touchEnd(){await this.scrollIntoViewIfNeeded(),await this.frame.page().touchscreen.touchEnd()}async focus(){await this.evaluate(P=>{if(!(P instanceof HTMLElement))throw new Error("Cannot focus non-HTMLElement");return P.focus()})}async type(P,I){await this.focus(),await this.frame.page().keyboard.type(P,I)}async press(P,I){await this.focus(),await this.frame.page().keyboard.press(P,I)}async boundingBox(){const P=await this.evaluate(K=>{if(!(K instanceof Element)||K.getClientRects().length===0)return null;const z=K.getBoundingClientRect();return{x:z.x,y:z.y,width:z.width,height:z.height}});if(!P)return null;const I=await E(this,F,Km).call(this);return I?{x:P.x+I.x,y:P.y+I.y,height:P.height,width:P.width}:null}async boxModel(){const P=await this.evaluate(K=>{if(!(K instanceof Element)||K.getClientRects().length===0)return null;const z=K.getBoundingClientRect(),X=window.getComputedStyle(K),Z={padding:{left:parseInt(X.paddingLeft,10),top:parseInt(X.paddingTop,10),right:parseInt(X.paddingRight,10),bottom:parseInt(X.paddingBottom,10)},margin:{left:-parseInt(X.marginLeft,10),top:-parseInt(X.marginTop,10),right:-parseInt(X.marginRight,10),bottom:-parseInt(X.marginBottom,10)},border:{left:parseInt(X.borderLeft,10),top:parseInt(X.borderTop,10),right:parseInt(X.borderRight,10),bottom:parseInt(X.borderBottom,10)}},ne=[{x:z.left,y:z.top},{x:z.left+z.width,y:z.top},{x:z.left+z.width,y:z.top+z.height},{x:z.left,y:z.top+z.height}],ge=fe(ne,Z.border),oe=fe(ge,Z.padding),ye=fe(ne,Z.margin);return{content:oe,padding:ge,border:ne,margin:ye,width:z.width,height:z.height};function fe(H,Q){return[{x:H[0].x+Q.left,y:H[0].y+Q.top},{x:H[1].x-Q.right,y:H[1].y+Q.top},{x:H[2].x-Q.right,y:H[2].y-Q.bottom},{x:H[3].x+Q.left,y:H[3].y-Q.bottom}]}});if(!P)return null;const I=await E(this,F,Km).call(this);if(!I)return null;for(const K of["content","padding","border","margin"])for(const z of P[K])z.x+=I.x,z.y+=I.y;return P}async screenshot(P={}){const{scrollIntoView:I=!0,clip:K}=P,z=this.frame.page();I&&await this.scrollIntoViewIfNeeded();const X=await E(this,F,FS).call(this),[Z,ne]=await this.evaluate(()=>{if(!window.visualViewport)throw new Error("window.visualViewport is not supported.");return[window.visualViewport.pageLeft,window.visualViewport.pageTop]});return X.x+=Z,X.y+=ne,K&&(X.x+=K.x,X.y+=K.y,X.height=K.height,X.width=K.width),await z.screenshot({...P,clip:X})}async assertConnectedElement(){const P=await this.evaluate(async I=>{if(!I.isConnected)return"Node is detached from document";if(I.nodeType!==Node.ELEMENT_NODE)return"Node is not of type HTMLElement"});if(P)throw new Error(P)}async scrollIntoViewIfNeeded(){await this.isIntersectingViewport({threshold:1})||await this.scrollIntoView()}async isIntersectingViewport(P={}){var K;const I={stack:[],error:void 0,hasError:!1};try{await this.assertConnectedElement();const z=await E(this,F,DS).call(this);return await(uc(I,z&&await E(K=z,F,OS).call(K),!1)??this).evaluate(async(Z,ne)=>{const ge=await new Promise(oe=>{const ye=new IntersectionObserver(fe=>{oe(fe[0].intersectionRatio),ye.disconnect()});ye.observe(Z)});return ne===1?ge===1:ge>ne},P.threshold??0)}catch(z){I.error=z,I.hasError=!0}finally{dc(I)}}async scrollIntoView(){await this.assertConnectedElement(),await this.evaluate(async P=>{P.scrollIntoView({block:"center",inline:"center",behavior:"instant"})})}},F=new WeakSet,Bm=function(){return u.value},jm=async function(P){const{updatedSelector:I,QueryHandler:K}=yh(P);return await Ys.collect(K.queryAll(this,I))},qm=async function(P){return await this.evaluate(async(I,K,z)=>!!K.checkVisibility(I,z),jt.create(I=>I.puppeteerUtil),P)},RS=async function(){var X;const P=await this.evaluate(Z=>Z instanceof Element?[...Z.getClientRects()].map(ne=>({x:ne.x,y:ne.y,width:ne.width,height:ne.height})):null);if(!(P!=null&&P.length))return null;await E(this,F,$m).call(this,P);let I=this.frame,K;for(;K=I==null?void 0:I.parentFrame();){const Z={stack:[],error:void 0,hasError:!1};try{const ne=uc(Z,await I.frameElement(),!1);if(!ne)throw new Error("Unsupported frame type");const ge=await ne.evaluate(oe=>{if(oe.getClientRects().length===0)return null;const ye=oe.getBoundingClientRect(),fe=window.getComputedStyle(oe);return{left:ye.left+parseInt(fe.paddingLeft,10)+parseInt(fe.borderLeftWidth,10),top:ye.top+parseInt(fe.paddingTop,10)+parseInt(fe.borderTopWidth,10)}});if(!ge)return null;for(const oe of P)oe.x+=ge.left,oe.y+=ge.top;await E(X=ne,F,$m).call(X,P),I=K}catch(ne){Z.error=ne,Z.hasError=!0}finally{dc(Z)}}const z=P.find(Z=>Z.width>=1&&Z.height>=1);return z?{x:z.x,y:z.y,height:z.height,width:z.width}:null},$m=async function(P){const{documentWidth:I,documentHeight:K}=await this.frame.isolatedRealm().evaluate(()=>({documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight}));for(const z of P)oP(z,I,K)},Km=async function(){const P={x:0,y:0};let I=this.frame,K;for(;K=I==null?void 0:I.parentFrame();){const z={stack:[],error:void 0,hasError:!1};try{const X=uc(z,await I.frameElement(),!1);if(!X)throw new Error("Unsupported frame type");const Z=await X.evaluate(ne=>{if(ne.getClientRects().length===0)return null;const ge=ne.getBoundingClientRect(),oe=window.getComputedStyle(ne);return{left:ge.left+parseInt(oe.paddingLeft,10)+parseInt(oe.borderLeftWidth,10),top:ge.top+parseInt(oe.paddingTop,10)+parseInt(oe.borderTopWidth,10)}});if(!Z)return null;P.x+=Z.left,P.y+=Z.top,I=K}catch(X){z.error=X,z.hasError=!0}finally{dc(z)}}return P},FS=async function(){const P=await this.boundingBox();return ee(P,"Node is either not visible or not an HTMLElement"),ee(P.width!==0,"Node has 0 width."),ee(P.height!==0,"Node has 0 height."),P},DS=async function(){return await this.evaluate(P=>P instanceof SVGElement)?this:null},OS=async function(){return await this.evaluateHandle(P=>P instanceof SVGSVGElement?P:P.ownerSVGElement)},(()=>{const P=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;e=[se(),Te],t=[se(),Te],s=[se(),Te],a=[se(),Te],o=[se()],c=[Te],d=[se(),Te],p=[se(),Te],h=[se(),Te],l=[se(),Te],m=[se(),Te],S=[se(),Te],g=[se(),Te],w=[se(),Te],v=[se(),Te],k=[se(),Te],C=[se(),Te],b=[se(),Te],D=[se(),Te],A=[se(),Te],R=[se(),Te],x=[se(),Te],N=[se(),Te],M=[se(),Te],O=[se(),Te],T=[se(),Te],_=[se(),Te],j=[se(),Te],$=[se(),Te],J=[se(),Te],L=[se(),Te],Fe(ae,null,e,{kind:"method",name:"getProperty",static:!1,private:!1,access:{has:I=>"getProperty"in I,get:I=>I.getProperty},metadata:P},null,i),Fe(ae,null,t,{kind:"method",name:"getProperties",static:!1,private:!1,access:{has:I=>"getProperties"in I,get:I=>I.getProperties},metadata:P},null,i),Fe(ae,null,s,{kind:"method",name:"jsonValue",static:!1,private:!1,access:{has:I=>"jsonValue"in I,get:I=>I.jsonValue},metadata:P},null,i),Fe(ae,null,a,{kind:"method",name:"$",static:!1,private:!1,access:{has:I=>"$"in I,get:I=>I.$},metadata:P},null,i),Fe(ae,null,o,{kind:"method",name:"$$",static:!1,private:!1,access:{has:I=>"$$"in I,get:I=>I.$$},metadata:P},null,i),Fe(ae,u={value:aP(async function(I){return await E(this,F,jm).call(this,I)},"#$$")},c,{kind:"method",name:"#$$",static:!1,private:!0,access:{has:I=>Mt(F,I),get:I=>r(I,F,Bm)},metadata:P},null,i),Fe(ae,null,d,{kind:"method",name:"waitForSelector",static:!1,private:!1,access:{has:I=>"waitForSelector"in I,get:I=>I.waitForSelector},metadata:P},null,i),Fe(ae,null,p,{kind:"method",name:"isVisible",static:!1,private:!1,access:{has:I=>"isVisible"in I,get:I=>I.isVisible},metadata:P},null,i),Fe(ae,null,h,{kind:"method",name:"isHidden",static:!1,private:!1,access:{has:I=>"isHidden"in I,get:I=>I.isHidden},metadata:P},null,i),Fe(ae,null,l,{kind:"method",name:"toElement",static:!1,private:!1,access:{has:I=>"toElement"in I,get:I=>I.toElement},metadata:P},null,i),Fe(ae,null,m,{kind:"method",name:"clickablePoint",static:!1,private:!1,access:{has:I=>"clickablePoint"in I,get:I=>I.clickablePoint},metadata:P},null,i),Fe(ae,null,S,{kind:"method",name:"hover",static:!1,private:!1,access:{has:I=>"hover"in I,get:I=>I.hover},metadata:P},null,i),Fe(ae,null,g,{kind:"method",name:"click",static:!1,private:!1,access:{has:I=>"click"in I,get:I=>I.click},metadata:P},null,i),Fe(ae,null,w,{kind:"method",name:"drag",static:!1,private:!1,access:{has:I=>"drag"in I,get:I=>I.drag},metadata:P},null,i),Fe(ae,null,v,{kind:"method",name:"dragEnter",static:!1,private:!1,access:{has:I=>"dragEnter"in I,get:I=>I.dragEnter},metadata:P},null,i),Fe(ae,null,k,{kind:"method",name:"dragOver",static:!1,private:!1,access:{has:I=>"dragOver"in I,get:I=>I.dragOver},metadata:P},null,i),Fe(ae,null,C,{kind:"method",name:"drop",static:!1,private:!1,access:{has:I=>"drop"in I,get:I=>I.drop},metadata:P},null,i),Fe(ae,null,b,{kind:"method",name:"dragAndDrop",static:!1,private:!1,access:{has:I=>"dragAndDrop"in I,get:I=>I.dragAndDrop},metadata:P},null,i),Fe(ae,null,D,{kind:"method",name:"select",static:!1,private:!1,access:{has:I=>"select"in I,get:I=>I.select},metadata:P},null,i),Fe(ae,null,A,{kind:"method",name:"tap",static:!1,private:!1,access:{has:I=>"tap"in I,get:I=>I.tap},metadata:P},null,i),Fe(ae,null,R,{kind:"method",name:"touchStart",static:!1,private:!1,access:{has:I=>"touchStart"in I,get:I=>I.touchStart},metadata:P},null,i),Fe(ae,null,x,{kind:"method",name:"touchMove",static:!1,private:!1,access:{has:I=>"touchMove"in I,get:I=>I.touchMove},metadata:P},null,i),Fe(ae,null,N,{kind:"method",name:"touchEnd",static:!1,private:!1,access:{has:I=>"touchEnd"in I,get:I=>I.touchEnd},metadata:P},null,i),Fe(ae,null,M,{kind:"method",name:"focus",static:!1,private:!1,access:{has:I=>"focus"in I,get:I=>I.focus},metadata:P},null,i),Fe(ae,null,O,{kind:"method",name:"type",static:!1,private:!1,access:{has:I=>"type"in I,get:I=>I.type},metadata:P},null,i),Fe(ae,null,T,{kind:"method",name:"press",static:!1,private:!1,access:{has:I=>"press"in I,get:I=>I.press},metadata:P},null,i),Fe(ae,null,_,{kind:"method",name:"boundingBox",static:!1,private:!1,access:{has:I=>"boundingBox"in I,get:I=>I.boundingBox},metadata:P},null,i),Fe(ae,null,j,{kind:"method",name:"boxModel",static:!1,private:!1,access:{has:I=>"boxModel"in I,get:I=>I.boxModel},metadata:P},null,i),Fe(ae,null,$,{kind:"method",name:"screenshot",static:!1,private:!1,access:{has:I=>"screenshot"in I,get:I=>I.screenshot},metadata:P},null,i),Fe(ae,null,J,{kind:"method",name:"isIntersectingViewport",static:!1,private:!1,access:{has:I=>"isIntersectingViewport"in I,get:I=>I.isIntersectingViewport},metadata:P},null,i),Fe(ae,null,L,{kind:"method",name:"scrollIntoView",static:!1,private:!1,access:{has:I=>"scrollIntoView"in I,get:I=>I.scrollIntoView},metadata:P},null,i),P&&Object.defineProperty(ae,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:P})})(),ae})();function oP(n,i,e){n.width=Math.max(n.x>=0?Math.min(i-n.x,n.width):Math.min(i,n.width+n.x),0),n.height=Math.max(n.y>=0?Math.min(e-n.y,n.height):Math.min(e,n.height+n.y),0)}var cP=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},uP=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t}),Zs;(function(n){n.Action="action"})(Zs||(Zs={}));class ea extends pe{constructor(){super(...arguments);f(this,kr);U(this,"visibility",null);U(this,"_timeout",3e4);f(this,On,!0);f(this,Nn,!0);f(this,Ln,!0);U(this,"operators",{conditions:(e,t)=>at(s=>ic(...e.map(a=>a(s,t))).pipe(cy(s))),retryAndRaceWithSignalAndTimer:(e,t)=>{const s=[];return e&&s.push(bn(e,t)),s.push(Rt(this._timeout,t)),S0(nh({delay:xh}),yt(...s))}});f(this,Su,(e,t)=>r(this,Nn)?_e(e.frame.waitForFunction(s=>s instanceof HTMLElement?!["BUTTON","INPUT","SELECT","TEXTAREA","OPTION","OPTGROUP"].includes(s.nodeName)||!s.hasAttribute("disabled"):!0,{timeout:this._timeout,signal:t},e)).pipe(rh()):gn);f(this,Bn,e=>r(this,Ln)?wn(()=>_e(e.evaluate(t=>new Promise(s=>{window.requestAnimationFrame(()=>{const a=t.getBoundingClientRect();window.requestAnimationFrame(()=>{const o=t.getBoundingClientRect();s([{x:a.x,y:a.y,width:a.width,height:a.height},{x:o.x,y:o.y,width:o.width,height:o.height}])})})})))).pipe(Vs(([t,s])=>t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height),nh({delay:xh}),rh()):gn);f(this,jn,e=>r(this,On)?_e(e.isIntersectingViewport({threshold:0})).pipe(yn(t=>!t),at(()=>_e(e.scrollIntoView())),at(()=>wn(()=>_e(e.isIntersectingViewport({threshold:0}))).pipe(Vs(fr),nh({delay:xh}),rh()))):gn)}static race(e){return Cp.create(e)}get timeout(){return this._timeout}setTimeout(e){const t=this._clone();return t._timeout=e,t}setVisibility(e){const t=this._clone();return t.visibility=e,t}setWaitForEnabled(e){const t=this._clone();return y(t,Nn,e),t}setEnsureElementIsInTheViewport(e){const t=this._clone();return y(t,On,e),t}setWaitForStableBoundingBox(e){const t=this._clone();return y(t,Ln,e),t}copyOptions(e){return this._timeout=e._timeout,this.visibility=e.visibility,y(this,Nn,r(e,Nn)),y(this,On,r(e,On)),y(this,Ln,r(e,Ln)),this}clone(){return this._clone()}async waitHandle(e){const t=new Error("Locator.waitHandle");return await st(this._wait(e).pipe(this.operators.retryAndRaceWithSignalAndTimer(e==null?void 0:e.signal,t)))}async wait(e){const t={stack:[],error:void 0,hasError:!1};try{return await cP(t,await this.waitHandle(e),!1).jsonValue()}catch(s){t.error=s,t.hasError=!0}finally{uP(t)}}map(e){return new kh(this._clone(),t=>t.evaluateHandle(e))}filter(e){return new Ch(this._clone(),async(t,s)=>(await t.frame.waitForFunction(e,{signal:s,timeout:this._timeout},t),!0))}filterHandle(e){return new Ch(this._clone(),e)}mapHandle(e){return new kh(this._clone(),e)}click(e){return st(E(this,kr,NS).call(this,e))}fill(e,t){return st(E(this,kr,LS).call(this,e,t))}hover(e){return st(E(this,kr,BS).call(this,e))}scroll(e){return st(E(this,kr,jS).call(this,e))}}On=new WeakMap,Nn=new WeakMap,Ln=new WeakMap,Su=new WeakMap,Bn=new WeakMap,jn=new WeakMap,kr=new WeakSet,NS=function(e){const t=e==null?void 0:e.signal,s=new Error("Locator.click");return this._wait(e).pipe(this.operators.conditions([r(this,jn),r(this,Bn),r(this,Su)],t),ah(()=>this.emit(Zs.Action,void 0)),at(a=>_e(a.click(e)).pipe(nc(o=>{throw a.dispose().catch(le),o}))),this.operators.retryAndRaceWithSignalAndTimer(t,s))},LS=function(e,t){const s=t==null?void 0:t.signal,a=new Error("Locator.fill");return this._wait(t).pipe(this.operators.conditions([r(this,jn),r(this,Bn),r(this,Su)],s),ah(()=>this.emit(Zs.Action,void 0)),at(o=>_e(o.evaluate(c=>c instanceof HTMLSelectElement?"select":c instanceof HTMLTextAreaElement?"typeable-input":c instanceof HTMLInputElement?new Set(["textarea","text","url","tel","search","password","number","email"]).has(c.type)?"typeable-input":"other-input":c.isContentEditable?"contenteditable":"unknown")).pipe(at(c=>{switch(c){case"select":return _e(o.select(e).then(zs));case"contenteditable":case"typeable-input":return _e(o.evaluate((u,d)=>{const p=u.isContentEditable?u.innerText:u.value;if(d.length<=p.length||!d.startsWith(u.value))return u.isContentEditable?u.innerText="":u.value="",d;const h=u.isContentEditable?u.innerText:u.value;return u.isContentEditable?(u.innerText="",u.innerText=h):(u.value="",u.value=h),d.substring(h.length)},e)).pipe(at(u=>_e(o.type(u))));case"other-input":return _e(o.focus()).pipe(at(()=>_e(o.evaluate((u,d)=>{u.value=d,u.dispatchEvent(new Event("input",{bubbles:!0})),u.dispatchEvent(new Event("change",{bubbles:!0}))},e))));case"unknown":throw new Error("Element cannot be filled out.")}})).pipe(nc(c=>{throw o.dispose().catch(le),c}))),this.operators.retryAndRaceWithSignalAndTimer(s,a))},BS=function(e){const t=e==null?void 0:e.signal,s=new Error("Locator.hover");return this._wait(e).pipe(this.operators.conditions([r(this,jn),r(this,Bn)],t),ah(()=>this.emit(Zs.Action,void 0)),at(a=>_e(a.hover()).pipe(nc(o=>{throw a.dispose().catch(le),o}))),this.operators.retryAndRaceWithSignalAndTimer(t,s))},jS=function(e){const t=e==null?void 0:e.signal,s=new Error("Locator.scroll");return this._wait(e).pipe(this.operators.conditions([r(this,jn),r(this,Bn)],t),ah(()=>this.emit(Zs.Action,void 0)),at(a=>_e(a.evaluate((o,c,u)=>{c!==void 0&&(o.scrollTop=c),u!==void 0&&(o.scrollLeft=u)},e==null?void 0:e.scrollTop,e==null?void 0:e.scrollLeft)).pipe(nc(o=>{throw a.dispose().catch(le),o}))),this.operators.retryAndRaceWithSignalAndTimer(t,s))};const Jh=class Jh extends ea{constructor(e,t){super();f(this,ba);f(this,Sa);y(this,ba,e),y(this,Sa,t)}static create(e,t){return new Jh(e,t).setTimeout("getDefaultTimeout"in e?e.getDefaultTimeout():e.page().getDefaultTimeout())}_clone(){return new Jh(r(this,ba),r(this,Sa))}_wait(e){const t=e==null?void 0:e.signal;return wn(()=>_e(r(this,ba).waitForFunction(r(this,Sa),{timeout:this.timeout,signal:t}))).pipe(ih())}};ba=new WeakMap,Sa=new WeakMap;let Sh=Jh;class Ay extends ea{constructor(e){super();f(this,Ct);y(this,Ct,e),this.copyOptions(r(this,Ct))}get delegate(){return r(this,Ct)}setTimeout(e){const t=super.setTimeout(e);return y(t,Ct,r(this,Ct).setTimeout(e)),t}setVisibility(e){const t=super.setVisibility(e);return y(t,Ct,r(t,Ct).setVisibility(e)),t}setWaitForEnabled(e){const t=super.setWaitForEnabled(e);return y(t,Ct,r(this,Ct).setWaitForEnabled(e)),t}setEnsureElementIsInTheViewport(e){const t=super.setEnsureElementIsInTheViewport(e);return y(t,Ct,r(this,Ct).setEnsureElementIsInTheViewport(e)),t}setWaitForStableBoundingBox(e){const t=super.setWaitForStableBoundingBox(e);return y(t,Ct,r(this,Ct).setWaitForStableBoundingBox(e)),t}}Ct=new WeakMap;const ym=class ym extends Ay{constructor(e,t){super(e);f(this,Ca);y(this,Ca,t)}_clone(){return new ym(this.delegate.clone(),r(this,Ca)).copyOptions(this)}_wait(e){return this.delegate._wait(e).pipe(at(t=>_e(Promise.resolve(r(this,Ca).call(this,t,e==null?void 0:e.signal))).pipe(yn(s=>s),Je(()=>t))),ih())}};Ca=new WeakMap;let Ch=ym;const vm=class vm extends Ay{constructor(e,t){super(e);f(this,ka);y(this,ka,t)}_clone(){return new vm(this.delegate.clone(),r(this,ka)).copyOptions(this)}_wait(e){return this.delegate._wait(e).pipe(at(t=>_e(Promise.resolve(r(this,ka).call(this,t,e==null?void 0:e.signal)))))}};ka=new WeakMap;let kh=vm;const Yh=class Yh extends ea{constructor(e,t){super();f(this,Ea);f(this,xa);f(this,Xh,e=>this.visibility?(()=>{switch(this.visibility){case"hidden":return wn(()=>_e(e.isHidden()));case"visible":return wn(()=>_e(e.isVisible()))}})().pipe(Vs(fr),nh({delay:xh}),rh()):gn);y(this,Ea,e),y(this,xa,t)}static create(e,t){return new Yh(e,t).setTimeout("getDefaultTimeout"in e?e.getDefaultTimeout():e.page().getDefaultTimeout())}_clone(){return new Yh(r(this,Ea),r(this,xa)).copyOptions(this)}_wait(e){const t=e==null?void 0:e.signal;return wn(()=>_e(r(this,Ea).waitForSelector(r(this,xa),{visible:!1,timeout:this._timeout,signal:t}))).pipe(yn(s=>s!==null),ih(),this.operators.conditions([r(this,Xh)],t))}};Ea=new WeakMap,xa=new WeakMap,Xh=new WeakMap;let Eh=Yh;function dP(n){for(const i of n)if(!(i instanceof ea))throw new Error("Unknown locator for race candidate");return n}const Qh=class Qh extends ea{constructor(e){super();f(this,Pa);y(this,Pa,e)}static create(e){const t=dP(e);return new Qh(t)}_clone(){return new Qh(r(this,Pa).map(e=>e.clone())).copyOptions(this)}_wait(e){return ay(...r(this,Pa).map(t=>t._wait(e)))}};Pa=new WeakMap;let Cp=Qh;const xh=100;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var lP=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},Ze=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},Si=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},Ci=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t}),vt;(function(n){n.FrameNavigated=Symbol("Frame.FrameNavigated"),n.FrameSwapped=Symbol("Frame.FrameSwapped"),n.LifecycleEvent=Symbol("Frame.LifecycleEvent"),n.FrameNavigatedWithinDocument=Symbol("Frame.FrameNavigatedWithinDocument"),n.FrameDetached=Symbol("Frame.FrameDetached"),n.FrameSwappedByActivation=Symbol("Frame.FrameSwappedByActivation")})(vt||(vt={}));const xe=se(n=>`Attempted to use detached Frame '${n._id}'.`);let Ry=(()=>{var A,R,Ll,N;let n=pe,i=[],e,t,s,a,o,c,u,d,p,h,l,m,S,g,w,v,k,C,b,D;return N=class extends n{constructor(){super();f(this,R);U(this,"_id",lP(this,i));U(this,"_parentId");U(this,"_name");U(this,"_hasStartedLoading",!1);f(this,A)}clearDocumentHandle(){y(this,A,void 0)}async frameElement(){const T={stack:[],error:void 0,hasError:!1};try{const _=this.parentFrame();if(!_)return null;const j=Si(T,await _.isolatedRealm().evaluateHandle(()=>document.querySelectorAll("iframe,frame")),!1);for await(const $ of Py(j)){const J={stack:[],error:void 0,hasError:!1};try{const L=Si(J,$,!1),F=await L.contentFrame();if((F==null?void 0:F._id)===this._id)return await _.mainRealm().adoptHandle(L)}catch(L){J.error=L,J.hasError=!0}finally{Ci(J)}}return null}catch(_){T.error=_,T.hasError=!0}finally{Ci(T)}}async evaluateHandle(T,..._){return T=ot(this.evaluateHandle.name,T),await this.mainRealm().evaluateHandle(T,..._)}async evaluate(T,..._){return T=ot(this.evaluate.name,T),await this.mainRealm().evaluate(T,..._)}locator(T){return typeof T=="string"?Eh.create(this,T):Sh.create(this,T)}async $(T){return await(await E(this,R,Ll).call(this)).$(T)}async $$(T,_){return await(await E(this,R,Ll).call(this)).$$(T,_)}async $eval(T,_,...j){return _=ot(this.$eval.name,_),await(await E(this,R,Ll).call(this)).$eval(T,_,...j)}async $$eval(T,_,...j){return _=ot(this.$$eval.name,_),await(await E(this,R,Ll).call(this)).$$eval(T,_,...j)}async waitForSelector(T,_={}){const{updatedSelector:j,QueryHandler:$,polling:J}=yh(T);return await $.waitFor(this,j,{polling:J,..._})}async waitForFunction(T,_={},...j){return await this.mainRealm().waitForFunction(T,_,...j)}async content(){return await this.evaluate(()=>{let T="";for(const _ of document.childNodes)switch(_){case document.documentElement:T+=document.documentElement.outerHTML;break;default:T+=new XMLSerializer().serializeToString(_);break}return T})}async setFrameContent(T){return await this.evaluate(_=>{document.open(),document.write(_),document.close()},T)}name(){return this._name||""}isDetached(){return this.detached}get disposed(){return this.detached}async addScriptTag(T){let{content:_="",type:j}=T;const{path:$}=T;if(+!!T.url+ +!!$+ +!!_!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");return $&&(_=await vi.value.fs.promises.readFile($,"utf8"),_+=`//# sourceURL=${$.replace(/\n/g,"")}`),j=j??"text/javascript",await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle(async({url:J,id:L,type:F,content:q})=>await new Promise((B,G)=>{const Y=document.createElement("script");Y.type=F,Y.text=q,Y.addEventListener("error",te=>{G(new Error(te.message??"Could not load script"))},{once:!0}),L&&(Y.id=L),J?(Y.src=J,Y.addEventListener("load",()=>{B(Y)},{once:!0}),document.head.appendChild(Y)):(document.head.appendChild(Y),B(Y))}),{...T,type:j,content:_}))}async addStyleTag(T){let{content:_=""}=T;const{path:j}=T;if(+!!T.url+ +!!j+ +!!_!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");return j&&(_=await vi.value.fs.promises.readFile(j,"utf8"),_+="/*# sourceURL="+j.replace(/\n/g,"")+"*/",T.content=_),await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle(async({url:$,content:J})=>await new Promise((L,F)=>{let q;if(!$)q=document.createElement("style"),q.appendChild(document.createTextNode(J));else{const B=document.createElement("link");B.rel="stylesheet",B.href=$,q=B}return q.addEventListener("load",()=>{L(q)},{once:!0}),q.addEventListener("error",B=>{F(new Error(B.message??"Could not load style"))},{once:!0}),document.head.appendChild(q),q}),T))}async click(T,_={}){const j={stack:[],error:void 0,hasError:!1};try{const $=Si(j,await this.$(T),!1);ee($,`No element found for selector: ${T}`),await $.click(_),await $.dispose()}catch($){j.error=$,j.hasError=!0}finally{Ci(j)}}async focus(T){const _={stack:[],error:void 0,hasError:!1};try{const j=Si(_,await this.$(T),!1);ee(j,`No element found for selector: ${T}`),await j.focus()}catch(j){_.error=j,_.hasError=!0}finally{Ci(_)}}async hover(T){const _={stack:[],error:void 0,hasError:!1};try{const j=Si(_,await this.$(T),!1);ee(j,`No element found for selector: ${T}`),await j.hover()}catch(j){_.error=j,_.hasError=!0}finally{Ci(_)}}async select(T,..._){const j={stack:[],error:void 0,hasError:!1};try{const $=Si(j,await this.$(T),!1);return ee($,`No element found for selector: ${T}`),await $.select(..._)}catch($){j.error=$,j.hasError=!0}finally{Ci(j)}}async tap(T){const _={stack:[],error:void 0,hasError:!1};try{const j=Si(_,await this.$(T),!1);ee(j,`No element found for selector: ${T}`),await j.tap()}catch(j){_.error=j,_.hasError=!0}finally{Ci(_)}}async type(T,_,j){const $={stack:[],error:void 0,hasError:!1};try{const J=Si($,await this.$(T),!1);ee(J,`No element found for selector: ${T}`),await J.type(_,j)}catch(J){$.error=J,$.hasError=!0}finally{Ci($)}}async title(){return await this.isolatedRealm().evaluate(()=>document.title)}},A=new WeakMap,R=new WeakSet,Ll=function(){return r(this,A)||y(this,A,this.mainRealm().evaluateHandle(()=>document)),r(this,A)},(()=>{const T=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;e=[xe],t=[xe],s=[xe],a=[xe],o=[xe],c=[xe],u=[xe],d=[xe],p=[xe],h=[xe],l=[xe],m=[xe],S=[xe],g=[xe],w=[xe],v=[xe],k=[xe],C=[xe],b=[xe],D=[xe],Ze(N,null,e,{kind:"method",name:"frameElement",static:!1,private:!1,access:{has:_=>"frameElement"in _,get:_=>_.frameElement},metadata:T},null,i),Ze(N,null,t,{kind:"method",name:"evaluateHandle",static:!1,private:!1,access:{has:_=>"evaluateHandle"in _,get:_=>_.evaluateHandle},metadata:T},null,i),Ze(N,null,s,{kind:"method",name:"evaluate",static:!1,private:!1,access:{has:_=>"evaluate"in _,get:_=>_.evaluate},metadata:T},null,i),Ze(N,null,a,{kind:"method",name:"locator",static:!1,private:!1,access:{has:_=>"locator"in _,get:_=>_.locator},metadata:T},null,i),Ze(N,null,o,{kind:"method",name:"$",static:!1,private:!1,access:{has:_=>"$"in _,get:_=>_.$},metadata:T},null,i),Ze(N,null,c,{kind:"method",name:"$$",static:!1,private:!1,access:{has:_=>"$$"in _,get:_=>_.$$},metadata:T},null,i),Ze(N,null,u,{kind:"method",name:"$eval",static:!1,private:!1,access:{has:_=>"$eval"in _,get:_=>_.$eval},metadata:T},null,i),Ze(N,null,d,{kind:"method",name:"$$eval",static:!1,private:!1,access:{has:_=>"$$eval"in _,get:_=>_.$$eval},metadata:T},null,i),Ze(N,null,p,{kind:"method",name:"waitForSelector",static:!1,private:!1,access:{has:_=>"waitForSelector"in _,get:_=>_.waitForSelector},metadata:T},null,i),Ze(N,null,h,{kind:"method",name:"waitForFunction",static:!1,private:!1,access:{has:_=>"waitForFunction"in _,get:_=>_.waitForFunction},metadata:T},null,i),Ze(N,null,l,{kind:"method",name:"content",static:!1,private:!1,access:{has:_=>"content"in _,get:_=>_.content},metadata:T},null,i),Ze(N,null,m,{kind:"method",name:"addScriptTag",static:!1,private:!1,access:{has:_=>"addScriptTag"in _,get:_=>_.addScriptTag},metadata:T},null,i),Ze(N,null,S,{kind:"method",name:"addStyleTag",static:!1,private:!1,access:{has:_=>"addStyleTag"in _,get:_=>_.addStyleTag},metadata:T},null,i),Ze(N,null,g,{kind:"method",name:"click",static:!1,private:!1,access:{has:_=>"click"in _,get:_=>_.click},metadata:T},null,i),Ze(N,null,w,{kind:"method",name:"focus",static:!1,private:!1,access:{has:_=>"focus"in _,get:_=>_.focus},metadata:T},null,i),Ze(N,null,v,{kind:"method",name:"hover",static:!1,private:!1,access:{has:_=>"hover"in _,get:_=>_.hover},metadata:T},null,i),Ze(N,null,k,{kind:"method",name:"select",static:!1,private:!1,access:{has:_=>"select"in _,get:_=>_.select},metadata:T},null,i),Ze(N,null,C,{kind:"method",name:"tap",static:!1,private:!1,access:{has:_=>"tap"in _,get:_=>_.tap},metadata:T},null,i),Ze(N,null,b,{kind:"method",name:"type",static:!1,private:!1,access:{has:_=>"type"in _,get:_=>_.type},metadata:T},null,i),Ze(N,null,D,{kind:"method",name:"title",static:!1,private:!1,access:{has:_=>"title"in _,get:_=>_.title},metadata:T},null,i),T&&Object.defineProperty(N,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:T})})(),N})();class Ph{constructor(){f(this,_a);U(this,"_interceptionId");U(this,"_failureText",null);U(this,"_response",null);U(this,"_fromMemoryCache",!1);U(this,"_redirectChain",[]);U(this,"interception",{enabled:!1,handled:!1,handlers:[],resolutionState:{action:wr.None},requestOverrides:{},response:null,abortReason:null})}continueRequestOverrides(){return ee(this.interception.enabled,"Request Interception is not enabled!"),this.interception.requestOverrides}responseForRequest(){return ee(this.interception.enabled,"Request Interception is not enabled!"),this.interception.response}abortErrorReason(){return ee(this.interception.enabled,"Request Interception is not enabled!"),this.interception.abortReason}interceptResolutionState(){return this.interception.enabled?this.interception.handled?{action:wr.AlreadyHandled}:{...this.interception.resolutionState}:{action:wr.Disabled}}isInterceptResolutionHandled(){return this.interception.handled}enqueueInterceptAction(i){this.interception.handlers.push(i)}async finalizeInterceptions(){await this.interception.handlers.reduce((e,t)=>e.then(t),Promise.resolve()),this.interception.handlers=[];const{action:i}=this.interceptResolutionState();switch(i){case"abort":return await this._abort(this.interception.abortReason);case"respond":if(this.interception.response===null)throw new Error("Response is missing for the interception");return await this._respond(this.interception.response);case"continue":return await this._continue(this.interception.requestOverrides)}}async continue(i={},e){if(E(this,_a,wf).call(this)){if(ee(this.interception.enabled,"Request Interception is not enabled!"),ee(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._continue(i);if(this.interception.requestOverrides=i,this.interception.resolutionState.priority===void 0||e>this.interception.resolutionState.priority){this.interception.resolutionState={action:wr.Continue,priority:e};return}if(e===this.interception.resolutionState.priority){if(this.interception.resolutionState.action==="abort"||this.interception.resolutionState.action==="respond")return;this.interception.resolutionState.action=wr.Continue}}}async respond(i,e){if(E(this,_a,wf).call(this)){if(ee(this.interception.enabled,"Request Interception is not enabled!"),ee(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._respond(i);if(this.interception.response=i,this.interception.resolutionState.priority===void 0||e>this.interception.resolutionState.priority){this.interception.resolutionState={action:wr.Respond,priority:e};return}if(e===this.interception.resolutionState.priority){if(this.interception.resolutionState.action==="abort")return;this.interception.resolutionState.action=wr.Respond}}}async abort(i="failed",e){if(!E(this,_a,wf).call(this))return;const t=hP[i];if(ee(t,"Unknown error code: "+i),ee(this.interception.enabled,"Request Interception is not enabled!"),ee(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._abort(t);if(this.interception.abortReason=t,this.interception.resolutionState.priority===void 0||e>=this.interception.resolutionState.priority){this.interception.resolutionState={action:wr.Abort,priority:e};return}}static getResponse(i){const e=jr(i)?new TextEncoder().encode(i):i;return{contentLength:e.byteLength,base64:hy(e)}}}_a=new WeakSet,wf=function(){return!this.url().startsWith("data:")&&!this._fromMemoryCache};var wr;(function(n){n.Abort="abort",n.Respond="respond",n.Continue="continue",n.Disabled="disabled",n.None="none",n.AlreadyHandled="already-handled"})(wr||(wr={}));function Fy(n){const i=[];for(const e in n){const t=n[e];if(!Object.is(t,void 0)){const s=Array.isArray(t)?t:[t];i.push(...s.map(a=>({name:e,value:a+""})))}}return i}const Dy={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"},hP={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"};function _h(n){if(n.originalMessage.includes("Invalid header")||n.originalMessage.includes('Expected "header"')||n.originalMessage.includes("invalid argument"))throw n;le(n)}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Oy{constructor(){}ok(){const i=this.status();return i===0||i>=200&&i<=299}async buffer(){const i=await this.content();return Buffer.from(i)}async text(){const i=await this.content();return new TextDecoder().decode(i)}async json(){const i=await this.text();return JSON.parse(i)}}/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Ny(){let n=0;return()=>++n}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ly{constructor(){}}const He=Object.freeze({Left:"left",Right:"right",Middle:"middle",Back:"back",Forward:"forward"});class By{constructor(){}}class jy{constructor(){U(this,"idGenerator",Ny());U(this,"touches",[])}removeHandle(i){const e=this.touches.indexOf(i);e!==-1&&this.touches.splice(e,1)}async tap(i,e){await(await this.touchStart(i,e)).end()}async touchMove(i,e){const t=this.touches[0];if(!t)throw new dh("Must start a new Touch first");return await t.move(i,e)}async touchEnd(){const i=this.touches.shift();if(!i)throw new dh("Must start a new Touch first");await i.end()}}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const qy=3e4;class kp{constructor(){f(this,Wr);f(this,qn);y(this,Wr,null),y(this,qn,null)}setDefaultTimeout(i){y(this,Wr,i)}setDefaultNavigationTimeout(i){y(this,qn,i)}navigationTimeout(){return r(this,qn)!==null?r(this,qn):r(this,Wr)!==null?r(this,Wr):qy}timeout(){return r(this,Wr)!==null?r(this,Wr):qy}}Wr=new WeakMap,qn=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var fP=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},pP=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},Ep=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},$y=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});function mP(n){n.optimizeForSpeed??(n.optimizeForSpeed=!1),n.type??(n.type="png"),n.fromSurface??(n.fromSurface=!0),n.fullPage??(n.fullPage=!1),n.omitBackground??(n.omitBackground=!1),n.encoding??(n.encoding="binary"),n.captureBeyondViewport??(n.captureBeyondViewport=!0)}let Ky=(()=>{var t,s,a,o,c,qS,d;let n=pe,i=[],e;return d=class extends n{constructor(){super();f(this,c);U(this,"_isDragging",(fP(this,i),!1));U(this,"_timeoutSettings",new kp);f(this,t,new WeakMap);f(this,s,new _0(1));f(this,a,0);f(this,o);De(this,"request").pipe(at(l=>ap(pr(1),ic(De(this,"requestfailed"),De(this,"requestfinished"),De(this,"response").pipe(Je(m=>m.request()))).pipe(yn(m=>m.id===l.id),up(1),Je(()=>-1)))),yx((l,m)=>pr(l+m),0),bx(De(this,"close")),vx(0)).subscribe(r(this,s))}on(l,m){if(l!=="request")return super.on(l,m);let S=r(this,t).get(m);return S===void 0&&(S=g=>{g.enqueueInterceptAction(()=>m(g))},r(this,t).set(m,S)),super.on(l,S)}off(l,m){return l==="request"&&(m=r(this,t).get(m)||m),super.off(l,m)}get accessibility(){return this.mainFrame().accessibility}locator(l){return typeof l=="string"?Eh.create(this,l):Sh.create(this,l)}locatorRace(l){return ea.race(l)}async $(l){return await this.mainFrame().$(l)}async $$(l,m){return await this.mainFrame().$$(l,m)}async evaluateHandle(l,...m){return l=ot(this.evaluateHandle.name,l),await this.mainFrame().evaluateHandle(l,...m)}async $eval(l,m,...S){return m=ot(this.$eval.name,m),await this.mainFrame().$eval(l,m,...S)}async $$eval(l,m,...S){return m=ot(this.$$eval.name,m),await this.mainFrame().$$eval(l,m,...S)}async addScriptTag(l){return await this.mainFrame().addScriptTag(l)}async addStyleTag(l){return await this.mainFrame().addStyleTag(l)}url(){return this.mainFrame().url()}async content(){return await this.mainFrame().content()}async setContent(l,m){await this.mainFrame().setContent(l,m)}async goto(l,m){return await this.mainFrame().goto(l,m)}async waitForNavigation(l={}){return await this.mainFrame().waitForNavigation(l)}waitForRequest(l,m={}){const{timeout:S=this._timeoutSettings.timeout(),signal:g}=m;if(typeof l=="string"){const v=l;l=k=>k.url()===v}const w=De(this,"request").pipe(sc(l),yt(Rt(S),bn(g),De(this,"close").pipe(Je(()=>{throw new ir("Page closed!")}))));return st(w)}waitForResponse(l,m={}){const{timeout:S=this._timeoutSettings.timeout(),signal:g}=m;if(typeof l=="string"){const v=l;l=k=>k.url()===v}const w=De(this,"response").pipe(sc(l),yt(Rt(S),bn(g),De(this,"close").pipe(Je(()=>{throw new ir("Page closed!")}))));return st(w)}waitForNetworkIdle(l={}){return st(this.waitForNetworkIdle$(l))}waitForNetworkIdle$(l={}){const{timeout:m=this._timeoutSettings.timeout(),idleTime:S=Mx,concurrency:g=0,signal:w}=l;return r(this,s).pipe(sh(v=>v>g?gn:cp(S)),Je(()=>{}),yt(Rt(m),bn(w),De(this,"close").pipe(Je(()=>{throw new ir("Page closed!")}))))}async waitForFrame(l,m={}){const{timeout:S=this.getDefaultTimeout(),signal:g}=m,w=jr(l)?v=>l===v.url():l;return await st(ic(De(this,"frameattached"),De(this,"framenavigated"),_e(this.frames())).pipe(sc(w),Vs(),yt(Rt(S),bn(g),De(this,"close").pipe(Je(()=>{throw new ir("Page closed.")})))))}async emulate(l){await Promise.all([this.setUserAgent(l.userAgent),this.setViewport(l.viewport)])}async evaluate(l,...m){return l=ot(this.evaluate.name,l),await this.mainFrame().evaluate(l,...m)}async _maybeWriteTypedArrayToFile(l,m){l&&await vi.value.fs.promises.writeFile(l,m)}async screencast(l={}){const m=vi.value.ScreenRecorder,[S,g,w]=await E(this,c,qS).call(this);let v;if(l.crop){const{x:C,y:b,width:D,height:A}=Hy(Uy(l.crop));if(C<0||b<0)throw new Error("`crop.x` and `crop.y` must be greater than or equal to 0.");if(D<=0||A<=0)throw new Error("`crop.height` and `crop.width` must be greater than or equal to 0.");const R=S/w,x=g/w;if(C+D>R)throw new Error(`\`crop.width\` cannot be larger than the viewport width (${R}).`);if(b+A>x)throw new Error(`\`crop.height\` cannot be larger than the viewport height (${x}).`);v={x:C*w,y:b*w,width:D*w,height:A*w}}if(l.speed!==void 0&&l.speed<=0)throw new Error("`speed` must be greater than 0.");if(l.scale!==void 0&&l.scale<=0)throw new Error("`scale` must be greater than 0.");const k=new m(this,S,g,{...l,path:l.ffmpegPath,crop:v});try{await this._startScreencast()}catch(C){throw k.stop(),C}if(l.path){const{createWriteStream:C}=vi.value.fs,b=C(l.path,"binary");k.pipe(b)}return k}async _startScreencast(){++Ho(this,a)._,r(this,o)||y(this,o,this.mainFrame().client.send("Page.startScreencast",{format:"png"}).then(()=>new Promise(l=>this.mainFrame().client.once("Page.screencastFrame",()=>l())))),await r(this,o)}async _stopScreencast(){--Ho(this,a)._,r(this,o)&&(y(this,o,void 0),r(this,a)===0&&await this.mainFrame().client.send("Page.stopScreencast"))}async screenshot(l={}){const m={stack:[],error:void 0,hasError:!1};try{const S=Ep(m,await this.browserContext().startScreenshot(),!1),g={...l,clip:l.clip?{...l.clip}:void 0};if(g.type===void 0&&g.path!==void 0){const C=g.path;switch(C.slice(C.lastIndexOf(".")+1).toLowerCase()){case"png":g.type="png";break;case"jpeg":case"jpg":g.type="jpeg";break;case"webp":g.type="webp";break}}if(g.quality!==void 0){if(g.quality<0||g.quality>100)throw new Error(`Expected 'quality' (${g.quality}) to be between 0 and 100, inclusive.`);if(g.type===void 0||!["jpeg","webp"].includes(g.type))throw new Error(`${g.type??"png"} screenshots do not support 'quality'.`)}if(g.clip){if(g.clip.width<=0)throw new Error("'width' in 'clip' must be positive.");if(g.clip.height<=0)throw new Error("'height' in 'clip' must be positive.")}mP(g);const w=Ep(m,new oh,!0);if(g.clip){if(g.fullPage)throw new Error("'clip' and 'fullPage' are mutually exclusive");g.clip=Hy(Uy(g.clip))}else if(g.fullPage){if(!g.captureBeyondViewport){const C=await this.mainFrame().isolatedRealm().evaluate(()=>{const D=document.documentElement;return{width:D.scrollWidth,height:D.scrollHeight}}),b=this.viewport();await this.setViewport({...b,...C}),w.defer(async()=>{await this.setViewport(b).catch(le)})}}else g.captureBeyondViewport=!1;const v=await this._screenshot(g);if(g.encoding==="base64")return v;const k=dp(v,!0);return await this._maybeWriteTypedArrayToFile(g.path,k),k}catch(S){m.error=S,m.hasError=!0}finally{const S=$y(m);S&&await S}}async title(){return await this.mainFrame().title()}click(l,m){return this.mainFrame().click(l,m)}focus(l){return this.mainFrame().focus(l)}hover(l){return this.mainFrame().hover(l)}select(l,...m){return this.mainFrame().select(l,...m)}tap(l){return this.mainFrame().tap(l)}type(l,m,S){return this.mainFrame().type(l,m,S)}async waitForSelector(l,m={}){return await this.mainFrame().waitForSelector(l,m)}waitForFunction(l,m,...S){return this.mainFrame().waitForFunction(l,m,...S)}[(e=[rP(function(){return this.browser()})],we)](){return void this.close().catch(le)}[rr](){return this.close()}},t=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,qS=async function(){const l={stack:[],error:void 0,hasError:!1};try{const m=this.viewport(),S=Ep(l,new Qe,!1);return m&&m.deviceScaleFactor!==0&&(await this.setViewport({...m,deviceScaleFactor:0}),S.defer(()=>{this.setViewport(m).catch(le)})),await this.mainFrame().isolatedRealm().evaluate(()=>[window.visualViewport.width*window.devicePixelRatio,window.visualViewport.height*window.devicePixelRatio,window.devicePixelRatio])}catch(m){l.error=m,l.hasError=!0}finally{$y(l)}},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;pP(d,null,e,{kind:"method",name:"screenshot",static:!1,private:!1,access:{has:m=>"screenshot"in m,get:m=>m.screenshot},metadata:l},null,i),l&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),d})();function Uy(n){return{...n,...n.width<0?{x:n.x+n.width,width:-n.width}:{x:n.x,width:n.width},...n.height<0?{y:n.y+n.height,height:-n.height}:{y:n.y,height:n.height}}}function Hy(n){const i=Math.round(n.x),e=Math.round(n.y),t=Math.round(n.width+n.x-i),s=Math.round(n.height+n.y-e);return{...n,x:i,y:e,width:t,height:s}}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class gP{constructor(i,e,t,...s){f(this,zr);f(this,Ta);f(this,Cu);f(this,Ai);f(this,$n);f(this,ku);f(this,Eu);f(this,Kn,qe.create());f(this,qt);f(this,Un);f(this,Ia,[]);f(this,xu,()=>{var i;this.terminate((i=r(this,Un))==null?void 0:i.reason)});var a;switch(y(this,zr,i),y(this,Ta,e.polling),y(this,Cu,e.root),y(this,Un,e.signal),(a=r(this,Un))==null||a.addEventListener("abort",r(this,xu),{once:!0}),typeof t){case"string":y(this,Ai,`() => {return (${t});}`);break;default:y(this,Ai,mr(t));break}y(this,$n,s),r(this,zr).taskManager.add(this),e.timeout&&(y(this,Eu,new uh(`Waiting failed: ${e.timeout}ms exceeded`)),y(this,ku,setTimeout(()=>{this.terminate(r(this,Eu))},e.timeout))),this.rerun()}get result(){return r(this,Kn).valueOrThrow()}async rerun(){for(const e of r(this,Ia))e.abort();r(this,Ia).length=0;const i=new AbortController;r(this,Ia).push(i);try{switch(r(this,Ta)){case"raf":y(this,qt,await r(this,zr).evaluateHandle(({RAFPoller:t,createFunction:s},a,...o)=>{const c=s(a);return new t(()=>c(...o))},jt.create(t=>t.puppeteerUtil),r(this,Ai),...r(this,$n)));break;case"mutation":y(this,qt,await r(this,zr).evaluateHandle(({MutationPoller:t,createFunction:s},a,o,...c)=>{const u=s(o);return new t(()=>u(...c),a||document)},jt.create(t=>t.puppeteerUtil),r(this,Cu),r(this,Ai),...r(this,$n)));break;default:y(this,qt,await r(this,zr).evaluateHandle(({IntervalPoller:t,createFunction:s},a,o,...c)=>{const u=s(o);return new t(()=>u(...c),a)},jt.create(t=>t.puppeteerUtil),r(this,Ta),r(this,Ai),...r(this,$n)));break}await r(this,qt).evaluate(t=>{t.start()});const e=await r(this,qt).evaluateHandle(t=>t.result());r(this,Kn).resolve(e),await this.terminate()}catch(e){if(i.signal.aborted)return;const t=this.getBadError(e);t&&await this.terminate(t)}}async terminate(i){var e;if(r(this,zr).taskManager.delete(this),(e=r(this,Un))==null||e.removeEventListener("abort",r(this,xu)),clearTimeout(r(this,ku)),i&&!r(this,Kn).finished()&&r(this,Kn).reject(i),r(this,qt))try{await r(this,qt).evaluate(async t=>{await t.stop()}),r(this,qt)&&(await r(this,qt).dispose(),y(this,qt,void 0))}catch{}}getBadError(i){return Xt(i)?i.message.includes("Execution context is not available in detached frame")?new Error("Waiting failed: Frame detached"):i.message.includes("Execution context was destroyed")||i.message.includes("Cannot find context with specified id")||i.message.includes("DiscardedBrowsingContextError")?void 0:i:new Error("WaitTask failed with an error",{cause:i})}}zr=new WeakMap,Ta=new WeakMap,Cu=new WeakMap,Ai=new WeakMap,$n=new WeakMap,ku=new WeakMap,Eu=new WeakMap,Kn=new WeakMap,qt=new WeakMap,Un=new WeakMap,Ia=new WeakMap,xu=new WeakMap;class wP{constructor(){f(this,Ri,new Set)}add(i){r(this,Ri).add(i)}delete(i){r(this,Ri).delete(i)}terminateAll(i){for(const e of r(this,Ri))e.terminate(i);r(this,Ri).clear()}async rerunAll(){await Promise.all([...r(this,Ri)].map(i=>i.rerun()))}}Ri=new WeakMap;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let Wy=(yS=class{constructor(i){U(this,"timeoutSettings");U(this,"taskManager",new wP);f(this,Pu,!1);this.timeoutSettings=i}async waitForFunction(i,e={},...t){const{polling:s="raf",timeout:a=this.timeoutSettings.timeout(),root:o,signal:c}=e;if(typeof s=="number"&&s<0)throw new Error("Cannot poll with non-positive interval");return await new gP(this,{polling:s,root:o,timeout:a,signal:c},i,...t).result}get disposed(){return r(this,Pu)}dispose(){y(this,Pu,!0),this.taskManager.terminateAll(new Error("waitForFunction failed: frame got detached."))}[we](){this.dispose()}},Pu=new WeakMap,yS);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var bt;(function(n){n.PAGE="page",n.BACKGROUND_PAGE="background_page",n.SERVICE_WORKER="service_worker",n.SHARED_WORKER="shared_worker",n.BROWSER="browser",n.WEBVIEW="webview",n.OTHER="other",n.TAB="tab"})(bt||(bt={}));class lc{constructor(){}async worker(){return null}async page(){return null}}/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class zy extends pe{constructor(e){super();U(this,"timeoutSettings",new kp);f(this,_u);y(this,_u,e)}url(){return r(this,_u)}async evaluate(e,...t){return e=ot(this.evaluate.name,e),await this.mainRealm().evaluate(e,...t)}async evaluateHandle(e,...t){return e=ot(this.evaluateHandle.name,e),await this.mainRealm().evaluateHandle(e,...t)}async close(){throw new be("WebWorker.close() is not supported")}}_u=new WeakMap;/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var yP=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},vP=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});class Vy{constructor(i,e=""){f(this,Fi);f(this,Tu);y(this,Fi,i),y(this,Tu,e)}async snapshot(i={}){const{interestingOnly:e=!0,root:t=null,includeIframes:s=!1}=i,{nodes:a}=await r(this,Fi).environment.client.send("Accessibility.getFullAXTree",{frameId:r(this,Tu)});let o;if(t){const{node:h}=await r(this,Fi).environment.client.send("DOM.describeNode",{objectId:t.id});o=h.backendNodeId}const c=xp.createTree(r(this,Fi),a),u=async h=>{var l;if(((l=h.payload.role)==null?void 0:l.value)==="Iframe"){const m={stack:[],error:void 0,hasError:!1};try{if(!h.payload.backendDOMNodeId)return;const S=yP(m,await r(this,Fi).adoptBackendNode(h.payload.backendDOMNodeId),!1);if(!S||!("contentFrame"in S))return;const g=await S.contentFrame();if(!g)return;const w=await g.accessibility.snapshot(i);h.iframeSnapshot=w??void 0}catch(S){m.error=S,m.hasError=!0}finally{vP(m)}}for(const m of h.children)await u(m)};let d=c;if(!c||(s&&await u(c),o&&(d=c.find(h=>h.payload.backendDOMNodeId===o)),!d))return null;if(!e)return this.serializeTree(d)[0]??null;const p=new Set;return this.collectInterestingNodes(p,c,!1),p.has(d)?this.serializeTree(d,p)[0]??null:null}serializeTree(i,e){const t=[];for(const a of i.children)t.push(...this.serializeTree(a,e));if(e&&!e.has(i))return t;const s=i.serialize();return t.length&&(s.children=t),i.iframeSnapshot&&(s.children||(s.children=[]),s.children.push(i.iframeSnapshot)),[s]}collectInterestingNodes(i,e,t){if((e.isInteresting(t)||e.iframeSnapshot)&&i.add(e),!e.isLeafNode()){t=t||e.isControl();for(const s of e.children)this.collectInterestingNodes(i,s,t)}}}Fi=new WeakMap,Tu=new WeakMap;const bm=class bm{constructor(i,e){f(this,Vr);U(this,"payload");U(this,"children",[]);U(this,"iframeSnapshot");f(this,Ma,!1);f(this,Iu,!1);f(this,Hn,!1);f(this,Mu,!1);f(this,Wn);f(this,$t);f(this,Au);f(this,zn);f(this,Ru);this.payload=e,y(this,Wn,this.payload.name?this.payload.name.value:""),y(this,$t,this.payload.role?this.payload.role.value:"Unknown"),y(this,Au,this.payload.ignored),y(this,Ru,i);for(const t of this.payload.properties||[])t.name==="editable"&&(y(this,Ma,t.value.value==="richtext"),y(this,Iu,!0)),t.name==="focusable"&&y(this,Hn,t.value.value),t.name==="hidden"&&y(this,Mu,t.value.value)}find(i){if(i(this))return this;for(const e of this.children){const t=e.find(i);if(t)return t}return null}isLeafNode(){if(!this.children.length||E(this,Vr,$S).call(this)||E(this,Vr,KS).call(this))return!0;switch(r(this,$t)){case"doc-cover":case"graphics-symbol":case"img":case"image":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return E(this,Vr,Um).call(this)?!1:!!(r(this,Hn)&&r(this,Wn)||r(this,$t)==="heading"&&r(this,Wn))}isControl(){switch(r(this,$t)){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":case"treeitem":return!0;default:return!1}}isInteresting(i){return r(this,$t)==="Ignored"||r(this,Mu)||r(this,Au)?!1:r(this,Hn)||r(this,Ma)||this.isControl()?!0:i?!1:this.isLeafNode()&&!!r(this,Wn)}serialize(){const i=new Map;for(const l of this.payload.properties||[])i.set(l.name.toLowerCase(),l.value.value);this.payload.name&&i.set("name",this.payload.name.value),this.payload.value&&i.set("value",this.payload.value.value),this.payload.description&&i.set("description",this.payload.description.value);const e={role:r(this,$t),elementHandle:async()=>this.payload.backendDOMNodeId?await r(this,Ru).adoptBackendNode(this.payload.backendDOMNodeId):null},t=["name","value","description","keyshortcuts","roledescription","valuetext"],s=l=>i.get(l);for(const l of t)i.has(l)&&(e[l]=s(l));const a=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"],o=l=>i.get(l);for(const l of a)l==="focused"&&r(this,$t)==="RootWebArea"||!o(l)||(e[l]=o(l));const c=["checked","pressed"];for(const l of c){if(!i.has(l))continue;const m=i.get(l);e[l]=m==="mixed"?"mixed":m==="true"}const u=["level","valuemax","valuemin"],d=l=>i.get(l);for(const l of u)i.has(l)&&(e[l]=d(l));const p=["autocomplete","haspopup","invalid","orientation"],h=l=>i.get(l);for(const l of p){const m=h(l);!m||m==="false"||(e[l]=h(l))}return e}static createTree(i,e){const t=new Map;for(const s of e)t.set(s.nodeId,new bm(i,s));for(const s of t.values())for(const a of s.payload.childIds||[]){const o=t.get(a);o&&s.children.push(o)}return t.values().next().value??null}};Ma=new WeakMap,Iu=new WeakMap,Hn=new WeakMap,Mu=new WeakMap,Wn=new WeakMap,$t=new WeakMap,Au=new WeakMap,zn=new WeakMap,Ru=new WeakMap,Vr=new WeakSet,$S=function(){return r(this,Ma)?!1:r(this,Iu)?!0:r(this,$t)==="textbox"||r(this,$t)==="searchbox"},KS=function(){const i=r(this,$t);return i==="LineBreak"||i==="text"||i==="InlineTextBox"||i==="StaticText"},Um=function(){var i;if(r(this,zn)===void 0){y(this,zn,!1);for(const e of this.children)if(r(e,Hn)||E(i=e,Vr,Um).call(i)){y(this,zn,!0);break}}return r(this,zn)};let xp=bm;var bP=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},SP=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});class Th{constructor(i,e,t){f(this,Gr);f(this,Fu);f(this,Du);y(this,Gr,i),y(this,Fu,e),y(this,Du,t)}get name(){return r(this,Gr)}get initSource(){return r(this,Du)}async run(i,e,t,s){const a=new Qe;try{if(!s){const o={stack:[],error:void 0,hasError:!1};try{const u=await bP(o,await i.evaluateHandle((d,p)=>globalThis[d].args.get(p),r(this,Gr),e),!1).getProperties();for(const[d,p]of u)if(d in t)switch(p.remoteObject().subtype){case"node":t[+d]=p;break;default:a.use(p)}else a.use(p)}catch(c){o.error=c,o.hasError=!0}finally{SP(o)}}await i.evaluate((o,c,u)=>{const d=globalThis[o].callbacks;d.get(c).resolve(u),d.delete(c)},r(this,Gr),e,await r(this,Fu).call(this,...t));for(const o of t)o instanceof Cn&&a.use(o)}catch(o){Xt(o)?await i.evaluate((c,u,d,p)=>{const h=new Error(d);h.stack=p;const l=globalThis[c].callbacks;l.get(u).reject(h),l.delete(u)},r(this,Gr),e,o.message,o.stack).catch(le):await i.evaluate((c,u,d)=>{const p=globalThis[c].callbacks;p.get(u).reject(d),p.delete(u)},r(this,Gr),e,o).catch(le)}}}Gr=new WeakMap,Fu=new WeakMap,Du=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Pp{constructor(i,e,t,s,a){f(this,Ou);f(this,Nu);f(this,Lu);f(this,Aa);f(this,Ra);y(this,Ou,i),y(this,Nu,e),y(this,Lu,t),y(this,Aa,s),y(this,Ra,a)}type(){return r(this,Ou)}text(){return r(this,Nu)}args(){return r(this,Lu)}location(){return r(this,Aa)[0]??(r(this,Ra)?{url:r(this,Ra).url()}:{})}stackTrace(){return r(this,Aa)}}Ou=new WeakMap,Nu=new WeakMap,Lu=new WeakMap,Aa=new WeakMap,Ra=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class CP{constructor(i,e){f(this,Fa);f(this,Bu);f(this,Vn,!1);y(this,Fa,i),y(this,Bu,e.mode!=="selectSingle")}isMultiple(){return r(this,Bu)}async accept(i){ee(!r(this,Vn),"Cannot accept FileChooser which is already handled!"),y(this,Vn,!0),await r(this,Fa).uploadFile(...i)}async cancel(){ee(!r(this,Vn),"Cannot cancel FileChooser which is already handled!"),y(this,Vn,!0),await r(this,Fa).evaluate(i=>{i.dispatchEvent(new Event("cancel",{bubbles:!0}))})}}Fa=new WeakMap,Bu=new WeakMap,Vn=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var ct;(function(n){n.Request=Symbol("NetworkManager.Request"),n.RequestServedFromCache=Symbol("NetworkManager.RequestServedFromCache"),n.Response=Symbol("NetworkManager.Response"),n.RequestFailed=Symbol("NetworkManager.RequestFailed"),n.RequestFinished=Symbol("NetworkManager.RequestFinished")})(ct||(ct={}));/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class _p{constructor(){f(this,Zt,new Map);f(this,Zh,Ny())}create(i,e,t){const s=new kP(r(this,Zh).call(this),i,e);r(this,Zt).set(s.id,s);try{t(s.id)}catch(a){throw s.promise.catch(le).finally(()=>{r(this,Zt).delete(s.id)}),s.reject(a),a}return s.promise.finally(()=>{r(this,Zt).delete(s.id)})}reject(i,e,t){const s=r(this,Zt).get(i);s&&this._reject(s,e,t)}rejectRaw(i,e){const t=r(this,Zt).get(i);t&&t.reject(e)}_reject(i,e,t){let s,a;e instanceof vn?(s=e,s.cause=i.error,a=e.message):(s=i.error,a=e),i.reject(ky(s,`Protocol error (${i.label}): ${a}`,t))}resolve(i,e){const t=r(this,Zt).get(i);t&&t.resolve(e)}clear(){for(const i of r(this,Zt).values())this._reject(i,new ir("Target closed"));r(this,Zt).clear()}getPendingProtocolErrors(){const i=[];for(const e of r(this,Zt).values())i.push(new Error(`${e.label} timed out. Trace: ${e.error.stack}`));return i}}Zt=new WeakMap,Zh=new WeakMap;class kP{constructor(i,e,t){f(this,ju);f(this,qu,new vn);f(this,Gn,qe.create());f(this,Da);f(this,$u);y(this,ju,i),y(this,$u,e),t&&y(this,Da,setTimeout(()=>{r(this,Gn).reject(ky(r(this,qu),`${e} timed out. Increase the 'protocolTimeout' setting in launch/connect calls for a higher timeout if needed.`))},t))}resolve(i){clearTimeout(r(this,Da)),r(this,Gn).resolve(i)}reject(i){clearTimeout(r(this,Da)),r(this,Gn).reject(i)}get id(){return r(this,ju)}get promise(){return r(this,Gn).valueOrThrow()}get error(){return r(this,qu)}get label(){return r(this,$u)}}ju=new WeakMap,qu=new WeakMap,Gn=new WeakMap,Da=new WeakMap,$u=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class ta extends ac{constructor(e,t,s,a,o){super();f(this,Jn);f(this,Oa);f(this,Jr,new _p);f(this,or);f(this,Na);f(this,La);f(this,Ku,!1);y(this,or,e),y(this,Oa,t),y(this,Jn,s),y(this,Na,a),y(this,Ku,o)}_setTarget(e){y(this,La,e)}_target(){return ee(r(this,La),"Target must exist"),r(this,La)}connection(){return r(this,or)}parentSession(){var t;return r(this,Na)?((t=r(this,or))==null?void 0:t.session(r(this,Na)))??void 0:this}send(e,t,s){return r(this,or)?r(this,or)._rawSend(r(this,Jr),e,t,r(this,Jn),s):Promise.reject(new ir(`Protocol error (${e}): Session closed. Most likely the ${r(this,Oa)} has been closed.`))}_onMessage(e){e.id?e.error?r(this,Ku)?r(this,Jr).rejectRaw(e.id,e.error):r(this,Jr).reject(e.id,Ey(e),e.error.message):r(this,Jr).resolve(e.id,e.result):(ee(!e.id),this.emit(e.method,e.params))}async detach(){if(!r(this,or))throw new Error(`Session already detached. Most likely the ${r(this,Oa)} has been closed.`);await r(this,or).send("Target.detachFromTarget",{sessionId:r(this,Jn)})}_onClosed(){r(this,Jr).clear(),y(this,or,void 0),this.emit(Ue.Disconnected,void 0)}id(){return r(this,Jn)}getPendingProtocolErrors(){return r(this,Jr).getPendingProtocolErrors()}}Jn=new WeakMap,Oa=new WeakMap,Jr=new WeakMap,or=new WeakMap,Na=new WeakMap,La=new WeakMap,Ku=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const EP=Gs("puppeteer:protocol:SEND ►"),xP=Gs("puppeteer:protocol:RECV ◀");class Gy extends pe{constructor(e,t,s=0,a,o=!1){super();f(this,Hu);f(this,Uu);f(this,Er);f(this,Xn);f(this,Ba);f(this,Pt,new Map);f(this,Yn,!1);f(this,ja,new Set);f(this,xr);f(this,qa,!1);y(this,qa,o),y(this,xr,new _p),y(this,Uu,e),y(this,Xn,s),y(this,Ba,a??18e4),y(this,Er,t),r(this,Er).onmessage=this.onMessage.bind(this),r(this,Er).onclose=E(this,Hu,Hm).bind(this)}static fromSession(e){return e.connection()}get delay(){return r(this,Xn)}get timeout(){return r(this,Ba)}get _closed(){return r(this,Yn)}get _sessions(){return r(this,Pt)}session(e){return r(this,Pt).get(e)||null}url(){return r(this,Uu)}send(e,t,s){return this._rawSend(r(this,xr),e,t,void 0,s)}_rawSend(e,t,s,a,o){return r(this,Yn)?Promise.reject(new Error("Protocol error: Connection closed.")):e.create(t,(o==null?void 0:o.timeout)??r(this,Ba),c=>{const u=JSON.stringify({method:t,params:s,id:c,sessionId:a});EP(u),r(this,Er).send(u)})}async closeBrowser(){await this.send("Browser.close")}async onMessage(e){r(this,Xn)&&await new Promise(s=>setTimeout(s,r(this,Xn))),xP(e);const t=JSON.parse(e);if(t.method==="Target.attachedToTarget"){const s=t.params.sessionId,a=new ta(this,t.params.targetInfo.type,s,t.sessionId,r(this,qa));r(this,Pt).set(s,a),this.emit(Ue.SessionAttached,a);const o=r(this,Pt).get(t.sessionId);o&&o.emit(Ue.SessionAttached,a)}else if(t.method==="Target.detachedFromTarget"){const s=r(this,Pt).get(t.params.sessionId);if(s){s._onClosed(),r(this,Pt).delete(t.params.sessionId),this.emit(Ue.SessionDetached,s);const a=r(this,Pt).get(t.sessionId);a&&a.emit(Ue.SessionDetached,s)}}if(t.sessionId){const s=r(this,Pt).get(t.sessionId);s&&s._onMessage(t)}else t.id?t.error?r(this,qa)?r(this,xr).rejectRaw(t.id,t.error):r(this,xr).reject(t.id,Ey(t),t.error.message):r(this,xr).resolve(t.id,t.result):this.emit(t.method,t.params)}dispose(){E(this,Hu,Hm).call(this),r(this,Er).close()}isAutoAttached(e){return!r(this,ja).has(e)}async _createSession(e,t=!0){t||r(this,ja).add(e.targetId);const{sessionId:s}=await this.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});r(this,ja).delete(e.targetId);const a=r(this,Pt).get(s);if(!a)throw new Error("CDPSession creation failed.");return a}async createSession(e){return await this._createSession(e,!1)}getPendingProtocolErrors(){const e=[];e.push(...r(this,xr).getPendingProtocolErrors());for(const t of r(this,Pt).values())e.push(...t.getPendingProtocolErrors());return e}}Uu=new WeakMap,Er=new WeakMap,Xn=new WeakMap,Ba=new WeakMap,Pt=new WeakMap,Yn=new WeakMap,ja=new WeakMap,xr=new WeakMap,qa=new WeakMap,Hu=new WeakSet,Hm=function(){if(!r(this,Yn)){y(this,Yn,!0),r(this,Er).onmessage=void 0,r(this,Er).onclose=void 0,r(this,xr).clear();for(const e of r(this,Pt).values())e._onClosed();r(this,Pt).clear(),this.emit(Ue.Disconnected,void 0)}};function Tp(n){return n instanceof ir}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Jy{constructor(i){f(this,Qn);f(this,Zn);y(this,Qn,new PP(i)),y(this,Zn,new _P(i))}updateClient(i){r(this,Qn).updateClient(i),r(this,Zn).updateClient(i)}async startJSCoverage(i={}){return await r(this,Qn).start(i)}async stopJSCoverage(){return await r(this,Qn).stop()}async startCSSCoverage(i={}){return await r(this,Zn).start(i)}async stopCSSCoverage(){return await r(this,Zn).stop()}}Qn=new WeakMap,Zn=new WeakMap;class PP{constructor(i){f(this,Ha);f(this,_t);f(this,es,!1);f(this,ts,new Map);f(this,rs,new Map);f(this,$a);f(this,Wu,!1);f(this,Ka,!1);f(this,Ua,!1);y(this,_t,i)}updateClient(i){y(this,_t,i)}async start(i={}){ee(!r(this,es),"JSCoverage is already enabled");const{resetOnNavigation:e=!0,reportAnonymousScripts:t=!1,includeRawScriptCoverage:s=!1,useBlockCoverage:a=!0}=i;y(this,Wu,e),y(this,Ka,t),y(this,Ua,s),y(this,es,!0),r(this,ts).clear(),r(this,rs).clear(),y(this,$a,new Qe);const o=r(this,$a).use(new pe(r(this,_t)));o.on("Debugger.scriptParsed",E(this,Ha,HS).bind(this)),o.on("Runtime.executionContextsCleared",E(this,Ha,US).bind(this)),await Promise.all([r(this,_t).send("Profiler.enable"),r(this,_t).send("Profiler.startPreciseCoverage",{callCount:r(this,Ua),detailed:a}),r(this,_t).send("Debugger.enable"),r(this,_t).send("Debugger.setSkipAllPauses",{skip:!0})])}async stop(){var s;ee(r(this,es),"JSCoverage is not enabled"),y(this,es,!1);const i=await Promise.all([r(this,_t).send("Profiler.takePreciseCoverage"),r(this,_t).send("Profiler.stopPreciseCoverage"),r(this,_t).send("Profiler.disable"),r(this,_t).send("Debugger.disable")]);(s=r(this,$a))==null||s.dispose();const e=[],t=i[0];for(const a of t.result){let o=r(this,ts).get(a.scriptId);!o&&r(this,Ka)&&(o="debugger://VM"+a.scriptId);const c=r(this,rs).get(a.scriptId);if(c===void 0||o===void 0)continue;const u=[];for(const p of a.functions)u.push(...p.ranges);const d=Xy(u);r(this,Ua)?e.push({url:o,ranges:d,text:c,rawScriptCoverage:a}):e.push({url:o,ranges:d,text:c})}return e}}_t=new WeakMap,es=new WeakMap,ts=new WeakMap,rs=new WeakMap,$a=new WeakMap,Wu=new WeakMap,Ka=new WeakMap,Ua=new WeakMap,Ha=new WeakSet,US=function(){r(this,Wu)&&(r(this,ts).clear(),r(this,rs).clear())},HS=async function(i){if(!Bt.isPuppeteerURL(i.url)&&!(!i.url&&!r(this,Ka)))try{const e=await r(this,_t).send("Debugger.getScriptSource",{scriptId:i.scriptId});r(this,ts).set(i.scriptId,i.url),r(this,rs).set(i.scriptId,e.scriptSource)}catch(e){le(e)}};class _P{constructor(i){f(this,za);f(this,Kt);f(this,is,!1);f(this,Di,new Map);f(this,ns,new Map);f(this,Wa);f(this,zu,!1);y(this,Kt,i)}updateClient(i){y(this,Kt,i)}async start(i={}){ee(!r(this,is),"CSSCoverage is already enabled");const{resetOnNavigation:e=!0}=i;y(this,zu,e),y(this,is,!0),r(this,Di).clear(),r(this,ns).clear(),y(this,Wa,new Qe);const t=r(this,Wa).use(new pe(r(this,Kt)));t.on("CSS.styleSheetAdded",E(this,za,zS).bind(this)),t.on("Runtime.executionContextsCleared",E(this,za,WS).bind(this)),await Promise.all([r(this,Kt).send("DOM.enable"),r(this,Kt).send("CSS.enable"),r(this,Kt).send("CSS.startRuleUsageTracking")])}async stop(){var s;ee(r(this,is),"CSSCoverage is not enabled"),y(this,is,!1);const i=await r(this,Kt).send("CSS.stopRuleUsageTracking");await Promise.all([r(this,Kt).send("CSS.disable"),r(this,Kt).send("DOM.disable")]),(s=r(this,Wa))==null||s.dispose();const e=new Map;for(const a of i.ruleUsage){let o=e.get(a.styleSheetId);o||(o=[],e.set(a.styleSheetId,o)),o.push({startOffset:a.startOffset,endOffset:a.endOffset,count:a.used?1:0})}const t=[];for(const a of r(this,Di).keys()){const o=r(this,Di).get(a);ee(typeof o<"u",`Stylesheet URL is undefined (styleSheetId=${a})`);const c=r(this,ns).get(a);ee(typeof c<"u",`Stylesheet text is undefined (styleSheetId=${a})`);const u=Xy(e.get(a)||[]);t.push({url:o,ranges:u,text:c})}return t}}Kt=new WeakMap,is=new WeakMap,Di=new WeakMap,ns=new WeakMap,Wa=new WeakMap,zu=new WeakMap,za=new WeakSet,WS=function(){r(this,zu)&&(r(this,Di).clear(),r(this,ns).clear())},zS=async function(i){const e=i.header;if(e.sourceURL)try{const t=await r(this,Kt).send("CSS.getStyleSheetText",{styleSheetId:e.styleSheetId});r(this,Di).set(e.styleSheetId,e.sourceURL),r(this,ns).set(e.styleSheetId,t.text)}catch(t){le(t)}};function Xy(n){const i=[];for(const a of n)i.push({offset:a.startOffset,type:0,range:a}),i.push({offset:a.endOffset,type:1,range:a});i.sort((a,o)=>{if(a.offset!==o.offset)return a.offset-o.offset;if(a.type!==o.type)return o.type-a.type;const c=a.range.endOffset-a.range.startOffset,u=o.range.endOffset-o.range.startOffset;return a.type===0?u-c:c-u});const e=[],t=[];let s=0;for(const a of i){if(e.length&&s<a.offset&&e[e.length-1]>0){const o=t[t.length-1];o&&o.end===s?o.end=a.offset:t.push({start:s,end:a.offset})}s=a.offset,a.type===0?e.push(a.range.count):e.pop()}return t.filter(a=>a.end-a.start>0)}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class TP extends Cy{constructor(e,t,s,a=""){super(t,s,a);f(this,Vu);y(this,Vu,e)}async handle(e){await r(this,Vu).send("Page.handleJavaScriptDialog",{accept:e.accept,promptText:e.text})}}Vu=new WeakMap;var IP=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},yr=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},vr=function(n,i,e){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",i):i})};class br{constructor(i,e,t){f(this,ss);f(this,Va);f(this,Gu);y(this,ss,i),y(this,Va,e),y(this,Gu,t),r(this,Va).registerState(this)}async setState(i){y(this,ss,i),await this.sync()}get state(){return r(this,ss)}async sync(){await Promise.all(r(this,Va).clients().map(i=>r(this,Gu).call(this,i,r(this,ss))))}}ss=new WeakMap,Va=new WeakMap,Gu=new WeakMap;let Yy=(()=>{var D,A,R,x,N,M,O,T,_,j,$,J,L,F,q,B,Wm,zm,Vm,Gm,Jm,Xm,Ym,Qm,Zm,eg,P;let n=[],i,e,t,s,a,o,c,u,d,p,h,l,m,S,g,w,v,k,C,b;return P=class{constructor(K){f(this,B);f(this,D,IP(this,n));f(this,A,!1);f(this,R,!1);f(this,x,[]);f(this,N,new br({active:!1},this,r(this,B,Wm)));f(this,M,new br({active:!1},this,r(this,B,zm)));f(this,O,new br({active:!1},this,r(this,B,Vm)));f(this,T,new br({active:!1},this,r(this,B,Gm)));f(this,_,new br({active:!1},this,r(this,B,Jm)));f(this,j,new br({active:!1},this,r(this,B,Xm)));f(this,$,new br({active:!1},this,r(this,B,Ym)));f(this,J,new br({active:!1},this,r(this,B,Qm)));f(this,L,new br({active:!1},this,r(this,B,Zm)));f(this,F,new br({javaScriptEnabled:!0,active:!1},this,r(this,B,eg)));f(this,q,new Set);y(this,D,K)}updateClient(K){y(this,D,K),r(this,q).delete(K)}registerState(K){r(this,x).push(K)}clients(){return[r(this,D),...Array.from(r(this,q))]}async registerSpeculativeSession(K){r(this,q).add(K),K.once(Ue.Disconnected,()=>{r(this,q).delete(K)}),Promise.all(r(this,x).map(z=>z.sync().catch(le)))}get javascriptEnabled(){return r(this,F).state.javaScriptEnabled}async emulateViewport(K){const z=r(this,N).state;if(!K&&!z.active)return!1;await r(this,N).setState(K?{viewport:K,active:!0}:{active:!1});const X=(K==null?void 0:K.isMobile)||!1,Z=(K==null?void 0:K.hasTouch)||!1,ne=r(this,A)!==X||r(this,R)!==Z;return y(this,A,X),y(this,R,Z),ne}async emulateIdleState(K){await r(this,M).setState({active:!0,overrides:K})}async emulateTimezone(K){await r(this,O).setState({timezoneId:K,active:!0})}async emulateVisionDeficiency(K){ee(!K||new Set(["none","achromatopsia","blurredVision","deuteranopia","protanopia","reducedContrast","tritanopia"]).has(K),`Unsupported vision deficiency: ${K}`),await r(this,T).setState({active:!0,visionDeficiency:K})}async emulateCPUThrottling(K){ee(K===null||K>=1,"Throttling rate should be greater or equal to 1"),await r(this,_).setState({active:!0,factor:K??void 0})}async emulateMediaFeatures(K){if(Array.isArray(K))for(const z of K){const X=z.name;ee(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(X),"Unsupported media feature: "+X)}await r(this,j).setState({active:!0,mediaFeatures:K})}async emulateMediaType(K){ee(K==="screen"||K==="print"||(K??void 0)===void 0,"Unsupported media type: "+K),await r(this,$).setState({type:K,active:!0})}async setGeolocation(K){const{longitude:z,latitude:X,accuracy:Z=0}=K;if(z<-180||z>180)throw new Error(`Invalid longitude "${z}": precondition -180 <= LONGITUDE <= 180 failed.`);if(X<-90||X>90)throw new Error(`Invalid latitude "${X}": precondition -90 <= LATITUDE <= 90 failed.`);if(Z<0)throw new Error(`Invalid accuracy "${Z}": precondition 0 <= ACCURACY failed.`);await r(this,J).setState({active:!0,geoLocation:{longitude:z,latitude:X,accuracy:Z}})}async resetDefaultBackgroundColor(){await r(this,L).setState({active:!0,color:void 0})}async setTransparentBackgroundColor(){await r(this,L).setState({active:!0,color:{r:0,g:0,b:0,a:0}})}async setJavaScriptEnabled(K){await r(this,F).setState({active:!0,javaScriptEnabled:K})}},D=new WeakMap,A=new WeakMap,R=new WeakMap,x=new WeakMap,N=new WeakMap,M=new WeakMap,O=new WeakMap,T=new WeakMap,_=new WeakMap,j=new WeakMap,$=new WeakMap,J=new WeakMap,L=new WeakMap,F=new WeakMap,q=new WeakMap,B=new WeakSet,Wm=function(){return e.value},zm=function(){return s.value},Vm=function(){return o.value},Gm=function(){return u.value},Jm=function(){return p.value},Xm=function(){return l.value},Ym=function(){return S.value},Qm=function(){return w.value},Zm=function(){return k.value},eg=function(){return b.value},(()=>{const K=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[nr],t=[nr],a=[nr],c=[nr],d=[nr],h=[nr],m=[nr],g=[nr],v=[nr],C=[nr],yr(P,e={value:vr(async function(z,X){if(!X.viewport){await Promise.all([z.send("Emulation.clearDeviceMetricsOverride"),z.send("Emulation.setTouchEmulationEnabled",{enabled:!1})]).catch(le);return}const{viewport:Z}=X,ne=Z.isMobile||!1,ge=Z.width,oe=Z.height,ye=Z.deviceScaleFactor??1,fe=Z.isLandscape?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"},H=Z.hasTouch||!1;await Promise.all([z.send("Emulation.setDeviceMetricsOverride",{mobile:ne,width:ge,height:oe,deviceScaleFactor:ye,screenOrientation:fe}).catch(Q=>{if(Q.message.includes("Target does not support metrics override")){le(Q);return}throw Q}),z.send("Emulation.setTouchEmulationEnabled",{enabled:H})])},"#applyViewport")},i,{kind:"method",name:"#applyViewport",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,Wm)},metadata:K},null,n),yr(P,s={value:vr(async function(z,X){X.active&&(X.overrides?await z.send("Emulation.setIdleOverride",{isUserActive:X.overrides.isUserActive,isScreenUnlocked:X.overrides.isScreenUnlocked}):await z.send("Emulation.clearIdleOverride"))},"#emulateIdleState")},t,{kind:"method",name:"#emulateIdleState",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,zm)},metadata:K},null,n),yr(P,o={value:vr(async function(z,X){if(X.active)try{await z.send("Emulation.setTimezoneOverride",{timezoneId:X.timezoneId||""})}catch(Z){throw Xt(Z)&&Z.message.includes("Invalid timezone")?new Error(`Invalid timezone ID: ${X.timezoneId}`):Z}},"#emulateTimezone")},a,{kind:"method",name:"#emulateTimezone",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,Vm)},metadata:K},null,n),yr(P,u={value:vr(async function(z,X){X.active&&await z.send("Emulation.setEmulatedVisionDeficiency",{type:X.visionDeficiency||"none"})},"#emulateVisionDeficiency")},c,{kind:"method",name:"#emulateVisionDeficiency",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,Gm)},metadata:K},null,n),yr(P,p={value:vr(async function(z,X){X.active&&await z.send("Emulation.setCPUThrottlingRate",{rate:X.factor??1})},"#emulateCpuThrottling")},d,{kind:"method",name:"#emulateCpuThrottling",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,Jm)},metadata:K},null,n),yr(P,l={value:vr(async function(z,X){X.active&&await z.send("Emulation.setEmulatedMedia",{features:X.mediaFeatures})},"#emulateMediaFeatures")},h,{kind:"method",name:"#emulateMediaFeatures",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,Xm)},metadata:K},null,n),yr(P,S={value:vr(async function(z,X){X.active&&await z.send("Emulation.setEmulatedMedia",{media:X.type||""})},"#emulateMediaType")},m,{kind:"method",name:"#emulateMediaType",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,Ym)},metadata:K},null,n),yr(P,w={value:vr(async function(z,X){X.active&&await z.send("Emulation.setGeolocationOverride",X.geoLocation?{longitude:X.geoLocation.longitude,latitude:X.geoLocation.latitude,accuracy:X.geoLocation.accuracy}:void 0)},"#setGeolocation")},g,{kind:"method",name:"#setGeolocation",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,Qm)},metadata:K},null,n),yr(P,k={value:vr(async function(z,X){X.active&&await z.send("Emulation.setDefaultBackgroundColorOverride",{color:X.color})},"#setDefaultBackgroundColor")},v,{kind:"method",name:"#setDefaultBackgroundColor",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,Zm)},metadata:K},null,n),yr(P,b={value:vr(async function(z,X){X.active&&await z.send("Emulation.setScriptExecutionDisabled",{value:!X.javaScriptEnabled})},"#setJavaScriptEnabled")},C,{kind:"method",name:"#setJavaScriptEnabled",static:!1,private:!0,access:{has:z=>Mt(B,z),get:z=>r(z,B,eg)},metadata:K},null,n),K&&Object.defineProperty(P,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:K})})(),P})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class MP{constructor(i,e,t){f(this,Ju);f(this,Xu);f(this,Ga,new WeakMap);y(this,Ju,e),y(this,Xu,t),r(this,Ga).set(i,e)}get id(){return r(this,Ju)}get source(){return r(this,Xu)}getIdForFrame(i){return r(this,Ga).get(i)}setIdForFrame(i,e){r(this,Ga).set(i,e)}}Ju=new WeakMap,Xu=new WeakMap,Ga=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class AP{constructor(i,e){U(this,"id");U(this,"name");this.id=i,this.name=e}}class RP{constructor(i,e,t){f(this,Qu);f(this,Ut);f(this,Yu);f(this,as);f(this,os,!1);f(this,Ja,E(this,Qu,tg).bind(this));f(this,Xa,new Set);U(this,"devices",[]);y(this,Ut,i),y(this,Yu,e),y(this,as,t.id),r(this,Ut).on("DeviceAccess.deviceRequestPrompted",r(this,Ja)),r(this,Ut).on("Target.detachedFromTarget",()=>{y(this,Ut,null)}),E(this,Qu,tg).call(this,t)}async waitForDevice(i,e={}){for(const o of this.devices)if(i(o))return o;const{timeout:t=r(this,Yu).timeout()}=e,s=qe.create({message:`Waiting for \`DeviceRequestPromptDevice\` failed: ${t}ms exceeded`,timeout:t});e.signal&&e.signal.addEventListener("abort",()=>{var o;s.reject((o=e.signal)==null?void 0:o.reason)},{once:!0});const a={filter:i,promise:s};r(this,Xa).add(a);try{return await s.valueOrThrow()}finally{r(this,Xa).delete(a)}}async select(i){return ee(r(this,Ut)!==null,"Cannot select device through detached session!"),ee(this.devices.includes(i),"Cannot select unknown device!"),ee(!r(this,os),"Cannot select DeviceRequestPrompt which is already handled!"),r(this,Ut).off("DeviceAccess.deviceRequestPrompted",r(this,Ja)),y(this,os,!0),await r(this,Ut).send("DeviceAccess.selectPrompt",{id:r(this,as),deviceId:i.id})}async cancel(){return ee(r(this,Ut)!==null,"Cannot cancel prompt through detached session!"),ee(!r(this,os),"Cannot cancel DeviceRequestPrompt which is already handled!"),r(this,Ut).off("DeviceAccess.deviceRequestPrompted",r(this,Ja)),y(this,os,!0),await r(this,Ut).send("DeviceAccess.cancelPrompt",{id:r(this,as)})}}Ut=new WeakMap,Yu=new WeakMap,as=new WeakMap,os=new WeakMap,Ja=new WeakMap,Xa=new WeakMap,Qu=new WeakSet,tg=function(i){if(i.id===r(this,as))for(const e of i.devices){if(this.devices.some(s=>s.id===e.id))continue;const t=new AP(e.id,e.name);this.devices.push(t);for(const s of r(this,Xa))s.filter(t)&&s.promise.resolve(t)}};class FP{constructor(i,e){f(this,ef);f(this,cr);f(this,Ya);f(this,Xr,new Set);y(this,cr,i),y(this,Ya,e),r(this,cr).on("DeviceAccess.deviceRequestPrompted",t=>{E(this,ef,VS).call(this,t)}),r(this,cr).on("Target.detachedFromTarget",()=>{y(this,cr,null)})}async waitForDevicePrompt(i={}){ee(r(this,cr)!==null,"Cannot wait for device prompt through detached session!");const e=r(this,Xr).size===0;let t;e&&(t=r(this,cr).send("DeviceAccess.enable"));const{timeout:s=r(this,Ya).timeout()}=i,a=qe.create({message:`Waiting for \`DeviceRequestPrompt\` failed: ${s}ms exceeded`,timeout:s});i.signal&&i.signal.addEventListener("abort",()=>{var o;a.reject((o=i.signal)==null?void 0:o.reason)},{once:!0}),r(this,Xr).add(a);try{const[o]=await Promise.all([a.valueOrThrow(),t]);return o}finally{r(this,Xr).delete(a)}}}cr=new WeakMap,Ya=new WeakMap,Xr=new WeakMap,ef=new WeakSet,VS=function(i){if(!r(this,Xr).size)return;ee(r(this,cr)!==null);const e=new RP(r(this,cr),r(this,Ya),i);for(const t of r(this,Xr))t.resolve(e);r(this,Xr).clear()};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Qy(n){let i,e;if(!n.exception)i="Error",e=n.text;else{if((n.exception.type!=="object"||n.exception.subtype!=="error")&&!n.exception.objectId)return kn(n.exception);{const c=Zy(n);i=c.name,e=c.message}}const t=e.split(`
`).length,s=new Error(e);s.name=i;const a=s.stack.split(`
`),o=a.splice(0,t);if(a.shift(),n.stackTrace&&a.length<Error.stackTraceLimit)for(const c of n.stackTrace.callFrames.reverse()){if(Bt.isPuppeteerURL(c.url)&&c.url!==Bt.INTERNAL_URL){const u=Bt.parse(c.url);a.unshift(`    at ${c.functionName||u.functionName} (${u.functionName} at ${u.siteString}, <anonymous>:${c.lineNumber}:${c.columnNumber})`)}else a.push(`    at ${c.functionName||"<anonymous>"} (${c.url}:${c.lineNumber}:${c.columnNumber})`);if(a.length>=Error.stackTraceLimit)break}return s.stack=[...o,...a].join(`
`),s}const Zy=n=>{var a,o,c,u;let i="",e;const t=((o=(a=n.exception)==null?void 0:a.description)==null?void 0:o.split(`
    at `))??[],s=Math.min(((c=n.stackTrace)==null?void 0:c.callFrames.length)??0,t.length-1);return t.splice(-s,s),(u=n.exception)!=null&&u.className&&(i=n.exception.className),e=t.join(`
`),i&&e.startsWith(`${i}: `)&&(e=e.slice(i.length+2)),{message:e,name:i}};function DP(n){let i,e;if(!n.exception)i="Error",e=n.text;else{if((n.exception.type!=="object"||n.exception.subtype!=="error")&&!n.exception.objectId)return kn(n.exception);{const c=Zy(n);i=c.name,e=c.message}}const t=new Error(e);t.name=i;const s=t.message.split(`
`).length,a=t.stack.split(`
`).splice(0,s),o=[];if(n.stackTrace){for(const c of n.stackTrace.callFrames)if(o.push(`    at ${c.functionName||"<anonymous>"} (${c.url}:${c.lineNumber+1}:${c.columnNumber+1})`),o.length>=Error.stackTraceLimit)break}return t.stack=[...a,...o].join(`
`),t}function kn(n){if(ee(!n.objectId,"Cannot extract value when objectId is given"),n.unserializableValue){if(n.type==="bigint")return BigInt(n.unserializableValue.replace("n",""));switch(n.unserializableValue){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unsupported unserializable value: "+n.unserializableValue)}}return n.value}function ev(n,i,e){globalThis[i]||Object.assign(globalThis,{[i](...t){const s=globalThis[i];s.args??(s.args=new Map),s.callbacks??(s.callbacks=new Map);const a=(s.lastSeq??0)+1;return s.lastSeq=a,s.args.set(a,t),globalThis[e+i](JSON.stringify({type:n,name:i,seq:a,args:t,isTrivial:!t.some(o=>o instanceof Node)})),new Promise((o,c)=>{s.callbacks.set(a,{resolve(u){s.args.delete(a),o(u)},reject(u){s.args.delete(a),c(u)}})})}})}const ra="puppeteer_";function OP(n,i){return hp(ev,n,i,ra)}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ih extends Cn{constructor(e,t){super();f(this,Qa,!1);f(this,Dt);f(this,Za);y(this,Za,e),y(this,Dt,t)}get disposed(){return r(this,Qa)}get realm(){return r(this,Za)}get client(){return this.realm.environment.client}async jsonValue(){if(!r(this,Dt).objectId)return kn(r(this,Dt));const e=await this.evaluate(t=>t);if(e===void 0)throw new Error("Could not serialize referenced object");return e}asElement(){return null}async dispose(){r(this,Qa)||(y(this,Qa,!0),await tv(this.client,r(this,Dt)))}toString(){return r(this,Dt).objectId?"JSHandle@"+(r(this,Dt).subtype||r(this,Dt).type):"JSHandle:"+kn(r(this,Dt))}get id(){return r(this,Dt).objectId}remoteObject(){return r(this,Dt)}async getProperties(){const e=await this.client.send("Runtime.getProperties",{objectId:r(this,Dt).objectId,ownProperties:!0}),t=new Map;for(const s of e.result)!s.enumerable||!s.value||t.set(s.name,r(this,Za).createCdpHandle(s.value));return t}}Qa=new WeakMap,Dt=new WeakMap,Za=new WeakMap;async function tv(n,i){i.objectId&&await n.send("Runtime.releaseObject",{objectId:i.objectId}).catch(e=>{le(e)})}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var NP=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},Mh=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};const LP=new Set(["StaticText","InlineTextBox"]);let rv=(()=>{var o,c,GS,d;let n=My,i=[],e,t,s,a;return d=class extends n{constructor(l,m){super(new Ih(l,m));f(this,c);f(this,o,NP(this,i))}get realm(){return this.handle.realm}get client(){return this.handle.client}remoteObject(){return this.handle.remoteObject()}get frame(){return this.realm.environment}async contentFrame(){const l=await this.client.send("DOM.describeNode",{objectId:this.id});return typeof l.node.frameId!="string"?null:r(this,c,GS).frame(l.node.frameId)}async scrollIntoView(){await this.assertConnectedElement();try{await this.client.send("DOM.scrollIntoViewIfNeeded",{objectId:this.id})}catch(l){le(l),await super.scrollIntoView()}}async uploadFile(...l){const m=await this.evaluate(w=>w.multiple);ee(l.length<=1||m,"Multiple file uploads only work with <input type=file multiple>");const S=vi.value.path;if(S&&(l=l.map(w=>S.win32.isAbsolute(w)||S.posix.isAbsolute(w)?w:S.resolve(w))),l.length===0){await this.evaluate(w=>{w.files=new DataTransfer().files,w.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),w.dispatchEvent(new Event("change",{bubbles:!0}))});return}const{node:{backendNodeId:g}}=await this.client.send("DOM.describeNode",{objectId:this.id});await this.client.send("DOM.setFileInputFiles",{objectId:this.id,files:l,backendNodeId:g})}async autofill(l){const S=(await this.client.send("DOM.describeNode",{objectId:this.handle.id})).node.backendNodeId,g=this.frame._id;await this.client.send("Autofill.trigger",{fieldId:S,frameId:g,card:l.creditCard})}async*queryAXTree(l,m){const{nodes:S}=await this.client.send("Accessibility.queryAXTree",{objectId:this.id,accessibleName:l,role:m}),g=S.filter(w=>!(w.ignored||!w.role||LP.has(w.role.value)));return yield*Ys.map(g,w=>this.realm.adoptBackendNode(w.backendDOMNodeId))}async backendNodeId(){if(r(this,o))return r(this,o);const{node:l}=await this.client.send("DOM.describeNode",{objectId:this.handle.id});return y(this,o,l.backendNodeId),r(this,o)}},o=new WeakMap,c=new WeakSet,GS=function(){return this.frame._frameManager},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;e=[se()],t=[se(),Te],s=[se(),Te],a=[se()],Mh(d,null,e,{kind:"method",name:"contentFrame",static:!1,private:!1,access:{has:m=>"contentFrame"in m,get:m=>m.contentFrame},metadata:l},null,i),Mh(d,null,t,{kind:"method",name:"scrollIntoView",static:!1,private:!1,access:{has:m=>"scrollIntoView"in m,get:m=>m.scrollIntoView},metadata:l},null,i),Mh(d,null,s,{kind:"method",name:"uploadFile",static:!1,private:!1,access:{has:m=>"uploadFile"in m,get:m=>m.uploadFile},metadata:l},null,i),Mh(d,null,a,{kind:"method",name:"autofill",static:!1,private:!1,access:{has:m=>"autofill"in m,get:m=>m.autofill},metadata:l},null,i),l&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),d})();/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var BP=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},jP=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});const qP=new Th("__ariaQuerySelector",Sn.queryOne,""),$P=new Th("__ariaQuerySelectorAll",async(n,i)=>{const e=Sn.queryAll(n,i);return await n.realm.evaluateHandle((...t)=>t,...await Ys.collect(e))},"");class iv extends pe{constructor(e,t,s){super();f(this,Ot);f(this,Oi);f(this,cs);f(this,ur);f(this,eo);f(this,Zu,new Qe);f(this,us,new Map);f(this,tf,new mp);f(this,ed,!1);f(this,Ni);y(this,Oi,e),y(this,cs,s),y(this,ur,t.id),t.name&&y(this,eo,t.name);const a=r(this,Zu).use(new pe(r(this,Oi)));a.on("Runtime.bindingCalled",E(this,Ot,XS).bind(this)),a.on("Runtime.executionContextDestroyed",async o=>{o.executionContextId===r(this,ur)&&this[we]()}),a.on("Runtime.executionContextsCleared",async()=>{this[we]()}),a.on("Runtime.consoleAPICalled",E(this,Ot,YS).bind(this)),a.on(Ue.Disconnected,()=>{this[we]()})}get id(){return r(this,ur)}get puppeteerUtil(){let e=Promise.resolve();return r(this,ed)||(e=Promise.all([E(this,Ot,rg).call(this,qP),E(this,Ot,rg).call(this,$P)]),y(this,ed,!0)),oc.inject(t=>{r(this,Ni)&&r(this,Ni).then(s=>{s.dispose()}),y(this,Ni,e.then(()=>this.evaluateHandle(t)))},!r(this,Ni)),r(this,Ni)}async evaluate(e,...t){return await E(this,Ot,ig).call(this,!0,e,...t)}async evaluateHandle(e,...t){return await E(this,Ot,ig).call(this,!1,e,...t)}[we](){r(this,Zu).dispose(),this.emit("disposed",void 0)}}Oi=new WeakMap,cs=new WeakMap,ur=new WeakMap,eo=new WeakMap,Zu=new WeakMap,us=new WeakMap,tf=new WeakMap,Ot=new WeakSet,JS=async function(e){const t={stack:[],error:void 0,hasError:!1};try{if(r(this,us).has(e.name))return;const s=BP(t,await r(this,tf).acquire(),!1);try{await r(this,Oi).send("Runtime.addBinding",r(this,eo)?{name:ra+e.name,executionContextName:r(this,eo)}:{name:ra+e.name,executionContextId:r(this,ur)}),await this.evaluate(ev,"internal",e.name,ra),r(this,us).set(e.name,e)}catch(a){if(a instanceof Error&&(a.message.includes("Execution context was destroyed")||a.message.includes("Cannot find context with specified id")))return;le(a)}}catch(s){t.error=s,t.hasError=!0}finally{jP(t)}},XS=async function(e){if(e.executionContextId!==r(this,ur))return;let t;try{t=JSON.parse(e.payload)}catch{return}const{type:s,name:a,seq:o,args:c,isTrivial:u}=t;if(s!=="internal"){this.emit("bindingcalled",e);return}if(!r(this,us).has(a)){this.emit("bindingcalled",e);return}try{const d=r(this,us).get(a);await(d==null?void 0:d.run(this,o,c,u))}catch(d){le(d)}},YS=function(e){e.executionContextId===r(this,ur)&&this.emit("consoleapicalled",e)},ed=new WeakMap,Ni=new WeakMap,rg=async function(e){try{await E(this,Ot,JS).call(this,e)}catch(t){le(t)}},ig=async function(e,t,...s){var m;const a=yy(((m=py(t))==null?void 0:m.toString())??Bt.INTERNAL_URL);if(jr(t)){const S=r(this,ur),g=t,w=hh.test(g)?g:`${g}
${a}
`,{exceptionDetails:v,result:k}=await r(this,Oi).send("Runtime.evaluate",{expression:w,contextId:S,returnByValue:e,awaitPromise:!0,userGesture:!0}).catch(nv);if(v)throw Qy(v);return e?kn(k):r(this,cs).createCdpHandle(k)}const o=mr(t),c=hh.test(o)?o:`${o}
${a}
`;let u;try{u=r(this,Oi).send("Runtime.callFunctionOn",{functionDeclaration:c,executionContextId:r(this,ur),arguments:s.some(S=>S instanceof jt)?await Promise.all(s.map(S=>h(this,S))):s.map(S=>l(this,S)),returnByValue:e,awaitPromise:!0,userGesture:!0})}catch(S){throw S instanceof TypeError&&S.message.startsWith("Converting circular structure to JSON")&&(S.message+=" Recursive objects are not allowed."),S}const{exceptionDetails:d,result:p}=await u.catch(nv);if(d)throw Qy(d);return e?kn(p):r(this,cs).createCdpHandle(p);async function h(S,g){return g instanceof jt&&(g=await g.get(S)),l(S,g)}function l(S,g){if(typeof g=="bigint")return{unserializableValue:`${g.toString()}n`};if(Object.is(g,-0))return{unserializableValue:"-0"};if(Object.is(g,1/0))return{unserializableValue:"Infinity"};if(Object.is(g,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(g,NaN))return{unserializableValue:"NaN"};const w=g&&(g instanceof Ih||g instanceof rv)?g:null;if(w){if(w.realm!==r(S,cs))throw new Error("JSHandles can be evaluated only in the context they were created!");if(w.disposed)throw new Error("JSHandle is disposed!");return w.remoteObject().unserializableValue?{unserializableValue:w.remoteObject().unserializableValue}:w.remoteObject().objectId?{objectId:w.remoteObject().objectId}:{value:w.remoteObject().value}}return{value:g}}};const nv=n=>{if(n.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(n.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};throw n.message.endsWith("Cannot find context with specified id")||n.message.endsWith("Inspected target navigated or closed")?new Error("Execution context was destroyed, most likely because of a navigation."):n};/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var ut;(function(n){n.FrameAttached=Symbol("FrameManager.FrameAttached"),n.FrameNavigated=Symbol("FrameManager.FrameNavigated"),n.FrameDetached=Symbol("FrameManager.FrameDetached"),n.FrameSwapped=Symbol("FrameManager.FrameSwapped"),n.LifecycleEvent=Symbol("FrameManager.LifecycleEvent"),n.FrameNavigatedWithinDocument=Symbol("FrameManager.FrameNavigatedWithinDocument"),n.ConsoleApiCalled=Symbol("FrameManager.ConsoleApiCalled"),n.BindingCalled=Symbol("FrameManager.BindingCalled")})(ut||(ut={}));/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ip extends Wy{constructor(e,t){super(t);f(this,kt);f(this,Pr);f(this,dr,new pe);f(this,Li);y(this,Li,e)}get environment(){return r(this,Li)}get client(){return r(this,Li).client}get emitter(){return r(this,dr)}setContext(e){var t;(t=r(this,Pr))==null||t[we](),e.once("disposed",E(this,kt,QS).bind(this)),e.on("consoleapicalled",E(this,kt,ZS).bind(this)),e.on("bindingcalled",E(this,kt,eC).bind(this)),y(this,Pr,e),r(this,dr).emit("context",e),this.taskManager.rerunAll()}hasContext(){return!!r(this,Pr)}get context(){return r(this,Pr)}async evaluateHandle(e,...t){e=ot(this.evaluateHandle.name,e);let s=E(this,kt,yf).call(this);return s||(s=await E(this,kt,vf).call(this)),await s.evaluateHandle(e,...t)}async evaluate(e,...t){e=ot(this.evaluate.name,e);let s=E(this,kt,yf).call(this);return s||(s=await E(this,kt,vf).call(this)),await s.evaluate(e,...t)}async adoptBackendNode(e){let t=E(this,kt,yf).call(this);t||(t=await E(this,kt,vf).call(this));const{object:s}=await this.client.send("DOM.resolveNode",{backendNodeId:e,executionContextId:t.id});return this.createCdpHandle(s)}async adoptHandle(e){if(e.realm===this)return await e.evaluateHandle(s=>s);const t=await this.client.send("DOM.describeNode",{objectId:e.id});return await this.adoptBackendNode(t.node.backendNodeId)}async transferHandle(e){if(e.realm===this||e.remoteObject().objectId===void 0)return e;const t=await this.client.send("DOM.describeNode",{objectId:e.remoteObject().objectId}),s=await this.adoptBackendNode(t.node.backendNodeId);return await e.dispose(),s}createCdpHandle(e){return e.subtype==="node"?new rv(this,e):new Ih(this,e)}[we](){var e;(e=r(this,Pr))==null||e[we](),r(this,dr).emit("disposed",void 0),super[we](),r(this,dr).removeAllListeners()}}Pr=new WeakMap,dr=new WeakMap,Li=new WeakMap,kt=new WeakSet,QS=function(){y(this,Pr,void 0),"clearDocumentHandle"in r(this,Li)&&r(this,Li).clearDocumentHandle()},ZS=function(e){r(this,dr).emit("consoleapicalled",e)},eC=function(e){r(this,dr).emit("bindingcalled",e)},yf=function(){if(this.disposed)throw new Error(`Execution context is not available in detached frame or worker "${this.environment.url()}" (are you trying to evaluate?)`);return r(this,Pr)},vf=async function(){const e=new Error("Execution context was destroyed");return await st(De(r(this,dr),"context").pipe(yt(De(r(this,dr),"disposed").pipe(Je(()=>{throw e})),Rt(this.timeoutSettings.timeout()))))};/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Sr=Symbol("mainWorld"),Ah=Symbol("puppeteerWorld");/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const KP=new Map([["load","load"],["domcontentloaded","DOMContentLoaded"],["networkidle0","networkIdle"],["networkidle2","networkAlmostIdle"]]);class Mp{constructor(i,e,t,s,a){f(this,ze);f(this,td);f(this,Bi);f(this,to);f(this,ji,null);f(this,ds,new Qe);f(this,rd);f(this,qi);f(this,id,qe.create());f(this,nd,qe.create());f(this,sd,qe.create());f(this,ad);f(this,od);f(this,Yr);Array.isArray(t)?t=t.slice():typeof t=="string"&&(t=[t]),y(this,rd,e._loaderId),y(this,td,t.map(d=>{const p=KP.get(d);return ee(p,"Unknown value for options.waitUntil: "+d),p})),a==null||a.addEventListener("abort",()=>{r(this,qi).reject(a.reason)}),y(this,Bi,e),y(this,to,s),r(this,ds).use(new pe(e._frameManager)).on(ut.LifecycleEvent,E(this,ze,Ls).bind(this));const c=r(this,ds).use(new pe(e));c.on(vt.FrameNavigatedWithinDocument,E(this,ze,sC).bind(this)),c.on(vt.FrameNavigated,E(this,ze,aC).bind(this)),c.on(vt.FrameSwapped,E(this,ze,bf).bind(this)),c.on(vt.FrameSwappedByActivation,E(this,ze,bf).bind(this)),c.on(vt.FrameDetached,E(this,ze,nC).bind(this));const u=r(this,ds).use(new pe(i));u.on(ct.Request,E(this,ze,tC).bind(this)),u.on(ct.Response,E(this,ze,iC).bind(this)),u.on(ct.RequestFailed,E(this,ze,rC).bind(this)),y(this,qi,qe.create({timeout:r(this,to),message:`Navigation timeout of ${r(this,to)} ms exceeded`})),E(this,ze,Ls).call(this)}async navigationResponse(){var i;return await((i=r(this,Yr))==null?void 0:i.valueOrThrow()),r(this,ji)?r(this,ji).response():null}sameDocumentNavigationPromise(){return r(this,id).valueOrThrow()}newDocumentNavigationPromise(){return r(this,sd).valueOrThrow()}lifecyclePromise(){return r(this,nd).valueOrThrow()}terminationPromise(){return r(this,qi).valueOrThrow()}dispose(){r(this,ds).dispose(),r(this,qi).resolve(new Error("LifecycleWatcher disposed"))}}td=new WeakMap,Bi=new WeakMap,to=new WeakMap,ji=new WeakMap,ds=new WeakMap,rd=new WeakMap,qi=new WeakMap,id=new WeakMap,nd=new WeakMap,sd=new WeakMap,ad=new WeakMap,od=new WeakMap,Yr=new WeakMap,ze=new WeakSet,tC=function(i){var e,t;i.frame()!==r(this,Bi)||!i.isNavigationRequest()||(y(this,ji,i),(e=r(this,Yr))==null||e.resolve(),y(this,Yr,qe.create()),i.response()!==null&&((t=r(this,Yr))==null||t.resolve()))},rC=function(i){var e,t;((e=r(this,ji))==null?void 0:e.id)===i.id&&((t=r(this,Yr))==null||t.resolve())},iC=function(i){var e,t;((e=r(this,ji))==null?void 0:e.id)===i.request().id&&((t=r(this,Yr))==null||t.resolve())},nC=function(i){if(r(this,Bi)===i){r(this,qi).resolve(new Error("Navigating frame was detached"));return}E(this,ze,Ls).call(this)},sC=function(){y(this,ad,!0),E(this,ze,Ls).call(this)},aC=function(i){if(i==="BackForwardCacheRestore")return E(this,ze,bf).call(this);E(this,ze,Ls).call(this)},bf=function(){y(this,od,!0),E(this,ze,Ls).call(this)},Ls=function(){if(!i(r(this,Bi),r(this,td)))return;r(this,nd).resolve(),r(this,ad)&&r(this,id).resolve(void 0),(r(this,od)||r(this,Bi)._loaderId!==r(this,rd))&&r(this,sd).resolve(void 0);function i(e,t){for(const s of t)if(!e._lifecycleEvents.has(s))return!1;for(const s of e.childFrames())if(s._hasStartedLoading&&!i(s,t))return!1;return!0}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var UP=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},En=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};let sv=(()=>{var d,p,h,l,oC,cC,uC,w;let n=Ry,i=[],e,t,s,a,o,c,u;return w=class extends n{constructor(C,b,D,A){super();f(this,l);f(this,d,(UP(this,i),""));f(this,p,!1);f(this,h);U(this,"_frameManager");U(this,"_loaderId","");U(this,"_lifecycleEvents",new Set);U(this,"_id");U(this,"_parentId");U(this,"accessibility");U(this,"worlds");this._frameManager=C,y(this,d,""),this._id=b,this._parentId=D,y(this,p,!1),y(this,h,A),this._loaderId="",this.worlds={[Sr]:new Ip(this,this._frameManager.timeoutSettings),[Ah]:new Ip(this,this._frameManager.timeoutSettings)},this.accessibility=new Vy(this.worlds[Sr],b),this.on(vt.FrameSwappedByActivation,()=>{this._onLoadingStarted(),this._onLoadingStopped()}),this.worlds[Sr].emitter.on("consoleapicalled",E(this,l,oC).bind(this)),this.worlds[Sr].emitter.on("bindingcalled",E(this,l,cC).bind(this))}_client(){return r(this,h)}updateId(C){this._id=C}updateClient(C){y(this,h,C)}page(){return this._frameManager.page()}async goto(C,b={}){const{referer:D=this._frameManager.networkManager.extraHTTPHeaders().referer,referrerPolicy:A=this._frameManager.networkManager.extraHTTPHeaders()["referer-policy"],waitUntil:R=["load"],timeout:x=this._frameManager.timeoutSettings.navigationTimeout()}=b;let N=!1;const M=new Mp(this._frameManager.networkManager,this,R,x);let O=await qe.race([T(r(this,h),C,D,A,this._id),M.terminationPromise()]);O||(O=await qe.race([M.terminationPromise(),N?M.newDocumentNavigationPromise():M.sameDocumentNavigationPromise()]));try{if(O)throw O;return await M.navigationResponse()}finally{M.dispose()}async function T(_,j,$,J,L){try{const F=await _.send("Page.navigate",{url:j,referrer:$,frameId:L,referrerPolicy:J});return N=!!F.loaderId,F.errorText==="net::ERR_HTTP_RESPONSE_CODE_FAILURE"?null:F.errorText?new Error(`${F.errorText} at ${j}`):null}catch(F){if(Xt(F))return F;throw F}}}async waitForNavigation(C={}){const{waitUntil:b=["load"],timeout:D=this._frameManager.timeoutSettings.navigationTimeout(),signal:A}=C,R=new Mp(this._frameManager.networkManager,this,b,D,A),x=await qe.race([R.terminationPromise(),...C.ignoreSameDocumentNavigation?[]:[R.sameDocumentNavigationPromise()],R.newDocumentNavigationPromise()]);try{if(x)throw x;const N=await qe.race([R.terminationPromise(),R.navigationResponse()]);if(N instanceof Error)throw x;return N||null}finally{R.dispose()}}get client(){return r(this,h)}mainRealm(){return this.worlds[Sr]}isolatedRealm(){return this.worlds[Ah]}async setContent(C,b={}){const{waitUntil:D=["load"],timeout:A=this._frameManager.timeoutSettings.navigationTimeout()}=b;await this.setFrameContent(C);const R=new Mp(this._frameManager.networkManager,this,D,A),x=await qe.race([R.terminationPromise(),R.lifecyclePromise()]);if(R.dispose(),x)throw x}url(){return r(this,d)}parentFrame(){return this._frameManager._frameTree.parentFrame(this._id)||null}childFrames(){return this._frameManager._frameTree.childFrames(this._id)}async addPreloadScript(C){const b=this.parentFrame();if(b&&r(this,h)===b.client||C.getIdForFrame(this))return;const{identifier:D}=await r(this,h).send("Page.addScriptToEvaluateOnNewDocument",{source:C.source});C.setIdForFrame(this,D)}async addExposedFunctionBinding(C){this!==this._frameManager.mainFrame()&&!this._hasStartedLoading||await Promise.all([r(this,h).send("Runtime.addBinding",{name:ra+C.name}),this.evaluate(C.initSource).catch(le)])}async removeExposedFunctionBinding(C){this!==this._frameManager.mainFrame()&&!this._hasStartedLoading||await Promise.all([r(this,h).send("Runtime.removeBinding",{name:ra+C.name}),this.evaluate(b=>{globalThis[b]=void 0},C.name).catch(le)])}async waitForDevicePrompt(C={}){return await E(this,l,uC).call(this).waitForDevicePrompt(C)}_navigated(C){this._name=C.name,y(this,d,`${C.url}${C.urlFragment||""}`)}_navigatedWithinDocument(C){y(this,d,C)}_onLifecycleEvent(C,b){b==="init"&&(this._loaderId=C,this._lifecycleEvents.clear()),this._lifecycleEvents.add(b)}_onLoadingStopped(){this._lifecycleEvents.add("DOMContentLoaded"),this._lifecycleEvents.add("load")}_onLoadingStarted(){this._hasStartedLoading=!0}get detached(){return r(this,p)}[(e=[xe],t=[xe],s=[xe],a=[xe],o=[xe],c=[xe],u=[xe],we)](){r(this,p)||(y(this,p,!0),this.worlds[Sr][we](),this.worlds[Ah][we]())}exposeFunction(){throw new be}async frameElement(){const C=this.parentFrame();if(!C)return null;const{backendNodeId:b}=await C.client.send("DOM.getFrameOwner",{frameId:this._id});return await C.mainRealm().adoptBackendNode(b)}},d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakSet,oC=function(C){this._frameManager.emit(ut.ConsoleApiCalled,[this.worlds[Sr],C])},cC=function(C){this._frameManager.emit(ut.BindingCalled,[this.worlds[Sr],C])},uC=function(){return this._frameManager._deviceRequestPromptManager(r(this,h))},(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;En(w,null,e,{kind:"method",name:"goto",static:!1,private:!1,access:{has:b=>"goto"in b,get:b=>b.goto},metadata:C},null,i),En(w,null,t,{kind:"method",name:"waitForNavigation",static:!1,private:!1,access:{has:b=>"waitForNavigation"in b,get:b=>b.waitForNavigation},metadata:C},null,i),En(w,null,s,{kind:"method",name:"setContent",static:!1,private:!1,access:{has:b=>"setContent"in b,get:b=>b.setContent},metadata:C},null,i),En(w,null,a,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:b=>"addPreloadScript"in b,get:b=>b.addPreloadScript},metadata:C},null,i),En(w,null,o,{kind:"method",name:"addExposedFunctionBinding",static:!1,private:!1,access:{has:b=>"addExposedFunctionBinding"in b,get:b=>b.addExposedFunctionBinding},metadata:C},null,i),En(w,null,c,{kind:"method",name:"removeExposedFunctionBinding",static:!1,private:!1,access:{has:b=>"removeExposedFunctionBinding"in b,get:b=>b.removeExposedFunctionBinding},metadata:C},null,i),En(w,null,u,{kind:"method",name:"waitForDevicePrompt",static:!1,private:!1,access:{has:b=>"waitForDevicePrompt"in b,get:b=>b.waitForDevicePrompt},metadata:C},null,i),C&&Object.defineProperty(w,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C})})(),w})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class HP{constructor(){f(this,ls,new Map);f(this,ro,new Map);f(this,$i,new Map);f(this,io);f(this,no,!1);f(this,cd,new Map)}getMainFrame(){return r(this,io)}getById(i){return r(this,ls).get(i)}waitForFrame(i){const e=this.getById(i);if(e)return Promise.resolve(e);const t=qe.create();return(r(this,cd).get(i)||new Set).add(t),t.valueOrThrow()}frames(){return Array.from(r(this,ls).values())}addFrame(i){var e;r(this,ls).set(i._id,i),i._parentId?(r(this,ro).set(i._id,i._parentId),r(this,$i).has(i._parentId)||r(this,$i).set(i._parentId,new Set),r(this,$i).get(i._parentId).add(i._id)):(!r(this,io)||r(this,no))&&(y(this,io,i),y(this,no,!1)),(e=r(this,cd).get(i._id))==null||e.forEach(t=>t.resolve(i))}removeFrame(i){var e;r(this,ls).delete(i._id),r(this,ro).delete(i._id),i._parentId?(e=r(this,$i).get(i._parentId))==null||e.delete(i._id):y(this,no,!0)}childFrames(i){const e=r(this,$i).get(i);return e?Array.from(e).map(t=>this.getById(t)).filter(t=>t!==void 0):[]}parentFrame(i){const e=r(this,ro).get(i);return e?this.getById(e):void 0}}ls=new WeakMap,ro=new WeakMap,$i=new WeakMap,io=new WeakMap,no=new WeakMap,cd=new WeakMap;class Ap extends Ph{constructor(e,t,s,a,o,c){super();U(this,"id");f(this,_r);f(this,ud);f(this,dd);f(this,ld);f(this,hd);f(this,fd,!1);f(this,pd);f(this,md,{});f(this,gd);f(this,wd);y(this,_r,e),this.id=o.requestId,y(this,ud,o.requestId===o.loaderId&&o.type==="Document"),this._interceptionId=s,y(this,dd,o.request.url+(o.request.urlFragment??"")),y(this,ld,(o.type||"other").toLowerCase()),y(this,hd,o.request.method),y(this,pd,o.request.postData),y(this,fd,o.request.hasPostData??!1),y(this,gd,t),this._redirectChain=c,y(this,wd,o.initiator),this.interception.enabled=a;for(const[u,d]of Object.entries(o.request.headers))r(this,md)[u.toLowerCase()]=d}get client(){return r(this,_r)}set client(e){y(this,_r,e)}url(){return r(this,dd)}resourceType(){return r(this,ld)}method(){return r(this,hd)}postData(){return r(this,pd)}hasPostData(){return r(this,fd)}async fetchPostData(){try{return(await r(this,_r).send("Network.getRequestPostData",{requestId:this.id})).postData}catch(e){le(e);return}}headers(){return r(this,md)}response(){return this._response}frame(){return r(this,gd)}isNavigationRequest(){return r(this,ud)}initiator(){return r(this,wd)}redirectChain(){return this._redirectChain.slice()}failure(){return this._failureText?{errorText:this._failureText}:null}async _continue(e={}){const{url:t,method:s,postData:a,headers:o}=e;this.interception.handled=!0;const c=a?ly(a):void 0;if(this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.continueRequest");await r(this,_r).send("Fetch.continueRequest",{requestId:this._interceptionId,url:t,method:s,postData:c,headers:o?Fy(o):void 0}).catch(u=>(this.interception.handled=!1,_h(u)))}async _respond(e){this.interception.handled=!0;let t;e.body&&(t=Ph.getResponse(e.body));const s={};if(e.headers)for(const o of Object.keys(e.headers)){const c=e.headers[o];s[o.toLowerCase()]=Array.isArray(c)?c.map(u=>String(u)):String(c)}e.contentType&&(s["content-type"]=e.contentType),t!=null&&t.contentLength&&!("content-length"in s)&&(s["content-length"]=String(t.contentLength));const a=e.status||200;if(this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest");await r(this,_r).send("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:a,responsePhrase:Dy[a],responseHeaders:Fy(s),body:t==null?void 0:t.base64}).catch(o=>(this.interception.handled=!1,_h(o)))}async _abort(e){if(this.interception.handled=!0,this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.failRequest");await r(this,_r).send("Fetch.failRequest",{requestId:this._interceptionId,errorReason:e||"Failed"}).catch(_h)}}_r=new WeakMap,ud=new WeakMap,dd=new WeakMap,ld=new WeakMap,hd=new WeakMap,fd=new WeakMap,pd=new WeakMap,md=new WeakMap,gd=new WeakMap,wd=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class av{constructor(i){f(this,yd);f(this,vd);f(this,bd);f(this,Sd);f(this,Cd);f(this,kd);y(this,yd,i.subjectName),y(this,vd,i.issuer),y(this,bd,i.validFrom),y(this,Sd,i.validTo),y(this,Cd,i.protocol),y(this,kd,i.sanList)}issuer(){return r(this,vd)}validFrom(){return r(this,bd)}validTo(){return r(this,Sd)}protocol(){return r(this,Cd)}subjectName(){return r(this,yd)}subjectAlternativeNames(){return r(this,kd)}}yd=new WeakMap,vd=new WeakMap,bd=new WeakMap,Sd=new WeakMap,Cd=new WeakMap,kd=new WeakMap;class ov extends Oy{constructor(e,t,s){super();f(this,rf);f(this,Tr);f(this,so,null);f(this,ao,qe.create());f(this,Ed);f(this,xd);f(this,Pd);f(this,_d);f(this,Td);f(this,Id,{});f(this,Md);f(this,Ad);y(this,Tr,e),y(this,Ed,{ip:t.remoteIPAddress,port:t.remotePort}),y(this,Pd,E(this,rf,dC).call(this,s)||t.statusText),y(this,_d,!!t.fromDiskCache),y(this,Td,!!t.fromServiceWorker),y(this,xd,s?s.statusCode:t.status);const a=s?s.headers:t.headers;for(const[o,c]of Object.entries(a))r(this,Id)[o.toLowerCase()]=c;y(this,Md,t.securityDetails?new av(t.securityDetails):null),y(this,Ad,t.timing||null)}_resolveBody(e){return e?r(this,ao).reject(e):r(this,ao).resolve()}remoteAddress(){return r(this,Ed)}url(){return r(this,Tr).url()}status(){return r(this,xd)}statusText(){return r(this,Pd)}headers(){return r(this,Id)}securityDetails(){return r(this,Md)}timing(){return r(this,Ad)}content(){return r(this,so)||y(this,so,r(this,ao).valueOrThrow().then(async()=>{try{const e=await r(this,Tr).client.send("Network.getResponseBody",{requestId:r(this,Tr).id});return dp(e.body,e.base64Encoded)}catch(e){throw e instanceof vn&&e.originalMessage==="No resource with given identifier found"?new vn("Could not load body for this request. This might happen if the request is a preflight request."):e}})),r(this,so)}request(){return r(this,Tr)}fromCache(){return r(this,_d)||r(this,Tr)._fromMemoryCache}fromServiceWorker(){return r(this,Td)}frame(){return r(this,Tr).frame()}}Tr=new WeakMap,so=new WeakMap,ao=new WeakMap,Ed=new WeakMap,xd=new WeakMap,Pd=new WeakMap,_d=new WeakMap,Td=new WeakMap,Id=new WeakMap,Md=new WeakMap,Ad=new WeakMap,rf=new WeakSet,dC=function(e){if(!e||!e.headersText)return;const t=e.headersText.split("\r",1)[0];if(!t||t.length>1e3)return;const s=t.match(/[^ ]* [^ ]* (.*)/);if(!s)return;const a=s[1];if(a)return a};/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class WP{constructor(){f(this,Ki,new Map);f(this,Ui,new Map);f(this,Hi,new Map);f(this,Wi,new Map);f(this,hs,new Map);f(this,fs,new Map)}forget(i){r(this,Ki).delete(i),r(this,Ui).delete(i),r(this,fs).delete(i),r(this,hs).delete(i),r(this,Wi).delete(i)}responseExtraInfo(i){return r(this,Wi).has(i)||r(this,Wi).set(i,[]),r(this,Wi).get(i)}queuedRedirectInfo(i){return r(this,hs).has(i)||r(this,hs).set(i,[]),r(this,hs).get(i)}queueRedirectInfo(i,e){this.queuedRedirectInfo(i).push(e)}takeQueuedRedirectInfo(i){return this.queuedRedirectInfo(i).shift()}inFlightRequestsCount(){let i=0;for(const e of r(this,Hi).values())e.response()||i++;return i}storeRequestWillBeSent(i,e){r(this,Ki).set(i,e)}getRequestWillBeSent(i){return r(this,Ki).get(i)}forgetRequestWillBeSent(i){r(this,Ki).delete(i)}getRequestPaused(i){return r(this,Ui).get(i)}forgetRequestPaused(i){r(this,Ui).delete(i)}storeRequestPaused(i,e){r(this,Ui).set(i,e)}getRequest(i){return r(this,Hi).get(i)}storeRequest(i,e){r(this,Hi).set(i,e)}forgetRequest(i){r(this,Hi).delete(i)}getQueuedEventGroup(i){return r(this,fs).get(i)}queueEventGroup(i,e){r(this,fs).set(i,e)}forgetQueuedEventGroup(i){r(this,fs).delete(i)}printState(){function i(e,t){return t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t instanceof Ap?{dataType:"CdpHTTPRequest",value:`${t.id}: ${t.url()}`}:t}console.log("httpRequestsMap",JSON.stringify(r(this,Hi),i,2)),console.log("requestWillBeSentMap",JSON.stringify(r(this,Ki),i,2)),console.log("requestWillBeSentMap",JSON.stringify(r(this,Wi),i,2)),console.log("requestWillBeSentMap",JSON.stringify(r(this,Ui),i,2))}}Ki=new WeakMap,Ui=new WeakMap,Hi=new WeakMap,Wi=new WeakMap,hs=new WeakMap,fs=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class zP extends pe{constructor(e){super();f(this,ue);f(this,oo);f(this,Me,new WP);f(this,ps);f(this,zi,null);f(this,co,new Set);f(this,Ir,!1);f(this,Qr,!1);f(this,Vi);f(this,Et);f(this,uo);f(this,Rd);f(this,nf,[["Fetch.requestPaused",E(this,ue,pC)],["Fetch.authRequired",E(this,ue,fC)],["Network.requestWillBeSent",E(this,ue,hC)],["Network.requestServedFromCache",E(this,ue,gC)],["Network.responseReceived",E(this,ue,yC)],["Network.loadingFinished",E(this,ue,bC)],["Network.loadingFailed",E(this,ue,SC)],["Network.responseReceivedExtraInfo",E(this,ue,vC)],[Ue.Disconnected,E(this,ue,lC)]]);f(this,Gi,new Map);y(this,oo,e)}async addClient(e){if(r(this,Gi).has(e))return;const t=new Qe;r(this,Gi).set(e,t);const s=t.use(new pe(e));for(const[a,o]of r(this,nf))s.on(a,c=>o.bind(this)(e,c));await Promise.all([e.send("Network.enable"),E(this,ue,ng).call(this,e),E(this,ue,Sf).call(this,e),E(this,ue,Bl).call(this,e),E(this,ue,Cf).call(this,e),E(this,ue,sg).call(this,e)])}async authenticate(e){y(this,zi,e);const t=r(this,Ir)||!!r(this,zi);t!==r(this,Qr)&&(y(this,Qr,t),await E(this,ue,hn).call(this,E(this,ue,Cf).bind(this)))}async setExtraHTTPHeaders(e){const t={};for(const[s,a]of Object.entries(e))ee(jr(a),`Expected value of header "${s}" to be String, but "${typeof a}" is found.`),t[s.toLowerCase()]=a;y(this,ps,t),await E(this,ue,hn).call(this,E(this,ue,ng).bind(this))}extraHTTPHeaders(){return Object.assign({},r(this,ps))}inFlightRequestsCount(){return r(this,Me).inFlightRequestsCount()}async setOfflineMode(e){r(this,Et)||y(this,Et,{offline:!1,upload:-1,download:-1,latency:0}),r(this,Et).offline=e,await E(this,ue,hn).call(this,E(this,ue,Sf).bind(this))}async emulateNetworkConditions(e){r(this,Et)||y(this,Et,{offline:!1,upload:-1,download:-1,latency:0}),r(this,Et).upload=e?e.upload:-1,r(this,Et).download=e?e.download:-1,r(this,Et).latency=e?e.latency:0,await E(this,ue,hn).call(this,E(this,ue,Sf).bind(this))}async setUserAgent(e,t){y(this,uo,e),y(this,Rd,t),await E(this,ue,hn).call(this,E(this,ue,sg).bind(this))}async setCacheEnabled(e){y(this,Vi,!e),await E(this,ue,hn).call(this,E(this,ue,Bl).bind(this))}async setRequestInterception(e){y(this,Ir,e);const t=r(this,Ir)||!!r(this,zi);t!==r(this,Qr)&&(y(this,Qr,t),await E(this,ue,hn).call(this,E(this,ue,Cf).bind(this)))}}oo=new WeakMap,Me=new WeakMap,ps=new WeakMap,zi=new WeakMap,co=new WeakMap,Ir=new WeakMap,Qr=new WeakMap,Vi=new WeakMap,Et=new WeakMap,uo=new WeakMap,Rd=new WeakMap,nf=new WeakMap,Gi=new WeakMap,ue=new WeakSet,lC=async function(e){var t;(t=r(this,Gi).get(e))==null||t.dispose(),r(this,Gi).delete(e)},ng=async function(e){r(this,ps)!==void 0&&await e.send("Network.setExtraHTTPHeaders",{headers:r(this,ps)})},hn=async function(e){await Promise.all(Array.from(r(this,Gi).keys()).map(t=>e(t)))},Sf=async function(e){r(this,Et)!==void 0&&await e.send("Network.emulateNetworkConditions",{offline:r(this,Et).offline,latency:r(this,Et).latency,uploadThroughput:r(this,Et).upload,downloadThroughput:r(this,Et).download})},sg=async function(e){r(this,uo)!==void 0&&await e.send("Network.setUserAgentOverride",{userAgent:r(this,uo),userAgentMetadata:r(this,Rd)})},Cf=async function(e){r(this,Vi)===void 0&&y(this,Vi,!1),r(this,Qr)?await Promise.all([E(this,ue,Bl).call(this,e),e.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([E(this,ue,Bl).call(this,e),e.send("Fetch.disable")])},Bl=async function(e){r(this,Vi)!==void 0&&await e.send("Network.setCacheDisabled",{cacheDisabled:r(this,Vi)})},hC=function(e,t){if(r(this,Ir)&&!t.request.url.startsWith("data:")){const{requestId:s}=t;r(this,Me).storeRequestWillBeSent(s,t);const a=r(this,Me).getRequestPaused(s);if(a){const{requestId:o}=a;E(this,ue,ag).call(this,t,a),E(this,ue,Wo).call(this,e,t,o),r(this,Me).forgetRequestPaused(s)}return}E(this,ue,Wo).call(this,e,t,void 0)},fC=function(e,t){let s="Default";r(this,co).has(t.requestId)?s="CancelAuth":r(this,zi)&&(s="ProvideCredentials",r(this,co).add(t.requestId));const{username:a,password:o}=r(this,zi)||{username:void 0,password:void 0};e.send("Fetch.continueWithAuth",{requestId:t.requestId,authChallengeResponse:{response:s,username:a,password:o}}).catch(le)},pC=function(e,t){!r(this,Ir)&&r(this,Qr)&&e.send("Fetch.continueRequest",{requestId:t.requestId}).catch(le);const{networkId:s,requestId:a}=t;if(!s){E(this,ue,mC).call(this,e,t);return}const o=(()=>{const c=r(this,Me).getRequestWillBeSent(s);if(c&&(c.request.url!==t.request.url||c.request.method!==t.request.method)){r(this,Me).forgetRequestWillBeSent(s);return}return c})();o?(E(this,ue,ag).call(this,o,t),E(this,ue,Wo).call(this,e,o,a)):r(this,Me).storeRequestPaused(s,t)},ag=function(e,t){e.request.headers={...e.request.headers,...t.request.headers}},mC=function(e,t){const s=t.frameId?r(this,oo).frame(t.frameId):null,a=new Ap(e,s,t.requestId,r(this,Ir),t,[]);this.emit(ct.Request,a),a.finalizeInterceptions()},Wo=function(e,t,s,a=!1){let o=[];if(t.redirectResponse){let d=null;if(t.redirectHasExtraInfo&&(d=r(this,Me).responseExtraInfo(t.requestId).shift(),!d)){r(this,Me).queueRedirectInfo(t.requestId,{event:t,fetchRequestId:s});return}const p=r(this,Me).getRequest(t.requestId);p&&(E(this,ue,wC).call(this,e,p,t.redirectResponse,d),o=p._redirectChain)}const c=t.frameId?r(this,oo).frame(t.frameId):null,u=new Ap(e,c,s,r(this,Ir),t,o);u._fromMemoryCache=a,r(this,Me).storeRequest(t.requestId,u),this.emit(ct.Request,u),u.finalizeInterceptions()},gC=function(e,t){const s=r(this,Me).getRequestWillBeSent(t.requestId);let a=r(this,Me).getRequest(t.requestId);if(a&&(a._fromMemoryCache=!0),!a&&s&&(E(this,ue,Wo).call(this,e,s,void 0,!0),a=r(this,Me).getRequest(t.requestId)),!a){le(new Error(`Request ${t.requestId} was served from cache but we could not find the corresponding request object`));return}this.emit(ct.RequestServedFromCache,a)},wC=function(e,t,s,a){const o=new ov(t,s,a);t._response=o,t._redirectChain.push(t),o._resolveBody(new Error("Response body is unavailable for redirect responses")),E(this,ue,kf).call(this,t,!1),this.emit(ct.Response,o),this.emit(ct.RequestFinished,t)},og=function(e,t,s){const a=r(this,Me).getRequest(t.requestId);if(!a)return;r(this,Me).responseExtraInfo(t.requestId).length&&le(new Error("Unexpected extraInfo events for request "+t.requestId)),t.response.fromDiskCache&&(s=null);const c=new ov(a,t.response,s);a._response=c,this.emit(ct.Response,c)},yC=function(e,t){const s=r(this,Me).getRequest(t.requestId);let a=null;if(s&&!s._fromMemoryCache&&t.hasExtraInfo&&(a=r(this,Me).responseExtraInfo(t.requestId).shift(),!a)){r(this,Me).queueEventGroup(t.requestId,{responseReceivedEvent:t});return}E(this,ue,og).call(this,e,t,a)},vC=function(e,t){const s=r(this,Me).takeQueuedRedirectInfo(t.requestId);if(s){r(this,Me).responseExtraInfo(t.requestId).push(t),E(this,ue,Wo).call(this,e,s.event,s.fetchRequestId);return}const a=r(this,Me).getQueuedEventGroup(t.requestId);if(a){r(this,Me).forgetQueuedEventGroup(t.requestId),E(this,ue,og).call(this,e,a.responseReceivedEvent,t),a.loadingFinishedEvent&&E(this,ue,cg).call(this,e,a.loadingFinishedEvent),a.loadingFailedEvent&&E(this,ue,ug).call(this,e,a.loadingFailedEvent);return}r(this,Me).responseExtraInfo(t.requestId).push(t)},kf=function(e,t){const s=e.id,a=e._interceptionId;r(this,Me).forgetRequest(s),a!==void 0&&r(this,co).delete(a),t&&r(this,Me).forget(s)},bC=function(e,t){const s=r(this,Me).getQueuedEventGroup(t.requestId);s?s.loadingFinishedEvent=t:E(this,ue,cg).call(this,e,t)},cg=function(e,t){var a;const s=r(this,Me).getRequest(t.requestId);s&&(E(this,ue,dg).call(this,e,s),s.response()&&((a=s.response())==null||a._resolveBody()),E(this,ue,kf).call(this,s,!0),this.emit(ct.RequestFinished,s))},SC=function(e,t){const s=r(this,Me).getQueuedEventGroup(t.requestId);s?s.loadingFailedEvent=t:E(this,ue,ug).call(this,e,t)},ug=function(e,t){const s=r(this,Me).getRequest(t.requestId);if(!s)return;E(this,ue,dg).call(this,e,s),s._failureText=t.errorText;const a=s.response();a&&a._resolveBody(),E(this,ue,kf).call(this,s,!0),this.emit(ct.RequestFailed,s)},dg=function(e,t){e!==t.client&&t.isNavigationRequest()&&(t.client=e)};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const VP=100;class GP extends pe{constructor(e,t,s){super();f(this,Pe);f(this,Fd);f(this,Ji);f(this,lo);f(this,Dd,new Set);f(this,er);f(this,ms,new Map);f(this,ho,new Set);U(this,"_frameTree",new HP);f(this,gs,new Set);f(this,Od,new WeakMap);f(this,Tt);y(this,er,e),y(this,Fd,t),y(this,Ji,new zP(this)),y(this,lo,s),this.setupEventListeners(r(this,er)),e.once(Ue.Disconnected,()=>{E(this,Pe,lg).call(this).catch(le)})}get timeoutSettings(){return r(this,lo)}get networkManager(){return r(this,Ji)}get client(){return r(this,er)}async swapFrameTree(e){y(this,er,e),ee(r(this,er)instanceof ta,"CDPSession is not an instance of CDPSessionImpl.");const t=this._frameTree.getMainFrame();t&&(r(this,gs).add(r(this,er)._target()._targetId),this._frameTree.removeFrame(t),t.updateId(r(this,er)._target()._targetId),this._frameTree.addFrame(t),t.updateClient(e)),this.setupEventListeners(e),e.once(Ue.Disconnected,()=>{E(this,Pe,lg).call(this).catch(le)}),await this.initialize(e,t),await r(this,Ji).addClient(e),t&&t.emit(vt.FrameSwappedByActivation,void 0)}async registerSpeculativeSession(e){await r(this,Ji).addClient(e)}setupEventListeners(e){e.on("Page.frameAttached",async t=>{var s;await((s=r(this,Tt))==null?void 0:s.valueOrThrow()),E(this,Pe,fg).call(this,e,t.frameId,t.parentFrameId)}),e.on("Page.frameNavigated",async t=>{var s;r(this,gs).add(t.frame.id),await((s=r(this,Tt))==null?void 0:s.valueOrThrow()),E(this,Pe,pg).call(this,t.frame,t.type)}),e.on("Page.navigatedWithinDocument",async t=>{var s;await((s=r(this,Tt))==null?void 0:s.valueOrThrow()),E(this,Pe,PC).call(this,t.frameId,t.url)}),e.on("Page.frameDetached",async t=>{var s;await((s=r(this,Tt))==null?void 0:s.valueOrThrow()),E(this,Pe,_C).call(this,t.frameId,t.reason)}),e.on("Page.frameStartedLoading",async t=>{var s;await((s=r(this,Tt))==null?void 0:s.valueOrThrow()),E(this,Pe,kC).call(this,t.frameId)}),e.on("Page.frameStoppedLoading",async t=>{var s;await((s=r(this,Tt))==null?void 0:s.valueOrThrow()),E(this,Pe,EC).call(this,t.frameId)}),e.on("Runtime.executionContextCreated",async t=>{var s;await((s=r(this,Tt))==null?void 0:s.valueOrThrow()),E(this,Pe,TC).call(this,t.context,e)}),e.on("Page.lifecycleEvent",async t=>{var s;await((s=r(this,Tt))==null?void 0:s.valueOrThrow()),E(this,Pe,CC).call(this,t)})}async initialize(e,t){var s,a;try{(s=r(this,Tt))==null||s.resolve(),y(this,Tt,qe.create()),await Promise.all([r(this,Ji).addClient(e),e.send("Page.enable"),e.send("Page.getFrameTree").then(({frameTree:o})=>{var c;E(this,Pe,hg).call(this,e,o),(c=r(this,Tt))==null||c.resolve()}),e.send("Page.setLifecycleEventsEnabled",{enabled:!0}),e.send("Runtime.enable").then(()=>E(this,Pe,xC).call(this,e,wy)),...(t?Array.from(r(this,ms).values()):[]).map(o=>t==null?void 0:t.addPreloadScript(o)),...(t?Array.from(r(this,ho).values()):[]).map(o=>t==null?void 0:t.addExposedFunctionBinding(o))])}catch(o){if((a=r(this,Tt))==null||a.resolve(),Xt(o)&&Tp(o))return;throw o}}page(){return r(this,Fd)}mainFrame(){const e=this._frameTree.getMainFrame();return ee(e,"Requesting main frame too early!"),e}frames(){return Array.from(this._frameTree.frames())}frame(e){return this._frameTree.getById(e)||null}async addExposedFunctionBinding(e){r(this,ho).add(e),await Promise.all(this.frames().map(async t=>await t.addExposedFunctionBinding(e)))}async removeExposedFunctionBinding(e){r(this,ho).delete(e),await Promise.all(this.frames().map(async t=>await t.removeExposedFunctionBinding(e)))}async evaluateOnNewDocument(e){const{identifier:t}=await this.mainFrame()._client().send("Page.addScriptToEvaluateOnNewDocument",{source:e}),s=new MP(this.mainFrame(),t,e);return r(this,ms).set(t,s),await Promise.all(this.frames().map(async a=>await a.addPreloadScript(s))),{identifier:t}}async removeScriptToEvaluateOnNewDocument(e){const t=r(this,ms).get(e);if(!t)throw new Error(`Script to evaluate on new document with id ${e} not found`);r(this,ms).delete(e),await Promise.all(this.frames().map(s=>{const a=t.getIdForFrame(s);if(a)return s._client().send("Page.removeScriptToEvaluateOnNewDocument",{identifier:a}).catch(le)}))}onAttachedToTarget(e){if(e._getTargetInfo().type!=="iframe")return;const t=this.frame(e._getTargetInfo().targetId);t&&t.updateClient(e._session()),this.setupEventListeners(e._session()),this.initialize(e._session(),t)}_deviceRequestPromptManager(e){let t=r(this,Od).get(e);return t===void 0&&(t=new FP(e,r(this,lo)),r(this,Od).set(e,t)),t}}Fd=new WeakMap,Ji=new WeakMap,lo=new WeakMap,Dd=new WeakMap,er=new WeakMap,ms=new WeakMap,ho=new WeakMap,gs=new WeakMap,Od=new WeakMap,Tt=new WeakMap,Pe=new WeakSet,lg=async function(){const e=this._frameTree.getMainFrame();if(!e)return;for(const s of e.childFrames())E(this,Pe,zo).call(this,s);const t=qe.create({timeout:VP,message:"Frame was not swapped"});e.once(vt.FrameSwappedByActivation,()=>{t.resolve()});try{await t.valueOrThrow()}catch{E(this,Pe,zo).call(this,e)}},CC=function(e){const t=this.frame(e.frameId);t&&(t._onLifecycleEvent(e.loaderId,e.name),this.emit(ut.LifecycleEvent,t),t.emit(vt.LifecycleEvent,void 0))},kC=function(e){const t=this.frame(e);t&&t._onLoadingStarted()},EC=function(e){const t=this.frame(e);t&&(t._onLoadingStopped(),this.emit(ut.LifecycleEvent,t),t.emit(vt.LifecycleEvent,void 0))},hg=function(e,t){if(t.frame.parentId&&E(this,Pe,fg).call(this,e,t.frame.id,t.frame.parentId),r(this,gs).has(t.frame.id)?r(this,gs).delete(t.frame.id):E(this,Pe,pg).call(this,t.frame,"Navigation"),!!t.childFrames)for(const s of t.childFrames)E(this,Pe,hg).call(this,e,s)},fg=function(e,t,s){let a=this.frame(t);if(a){const o=this.frame(s);e&&o&&a.client!==(o==null?void 0:o.client)&&a.updateClient(e);return}a=new sv(this,t,s,e),this._frameTree.addFrame(a),this.emit(ut.FrameAttached,a)},pg=async function(e,t){const s=e.id,a=!e.parentId;let o=this._frameTree.getById(s);if(o)for(const c of o.childFrames())E(this,Pe,zo).call(this,c);a&&(o?(this._frameTree.removeFrame(o),o._id=s):o=new sv(this,s,void 0,r(this,er)),this._frameTree.addFrame(o)),o=await this._frameTree.waitForFrame(s),o._navigated(e),this.emit(ut.FrameNavigated,o),o.emit(vt.FrameNavigated,t)},xC=async function(e,t){const s=`${e.id()}:${t}`;r(this,Dd).has(s)||(await e.send("Page.addScriptToEvaluateOnNewDocument",{source:`//# sourceURL=${Bt.INTERNAL_URL}`,worldName:t}),await Promise.all(this.frames().filter(a=>a.client===e).map(a=>e.send("Page.createIsolatedWorld",{frameId:a._id,worldName:t,grantUniveralAccess:!0}).catch(le))),r(this,Dd).add(s))},PC=function(e,t){const s=this.frame(e);s&&(s._navigatedWithinDocument(t),this.emit(ut.FrameNavigatedWithinDocument,s),s.emit(vt.FrameNavigatedWithinDocument,void 0),this.emit(ut.FrameNavigated,s),s.emit(vt.FrameNavigated,"Navigation"))},_C=function(e,t){const s=this.frame(e);if(s)switch(t){case"remove":E(this,Pe,zo).call(this,s);break;case"swap":this.emit(ut.FrameSwapped,s),s.emit(vt.FrameSwapped,void 0);break}},TC=function(e,t){const s=e.auxData,a=s&&s.frameId,o=typeof a=="string"?this.frame(a):void 0;let c;if(o){if(o.client!==t)return;e.auxData&&e.auxData.isDefault?c=o.worlds[Sr]:e.name===wy&&(c=o.worlds[Ah])}if(!c)return;const u=new iv((o==null?void 0:o.client)||r(this,er),e,c);c.setContext(u)},zo=function(e){for(const t of e.childFrames())E(this,Pe,zo).call(this,t);e[we](),this._frameTree.removeFrame(e),this.emit(ut.FrameDetached,e),e.emit(vt.FrameDetached,e)};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const cv={0:{keyCode:48,key:"0",code:"Digit0"},1:{keyCode:49,key:"1",code:"Digit1"},2:{keyCode:50,key:"2",code:"Digit2"},3:{keyCode:51,key:"3",code:"Digit3"},4:{keyCode:52,key:"4",code:"Digit4"},5:{keyCode:53,key:"5",code:"Digit5"},6:{keyCode:54,key:"6",code:"Digit6"},7:{keyCode:55,key:"7",code:"Digit7"},8:{keyCode:56,key:"8",code:"Digit8"},9:{keyCode:57,key:"9",code:"Digit9"},Power:{key:"Power",code:"Power"},Eject:{key:"Eject",code:"Eject"},Abort:{keyCode:3,code:"Abort",key:"Cancel"},Help:{keyCode:6,code:"Help",key:"Help"},Backspace:{keyCode:8,code:"Backspace",key:"Backspace"},Tab:{keyCode:9,code:"Tab",key:"Tab"},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",code:"Numpad5",shiftKey:"5",location:3},NumpadEnter:{keyCode:13,code:"NumpadEnter",key:"Enter",text:"\r",location:3},Enter:{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\r":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\n":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},ShiftLeft:{keyCode:16,code:"ShiftLeft",key:"Shift",location:1},ShiftRight:{keyCode:16,code:"ShiftRight",key:"Shift",location:2},ControlLeft:{keyCode:17,code:"ControlLeft",key:"Control",location:1},ControlRight:{keyCode:17,code:"ControlRight",key:"Control",location:2},AltLeft:{keyCode:18,code:"AltLeft",key:"Alt",location:1},AltRight:{keyCode:18,code:"AltRight",key:"Alt",location:2},Pause:{keyCode:19,code:"Pause",key:"Pause"},CapsLock:{keyCode:20,code:"CapsLock",key:"CapsLock"},Escape:{keyCode:27,code:"Escape",key:"Escape"},Convert:{keyCode:28,code:"Convert",key:"Convert"},NonConvert:{keyCode:29,code:"NonConvert",key:"NonConvert"},Space:{keyCode:32,code:"Space",key:" "},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",code:"Numpad9",shiftKey:"9",location:3},PageUp:{keyCode:33,code:"PageUp",key:"PageUp"},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",code:"Numpad3",shiftKey:"3",location:3},PageDown:{keyCode:34,code:"PageDown",key:"PageDown"},End:{keyCode:35,code:"End",key:"End"},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",code:"Numpad1",shiftKey:"1",location:3},Home:{keyCode:36,code:"Home",key:"Home"},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",code:"Numpad7",shiftKey:"7",location:3},ArrowLeft:{keyCode:37,code:"ArrowLeft",key:"ArrowLeft"},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",code:"Numpad4",shiftKey:"4",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",code:"Numpad8",shiftKey:"8",location:3},ArrowUp:{keyCode:38,code:"ArrowUp",key:"ArrowUp"},ArrowRight:{keyCode:39,code:"ArrowRight",key:"ArrowRight"},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",code:"Numpad6",shiftKey:"6",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",code:"Numpad2",shiftKey:"2",location:3},ArrowDown:{keyCode:40,code:"ArrowDown",key:"ArrowDown"},Select:{keyCode:41,code:"Select",key:"Select"},Open:{keyCode:43,code:"Open",key:"Execute"},PrintScreen:{keyCode:44,code:"PrintScreen",key:"PrintScreen"},Insert:{keyCode:45,code:"Insert",key:"Insert"},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",code:"Numpad0",shiftKey:"0",location:3},Delete:{keyCode:46,code:"Delete",key:"Delete"},NumpadDecimal:{keyCode:46,shiftKeyCode:110,code:"NumpadDecimal",key:"\0",shiftKey:".",location:3},Digit0:{keyCode:48,code:"Digit0",shiftKey:")",key:"0"},Digit1:{keyCode:49,code:"Digit1",shiftKey:"!",key:"1"},Digit2:{keyCode:50,code:"Digit2",shiftKey:"@",key:"2"},Digit3:{keyCode:51,code:"Digit3",shiftKey:"#",key:"3"},Digit4:{keyCode:52,code:"Digit4",shiftKey:"$",key:"4"},Digit5:{keyCode:53,code:"Digit5",shiftKey:"%",key:"5"},Digit6:{keyCode:54,code:"Digit6",shiftKey:"^",key:"6"},Digit7:{keyCode:55,code:"Digit7",shiftKey:"&",key:"7"},Digit8:{keyCode:56,code:"Digit8",shiftKey:"*",key:"8"},Digit9:{keyCode:57,code:"Digit9",shiftKey:"(",key:"9"},KeyA:{keyCode:65,code:"KeyA",shiftKey:"A",key:"a"},KeyB:{keyCode:66,code:"KeyB",shiftKey:"B",key:"b"},KeyC:{keyCode:67,code:"KeyC",shiftKey:"C",key:"c"},KeyD:{keyCode:68,code:"KeyD",shiftKey:"D",key:"d"},KeyE:{keyCode:69,code:"KeyE",shiftKey:"E",key:"e"},KeyF:{keyCode:70,code:"KeyF",shiftKey:"F",key:"f"},KeyG:{keyCode:71,code:"KeyG",shiftKey:"G",key:"g"},KeyH:{keyCode:72,code:"KeyH",shiftKey:"H",key:"h"},KeyI:{keyCode:73,code:"KeyI",shiftKey:"I",key:"i"},KeyJ:{keyCode:74,code:"KeyJ",shiftKey:"J",key:"j"},KeyK:{keyCode:75,code:"KeyK",shiftKey:"K",key:"k"},KeyL:{keyCode:76,code:"KeyL",shiftKey:"L",key:"l"},KeyM:{keyCode:77,code:"KeyM",shiftKey:"M",key:"m"},KeyN:{keyCode:78,code:"KeyN",shiftKey:"N",key:"n"},KeyO:{keyCode:79,code:"KeyO",shiftKey:"O",key:"o"},KeyP:{keyCode:80,code:"KeyP",shiftKey:"P",key:"p"},KeyQ:{keyCode:81,code:"KeyQ",shiftKey:"Q",key:"q"},KeyR:{keyCode:82,code:"KeyR",shiftKey:"R",key:"r"},KeyS:{keyCode:83,code:"KeyS",shiftKey:"S",key:"s"},KeyT:{keyCode:84,code:"KeyT",shiftKey:"T",key:"t"},KeyU:{keyCode:85,code:"KeyU",shiftKey:"U",key:"u"},KeyV:{keyCode:86,code:"KeyV",shiftKey:"V",key:"v"},KeyW:{keyCode:87,code:"KeyW",shiftKey:"W",key:"w"},KeyX:{keyCode:88,code:"KeyX",shiftKey:"X",key:"x"},KeyY:{keyCode:89,code:"KeyY",shiftKey:"Y",key:"y"},KeyZ:{keyCode:90,code:"KeyZ",shiftKey:"Z",key:"z"},MetaLeft:{keyCode:91,code:"MetaLeft",key:"Meta",location:1},MetaRight:{keyCode:92,code:"MetaRight",key:"Meta",location:2},ContextMenu:{keyCode:93,code:"ContextMenu",key:"ContextMenu"},NumpadMultiply:{keyCode:106,code:"NumpadMultiply",key:"*",location:3},NumpadAdd:{keyCode:107,code:"NumpadAdd",key:"+",location:3},NumpadSubtract:{keyCode:109,code:"NumpadSubtract",key:"-",location:3},NumpadDivide:{keyCode:111,code:"NumpadDivide",key:"/",location:3},F1:{keyCode:112,code:"F1",key:"F1"},F2:{keyCode:113,code:"F2",key:"F2"},F3:{keyCode:114,code:"F3",key:"F3"},F4:{keyCode:115,code:"F4",key:"F4"},F5:{keyCode:116,code:"F5",key:"F5"},F6:{keyCode:117,code:"F6",key:"F6"},F7:{keyCode:118,code:"F7",key:"F7"},F8:{keyCode:119,code:"F8",key:"F8"},F9:{keyCode:120,code:"F9",key:"F9"},F10:{keyCode:121,code:"F10",key:"F10"},F11:{keyCode:122,code:"F11",key:"F11"},F12:{keyCode:123,code:"F12",key:"F12"},F13:{keyCode:124,code:"F13",key:"F13"},F14:{keyCode:125,code:"F14",key:"F14"},F15:{keyCode:126,code:"F15",key:"F15"},F16:{keyCode:127,code:"F16",key:"F16"},F17:{keyCode:128,code:"F17",key:"F17"},F18:{keyCode:129,code:"F18",key:"F18"},F19:{keyCode:130,code:"F19",key:"F19"},F20:{keyCode:131,code:"F20",key:"F20"},F21:{keyCode:132,code:"F21",key:"F21"},F22:{keyCode:133,code:"F22",key:"F22"},F23:{keyCode:134,code:"F23",key:"F23"},F24:{keyCode:135,code:"F24",key:"F24"},NumLock:{keyCode:144,code:"NumLock",key:"NumLock"},ScrollLock:{keyCode:145,code:"ScrollLock",key:"ScrollLock"},AudioVolumeMute:{keyCode:173,code:"AudioVolumeMute",key:"AudioVolumeMute"},AudioVolumeDown:{keyCode:174,code:"AudioVolumeDown",key:"AudioVolumeDown"},AudioVolumeUp:{keyCode:175,code:"AudioVolumeUp",key:"AudioVolumeUp"},MediaTrackNext:{keyCode:176,code:"MediaTrackNext",key:"MediaTrackNext"},MediaTrackPrevious:{keyCode:177,code:"MediaTrackPrevious",key:"MediaTrackPrevious"},MediaStop:{keyCode:178,code:"MediaStop",key:"MediaStop"},MediaPlayPause:{keyCode:179,code:"MediaPlayPause",key:"MediaPlayPause"},Semicolon:{keyCode:186,code:"Semicolon",shiftKey:":",key:";"},Equal:{keyCode:187,code:"Equal",shiftKey:"+",key:"="},NumpadEqual:{keyCode:187,code:"NumpadEqual",key:"=",location:3},Comma:{keyCode:188,code:"Comma",shiftKey:"<",key:","},Minus:{keyCode:189,code:"Minus",shiftKey:"_",key:"-"},Period:{keyCode:190,code:"Period",shiftKey:">",key:"."},Slash:{keyCode:191,code:"Slash",shiftKey:"?",key:"/"},Backquote:{keyCode:192,code:"Backquote",shiftKey:"~",key:"`"},BracketLeft:{keyCode:219,code:"BracketLeft",shiftKey:"{",key:"["},Backslash:{keyCode:220,code:"Backslash",shiftKey:"|",key:"\\"},BracketRight:{keyCode:221,code:"BracketRight",shiftKey:"}",key:"]"},Quote:{keyCode:222,code:"Quote",shiftKey:'"',key:"'"},AltGraph:{keyCode:225,code:"AltGraph",key:"AltGraph"},Props:{keyCode:247,code:"Props",key:"CrSel"},Cancel:{keyCode:3,key:"Cancel",code:"Abort"},Clear:{keyCode:12,key:"Clear",code:"Numpad5",location:3},Shift:{keyCode:16,key:"Shift",code:"ShiftLeft",location:1},Control:{keyCode:17,key:"Control",code:"ControlLeft",location:1},Alt:{keyCode:18,key:"Alt",code:"AltLeft",location:1},Accept:{keyCode:30,key:"Accept"},ModeChange:{keyCode:31,key:"ModeChange"}," ":{keyCode:32,key:" ",code:"Space"},Print:{keyCode:42,key:"Print"},Execute:{keyCode:43,key:"Execute",code:"Open"},"\0":{keyCode:46,key:"\0",code:"NumpadDecimal",location:3},a:{keyCode:65,key:"a",code:"KeyA"},b:{keyCode:66,key:"b",code:"KeyB"},c:{keyCode:67,key:"c",code:"KeyC"},d:{keyCode:68,key:"d",code:"KeyD"},e:{keyCode:69,key:"e",code:"KeyE"},f:{keyCode:70,key:"f",code:"KeyF"},g:{keyCode:71,key:"g",code:"KeyG"},h:{keyCode:72,key:"h",code:"KeyH"},i:{keyCode:73,key:"i",code:"KeyI"},j:{keyCode:74,key:"j",code:"KeyJ"},k:{keyCode:75,key:"k",code:"KeyK"},l:{keyCode:76,key:"l",code:"KeyL"},m:{keyCode:77,key:"m",code:"KeyM"},n:{keyCode:78,key:"n",code:"KeyN"},o:{keyCode:79,key:"o",code:"KeyO"},p:{keyCode:80,key:"p",code:"KeyP"},q:{keyCode:81,key:"q",code:"KeyQ"},r:{keyCode:82,key:"r",code:"KeyR"},s:{keyCode:83,key:"s",code:"KeyS"},t:{keyCode:84,key:"t",code:"KeyT"},u:{keyCode:85,key:"u",code:"KeyU"},v:{keyCode:86,key:"v",code:"KeyV"},w:{keyCode:87,key:"w",code:"KeyW"},x:{keyCode:88,key:"x",code:"KeyX"},y:{keyCode:89,key:"y",code:"KeyY"},z:{keyCode:90,key:"z",code:"KeyZ"},Meta:{keyCode:91,key:"Meta",code:"MetaLeft",location:1},"*":{keyCode:106,key:"*",code:"NumpadMultiply",location:3},"+":{keyCode:107,key:"+",code:"NumpadAdd",location:3},"-":{keyCode:109,key:"-",code:"NumpadSubtract",location:3},"/":{keyCode:111,key:"/",code:"NumpadDivide",location:3},";":{keyCode:186,key:";",code:"Semicolon"},"=":{keyCode:187,key:"=",code:"Equal"},",":{keyCode:188,key:",",code:"Comma"},".":{keyCode:190,key:".",code:"Period"},"`":{keyCode:192,key:"`",code:"Backquote"},"[":{keyCode:219,key:"[",code:"BracketLeft"},"\\":{keyCode:220,key:"\\",code:"Backslash"},"]":{keyCode:221,key:"]",code:"BracketRight"},"'":{keyCode:222,key:"'",code:"Quote"},Attn:{keyCode:246,key:"Attn"},CrSel:{keyCode:247,key:"CrSel",code:"Props"},ExSel:{keyCode:248,key:"ExSel"},EraseEof:{keyCode:249,key:"EraseEof"},Play:{keyCode:250,key:"Play"},ZoomOut:{keyCode:251,key:"ZoomOut"},")":{keyCode:48,key:")",code:"Digit0"},"!":{keyCode:49,key:"!",code:"Digit1"},"@":{keyCode:50,key:"@",code:"Digit2"},"#":{keyCode:51,key:"#",code:"Digit3"},$:{keyCode:52,key:"$",code:"Digit4"},"%":{keyCode:53,key:"%",code:"Digit5"},"^":{keyCode:54,key:"^",code:"Digit6"},"&":{keyCode:55,key:"&",code:"Digit7"},"(":{keyCode:57,key:"(",code:"Digit9"},A:{keyCode:65,key:"A",code:"KeyA"},B:{keyCode:66,key:"B",code:"KeyB"},C:{keyCode:67,key:"C",code:"KeyC"},D:{keyCode:68,key:"D",code:"KeyD"},E:{keyCode:69,key:"E",code:"KeyE"},F:{keyCode:70,key:"F",code:"KeyF"},G:{keyCode:71,key:"G",code:"KeyG"},H:{keyCode:72,key:"H",code:"KeyH"},I:{keyCode:73,key:"I",code:"KeyI"},J:{keyCode:74,key:"J",code:"KeyJ"},K:{keyCode:75,key:"K",code:"KeyK"},L:{keyCode:76,key:"L",code:"KeyL"},M:{keyCode:77,key:"M",code:"KeyM"},N:{keyCode:78,key:"N",code:"KeyN"},O:{keyCode:79,key:"O",code:"KeyO"},P:{keyCode:80,key:"P",code:"KeyP"},Q:{keyCode:81,key:"Q",code:"KeyQ"},R:{keyCode:82,key:"R",code:"KeyR"},S:{keyCode:83,key:"S",code:"KeyS"},T:{keyCode:84,key:"T",code:"KeyT"},U:{keyCode:85,key:"U",code:"KeyU"},V:{keyCode:86,key:"V",code:"KeyV"},W:{keyCode:87,key:"W",code:"KeyW"},X:{keyCode:88,key:"X",code:"KeyX"},Y:{keyCode:89,key:"Y",code:"KeyY"},Z:{keyCode:90,key:"Z",code:"KeyZ"},":":{keyCode:186,key:":",code:"Semicolon"},"<":{keyCode:188,key:"<",code:"Comma"},_:{keyCode:189,key:"_",code:"Minus"},">":{keyCode:190,key:">",code:"Period"},"?":{keyCode:191,key:"?",code:"Slash"},"~":{keyCode:192,key:"~",code:"Backquote"},"{":{keyCode:219,key:"{",code:"BracketLeft"},"|":{keyCode:220,key:"|",code:"Backslash"},"}":{keyCode:221,key:"}",code:"BracketRight"},'"':{keyCode:222,key:'"',code:"Quote"},SoftLeft:{key:"SoftLeft",code:"SoftLeft",location:4},SoftRight:{key:"SoftRight",code:"SoftRight",location:4},Camera:{keyCode:44,key:"Camera",code:"Camera",location:4},Call:{key:"Call",code:"Call",location:4},EndCall:{keyCode:95,key:"EndCall",code:"EndCall",location:4},VolumeDown:{keyCode:182,key:"VolumeDown",code:"VolumeDown",location:4},VolumeUp:{keyCode:183,key:"VolumeUp",code:"VolumeUp",location:4}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class JP extends Ly{constructor(e){super();f(this,Yi);f(this,Xi);f(this,fo,new Set);U(this,"_modifiers",0);y(this,Xi,e)}updateClient(e){y(this,Xi,e)}async down(e,t={text:void 0,commands:[]}){const s=E(this,Yi,gg).call(this,e),a=r(this,fo).has(s.code);r(this,fo).add(s.code),this._modifiers|=E(this,Yi,mg).call(this,s.key);const o=t.text===void 0?s.text:t.text;await r(this,Xi).send("Input.dispatchKeyEvent",{type:o?"keyDown":"rawKeyDown",modifiers:this._modifiers,windowsVirtualKeyCode:s.keyCode,code:s.code,key:s.key,text:o,unmodifiedText:o,autoRepeat:a,location:s.location,isKeypad:s.location===3,commands:t.commands})}async up(e){const t=E(this,Yi,gg).call(this,e);this._modifiers&=~E(this,Yi,mg).call(this,t.key),r(this,fo).delete(t.code),await r(this,Xi).send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:this._modifiers,key:t.key,windowsVirtualKeyCode:t.keyCode,code:t.code,location:t.location})}async sendCharacter(e){await r(this,Xi).send("Input.insertText",{text:e})}charIsKey(e){return!!cv[e]}async type(e,t={}){const s=t.delay||void 0;for(const a of e)this.charIsKey(a)?await this.press(a,{delay:s}):(s&&await new Promise(o=>setTimeout(o,s)),await this.sendCharacter(a))}async press(e,t={}){const{delay:s=null}=t;await this.down(e,t),s&&await new Promise(a=>setTimeout(a,t.delay)),await this.up(e)}}Xi=new WeakMap,fo=new WeakMap,Yi=new WeakSet,mg=function(e){return e==="Alt"?1:e==="Control"?2:e==="Meta"?4:e==="Shift"?8:0},gg=function(e){const t=this._modifiers&8,s={key:"",keyCode:0,code:"",text:"",location:0},a=cv[e];return ee(a,`Unknown key: "${e}"`),a.key&&(s.key=a.key),t&&a.shiftKey&&(s.key=a.shiftKey),a.keyCode&&(s.keyCode=a.keyCode),t&&a.shiftKeyCode&&(s.keyCode=a.shiftKeyCode),a.code&&(s.code=a.code),a.location&&(s.location=a.location),s.key.length===1&&(s.text=s.key),a.text&&(s.text=a.text),t&&a.shiftText&&(s.text=a.shiftText),this._modifiers&-9&&(s.text=""),s};const uv=n=>{switch(n){case He.Left:return 1;case He.Right:return 2;case He.Middle:return 4;case He.Back:return 8;case He.Forward:return 16}},XP=n=>n&1?He.Left:n&2?He.Right:n&4?He.Middle:n&8?He.Back:n&16?He.Forward:"none";class YP extends By{constructor(e,t){super();f(this,Xe);f(this,Ht);f(this,lr);f(this,po,{position:{x:0,y:0},buttons:0});f(this,ws,[]);y(this,Ht,e),y(this,lr,t)}updateClient(e){y(this,Ht,e)}async reset(){const e=[];for(const[t,s]of[[1,He.Left],[4,He.Middle],[2,He.Right],[16,He.Forward],[8,He.Back]])r(this,Xe,Vt).buttons&t&&e.push(this.up({button:s}));(r(this,Xe,Vt).position.x!==0||r(this,Xe,Vt).position.y!==0)&&e.push(this.move(0,0)),await Promise.all(e)}async move(e,t,s={}){const{steps:a=1}=s,o=r(this,Xe,Vt).position,c={x:e,y:t};for(let u=1;u<=a;u++)await E(this,Xe,Ef).call(this,d=>{d({position:{x:o.x+(c.x-o.x)*(u/a),y:o.y+(c.y-o.y)*(u/a)}});const{buttons:p,position:h}=r(this,Xe,Vt);return r(this,Ht).send("Input.dispatchMouseEvent",{type:"mouseMoved",modifiers:r(this,lr)._modifiers,buttons:p,button:XP(p),...h})})}async down(e={}){const{button:t=He.Left,clickCount:s=1}=e,a=uv(t);if(!a)throw new Error(`Unsupported mouse button: ${t}`);if(r(this,Xe,Vt).buttons&a)throw new Error(`'${t}' is already pressed.`);await E(this,Xe,Ef).call(this,o=>{o({buttons:r(this,Xe,Vt).buttons|a});const{buttons:c,position:u}=r(this,Xe,Vt);return r(this,Ht).send("Input.dispatchMouseEvent",{type:"mousePressed",modifiers:r(this,lr)._modifiers,clickCount:s,buttons:c,button:t,...u})})}async up(e={}){const{button:t=He.Left,clickCount:s=1}=e,a=uv(t);if(!a)throw new Error(`Unsupported mouse button: ${t}`);if(!(r(this,Xe,Vt).buttons&a))throw new Error(`'${t}' is not pressed.`);await E(this,Xe,Ef).call(this,o=>{o({buttons:r(this,Xe,Vt).buttons&~a});const{buttons:c,position:u}=r(this,Xe,Vt);return r(this,Ht).send("Input.dispatchMouseEvent",{type:"mouseReleased",modifiers:r(this,lr)._modifiers,clickCount:s,buttons:c,button:t,...u})})}async click(e,t,s={}){const{delay:a,count:o=1,clickCount:c=o}=s;if(o<1)throw new Error("Click must occur a positive number of times.");const u=[this.move(e,t)];if(c===o)for(let d=1;d<o;++d)u.push(this.down({...s,clickCount:d}),this.up({...s,clickCount:d}));u.push(this.down({...s,clickCount:c})),typeof a=="number"&&(await Promise.all(u),u.length=0,await new Promise(d=>{setTimeout(d,a)})),u.push(this.up({...s,clickCount:c})),await Promise.all(u)}async wheel(e={}){const{deltaX:t=0,deltaY:s=0}=e,{position:a,buttons:o}=r(this,Xe,Vt);await r(this,Ht).send("Input.dispatchMouseEvent",{type:"mouseWheel",pointerType:"mouse",modifiers:r(this,lr)._modifiers,deltaY:s,deltaX:t,buttons:o,...a})}async drag(e,t){const s=new Promise(a=>{r(this,Ht).once("Input.dragIntercepted",o=>a(o.data))});return await this.move(e.x,e.y),await this.down(),await this.move(t.x,t.y),await s}async dragEnter(e,t){await r(this,Ht).send("Input.dispatchDragEvent",{type:"dragEnter",x:e.x,y:e.y,modifiers:r(this,lr)._modifiers,data:t})}async dragOver(e,t){await r(this,Ht).send("Input.dispatchDragEvent",{type:"dragOver",x:e.x,y:e.y,modifiers:r(this,lr)._modifiers,data:t})}async drop(e,t){await r(this,Ht).send("Input.dispatchDragEvent",{type:"drop",x:e.x,y:e.y,modifiers:r(this,lr)._modifiers,data:t})}async dragAndDrop(e,t,s={}){const{delay:a=null}=s,o=await this.drag(e,t);await this.dragEnter(t,o),await this.dragOver(t,o),a&&await new Promise(c=>setTimeout(c,a)),await this.drop(t,o),await this.up()}}Ht=new WeakMap,lr=new WeakMap,po=new WeakMap,Xe=new WeakSet,Vt=function(){return Object.assign({...r(this,po)},...r(this,ws))},ws=new WeakMap,IC=function(){const e={};r(this,ws).push(e);const t=()=>{r(this,ws).splice(r(this,ws).indexOf(e),1)};return{update:s=>{Object.assign(e,s)},commit:()=>{y(this,po,{...r(this,po),...e}),t()},rollback:t}},Ef=async function(e){const{update:t,commit:s,rollback:a}=E(this,Xe,IC).call(this);try{await e(t),s()}catch(o){throw a(),o}};class QP{constructor(i,e,t,s){f(this,Nd,!1);f(this,Ld);f(this,Zr);f(this,Qi);f(this,ys);y(this,Qi,i),y(this,Ld,e),y(this,ys,t),y(this,Zr,s)}updateClient(i){y(this,Qi,i)}async start(){if(r(this,Nd))throw new dh("Touch has already started");await r(this,Qi).send("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:[r(this,Zr)],modifiers:r(this,ys)._modifiers}),y(this,Nd,!0)}move(i,e){return r(this,Zr).x=Math.round(i),r(this,Zr).y=Math.round(e),r(this,Qi).send("Input.dispatchTouchEvent",{type:"touchMove",touchPoints:[r(this,Zr)],modifiers:r(this,ys)._modifiers})}async end(){await r(this,Qi).send("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[r(this,Zr)],modifiers:r(this,ys)._modifiers}),r(this,Ld).removeHandle(this)}}Nd=new WeakMap,Ld=new WeakMap,Zr=new WeakMap,Qi=new WeakMap,ys=new WeakMap;class ZP extends jy{constructor(e,t){super();f(this,mo);f(this,Bd);y(this,mo,e),y(this,Bd,t)}updateClient(e){y(this,mo,e),this.touches.forEach(t=>{t.updateClient(e)})}async touchStart(e,t){const s=this.idGenerator(),a={x:Math.round(e),y:Math.round(t),radiusX:.5,radiusY:.5,force:.5,id:s},o=new QP(r(this,mo),this,r(this,Bd),a);return await o.start(),this.touches.push(o),o}}mo=new WeakMap,Bd=new WeakMap;class dv{constructor(i){f(this,ei);f(this,go,!1);f(this,jd);y(this,ei,i)}updateClient(i){y(this,ei,i)}async start(i={}){ee(!r(this,go),"Cannot start recording trace while already recording trace.");const e=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler"],{path:t,screenshots:s=!1,categories:a=e}=i;s&&a.push("disabled-by-default-devtools.screenshot");const o=a.filter(u=>u.startsWith("-")).map(u=>u.slice(1)),c=a.filter(u=>!u.startsWith("-"));y(this,jd,t),y(this,go,!0),await r(this,ei).send("Tracing.start",{transferMode:"ReturnAsStream",traceConfig:{excludedCategories:o,includedCategories:c}})}async stop(){const i=qe.create();return r(this,ei).once("Tracing.tracingComplete",async e=>{try{ee(e.stream,'Missing "stream"');const t=await gy(r(this,ei),e.stream),s=await my(t,r(this,jd));i.resolve(s??void 0)}catch(t){Xt(t)?i.reject(t):i.reject(new Error(`Unknown error: ${t}`))}}),await r(this,ei).send("Tracing.end"),y(this,go,!1),await i.valueOrThrow()}}ei=new WeakMap,go=new WeakMap,jd=new WeakMap;class lv extends zy{constructor(e,t,s,a,o,c){super(t);f(this,Mr);f(this,ti);f(this,qd);f(this,$d);y(this,qd,s),y(this,ti,e),y(this,$d,a),y(this,Mr,new Ip(this,new kp)),r(this,ti).once("Runtime.executionContextCreated",async u=>{r(this,Mr).setContext(new iv(e,u.context,r(this,Mr)))}),r(this,Mr).emitter.on("consoleapicalled",async u=>{try{return o(u.type,u.args.map(d=>new Ih(r(this,Mr),d)),u.stackTrace)}catch(d){le(d)}}),r(this,ti).on("Runtime.exceptionThrown",c),r(this,ti).once(Ue.Disconnected,()=>{r(this,Mr).dispose()}),r(this,ti).send("Runtime.enable").catch(le)}mainRealm(){return r(this,Mr)}get client(){return r(this,ti)}async close(){var e,t;switch(r(this,$d)){case bt.SERVICE_WORKER:case bt.SHARED_WORKER:{await((e=this.client.connection())==null?void 0:e.send("Target.closeTarget",{targetId:r(this,qd)})),await((t=this.client.connection())==null?void 0:t.send("Target.detachFromTarget",{sessionId:this.client.id()}));break}default:await this.evaluate(()=>{self.close()})}}}Mr=new WeakMap,ti=new WeakMap,qd=new WeakMap,$d=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Rp=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},Fp=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});function Dp(n){switch(n){case"warning":return"warn";default:return n}}const Sm=class Sm extends Ky{constructor(e,t){super();f(this,Ce);f(this,Kd,!1);f(this,Zi);f(this,Re);f(this,hr);f(this,en);f(this,vs);f(this,tn);f(this,wo);f(this,yo);f(this,Ke);f(this,et);f(this,vo);f(this,rn,new Map);f(this,bo,new Map);f(this,So);f(this,Co);f(this,bs,new Map);f(this,ri,new Set);f(this,sf,qe.create());f(this,Ud,!1);f(this,Hd,!1);f(this,Wd,e=>{var a;const t=(a=e._session())==null?void 0:a.id(),s=r(this,bs).get(t);s&&(r(this,bs).delete(t),this.emit("workerdestroyed",s))});f(this,ko,e=>{if(ee(e instanceof ta),r(this,Ke).onAttachedToTarget(e._target()),e._target()._getTargetInfo().type==="worker"){const t=new lv(e,e._target().url(),e._target()._targetId,e._target().type(),E(this,Ce,bg).bind(this),E(this,Ce,vg).bind(this));r(this,bs).set(e.id(),t),this.emit("workercreated",t)}e.on(Ue.Ready,r(this,ko))});y(this,Re,e),y(this,en,e.parentSession()),ee(r(this,en),"Tab target session is not defined."),y(this,vs,r(this,en)._target()),ee(r(this,vs),"Tab target is not defined."),y(this,hr,t),y(this,Zi,t._targetManager()),y(this,tn,new JP(e)),y(this,wo,new YP(e,r(this,tn))),y(this,yo,new ZP(e,r(this,tn))),y(this,Ke,new GP(e,this,this._timeoutSettings)),y(this,et,new Yy(e)),y(this,vo,new dv(e)),y(this,So,new Jy(e)),y(this,Co,null);const s=new pe(r(this,Ke));s.on(ut.FrameAttached,o=>{this.emit("frameattached",o)}),s.on(ut.FrameDetached,o=>{this.emit("framedetached",o)}),s.on(ut.FrameNavigated,o=>{this.emit("framenavigated",o)}),s.on(ut.ConsoleApiCalled,([o,c])=>{E(this,Ce,BC).call(this,o,c)}),s.on(ut.BindingCalled,([o,c])=>{E(this,Ce,jC).call(this,o,c)});const a=new pe(r(this,Ke).networkManager);a.on(ct.Request,o=>{this.emit("request",o)}),a.on(ct.RequestServedFromCache,o=>{this.emit("requestservedfromcache",o)}),a.on(ct.Response,o=>{this.emit("response",o)}),a.on(ct.RequestFailed,o=>{this.emit("requestfailed",o)}),a.on(ct.RequestFinished,o=>{this.emit("requestfinished",o)}),r(this,en).on(Ue.Swapped,E(this,Ce,AC).bind(this)),r(this,en).on(Ue.Ready,E(this,Ce,RC).bind(this)),r(this,Zi).on("targetGone",r(this,Wd)),r(this,vs)._isClosedDeferred.valueOrThrow().then(()=>{r(this,Zi).off("targetGone",r(this,Wd)),this.emit("close",void 0),y(this,Kd,!0)}).catch(le),E(this,Ce,wg).call(this),E(this,Ce,MC).call(this)}static async _create(e,t,s){var o;const a=new Sm(e,t);if(await E(o=a,Ce,FC).call(o),s)try{await a.setViewport(s)}catch(c){if(Xt(c)&&Tp(c))le(c);else throw c}return a}_client(){return r(this,Re)}isServiceWorkerBypassed(){return r(this,Ud)}isDragInterceptionEnabled(){return r(this,Hd)}isJavaScriptEnabled(){return r(this,et).javascriptEnabled}async waitForFileChooser(e={}){const t=r(this,ri).size===0,{timeout:s=this._timeoutSettings.timeout()}=e,a=qe.create({message:`Waiting for \`FileChooser\` failed: ${s}ms exceeded`,timeout:s});e.signal&&e.signal.addEventListener("abort",()=>{var c;a.reject((c=e.signal)==null?void 0:c.reason)},{once:!0}),r(this,ri).add(a);let o;t&&(o=r(this,Re).send("Page.setInterceptFileChooserDialog",{enabled:!0}));try{const[c]=await Promise.all([a.valueOrThrow(),o]);return c}catch(c){throw r(this,ri).delete(a),c}}async setGeolocation(e){return await r(this,et).setGeolocation(e)}target(){return r(this,hr)}browser(){return r(this,hr).browser()}browserContext(){return r(this,hr).browserContext()}mainFrame(){return r(this,Ke).mainFrame()}get keyboard(){return r(this,tn)}get touchscreen(){return r(this,yo)}get coverage(){return r(this,So)}get tracing(){return r(this,vo)}frames(){return r(this,Ke).frames()}workers(){return Array.from(r(this,bs).values())}async setRequestInterception(e){return await r(this,Ke).networkManager.setRequestInterception(e)}async setBypassServiceWorker(e){return y(this,Ud,e),await r(this,Re).send("Network.setBypassServiceWorker",{bypass:e})}async setDragInterception(e){return y(this,Hd,e),await r(this,Re).send("Input.setInterceptDrags",{enabled:e})}async setOfflineMode(e){return await r(this,Ke).networkManager.setOfflineMode(e)}async emulateNetworkConditions(e){return await r(this,Ke).networkManager.emulateNetworkConditions(e)}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}getDefaultTimeout(){return this._timeoutSettings.timeout()}getDefaultNavigationTimeout(){return this._timeoutSettings.navigationTimeout()}async queryObjects(e){ee(!e.disposed,"Prototype JSHandle is disposed!"),ee(e.id,"Prototype JSHandle must not be referencing primitive value");const t=await this.mainFrame().client.send("Runtime.queryObjects",{prototypeObjectId:e.id});return this.mainFrame().mainRealm().createCdpHandle(t.objects)}async cookies(...e){const t=(await r(this,Re).send("Network.getCookies",{urls:e.length?e:[this.url()]})).cookies,s=["sourcePort"],a=o=>{for(const c of s)delete o[c];return o};return t.map(a).map(o=>({...o,partitionKey:o.partitionKey?o.partitionKey.topLevelSite:void 0}))}async deleteCookie(...e){const t=this.url();for(const s of e){const a={...s,partitionKey:Op(s.partitionKey)};if(!s.url&&t.startsWith("http")&&(a.url=t),await r(this,Re).send("Network.deleteCookies",a),t.startsWith("http")&&!a.partitionKey){const o=new URL(t);await r(this,Re).send("Network.deleteCookies",{...a,partitionKey:{topLevelSite:o.origin.replace(`:${o.port}`,""),hasCrossSiteAncestor:!1}})}}}async setCookie(...e){const t=this.url(),s=t.startsWith("http"),a=e.map(o=>{const c=Object.assign({},o);return!c.url&&s&&(c.url=t),ee(c.url!=="about:blank",`Blank page can not have cookie "${c.name}"`),ee(!String.prototype.startsWith.call(c.url||"","data:"),`Data URL page can not have cookie "${c.name}"`),c});await this.deleteCookie(...a),a.length&&await r(this,Re).send("Network.setCookies",{cookies:a.map(o=>({...o,partitionKey:Op(o.partitionKey)}))})}async exposeFunction(e,t){if(r(this,rn).has(e))throw new Error(`Failed to add page binding with name ${e}: window['${e}'] already exists!`);const s=OP("exposedFun",e);let a;switch(typeof t){case"function":a=new Th(e,t,s);break;default:a=new Th(e,t.default,s);break}r(this,rn).set(e,a);const[{identifier:o}]=await Promise.all([r(this,Ke).evaluateOnNewDocument(s),r(this,Ke).addExposedFunctionBinding(a)]);r(this,bo).set(e,o)}async removeExposedFunction(e){const t=r(this,bo).get(e);if(!t)throw new Error(`Function with name "${e}" does not exist`);const s=r(this,rn).get(e);r(this,bo).delete(e),r(this,rn).delete(e),await Promise.all([r(this,Ke).removeScriptToEvaluateOnNewDocument(t),r(this,Ke).removeExposedFunctionBinding(s)])}async authenticate(e){return await r(this,Ke).networkManager.authenticate(e)}async setExtraHTTPHeaders(e){return await r(this,Ke).networkManager.setExtraHTTPHeaders(e)}async setUserAgent(e,t){return await r(this,Ke).networkManager.setUserAgent(e,t)}async metrics(){const e=await r(this,Re).send("Performance.getMetrics");return E(this,Ce,yg).call(this,e.metrics)}async reload(e){const[t]=await Promise.all([this.waitForNavigation({...e,ignoreSameDocumentNavigation:!0}),r(this,Re).send("Page.reload")]);return t}async createCDPSession(){return await this.target().createCDPSession()}async goBack(e={}){return await E(this,Ce,Sg).call(this,-1,e)}async goForward(e={}){return await E(this,Ce,Sg).call(this,1,e)}async bringToFront(){await r(this,Re).send("Page.bringToFront")}async setJavaScriptEnabled(e){return await r(this,et).setJavaScriptEnabled(e)}async setBypassCSP(e){await r(this,Re).send("Page.setBypassCSP",{enabled:e})}async emulateMediaType(e){return await r(this,et).emulateMediaType(e)}async emulateCPUThrottling(e){return await r(this,et).emulateCPUThrottling(e)}async emulateMediaFeatures(e){return await r(this,et).emulateMediaFeatures(e)}async emulateTimezone(e){return await r(this,et).emulateTimezone(e)}async emulateIdleState(e){return await r(this,et).emulateIdleState(e)}async emulateVisionDeficiency(e){return await r(this,et).emulateVisionDeficiency(e)}async setViewport(e){const t=await r(this,et).emulateViewport(e);y(this,Co,e),t&&await this.reload()}viewport(){return r(this,Co)}async evaluateOnNewDocument(e,...t){const s=hp(e,...t);return await r(this,Ke).evaluateOnNewDocument(s)}async removeScriptToEvaluateOnNewDocument(e){return await r(this,Ke).removeScriptToEvaluateOnNewDocument(e)}async setCacheEnabled(e=!0){await r(this,Ke).networkManager.setCacheEnabled(e)}async _screenshot(e){const t={stack:[],error:void 0,hasError:!1};try{const{fromSurface:s,omitBackground:a,optimizeForSpeed:o,quality:c,clip:u,type:d,captureBeyondViewport:p}=e,h=Rp(t,new oh,!0);a&&(d==="png"||d==="webp")&&(await r(this,et).setTransparentBackgroundColor(),h.defer(async()=>{await r(this,et).resetDefaultBackgroundColor().catch(le)}));let l=u;if(l&&!p){const S=await this.mainFrame().isolatedRealm().evaluate(()=>{const{height:g,pageLeft:w,pageTop:v,width:k}=window.visualViewport;return{x:w,y:v,height:g,width:k}});l=t1(l,S)}const{data:m}=await r(this,Re).send("Page.captureScreenshot",{format:d,optimizeForSpeed:o,fromSurface:s,...c!==void 0?{quality:Math.round(c)}:{},...l?{clip:{...l,scale:l.scale??1}}:{},captureBeyondViewport:p});return m}catch(s){t.error=s,t.hasError=!0}finally{const s=Fp(t);s&&await s}}async createPDFStream(e={}){const{timeout:t=this._timeoutSettings.timeout()}=e,{landscape:s,displayHeaderFooter:a,headerTemplate:o,footerTemplate:c,printBackground:u,scale:d,width:p,height:h,margin:l,pageRanges:m,preferCSSPageSize:S,omitBackground:g,tagged:w,outline:v,waitForFonts:k}=vy(e);g&&await r(this,et).setTransparentBackgroundColor(),k&&await st(_e(this.mainFrame().isolatedRealm().evaluate(()=>document.fonts.ready)).pipe(yt(Rt(t))));const C=r(this,Re).send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:s,displayHeaderFooter:a,headerTemplate:o,footerTemplate:c,printBackground:u,scale:d,paperWidth:p,paperHeight:h,marginTop:l.top,marginBottom:l.bottom,marginLeft:l.left,marginRight:l.right,pageRanges:m,preferCSSPageSize:S,generateTaggedPDF:w,generateDocumentOutline:v}),b=await st(_e(C).pipe(yt(Rt(t))));return g&&await r(this,et).resetDefaultBackgroundColor(),ee(b.stream,"`stream` is missing from `Page.printToPDF"),await gy(r(this,Re),b.stream)}async pdf(e={}){const{path:t=void 0}=e,s=await this.createPDFStream(e),a=await my(s,t);return ee(a,"Could not create typed array"),a}async close(e={runBeforeUnload:void 0}){const t={stack:[],error:void 0,hasError:!1};try{const s=Rp(t,await this.browserContext().waitForScreenshotOperations(),!1),a=r(this,Re).connection();ee(a,"Protocol error: Connection closed. Most likely the page has been closed."),!!e.runBeforeUnload?await r(this,Re).send("Page.close"):(await a.send("Target.closeTarget",{targetId:r(this,hr)._targetId}),await r(this,vs)._isClosedDeferred.valueOrThrow())}catch(s){t.error=s,t.hasError=!0}finally{Fp(t)}}isClosed(){return r(this,Kd)}get mouse(){return r(this,wo)}async waitForDevicePrompt(e={}){return await this.mainFrame().waitForDevicePrompt(e)}};Kd=new WeakMap,Zi=new WeakMap,Re=new WeakMap,hr=new WeakMap,en=new WeakMap,vs=new WeakMap,tn=new WeakMap,wo=new WeakMap,yo=new WeakMap,Ke=new WeakMap,et=new WeakMap,vo=new WeakMap,rn=new WeakMap,bo=new WeakMap,So=new WeakMap,Co=new WeakMap,bs=new WeakMap,ri=new WeakMap,sf=new WeakMap,Ud=new WeakMap,Hd=new WeakMap,Ce=new WeakSet,MC=function(){const e=[];for(const s of r(this,Zi).getChildTargets(r(this,hr)))e.push(s);let t=0;for(;t<e.length;){const s=e[t];t++;const a=s._session();a&&r(this,ko).call(this,a);for(const o of r(this,Zi).getChildTargets(s))e.push(o)}},AC=async function(e){y(this,Re,e),ee(r(this,Re)instanceof ta,"CDPSession is not instance of CDPSessionImpl"),y(this,hr,r(this,Re)._target()),ee(r(this,hr),"Missing target on swap"),r(this,tn).updateClient(e),r(this,wo).updateClient(e),r(this,yo).updateClient(e),r(this,et).updateClient(e),r(this,vo).updateClient(e),r(this,So).updateClient(e),await r(this,Ke).swapFrameTree(e),E(this,Ce,wg).call(this)},RC=async function(e){ee(e instanceof ta),e._target()._subtype()==="prerender"&&(r(this,Ke).registerSpeculativeSession(e).catch(le),r(this,et).registerSpeculativeSession(e).catch(le))},wg=function(){const e=new pe(r(this,Re));e.on(Ue.Ready,r(this,ko)),e.on(Ue.Disconnected,()=>{r(this,sf).reject(new ir("Target closed"))}),e.on("Page.domContentEventFired",()=>{this.emit("domcontentloaded",void 0)}),e.on("Page.loadEventFired",()=>{this.emit("load",void 0)}),e.on("Page.javascriptDialogOpening",E(this,Ce,qC).bind(this)),e.on("Runtime.exceptionThrown",E(this,Ce,vg).bind(this)),e.on("Inspector.targetCrashed",E(this,Ce,OC).bind(this)),e.on("Performance.metrics",E(this,Ce,LC).bind(this)),e.on("Log.entryAdded",E(this,Ce,NC).bind(this)),e.on("Page.fileChooserOpened",E(this,Ce,DC).bind(this))},Wd=new WeakMap,ko=new WeakMap,FC=async function(){try{await Promise.all([r(this,Ke).initialize(r(this,Re)),r(this,Re).send("Performance.enable"),r(this,Re).send("Log.enable")])}catch(e){if(Xt(e)&&Tp(e))le(e);else throw e}},DC=async function(e){const t={stack:[],error:void 0,hasError:!1};try{if(!r(this,ri).size)return;const s=r(this,Ke).frame(e.frameId);ee(s,"This should never happen.");const a=Rp(t,await s.worlds[Sr].adoptBackendNode(e.backendNodeId),!1),o=new CP(a.move(),e);for(const c of r(this,ri))c.resolve(o);r(this,ri).clear()}catch(s){t.error=s,t.hasError=!0}finally{Fp(t)}},OC=function(){this.emit("error",new Error("Page crashed!"))},NC=function(e){const{level:t,text:s,args:a,source:o,url:c,lineNumber:u}=e.entry;a&&a.map(d=>{tv(r(this,Re),d)}),o!=="worker"&&this.emit("console",new Pp(Dp(t),s,[],[{url:c,lineNumber:u}]))},LC=function(e){this.emit("metrics",{title:e.title,metrics:E(this,Ce,yg).call(this,e.metrics)})},yg=function(e){const t={};for(const s of e||[])e1.has(s.name)&&(t[s.name]=s.value);return t},vg=function(e){this.emit("pageerror",DP(e.exceptionDetails))},BC=function(e,t){const s=t.args.map(a=>e.createCdpHandle(a));E(this,Ce,bg).call(this,Dp(t.type),s,t.stackTrace)},jC=async function(e,t){let s;try{s=JSON.parse(t.payload)}catch{return}const{type:a,name:o,seq:c,args:u,isTrivial:d}=s;if(a!=="exposedFun")return;const p=e.context;if(!p)return;const h=r(this,rn).get(o);await(h==null?void 0:h.run(p,c,u,d))},bg=function(e,t,s){if(!this.listenerCount("console")){t.forEach(u=>u.dispose());return}const a=[];for(const u of t){const d=u.remoteObject();d.objectId?a.push(u.toString()):a.push(kn(d))}const o=[];if(s)for(const u of s.callFrames)o.push({url:u.url,lineNumber:u.lineNumber,columnNumber:u.columnNumber});const c=new Pp(Dp(e),a.join(" "),t,o);this.emit("console",c)},qC=function(e){const t=Ix(e.type),s=new TP(r(this,Re),t,e.message,e.defaultPrompt);this.emit("dialog",s)},Sg=async function(e,t){const s=await r(this,Re).send("Page.getNavigationHistory"),a=s.entries[s.currentIndex+e];return a?(await Promise.all([this.waitForNavigation(t),r(this,Re).send("Page.navigateToHistoryEntry",{entryId:a.id})]))[0]:null};let hc=Sm;const e1=new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]);function t1(n,i){const e=Math.max(n.x,i.x),t=Math.max(n.y,i.y);return{x:e,y:t,width:Math.max(Math.min(n.x+n.width,i.x+i.width)-e,0),height:Math.max(Math.min(n.y+n.height,i.y+i.height)-t,0)}}function Op(n){if(n!==void 0)return typeof n=="string"?{topLevelSite:n,hasCrossSiteAncestor:!1}:{topLevelSite:n.sourceOrigin,hasCrossSiteAncestor:n.hasCrossSiteAncestor??!1}}/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var r1=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},i1=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});class Np extends Sy{constructor(e,t,s){super();f(this,ii);f(this,ni);f(this,Wt);y(this,ii,e),y(this,ni,t),y(this,Wt,s)}get id(){return r(this,Wt)}targets(){return r(this,ni).targets().filter(e=>e.browserContext()===this)}async pages(){return(await Promise.all(this.targets().filter(t=>{var s;return t.type()==="page"||t.type()==="other"&&((s=r(this,ni)._getIsPageTargetCallback())==null?void 0:s(t))}).map(t=>t.page()))).filter(t=>!!t)}async overridePermissions(e,t){const s=t.map(a=>{const o=pp.get(a);if(!o)throw new Error("Unknown permission: "+a);return o});await r(this,ii).send("Browser.grantPermissions",{origin:e,browserContextId:r(this,Wt)||void 0,permissions:s})}async clearPermissionOverrides(){await r(this,ii).send("Browser.resetPermissions",{browserContextId:r(this,Wt)||void 0})}async newPage(){const e={stack:[],error:void 0,hasError:!1};try{const t=r1(e,await this.waitForScreenshotOperations(),!1);return await r(this,ni)._createPageInContext(r(this,Wt))}catch(t){e.error=t,e.hasError=!0}finally{i1(e)}}browser(){return r(this,ni)}async close(){ee(r(this,Wt),"Default BrowserContext cannot be closed!"),await r(this,ni)._disposeContext(r(this,Wt))}async cookies(){const{cookies:e}=await r(this,ii).send("Storage.getCookies",{browserContextId:r(this,Wt)});return e.map(t=>({...t,partitionKey:t.partitionKey?{sourceOrigin:t.partitionKey.topLevelSite,hasCrossSiteAncestor:t.partitionKey.hasCrossSiteAncestor}:void 0}))}async setCookie(...e){return await r(this,ii).send("Storage.setCookies",{browserContextId:r(this,Wt),cookies:e.map(t=>({...t,partitionKey:Op(t.partitionKey)}))})}async setDownloadBehavior(e){await r(this,ii).send("Browser.setDownloadBehavior",{behavior:e.policy,downloadPath:e.downloadPath,browserContextId:r(this,Wt)})}}ii=new WeakMap,ni=new WeakMap,Wt=new WeakMap;/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Yt;(function(n){n.SUCCESS="success",n.ABORTED="aborted"})(Yt||(Yt={}));let Rh=(vS=class extends lc{constructor(e,t,s,a,o){super();f(this,nn);f(this,sn);f(this,Ar);f(this,Eo);f(this,an);f(this,xo,new Set);U(this,"_initializedDeferred",qe.create());U(this,"_isClosedDeferred",qe.create());U(this,"_targetId");y(this,sn,t),y(this,Eo,a),y(this,Ar,e),y(this,nn,s),this._targetId=e.targetId,y(this,an,o),r(this,sn)&&r(this,sn)instanceof ta&&r(this,sn)._setTarget(this)}async asPage(){const e=this._session();return e?await hc._create(e,this,null):await this.createCDPSession().then(t=>hc._create(t,this,null))}_subtype(){return r(this,Ar).subtype}_session(){return r(this,sn)}_addChildTarget(e){r(this,xo).add(e)}_removeChildTarget(e){r(this,xo).delete(e)}_childTargets(){return r(this,xo)}_sessionFactory(){if(!r(this,an))throw new Error("sessionFactory is not initialized");return r(this,an)}createCDPSession(){if(!r(this,an))throw new Error("sessionFactory is not initialized");return r(this,an).call(this,!1).then(e=>(e._setTarget(this),e))}url(){return r(this,Ar).url}type(){switch(r(this,Ar).type){case"page":return bt.PAGE;case"background_page":return bt.BACKGROUND_PAGE;case"service_worker":return bt.SERVICE_WORKER;case"shared_worker":return bt.SHARED_WORKER;case"browser":return bt.BROWSER;case"webview":return bt.WEBVIEW;case"tab":return bt.TAB;default:return bt.OTHER}}_targetManager(){if(!r(this,Eo))throw new Error("targetManager is not initialized");return r(this,Eo)}_getTargetInfo(){return r(this,Ar)}browser(){if(!r(this,nn))throw new Error("browserContext is not initialized");return r(this,nn).browser()}browserContext(){if(!r(this,nn))throw new Error("browserContext is not initialized");return r(this,nn)}opener(){const{openerId:e}=r(this,Ar);if(e)return this.browser().targets().find(t=>t._targetId===e)}_targetInfoChanged(e){y(this,Ar,e),this._checkIfInitialized()}_initialize(){this._initializedDeferred.resolve(Yt.SUCCESS)}_isTargetExposed(){return this.type()!==bt.TAB&&!this._subtype()}_checkIfInitialized(){this._initializedDeferred.resolved()||this._initializedDeferred.resolve(Yt.SUCCESS)}},nn=new WeakMap,sn=new WeakMap,Ar=new WeakMap,Eo=new WeakMap,an=new WeakMap,xo=new WeakMap,vS);const Cm=class Cm extends Rh{constructor(e,t,s,a,o,c){super(e,t,s,a,o);f(this,zd);U(this,"pagePromise");y(this,zd,c??void 0)}_initialize(){this._initializedDeferred.valueOrThrow().then(async e=>{if(e===Yt.ABORTED)return;const t=this.opener();if(!(t instanceof Cm))return;if(!t||!t.pagePromise||this.type()!=="page")return!0;const s=await t.pagePromise;if(!s.listenerCount("popup"))return!0;const a=await this.page();return s.emit("popup",a),!0}).catch(le),this._checkIfInitialized()}async page(){if(!this.pagePromise){const e=this._session();this.pagePromise=(e?Promise.resolve(e):this._sessionFactory()(!1)).then(t=>hc._create(t,this,r(this,zd)??null))}return await this.pagePromise??null}_checkIfInitialized(){this._initializedDeferred.resolved()||this._getTargetInfo().url!==""&&this._initializedDeferred.resolve(Yt.SUCCESS)}};zd=new WeakMap;let Fh=Cm;class n1 extends Fh{}class s1 extends Rh{constructor(){super(...arguments);f(this,Po)}async worker(){if(!r(this,Po)){const e=this._session();y(this,Po,(e?Promise.resolve(e):this._sessionFactory()(!1)).then(t=>new lv(t,this._getTargetInfo().url,this._targetId,this.type(),()=>{},()=>{})))}return await r(this,Po)}}Po=new WeakMap;class a1 extends Rh{}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function o1(n,i){return!!n._subtype()&&!i.subtype}class c1 extends pe{constructor(e,t,s,a=!0){super();f(this,Nt);f(this,dt);f(this,on,new Map);f(this,lt,new Map);f(this,Ss,new Map);f(this,Vd,new Set);f(this,cn);f(this,Cs);f(this,ks,new WeakMap);f(this,un,new WeakMap);f(this,Gd,qe.create());f(this,Es,new Set);f(this,Jd,!0);f(this,_o,[{}]);f(this,af,()=>{if(r(this,Jd))for(const[e,t]of r(this,on).entries()){const s=new Rh(t,void 0,void 0,this,void 0),a=t.type==="page"||t.type==="iframe",o=t.url.startsWith("chrome-extension://");(!r(this,cn)||r(this,cn).call(this,s))&&a&&!o&&r(this,Es).add(e)}});f(this,Xd,e=>{E(this,Nt,kg).call(this,e)});f(this,Yd,async e=>{if(r(this,on).set(e.targetInfo.targetId,e.targetInfo),this.emit("targetDiscovered",e.targetInfo),e.targetInfo.type==="browser"&&e.targetInfo.attached){if(r(this,lt).has(e.targetInfo.targetId))return;const t=r(this,Cs).call(this,e.targetInfo,void 0);t._initialize(),r(this,lt).set(e.targetInfo.targetId,t)}});f(this,Qd,e=>{const t=r(this,on).get(e.targetId);if(r(this,on).delete(e.targetId),E(this,Nt,Vo).call(this,e.targetId),(t==null?void 0:t.type)==="service_worker"&&r(this,lt).has(e.targetId)){const s=r(this,lt).get(e.targetId);s&&(this.emit("targetGone",s),r(this,lt).delete(e.targetId))}});f(this,Zd,e=>{var o;if(r(this,on).set(e.targetInfo.targetId,e.targetInfo),r(this,Vd).has(e.targetInfo.targetId)||!r(this,lt).has(e.targetInfo.targetId)||!e.targetInfo.attached)return;const t=r(this,lt).get(e.targetInfo.targetId);if(!t)return;const s=t.url(),a=t._initializedDeferred.value()===Yt.SUCCESS;if(o1(t,e.targetInfo)){const c=t==null?void 0:t._session();ee(c,"Target that is being activated is missing a CDPSession."),(o=c.parentSession())==null||o.emit(Ue.Swapped,c)}t._targetInfoChanged(e.targetInfo),a&&s!==t.url()&&this.emit("targetChanged",{target:t,wasInitialized:a,previousURL:s})});f(this,of,async(e,t)=>{const s=t.targetInfo,a=r(this,dt).session(t.sessionId);if(!a)throw new Error(`Session ${t.sessionId} was not created.`);const o=async()=>{await a.send("Runtime.runIfWaitingForDebugger").catch(le),await e.send("Target.detachFromTarget",{sessionId:a.id()}).catch(le)};if(!r(this,dt).isAutoAttached(s.targetId))return;if(s.type==="service_worker"){if(E(this,Nt,Vo).call(this,s.targetId),await o(),r(this,lt).has(s.targetId))return;const p=r(this,Cs).call(this,s);p._initialize(),r(this,lt).set(s.targetId,p),this.emit("targetAvailable",p);return}const c=r(this,lt).has(s.targetId),u=c?r(this,lt).get(s.targetId):r(this,Cs).call(this,s,a,e instanceof ac?e:void 0);if(r(this,cn)&&!r(this,cn).call(this,u)){r(this,Vd).add(s.targetId),E(this,Nt,Vo).call(this,s.targetId),await o();return}E(this,Nt,Cg).call(this,a),c?(a._setTarget(u),r(this,Ss).set(a.id(),r(this,lt).get(s.targetId))):(u._initialize(),r(this,lt).set(s.targetId,u),r(this,Ss).set(a.id(),u));const d=e instanceof ac?e._target():null;d==null||d._addChildTarget(u),e.emit(Ue.Ready,a),r(this,Es).delete(u._targetId),c||this.emit("targetAvailable",u),E(this,Nt,Vo).call(this),await Promise.all([a.send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0,filter:r(this,_o)}),a.send("Runtime.runIfWaitingForDebugger")]).catch(le)});f(this,cf,(e,t)=>{const s=r(this,Ss).get(t.sessionId);r(this,Ss).delete(t.sessionId),s&&(e instanceof ac&&e._target()._removeChildTarget(s),r(this,lt).delete(s._targetId),this.emit("targetGone",s))});y(this,dt,e),y(this,cn,s),y(this,Cs,t),y(this,Jd,a),r(this,dt).on("Target.targetCreated",r(this,Yd)),r(this,dt).on("Target.targetDestroyed",r(this,Qd)),r(this,dt).on("Target.targetInfoChanged",r(this,Zd)),r(this,dt).on(Ue.SessionDetached,r(this,Xd)),E(this,Nt,Cg).call(this,r(this,dt))}async initialize(){await r(this,dt).send("Target.setDiscoverTargets",{discover:!0,filter:r(this,_o)}),r(this,af).call(this),await r(this,dt).send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0,filter:[{type:"page",exclude:!0},...r(this,_o)]}),E(this,Nt,Vo).call(this),await r(this,Gd).valueOrThrow()}getChildTargets(e){return e._childTargets()}dispose(){r(this,dt).off("Target.targetCreated",r(this,Yd)),r(this,dt).off("Target.targetDestroyed",r(this,Qd)),r(this,dt).off("Target.targetInfoChanged",r(this,Zd)),r(this,dt).off(Ue.SessionDetached,r(this,Xd)),E(this,Nt,kg).call(this,r(this,dt))}getAvailableTargets(){return r(this,lt)}}dt=new WeakMap,on=new WeakMap,lt=new WeakMap,Ss=new WeakMap,Vd=new WeakMap,cn=new WeakMap,Cs=new WeakMap,ks=new WeakMap,un=new WeakMap,Gd=new WeakMap,Es=new WeakMap,Jd=new WeakMap,_o=new WeakMap,af=new WeakMap,Nt=new WeakSet,Cg=function(e){const t=a=>{r(this,of).call(this,e,a)};ee(!r(this,ks).has(e)),r(this,ks).set(e,t),e.on("Target.attachedToTarget",t);const s=a=>r(this,cf).call(this,e,a);ee(!r(this,un).has(e)),r(this,un).set(e,s),e.on("Target.detachedFromTarget",s)},kg=function(e){const t=r(this,ks).get(e);t&&(e.off("Target.attachedToTarget",t),r(this,ks).delete(e)),r(this,un).has(e)&&(e.off("Target.detachedFromTarget",r(this,un).get(e)),r(this,un).delete(e))},Xd=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,Zd=new WeakMap,of=new WeakMap,Vo=function(e){e!==void 0&&r(this,Es).delete(e),r(this,Es).size===0&&r(this,Gd).resolve()},cf=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const km=class km extends by{constructor(e,t,s,a,o,c,u,d=!0){super();f(this,xs);U(this,"protocol","cdp");f(this,To);f(this,el);f(this,ht);f(this,tl);f(this,rl);f(this,Io);f(this,si);f(this,ai,new Map);f(this,tt);f(this,il,()=>{this.emit("disconnected",void 0)});f(this,uf,(e,t)=>{var u;const{browserContextId:s}=e,a=s&&r(this,ai).has(s)?r(this,ai).get(s):r(this,si);if(!a)throw new Error("Missing browser context");const o=d=>r(this,ht)._createSession(e,d),c=new a1(e,t,a,r(this,tt),o);return(u=e.url)!=null&&u.startsWith("devtools://")?new n1(e,t,a,r(this,tt),o,r(this,To)??null):r(this,Io).call(this,c)?new Fh(e,t,a,r(this,tt),o,r(this,To)??null):e.type==="service_worker"||e.type==="shared_worker"?new s1(e,t,a,r(this,tt),o):c});f(this,nl,async e=>{e._isTargetExposed()&&await e._initializedDeferred.valueOrThrow()===Yt.SUCCESS&&(this.emit("targetcreated",e),e.browserContext().emit("targetcreated",e))});f(this,sl,async e=>{e._initializedDeferred.resolve(Yt.ABORTED),e._isClosedDeferred.resolve(),e._isTargetExposed()&&await e._initializedDeferred.valueOrThrow()===Yt.SUCCESS&&(this.emit("targetdestroyed",e),e.browserContext().emit("targetdestroyed",e))});f(this,al,({target:e})=>{this.emit("targetchanged",e),e.browserContext().emit("targetchanged",e)});f(this,ol,e=>{this.emit("targetdiscovered",e)});y(this,To,s),y(this,el,a),y(this,ht,e),y(this,tl,o||(()=>{})),y(this,rl,c||(()=>!0)),E(this,xs,$C).call(this,u),y(this,tt,new c1(e,r(this,uf),r(this,rl),d)),y(this,si,new Np(r(this,ht),this));for(const p of t)r(this,ai).set(p,new Np(r(this,ht),this,p))}static async _create(e,t,s,a,o,c,u,d,p,h=!0){const l=new km(e,t,a,c,u,d,p,h);return s&&await e.send("Security.setIgnoreCertificateErrors",{ignore:!0}),await l._attach(o),l}async _attach(e){r(this,ht).on(Ue.Disconnected,r(this,il)),e&&await r(this,si).setDownloadBehavior(e),r(this,tt).on("targetAvailable",r(this,nl)),r(this,tt).on("targetGone",r(this,sl)),r(this,tt).on("targetChanged",r(this,al)),r(this,tt).on("targetDiscovered",r(this,ol)),await r(this,tt).initialize()}_detach(){r(this,ht).off(Ue.Disconnected,r(this,il)),r(this,tt).off("targetAvailable",r(this,nl)),r(this,tt).off("targetGone",r(this,sl)),r(this,tt).off("targetChanged",r(this,al)),r(this,tt).off("targetDiscovered",r(this,ol))}process(){return r(this,el)??null}_targetManager(){return r(this,tt)}_getIsPageTargetCallback(){return r(this,Io)}async createBrowserContext(e={}){const{proxyServer:t,proxyBypassList:s,downloadBehavior:a}=e,{browserContextId:o}=await r(this,ht).send("Target.createBrowserContext",{proxyServer:t,proxyBypassList:s&&s.join(",")}),c=new Np(r(this,ht),this,o);return a&&await c.setDownloadBehavior(a),r(this,ai).set(o,c),c}browserContexts(){return[r(this,si),...Array.from(r(this,ai).values())]}defaultBrowserContext(){return r(this,si)}async _disposeContext(e){e&&(await r(this,ht).send("Target.disposeBrowserContext",{browserContextId:e}),r(this,ai).delete(e))}wsEndpoint(){return r(this,ht).url()}async newPage(){return await r(this,si).newPage()}async _createPageInContext(e){const{targetId:t}=await r(this,ht).send("Target.createTarget",{url:"about:blank",browserContextId:e||void 0}),s=await this.waitForTarget(c=>c._targetId===t);if(!s)throw new Error(`Missing target for page (id = ${t})`);if(!(await s._initializedDeferred.valueOrThrow()===Yt.SUCCESS))throw new Error(`Failed to create target for page (id = ${t})`);const o=await s.page();if(!o)throw new Error(`Failed to create a page for context (id = ${e})`);return o}targets(){return Array.from(r(this,tt).getAvailableTargets().values()).filter(e=>e._isTargetExposed()&&e._initializedDeferred.value()===Yt.SUCCESS)}target(){const e=this.targets().find(t=>t.type()==="browser");if(!e)throw new Error("Browser target is not found");return e}async version(){return(await E(this,xs,Eg).call(this)).product}async userAgent(){return(await E(this,xs,Eg).call(this)).userAgent}async close(){await r(this,tl).call(null),await this.disconnect()}disconnect(){return r(this,tt).dispose(),r(this,ht).dispose(),this._detach(),Promise.resolve()}get connected(){return!r(this,ht)._closed}get debugInfo(){return{pendingProtocolErrors:r(this,ht).getPendingProtocolErrors()}}};To=new WeakMap,el=new WeakMap,ht=new WeakMap,tl=new WeakMap,rl=new WeakMap,Io=new WeakMap,si=new WeakMap,ai=new WeakMap,tt=new WeakMap,il=new WeakMap,xs=new WeakSet,$C=function(e){y(this,Io,e||(t=>t.type()==="page"||t.type()==="background_page"||t.type()==="webview"))},uf=new WeakMap,nl=new WeakMap,sl=new WeakMap,al=new WeakMap,ol=new WeakMap,Eg=function(){return r(this,ht).send("Browser.getVersion")};let Lp=km;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */async function u1(n,i,e){const{acceptInsecureCerts:t=!1,defaultViewport:s=fy,downloadBehavior:a,targetFilter:o,_isPageTarget:c,slowMo:u=0,protocolTimeout:d}=e,p=new Gy(i,n,u,d),{browserContextIds:h}=await p.send("Target.getBrowserContexts");return await Lp._create(p,h,t,s,a,void 0,()=>p.send("Browser.close").catch(le),o,c)}const hv={targetId:"tabTargetId",type:"tab",title:"tab",url:"about:blank",attached:!1,canAccessOpener:!1},fv={targetId:"pageTargetId",type:"page",title:"page",url:"about:blank",attached:!1,canAccessOpener:!1},Em=class Em{constructor(i){f(this,It);U(this,"onmessage");U(this,"onclose");f(this,Ps);f(this,cl,(i,e,t)=>{i.tabId===r(this,Ps)&&E(this,It,Gt).call(this,{sessionId:i.sessionId??"pageTargetSessionId",method:e,params:t})});y(this,Ps,i),chrome.debugger.onEvent.addListener(r(this,cl))}static async connectTab(i){return await chrome.debugger.attach({tabId:i},"1.3"),new Em(i)}send(i){const e=JSON.parse(i);switch(e.method){case"Browser.getVersion":{E(this,It,Gt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{protocolVersion:"1.3",product:"chrome",revision:"unknown",userAgent:"chrome",jsVersion:"unknown"}});return}case"Target.getBrowserContexts":{E(this,It,Gt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{browserContextIds:[]}});return}case"Target.setDiscoverTargets":{E(this,It,Gt).call(this,{method:"Target.targetCreated",params:{targetInfo:hv}}),E(this,It,Gt).call(this,{method:"Target.targetCreated",params:{targetInfo:fv}}),E(this,It,Gt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{}});return}case"Target.setAutoAttach":if(e.sessionId==="tabTargetSessionId"){E(this,It,Gt).call(this,{method:"Target.attachedToTarget",params:{targetInfo:fv,sessionId:"pageTargetSessionId"}}),E(this,It,Gt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{}});return}else if(!e.sessionId){E(this,It,Gt).call(this,{method:"Target.attachedToTarget",params:{targetInfo:hv,sessionId:"tabTargetSessionId"}}),E(this,It,Gt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{}});return}}e.sessionId==="pageTargetSessionId"&&delete e.sessionId,chrome.debugger.sendCommand({tabId:r(this,Ps),sessionId:e.sessionId},e.method,e.params).then(t=>{E(this,It,Gt).call(this,{id:e.id,sessionId:e.sessionId??"pageTargetSessionId",method:e.method,result:t})}).catch(t=>{E(this,It,Gt).call(this,{id:e.id,sessionId:e.sessionId??"pageTargetSessionId",method:e.method,error:{code:t==null?void 0:t.code,data:t==null?void 0:t.data,message:(t==null?void 0:t.message)??"CDP error had no message"}})})}close(){chrome.debugger.onEvent.removeListener(r(this,cl)),chrome.debugger.detach({tabId:r(this,Ps)})}};Ps=new WeakMap,cl=new WeakMap,It=new WeakSet,Gt=function(i){var e;(e=this.onmessage)==null||e.call(this,JSON.stringify(i))};let Bp=Em;const xm=class xm{constructor(i){f(this,oi);U(this,"onmessage");U(this,"onclose");y(this,oi,i),r(this,oi).addEventListener("message",e=>{this.onmessage&&this.onmessage.call(null,e.data)}),r(this,oi).addEventListener("close",()=>{this.onclose&&this.onclose.call(null)}),r(this,oi).addEventListener("error",()=>{})}static create(i){return new Promise((e,t)=>{const s=new WebSocket(i);s.addEventListener("open",()=>e(new xm(s))),s.addEventListener("error",t)})}send(i){r(this,oi).send(i)}close(){r(this,oi).close()}};oi=new WeakMap;let jp=xm;const d1=Object.freeze(Object.defineProperty({__proto__:null,BrowserWebSocketTransport:jp},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const l1=[{name:"Blackberry PlayBook",userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:600,height:1024,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Blackberry PlayBook landscape",userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:1024,height:600,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"BlackBerry Z30",userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"BlackBerry Z30 landscape",userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Note 3",userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Note 3 landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Note II",userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Note II landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S III",userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S III landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S5",userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S8",userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36",viewport:{width:360,height:740,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S8 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36",viewport:{width:740,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S9+",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36",viewport:{width:320,height:658,deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S9+ landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36",viewport:{width:658,height:320,deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Tab S4",userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36",viewport:{width:712,height:1138,deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Tab S4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36",viewport:{width:1138,height:712,deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad (gen 6)",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad (gen 6) landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad (gen 7)",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad (gen 7) landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Mini",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Mini landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Pro",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:1366,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Pro landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1366,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Pro 11",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Pro 11 landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 4",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53",viewport:{width:320,height:480,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 4 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53",viewport:{width:480,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 5",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 5 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 6",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 6 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 6 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 6 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 7",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 7 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 7 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 7 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 8",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 8 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 8 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 8 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone SE",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone SE landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone X",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone X landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone XR",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone XR landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:414,height:828,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:828,height:414,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:428,height:926,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:926,height:428,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Mini",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Mini landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:428,height:926,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:926,height:428,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Mini",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Mini landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:390,height:663,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:750,height:340,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:428,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:832,height:378,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"JioPhone 2",userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:240,height:320,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"JioPhone 2 landscape",userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:320,height:240,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Kindle Fire HDX",userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Kindle Fire HDX landscape",userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"LG Optimus L70",userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640,deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"LG Optimus L70 landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384,deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Microsoft Lumia 550",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Microsoft Lumia 950",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640,deviceScaleFactor:4,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Microsoft Lumia 950 landscape",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360,deviceScaleFactor:4,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 10",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:800,height:1280,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 10 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:1280,height:800,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 4",userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 5",userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 5X",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 5X landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 6",userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 6 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 6P",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 6P landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 7",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:600,height:960,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 7 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:960,height:600,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nokia Lumia 520",userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533,deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nokia Lumia 520 landscape",userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320,deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nokia N9",userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nokia N9 landscape",userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 2",userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:731,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 2 landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:731,height:411,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 2 XL",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:823,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 2 XL landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:823,height:411,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 3",userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36",viewport:{width:393,height:786,deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 3 landscape",userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36",viewport:{width:786,height:393,deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 4",userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36",viewport:{width:353,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36",viewport:{width:745,height:353,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 4a (5G)",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:353,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 4a (5G) landscape",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:745,height:353,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 5",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:393,height:851,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:851,height:393,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Moto G4",userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Moto G4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}}],pv={};for(const n of l1)pv[n.name]=n;Object.freeze(pv);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */async function h1(n,i,e){const{acceptInsecureCerts:t=!1,defaultViewport:s=fy}=e,{bidiConnection:a,cdpConnection:o,closeCallback:c}=await f1(n,i,e);return await(await Promise.resolve().then(()=>dS)).BidiBrowser.create({connection:a,cdpConnection:o,closeCallback:c,process:void 0,defaultViewport:s,acceptInsecureCerts:t,capabilities:e.capabilities})}async function f1(n,i,e){const t=await Promise.resolve().then(()=>dS),{slowMo:s=0,protocolTimeout:a}=e,o=new t.BidiConnection(i,n,s,a);try{const p=await o.send("session.status",{});if("type"in p&&p.type==="success")return{bidiConnection:o,closeCallback:async()=>{await o.send("browser.close",{}).catch(le)}}}catch(p){if(!(p instanceof vn))throw p}o.unbind();const c=new Gy(i,n,s,a,!0);if((await c.send("Browser.getVersion")).product.toLowerCase().includes("firefox"))throw new be("Firefox is not supported in BiDi over CDP mode.");const d=await t.connectBidiOverCdp(c);return{cdpConnection:c,bidiConnection:d,closeCallback:async()=>{await c.send("Browser.close").catch(le)}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const mv=async()=>uy?(await Promise.resolve().then(()=>jT)).NodeWebSocketTransport:(await Promise.resolve().then(()=>d1)).BrowserWebSocketTransport;async function p1(n){const{connectionTransport:i,endpointUrl:e}=await m1(n);return n.protocol==="webDriverBiDi"?await h1(i,e,n):await u1(i,e,n)}async function m1(n){const{browserWSEndpoint:i,browserURL:e,transport:t,headers:s={}}=n;if(ee(+!!i+ +!!e+ +!!t==1,"Exactly one of browserWSEndpoint, browserURL or transport must be passed to puppeteer.connect"),t)return{connectionTransport:t,endpointUrl:""};if(i)return{connectionTransport:await(await mv()).create(i,s),endpointUrl:i};if(e){const a=await g1(e);return{connectionTransport:await(await mv()).create(a),endpointUrl:a}}throw new Error("Invalid connection options")}async function g1(n){const i=new URL("/json/version",n);try{const e=await globalThis.fetch(i.toString(),{method:"GET"});if(!e.ok)throw new Error(`HTTP ${e.statusText}`);return(await e.json()).webSocketDebuggerUrl}catch(e){throw Xt(e)&&(e.message=`Failed to fetch browser webSocket URL from ${i}: `+e.message),e}}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class gv{constructor(i){U(this,"_isPuppeteerCore");U(this,"_changedBrowsers",!1);this._isPuppeteerCore=i.isPuppeteerCore,this.connect=this.connect.bind(this)}static registerCustomQueryHandler(i,e){return this.customQueryHandlers.register(i,e)}static unregisterCustomQueryHandler(i){return this.customQueryHandlers.unregister(i)}static customQueryHandlerNames(){return this.customQueryHandlers.names()}static clearCustomQueryHandlers(){return this.customQueryHandlers.clear()}connect(i){return p1(i)}}U(gv,"customQueryHandlers",wp);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const w1=new gv({isPuppeteerCore:!0}),{connect:y1}=w1,v1="YYYY-MM-DD HH:mm:ss.SSS",b1={automateFetchJobItemData:async function(n,i){try{let e=await S1(i);wi(n,e)}catch(e){tr(n,"[background] automateFetchJobItemData error : "+e.message)}}},ia=new Map;ia.set(Le,C1),ia.set(Ee,k1),ia.set(fn,x1),ia.set(Wl,P1),ia.set(ow,E1);async function S1({url:n,platform:i,delay:e,delayRandomRange:t,maxPage:s}){if(i==Le){At(`[puppeteer] clear cookies platform = ${Le} start`),At(`[puppeteer] clear cookies url = ${n}`);let d=await chrome.cookies.getAll({url:n});At(`[puppeteer] cookies length = ${d.length}`),d.forEach(async p=>{await chrome.cookies.remove({name:p.name,url:n,storeId:p.storeId})}),d=await chrome.cookies.getAll({url:n}),At("[puppeteer] clear cookies"),At(`[puppeteer] cookies length = ${d.length}`),At(`[puppeteer] clear cookies platform = ${Le} end`)}let a=await chrome.windows.create({url:n,width:800,height:600});const o=a.tabs[0];At(`[puppeteer] create tab id = ${o.id}`);const c=await y1({transport:await Bp.connectTab(o.id)}),[u]=await c.pages();try{const d=ia.get(i);if(At(`[puppeteer] get job item page handle function platform = ${i}`),d){const p=new Date,h=await d(o,c,u,i,e,t,s);return h.startDatetime=p,h.endDatetime=new Date,h}else throw`not support platform = ${i}`}finally{u&&u.close(),a&&chrome.windows.remove(a.id)}}function Ie(n,i){At(i),n.push(`${Vf(new Date).format(v1)} ${i}`)}async function C1(n,i,e,t,s,a,o){const c=[],u=[];let d=null,p=1;try{if(Ie(c,`[puppeteer] [${t}] handle _51jobHandle`),await e.waitForSelector(".btn-next",{timeout:5e3})){for(;;){await e.waitForSelector(".__status_job_render_finish");let l=await e.waitForSelector(".btn-next");if(u.push(await e.screenshot({encoding:"base64",fullPage:!0})),p++,o&&o>0&&p>o){Ie(c,`[puppeteer] [${t}] page(${p}) over maxPage(${o})`);break}if(await(await l.getProperty("disabled")).jsonValue()){Ie(c,`[puppeteer] [${t}] is last page`),Ie(c,`[puppeteer] [${t}] close page tab id = ${n.id}`);break}else Ie(c,`[puppeteer] [${t}] has next page tab id = ${n.id}`),Ie(c,`[puppeteer] [${t}] will go to page no = ${p}`),await ec(s,a),await l.click(),Ie(c,`[puppeteer] [${t}] go to page no = ${p}`)}return{logList:c,count:p,error:d,screenshotList:u}}else await chrome.tabs.reload(n.id)}catch(h){return Lr(h),Ie(c,`[puppeteer] [${t}] handle has error`),d=await na(t,e)?gi:zl,u.push(await e.screenshot({encoding:"base64",fullPage:!0})),{logList:c,count:p,error:d,screenshotList:u}}}async function k1(n,i,e,t,s,a,o){const c=[],u=[];let d=null,p=1;try{if(Ie(c,`[puppeteer] [${t}] handle _bossHandle`),await e.waitForNavigation(),d=await na(t,e)?gi:null,d==gi)throw"navigate to human valid page";try{await e.waitForSelector(".__status_job_render_finish",{timeout:5e3})}catch{await chrome.tabs.reload(n.id),await e.waitForSelector(".__status_job_render_finish")}for(;;){await e.waitForSelector(".__status_job_render_finish");let h=await e.waitForSelector(".ui-icon-arrow-right");if(u.push(await e.screenshot({encoding:"base64",fullPage:!0})),p++,o&&o>0&&p>o){Ie(c,`[puppeteer] [${t}] page(${p}) over maxPage(${o})`);break}if(await e.evaluate(()=>{var S;const m=(S=document.querySelector(".ui-icon-arrow-right"))==null?void 0:S.parentElement;return(m==null?void 0:m.className)=="disabled"})){Ie(c,`[puppeteer] [${t}] is last page`),Ie(c,`[puppeteer] [${t}] close page tab id = ${n.id}`);break}else Ie(c,`[puppeteer] [${t}] has next page tab id = ${n.id}`),Ie(c,`[puppeteer] [${t}] will go to page no = ${p}`),await ec(s,a),await e.evaluate(m=>{m.click()},h),Ie(c,`[puppeteer] [${t}] go to page no = ${p}`)}return{logList:c,count:p,error:d,screenshotList:u}}catch(h){return Lr(h),Ie(c,`[puppeteer] [${t}] handle has error`),d=await na(t,e)?gi:zl,u.push(await e.screenshot({encoding:"base64",fullPage:!0})),{logList:c,count:p,error:d,screenshotList:u}}}async function E1(n,i,e,t,s,a,o){const c=[],u=[];let d=null,p=1;try{if(Ie(c,`[puppeteer] [${t}] handle _liepinHandle`),await e.waitForNavigation(),d=await na(t,e)?gi:null,d==gi)throw"navigate to human valid page";for(await e.waitForSelector(".__status_job_render_finish");;){await e.waitForSelector(".__status_job_render_finish");let h=await e.waitForSelector(".anticon-right");if(u.push(await e.screenshot({encoding:"base64",fullPage:!0})),p++,o&&o>0&&p>o){Ie(c,`[puppeteer] [${t}] page(${p}) over maxPage(${o})`);break}if(await e.evaluate(()=>document.querySelector(".anticon-right").parentElement.disabled)){Ie(c,`[puppeteer] [${t}] is last page`),Ie(c,`[puppeteer] [${t}] close page tab id = ${n.id}`);break}else Ie(c,`[puppeteer] [${t}] has next page tab id = ${n.id}`),Ie(c,`[puppeteer] [${t}] will go to page no = ${p}`),await ec(s,a),await h.click(),Ie(c,`[puppeteer] [${t}] go to page no = ${p}`)}return{logList:c,count:p,error:d,screenshotList:u}}catch(h){return Lr(h),Ie(c,`[puppeteer] [${t}] handle has error`),d=await na(t,e)?gi:zl,u.push(await e.screenshot({encoding:"base64",fullPage:!0})),{logList:c,count:p,error:d,screenshotList:u}}}async function x1(n,i,e,t,s,a,o){return wv(n,i,e,t,s,a,o,{nextButtonSelector:".btn ::-p-text(下一页)",lastPageButtonSelector:"a.btn.soupager__btn.soupager__btn--disable"})}async function P1(n,i,e,t,s,a,o){return wv(n,i,e,t,s,a,o,{nextButtonSelector:".lg-pagination-next",lastPageButtonSelector:"li.lg-pagination-next.lg-pagination-disabled"})}async function wv(n,i,e,t,s,a,o,{nextButtonSelector:c,lastPageButtonSelector:u}){const d=[],p=[];let h=null,l=1;try{Ie(d,`[puppeteer] [${t}] handle _handle`);try{await e.waitForNavigation({timeout:5e3})}catch{Ie(d,`[puppeteer] [${t}] waitForNavigation error`)}for(;;){await e.waitForSelector(".__status_job_render_finish");let m=await e.waitForSelector(`${c}`);if(p.push(await e.screenshot({encoding:"base64",fullPage:!0})),l++,o&&o>0&&l>o){Ie(d,`[puppeteer] [${t}] page(${l}) over maxPage(${o})`);break}if(m.remoteObject().description==`${u}`){Ie(d,`[puppeteer] [${t}] is last page`),Ie(d,`[puppeteer] [${t}] close page tab id = ${n.id}`);break}else Ie(d,`[puppeteer] [${t}] has next page tab id = ${n.id}`),Ie(d,`[puppeteer] [${t}] will go to page no = ${l}`),m=await e.waitForSelector(`${c}`),await ec(s,a),await m.click(),Ie(d,`[puppeteer] [${t}] go to page no = ${l}`)}return{logList:d,count:l,error:h,screenshotList:p}}catch(m){return Lr(m),Ie(d,`[puppeteer] [${t}] handle has error`),h=await na(t,e)?gi:zl,p.push(await e.screenshot({encoding:"base64",fullPage:!0})),{logList:d,count:l,error:h,screenshotList:p}}}async function na(n,i){try{if(n==Ee)return i.url().startsWith("https://www.zhipin.com/web/user/safe/verify-slider");if(n==Le)return!!await i.waitForSelector(".waf-nc-wrapper",{timeout:5e3});if(n==fn)return!!await i.waitForSelector(".__status_job_render_error",{timeout:5e3});if(n==Wl)return!1;if(n==ow)return!1;throw`checkValidHuman unknow platform ${n}`}catch{return!1}}const _1={emitterEmit:async function(n,i){try{await chrome.storage.local.set(i),wi(n,{})}catch(e){tr(n,"[background] emitterEmit error : "+e.message)}}},T1={systemTabCreate:async function(n,i){try{wi(n,await chrome.tabs.create(i))}catch(e){tr(n,"[background] userGet error : "+e.message)}}},I1={userGet:async function(n,i){try{wi(n,await M1())}catch(e){tr(n,"[background] userGet error : "+e.message)}},userSet:async function(n,i){try{await yv(i),wi(n,{})}catch(e){tr(n,"[background] userSet error : "+e.message)}}};async function yv(n){let i=new Tw;return i.key=dw,i.value=JSON.stringify(n),Gl.addOrUpdateConfig(i)}async function M1(){let n=new kw,i=await Gl.getConfigByKey(dw);if(i){let e=JSON.parse(i.value);if(e)return Object.assign(n,e),n}return null}const A1=Ae(()=>{chrome.runtime.onInstalled.addListener(async()=>{const h=[{id:1,action:{type:chrome.declarativeNetRequest.RuleActionType.MODIFY_HEADERS,requestHeaders:[{header:"Referer",operation:chrome.declarativeNetRequest.HeaderOperation.SET,value:"https://creditbj.jxj.beijing.gov.cn/credit-portal/credit_service/publicity/record/black"}]},condition:{initiatorDomains:[chrome.runtime.id],urlFilter:"|https://creditbj.jxj.beijing.gov.cn/credit-portal/api/publicity/record/BLACK/0",resourceTypes:[chrome.declarativeNetRequest.ResourceType.XMLHTTPREQUEST]}}];await chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:h.map(l=>l.id),addRules:h})});const n=()=>setInterval(chrome.runtime.getPlatformInfo,2e4);chrome.runtime.onStartup.addListener(n),n(),chrome.action.onClicked.addListener(()=>{chrome.tabs.create({url:"admin.html"})});const i=new Map,e=new Map;chrome.tabs.onUpdated.addListener(async(h,l,m)=>{let S=m.url;if(S!=null&&S.startsWith(qE)&&!t(S)){let g=h0();s(S);let w=new URL(S);if(w.searchParams.has("error"))g.keys().forEach(v=>{tr(v)}),g.clear();else{let v=w.searchParams.get("code");try{const k=new URLSearchParams({client_id:uw,client_secret:OE,code:v});let C=`${BE}?${k.toString()}`,b=await e0(C,O=>{}),D=new URLSearchParams(b);const A=d0(D);let R=_w(new bw,A);await Iw(R);let x=await t0({url:jE,headers:{Authorization:`Bearer ${R.accessToken}`}},O=>{}),N=_w(new kw,x);await yv(N);let M=await Mw();g.keys().forEach(O=>{wi(O,M)}),chrome.tabs.remove(h),g.clear()}catch(k){Lr(k),g.keys().forEach(C=>{tr(C)})}}return}if((l==null?void 0:l.status)=="complete"&&!a(m.id)&&m.url){let g=u0(m.url),w=await Sw.getJobByDetailUrl(g);w&&(At(`save jobBrowseDetailHistory start jobId = ${w.jobId}`),await Sw.addJobBrowseDetailHistory(w.jobId),At(`save jobBrowseDetailHistory success jobId = ${w.jobId}`),o(m.id))}});function t(h){return e.has(h)}function s(h){e.set(h,null)}function a(h){return i.has(h)}function o(h){i.set(h,null)}const c=new Map,{mergeServiceMethod:u}=QE();u(c,l0),u(c,I1),u(c,T1),u(c,b1),u(c,_1);let d;async function p(h){var l,m;if(!await((m=(l=chrome.offscreen).hasDocument)==null?void 0:m.call(l))){if(d)await d;else{d=chrome.offscreen.createDocument({url:chrome.runtime.getURL(h),reasons:[chrome.offscreen.Reason.WORKERS||chrome.offscreen.Reason.BLOBS],justification:"To run database in web worker"}),await d,d=null;let S=0,g=!1;const w=async()=>{if(!g){g=!0;try{S+=1,At(`[Task] Task run seq = < ${S} >`),await ZE.appBackgroundTaskRun({})}catch(v){Lr(v)}g=!1,await ec($E,0),w()}};w()}chrome.runtime.onMessage.addListener(async function(S,g,w){YE(S,g,c)})}}p("offscreen.html")});function JT(){}((SS=(bS=globalThis.browser)==null?void 0:bS.runtime)==null?void 0:SS.id)==null?globalThis.chrome:globalThis.browser;function Dh(n,...i){}const R1={debug:(...n)=>Dh(console.debug,...n),log:(...n)=>Dh(console.log,...n),warn:(...n)=>Dh(console.warn,...n),error:(...n)=>Dh(console.error,...n)};let qp;try{qp=A1.main(),qp instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(n){throw R1.error("The background crashed on startup!"),n}const F1=qp;var Oh={exports:{}},$p,vv;function D1(){if(vv)return $p;vv=1;var n=1e3,i=n*60,e=i*60,t=e*24,s=t*7,a=t*365.25;$p=function(p,h){h=h||{};var l=typeof p;if(l==="string"&&p.length>0)return o(p);if(l==="number"&&isFinite(p))return h.long?u(p):c(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function o(p){if(p=String(p),!(p.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(h){var l=parseFloat(h[1]),m=(h[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*t;case"hours":case"hour":case"hrs":case"hr":case"h":return l*e;case"minutes":case"minute":case"mins":case"min":case"m":return l*i;case"seconds":case"second":case"secs":case"sec":case"s":return l*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function c(p){var h=Math.abs(p);return h>=t?Math.round(p/t)+"d":h>=e?Math.round(p/e)+"h":h>=i?Math.round(p/i)+"m":h>=n?Math.round(p/n)+"s":p+"ms"}function u(p){var h=Math.abs(p);return h>=t?d(p,h,t,"day"):h>=e?d(p,h,e,"hour"):h>=i?d(p,h,i,"minute"):h>=n?d(p,h,n,"second"):p+" ms"}function d(p,h,l,m){var S=h>=l*1.5;return Math.round(p/l)+" "+m+(S?"s":"")}return $p}var Kp,bv;function O1(){if(bv)return Kp;bv=1;function n(i){t.debug=t,t.default=t,t.coerce=d,t.disable=c,t.enable=a,t.enabled=u,t.humanize=D1(),t.destroy=p,Object.keys(i).forEach(h=>{t[h]=i[h]}),t.names=[],t.skips=[],t.formatters={};function e(h){let l=0;for(let m=0;m<h.length;m++)l=(l<<5)-l+h.charCodeAt(m),l|=0;return t.colors[Math.abs(l)%t.colors.length]}t.selectColor=e;function t(h){let l,m=null,S,g;function w(...v){if(!w.enabled)return;const k=w,C=Number(new Date),b=C-(l||C);k.diff=b,k.prev=l,k.curr=C,l=C,v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let D=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(R,x)=>{if(R==="%%")return"%";D++;const N=t.formatters[x];if(typeof N=="function"){const M=v[D];R=N.call(k,M),v.splice(D,1),D--}return R}),t.formatArgs.call(k,v),(k.log||t.log).apply(k,v)}return w.namespace=h,w.useColors=t.useColors(),w.color=t.selectColor(h),w.extend=s,w.destroy=t.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(S!==t.namespaces&&(S=t.namespaces,g=t.enabled(h)),g),set:v=>{m=v}}),typeof t.init=="function"&&t.init(w),w}function s(h,l){const m=t(this.namespace+(typeof l>"u"?":":l)+h);return m.log=this.log,m}function a(h){t.save(h),t.namespaces=h,t.names=[],t.skips=[];const l=(typeof h=="string"?h:"").trim().replace(" ",",").split(",").filter(Boolean);for(const m of l)m[0]==="-"?t.skips.push(m.slice(1)):t.names.push(m)}function o(h,l){let m=0,S=0,g=-1,w=0;for(;m<h.length;)if(S<l.length&&(l[S]===h[m]||l[S]==="*"))l[S]==="*"?(g=S,w=m,S++):(m++,S++);else if(g!==-1)S=g+1,w++,m=w;else return!1;for(;S<l.length&&l[S]==="*";)S++;return S===l.length}function c(){const h=[...t.names,...t.skips.map(l=>"-"+l)].join(",");return t.enable(""),h}function u(h){for(const l of t.skips)if(o(h,l))return!1;for(const l of t.names)if(o(h,l))return!0;return!1}function d(h){return h instanceof Error?h.stack||h.message:h}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}return Kp=n,Kp}var Sv;function N1(){return Sv||(Sv=1,function(n,i){i.formatArgs=t,i.save=s,i.load=a,i.useColors=e,i.storage=o(),i.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function t(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;u.splice(1,0,d,"color: inherit");let p=0,h=0;u[0].replace(/%[a-zA-Z%]/g,l=>{l!=="%%"&&(p++,l==="%c"&&(h=p))}),u.splice(h,0,d)}i.log=console.debug||console.log||(()=>{});function s(u){try{u?i.storage.setItem("debug",u):i.storage.removeItem("debug")}catch{}}function a(){let u;try{u=i.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function o(){try{return localStorage}catch{}}n.exports=O1()(i);const{formatters:c}=n.exports;c.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}}(Oh,Oh.exports)),Oh.exports}var L1=N1();const B1=Object.freeze(Object.defineProperty({__proto__:null,default:zf(L1)},Symbol.toStringTag,{value:"Module"}));var Up={},fc={},sa={};function j1(n){return{all:n=n||new Map,on:function(i,e){var t=n.get(i);t?t.push(e):n.set(i,[e])},off:function(i,e){var t=n.get(i);t&&(e?t.splice(t.indexOf(e)>>>0,1):n.set(i,[]))},emit:function(i,e){var t=n.get(i);t&&t.slice().map(function(s){s(e)}),(t=n.get("*"))&&t.slice().map(function(s){s(i,e)})}}}const q1=hw(Object.freeze(Object.defineProperty({__proto__:null,default:j1},Symbol.toStringTag,{value:"Module"})));var Cv;function aa(){var t,s;if(Cv)return sa;Cv=1;var n=sa.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(sa,"__esModule",{value:!0}),sa.EventEmitter=void 0;const i=n(q1);let e=(s=class{constructor(){f(this,t,(0,i.default)())}on(o,c){return r(this,t).on(o,c),this}once(o,c){const u=d=>{c(d),this.off(o,u)};return this.on(o,u)}off(o,c){return r(this,t).off(o,c),this}emit(o,c){r(this,t).emit(o,c)}removeAllListeners(o){return o?r(this,t).all.delete(o):r(this,t).all.clear(),this}},t=new WeakMap,s);return sa.EventEmitter=e,sa}var pc={},kv;function Qt(){if(kv)return pc;kv=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.LogType=void 0;var n;return function(i){i.bidi="bidi",i.cdp="cdp",i.debug="debug",i.debugError="debug:error",i.debugInfo="debug:info"}(n||(pc.LogType=n={})),pc}var mc={},Ev;function $1(){var t,s,a,o,c,u,KC;if(Ev)return mc;Ev=1;var n;Object.defineProperty(mc,"__esModule",{value:!0}),mc.ProcessingQueue=void 0;const i=Qt();let e=(t=class{constructor(h,l){f(this,u);f(this,s);f(this,a);f(this,o,[]);f(this,c,!1);y(this,a,h),y(this,s,l)}add(h,l){r(this,o).push([h,l]),E(this,u,KC).call(this)}},s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakSet,KC=async function(){var h;if(!r(this,c)){for(y(this,c,!0);r(this,o).length>0;){const l=r(this,o).shift();if(!l)continue;const[m,S]=l;(h=r(this,s))==null||h.call(this,n.LOGGER_PREFIX,"Processing event:",S),await m.then(g=>{var w;if(g.kind==="error"){(w=r(this,s))==null||w.call(this,i.LogType.debugError,"Event threw before sending:",g.error.message,g.error.stack);return}return r(this,a).call(this,g.value)}).catch(g=>{var w;(w=r(this,s))==null||w.call(this,i.LogType.debugError,"Event was not processed:",g==null?void 0:g.message)})}y(this,c,!1)}},U(t,"LOGGER_PREFIX",`${i.LogType.debug}:queue`),t);return mc.ProcessingQueue=e,n=e,mc}var gc={},xn={},Hp={},xv;function K1(){return xv||(xv=1,Object.defineProperty(Hp,"__esModule",{value:!0})),Hp}var St={},Pv;function _v(){if(Pv)return St;Pv=1,Object.defineProperty(St,"__esModule",{value:!0}),St.EVENT_NAMES=St.Bluetooth=St.Network=St.BrowsingContext=St.Log=St.Script=St.BiDiModule=void 0;var n;(function(o){o.Bluetooth="bluetooth",o.Browser="browser",o.BrowsingContext="browsingContext",o.Cdp="goog:cdp",o.DeprecatedCdp="cdp",o.Input="input",o.Log="log",o.Network="network",o.Script="script",o.Session="session"})(n||(St.BiDiModule=n={}));var i;(function(o){(function(c){c.Message="script.message",c.RealmCreated="script.realmCreated",c.RealmDestroyed="script.realmDestroyed"})(o.EventNames||(o.EventNames={}))})(i||(St.Script=i={}));var e;(function(o){(function(c){c.LogEntryAdded="log.entryAdded"})(o.EventNames||(o.EventNames={}))})(e||(St.Log=e={}));var t;(function(o){(function(c){c.ContextCreated="browsingContext.contextCreated",c.ContextDestroyed="browsingContext.contextDestroyed",c.DomContentLoaded="browsingContext.domContentLoaded",c.DownloadWillBegin="browsingContext.downloadWillBegin",c.FragmentNavigated="browsingContext.fragmentNavigated",c.HistoryUpdated="browsingContext.historyUpdated",c.Load="browsingContext.load",c.NavigationAborted="browsingContext.navigationAborted",c.NavigationFailed="browsingContext.navigationFailed",c.NavigationStarted="browsingContext.navigationStarted",c.UserPromptClosed="browsingContext.userPromptClosed",c.UserPromptOpened="browsingContext.userPromptOpened"})(o.EventNames||(o.EventNames={}))})(t||(St.BrowsingContext=t={}));var s;(function(o){(function(c){c.AuthRequired="network.authRequired",c.BeforeRequestSent="network.beforeRequestSent",c.FetchError="network.fetchError",c.ResponseCompleted="network.responseCompleted",c.ResponseStarted="network.responseStarted"})(o.EventNames||(o.EventNames={}))})(s||(St.Network=s={}));var a;return function(o){(function(c){c.RequestDevicePromptUpdated="bluetooth.requestDevicePromptUpdated"})(o.EventNames||(o.EventNames={}))}(a||(St.Bluetooth=a={})),St.EVENT_NAMES=new Set([...Object.values(n),...Object.values(t.EventNames),...Object.values(e.EventNames),...Object.values(s.EventNames),...Object.values(i.EventNames)]),St}var Wp={},Tv;function U1(){return Tv||(Tv=1,Object.defineProperty(Wp,"__esModule",{value:!0})),Wp}var me={},Iv;function Mv(){if(Iv)return me;Iv=1,Object.defineProperty(me,"__esModule",{value:!0}),me.NoSuchWebExtensionException=me.InvalidWebExtensionException=me.UnderspecifiedStoragePartitionException=me.UnableToSetFileInputException=me.UnableToSetCookieException=me.NoSuchStoragePartitionException=me.UnsupportedOperationException=me.UnableToCloseBrowserException=me.UnableToCaptureScreenException=me.UnknownErrorException=me.UnknownCommandException=me.SessionNotCreatedException=me.NoSuchUserContextException=me.NoSuchScriptException=me.NoSuchRequestException=me.NoSuchNodeException=me.NoSuchInterceptException=me.NoSuchHistoryEntryException=me.NoSuchHandleException=me.NoSuchFrameException=me.NoSuchElementException=me.NoSuchAlertException=me.MoveTargetOutOfBoundsException=me.InvalidSessionIdException=me.InvalidSelectorException=me.InvalidArgumentException=me.Exception=void 0;class n extends Error{constructor(_,j,$){super();U(this,"error");U(this,"message");U(this,"stacktrace");this.error=_,this.message=j,this.stacktrace=$}toErrorResponse(_){return{type:"error",id:_,error:this.error,message:this.message,stacktrace:this.stacktrace}}}me.Exception=n;class i extends n{constructor(T,_){super("invalid argument",T,_)}}me.InvalidArgumentException=i;class e extends n{constructor(T,_){super("invalid selector",T,_)}}me.InvalidSelectorException=e;class t extends n{constructor(T,_){super("invalid session id",T,_)}}me.InvalidSessionIdException=t;class s extends n{constructor(T,_){super("move target out of bounds",T,_)}}me.MoveTargetOutOfBoundsException=s;class a extends n{constructor(T,_){super("no such alert",T,_)}}me.NoSuchAlertException=a;class o extends n{constructor(T,_){super("no such element",T,_)}}me.NoSuchElementException=o;class c extends n{constructor(T,_){super("no such frame",T,_)}}me.NoSuchFrameException=c;class u extends n{constructor(T,_){super("no such handle",T,_)}}me.NoSuchHandleException=u;class d extends n{constructor(T,_){super("no such history entry",T,_)}}me.NoSuchHistoryEntryException=d;class p extends n{constructor(T,_){super("no such intercept",T,_)}}me.NoSuchInterceptException=p;class h extends n{constructor(T,_){super("no such node",T,_)}}me.NoSuchNodeException=h;class l extends n{constructor(T,_){super("no such request",T,_)}}me.NoSuchRequestException=l;class m extends n{constructor(T,_){super("no such script",T,_)}}me.NoSuchScriptException=m;class S extends n{constructor(T,_){super("no such user context",T,_)}}me.NoSuchUserContextException=S;class g extends n{constructor(T,_){super("session not created",T,_)}}me.SessionNotCreatedException=g;class w extends n{constructor(T,_){super("unknown command",T,_)}}me.UnknownCommandException=w;class v extends n{constructor(T,_=new Error().stack){super("unknown error",T,_)}}me.UnknownErrorException=v;class k extends n{constructor(T,_){super("unable to capture screen",T,_)}}me.UnableToCaptureScreenException=k;class C extends n{constructor(T,_){super("unable to close browser",T,_)}}me.UnableToCloseBrowserException=C;class b extends n{constructor(T,_){super("unsupported operation",T,_)}}me.UnsupportedOperationException=b;class D extends n{constructor(T,_){super("no such storage partition",T,_)}}me.NoSuchStoragePartitionException=D;class A extends n{constructor(T,_){super("unable to set cookie",T,_)}}me.UnableToSetCookieException=A;class R extends n{constructor(T,_){super("unable to set file input",T,_)}}me.UnableToSetFileInputException=R;class x extends n{constructor(T,_){super("underspecified storage partition",T,_)}}me.UnderspecifiedStoragePartitionException=x;class N extends n{constructor(T,_){super("invalid web extension",T,_)}}me.InvalidWebExtensionException=N;class M extends n{constructor(T,_){super("no such web extension",T,_)}}return me.NoSuchWebExtensionException=M,me}var zp={},Av;function H1(){return Av||(Av=1,Object.defineProperty(zp,"__esModule",{value:!0})),zp}var Vp={},Rv;function W1(){return Rv||(Rv=1,Object.defineProperty(Vp,"__esModule",{value:!0})),Vp}var Fv;function $e(){return Fv||(Fv=1,function(n){var i=xn.__createBinding||(Object.create?function(a,o,c,u){u===void 0&&(u=c);var d=Object.getOwnPropertyDescriptor(o,c);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(a,u,d)}:function(a,o,c,u){u===void 0&&(u=c),a[u]=o[c]}),e=xn.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=xn.__importStar||function(){var a=function(o){return a=Object.getOwnPropertyNames||function(c){var u=[];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(u[u.length]=d);return u},a(o)};return function(o){if(o&&o.__esModule)return o;var c={};if(o!=null)for(var u=a(o),d=0;d<u.length;d++)u[d]!=="default"&&i(c,o,u[d]);return e(c,o),c}}(),s=xn.__exportStar||function(a,o){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&i(o,a,c)};Object.defineProperty(n,"__esModule",{value:!0}),n.ChromiumBidi=n.Cdp=void 0,n.Cdp=t(K1()),n.ChromiumBidi=t(_v()),s(U1(),n),s(Mv(),n),s(H1(),n),s(W1(),n)}(xn)),xn}var wc={},Dv;function z1(){if(Dv)return wc;Dv=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.BidiNoOpParser=void 0;let n=class{parseHandleRequestDevicePromptParams(e){return e}parseSimulateAdapterParameters(e){return e}parseSimulateAdvertisementParameters(e){return e}parseSimulatePreconnectedPeripheralParameters(e){return e}parseRemoveUserContextParams(e){return e}parseActivateParams(e){return e}parseCaptureScreenshotParams(e){return e}parseCloseParams(e){return e}parseCreateParams(e){return e}parseGetTreeParams(e){return e}parseHandleUserPromptParams(e){return e}parseLocateNodesParams(e){return e}parseNavigateParams(e){return e}parsePrintParams(e){return e}parseReloadParams(e){return e}parseSetViewportParams(e){return e}parseTraverseHistoryParams(e){return e}parseGetSessionParams(e){return e}parseResolveRealmParams(e){return e}parseSendCommandParams(e){return e}parseAddPreloadScriptParams(e){return e}parseCallFunctionParams(e){return e}parseDisownParams(e){return e}parseEvaluateParams(e){return e}parseGetRealmsParams(e){return e}parseRemovePreloadScriptParams(e){return e}parsePerformActionsParams(e){return e}parseReleaseActionsParams(e){return e}parseSetFilesParams(e){return e}parseAddInterceptParams(e){return e}parseContinueRequestParams(e){return e}parseContinueResponseParams(e){return e}parseContinueWithAuthParams(e){return e}parseFailRequestParams(e){return e}parseProvideResponseParams(e){return e}parseRemoveInterceptParams(e){return e}parseSetCacheBehavior(e){return e}parseSetPermissionsParams(e){return e}parseSubscribeParams(e){return e}parseDeleteCookiesParams(e){return e}parseGetCookiesParams(e){return e}parseSetCookieParams(e){return e}};return wc.BidiNoOpParser=n,wc}var yc={},Ov;function V1(){var e,t,s,UC,o;if(Ov)return yc;Ov=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.BrowserProcessor=void 0;const n=$e();let i=(o=class{constructor(u,d){f(this,s);f(this,e);f(this,t);y(this,e,u),y(this,t,d)}close(){return setTimeout(()=>r(this,e).sendCommand("Browser.close"),0),{}}async createUserContext(u){const d={proxyServer:u["goog:proxyServer"]??void 0},p=u["goog:proxyBypassList"]??void 0;return p&&(d.proxyBypassList=p.join(",")),{userContext:(await r(this,e).sendCommand("Target.createBrowserContext",d)).browserContextId}}async removeUserContext(u){const d=u.userContext;if(d==="default")throw new n.InvalidArgumentException("`default` user context cannot be removed");try{await r(this,e).sendCommand("Target.disposeBrowserContext",{browserContextId:d})}catch(p){throw p.message.startsWith("Failed to find context with id")?new n.NoSuchUserContextException(p.message):p}return{}}async getUserContexts(){const u=await r(this,e).sendCommand("Target.getBrowserContexts");return{userContexts:[{userContext:"default"},...u.browserContextIds.map(d=>({userContext:d}))]}}async getClientWindows(){const u=r(this,t).getTopLevelContexts().map(l=>l.cdpTarget.id),d=await Promise.all(u.map(async l=>await E(this,s,UC).call(this,l))),p=new Set,h=new Array;for(const l of d)p.has(l.clientWindow)||(p.add(l.clientWindow),h.push(l));return{clientWindows:h}}},e=new WeakMap,t=new WeakMap,s=new WeakSet,UC=async function(u){const d=await r(this,e).sendCommand("Browser.getWindowForTarget",{targetId:u});return{active:!1,clientWindow:`${d.windowId}`,state:d.bounds.windowState??"normal",height:d.bounds.height??0,width:d.bounds.width??0,x:d.bounds.left??0,y:d.bounds.top??0}},o);return yc.BrowserProcessor=i,yc}var vc={},Nv;function G1(){var e,t,s,a,o;if(Nv)return vc;Nv=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.CdpProcessor=void 0;const n=$e();let i=(o=class{constructor(u,d,p,h){f(this,e);f(this,t);f(this,s);f(this,a);y(this,e,u),y(this,t,d),y(this,s,p),y(this,a,h)}getSession(u){const d=u.context,p=r(this,e).getContext(d).cdpTarget.cdpSessionId;return p===void 0?{}:{session:p}}resolveRealm(u){const d=u.realm,p=r(this,t).getRealm({realmId:d});if(p===void 0)throw new n.UnknownErrorException(`Could not find realm ${u.realm}`);return{executionContextId:p.executionContextId}}async sendCommand(u){return{result:await(u.session?r(this,s).getCdpClient(u.session):r(this,a)).sendCommand(u.method,u.params),session:u.session}}},e=new WeakMap,t=new WeakMap,s=new WeakMap,a=new WeakMap,o);return vc.CdpProcessor=i,vc}var bc={},Lv;function J1(){var e,t,s,a,HC,c;if(Lv)return bc;Lv=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.BrowsingContextProcessor=void 0;const n=$e();let i=(c=class{constructor(d,p,h){f(this,a);f(this,e);f(this,t);f(this,s);y(this,e,d),y(this,t,p),y(this,s,h),r(this,s).addSubscribeHook(n.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,E(this,a,HC).bind(this))}getTree(d){return{contexts:(d.root===void 0?r(this,t).getTopLevelContexts():[r(this,t).getContext(d.root)]).map(h=>h.serializeToBidiValue(d.maxDepth??Number.MAX_VALUE))}}async create(d){let p,h="default";if(d.referenceContext!==void 0){if(p=r(this,t).getContext(d.referenceContext),!p.isTopLevelContext())throw new n.InvalidArgumentException("referenceContext should be a top-level context");h=p.userContext}d.userContext!==void 0&&(h=d.userContext);const l=r(this,t).getAllContexts().filter(w=>w.userContext===h);let m=!1;switch(d.type){case"tab":m=!1;break;case"window":m=!0;break}l.length||(m=!0);let S;try{S=await r(this,e).sendCommand("Target.createTarget",{url:"about:blank",newWindow:m,browserContextId:h==="default"?void 0:h,background:d.background===!0})}catch(w){throw w.message.startsWith("Failed to find browser context with id")||w.message==="browserContextId"?new n.NoSuchUserContextException(`The context ${h} was not found`):w}const g=await r(this,t).waitForContext(S.targetId);return await g.lifecycleLoaded(),{context:g.id}}navigate(d){return r(this,t).getContext(d.context).navigate(d.url,d.wait??"none")}reload(d){return r(this,t).getContext(d.context).reload(d.ignoreCache??!1,d.wait??"none")}async activate(d){const p=r(this,t).getContext(d.context);if(!p.isTopLevelContext())throw new n.InvalidArgumentException("Activation is only supported on the top-level context");return await p.activate(),{}}async captureScreenshot(d){return await r(this,t).getContext(d.context).captureScreenshot(d)}async print(d){return await r(this,t).getContext(d.context).print(d)}async setViewport(d){const p=r(this,t).getContext(d.context);if(!p.isTopLevelContext())throw new n.InvalidArgumentException("Emulating viewport is only supported on the top-level context");return await p.setViewport(d.viewport,d.devicePixelRatio),{}}async traverseHistory(d){const p=r(this,t).getContext(d.context);if(!p)throw new n.InvalidArgumentException(`No browsing context with id ${d.context}`);if(!p.isTopLevelContext())throw new n.InvalidArgumentException("Traversing history is only supported on the top-level context");return await p.traverseHistory(d.delta),{}}async handleUserPrompt(d){var h;const p=r(this,t).getContext(d.context);try{await p.handleUserPrompt(d.accept,d.userText)}catch(l){throw(h=l.message)!=null&&h.includes("No dialog is showing")?new n.NoSuchAlertException("No dialog is showing"):l}return{}}async close(d){const p=r(this,t).getContext(d.context);if(!p.isTopLevelContext())throw new n.InvalidArgumentException(`Non top-level browsing context ${p.id} cannot be closed.`);const h=p.cdpTarget.parentCdpClient;try{const l=new Promise(m=>{const S=g=>{g.targetId===d.context&&(h.off("Target.detachedFromTarget",S),m())};h.on("Target.detachedFromTarget",S)});try{d.promptUnload?await p.close():await h.sendCommand("Target.closeTarget",{targetId:d.context})}catch(m){if(!h.isCloseError(m))throw m}await l}catch(l){if(!(l.code===-32e3&&l.message==="Not attached to an active page"))throw l}return{}}async locateNodes(d){return await r(this,t).getContext(d.context).locateNodes(d)}},e=new WeakMap,t=new WeakMap,s=new WeakMap,a=new WeakSet,HC=function(d){return[r(this,t).getContext(d),...r(this,t).getContext(d).allChildren].forEach(l=>{r(this,s).registerEvent({type:"event",method:n.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,params:l.serializeToBidiValue()},l.id)}),Promise.resolve()},c);return bc.BrowsingContextProcessor=i,bc}var Sc={},Nh={},Bv;function Pn(){if(Bv)return Nh;Bv=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.assert=n;function n(i,e){if(!i)throw new Error(e??"Internal assertion failed.")}return Nh}var Cc={},kc={},jv;function X1(){if(jv)return kc;jv=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.isSingleComplexGrapheme=n,kc.isSingleGrapheme=i;function n(e){return i(e)&&e.length>1}function i(e){return[...new Intl.Segmenter("en",{granularity:"grapheme"}).segment(e)].length===1}return kc}var sr={},qv;function $v(){var s,a,jl,c,u,d,p,h,l,m;if(qv)return sr;qv=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.WheelSource=sr.PointerSource=sr.KeySource=sr.NoneSource=void 0;class n{constructor(){U(this,"type","none")}}sr.NoneSource=n;class i{constructor(){f(this,a);U(this,"type","key");U(this,"pressed",new Set);f(this,s,0)}get modifiers(){return r(this,s)}get alt(){return(r(this,s)&1)===1}set alt(g){E(this,a,jl).call(this,g,1)}get ctrl(){return(r(this,s)&2)===2}set ctrl(g){E(this,a,jl).call(this,g,2)}get meta(){return(r(this,s)&4)===4}set meta(g){E(this,a,jl).call(this,g,4)}get shift(){return(r(this,s)&8)===8}set shift(g){E(this,a,jl).call(this,g,8)}}s=new WeakMap,a=new WeakSet,jl=function(g,w){g?y(this,s,r(this,s)|w):y(this,s,r(this,s)&~w)},sr.KeySource=i;class e{constructor(g,w){U(this,"type","pointer");U(this,"subtype");U(this,"pointerId");U(this,"pressed",new Set);U(this,"x",0);U(this,"y",0);U(this,"radiusX");U(this,"radiusY");U(this,"force");f(this,m,new Map);this.pointerId=g,this.subtype=w}get buttons(){let g=0;for(const w of this.pressed)switch(w){case 0:g|=1;break;case 1:g|=4;break;case 2:g|=2;break;case 3:g|=8;break;case 4:g|=16;break}return g}setClickCount(g,w){let v=r(this,m).get(g);return(!v||v.compare(w))&&(v=w),++v.count,r(this,m).set(g,v),v.count}getClickCount(g){var w;return((w=r(this,m).get(g))==null?void 0:w.count)??0}}m=new WeakMap,U(e,"ClickContext",(c=class{constructor(w,v,k){U(this,"count",0);f(this,p);f(this,h);f(this,l);y(this,p,w),y(this,h,v),y(this,l,k)}compare(w){return r(w,l)-r(this,l)>r(c,u)||Math.abs(r(w,p)-r(this,p))>r(c,d)||Math.abs(r(w,h)-r(this,h))>r(c,d)}},u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakMap,f(c,u,500),f(c,d,2),c)),sr.PointerSource=e;class t{constructor(){U(this,"type","wheel")}}return sr.WheelSource=t,sr}var oa={},Kv;function Y1(){if(Kv)return oa;Kv=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.getNormalizedKey=n,oa.getKeyCode=i,oa.getKeyLocation=e;function n(t){switch(t){case"":return"Unidentified";case"":return"Cancel";case"":return"Help";case"":return"Backspace";case"":return"Tab";case"":return"Clear";case"":case"":return"Enter";case"":return"Shift";case"":return"Control";case"":return"Alt";case"":return"Pause";case"":return"Escape";case"":return" ";case"":return"PageUp";case"":return"PageDown";case"":return"End";case"":return"Home";case"":return"ArrowLeft";case"":return"ArrowUp";case"":return"ArrowRight";case"":return"ArrowDown";case"":return"Insert";case"":return"Delete";case"":return";";case"":return"=";case"":return"0";case"":return"1";case"":return"2";case"":return"3";case"":return"4";case"":return"5";case"":return"6";case"":return"7";case"":return"8";case"":return"9";case"":return"*";case"":return"+";case"":return",";case"":return"-";case"":return".";case"":return"/";case"":return"F1";case"":return"F2";case"":return"F3";case"":return"F4";case"":return"F5";case"":return"F6";case"":return"F7";case"":return"F8";case"":return"F9";case"":return"F10";case"":return"F11";case"":return"F12";case"":return"Meta";case"":return"ZenkakuHankaku";case"":return"Shift";case"":return"Control";case"":return"Alt";case"":return"Meta";case"":return"PageUp";case"":return"PageDown";case"":return"End";case"":return"Home";case"":return"ArrowLeft";case"":return"ArrowUp";case"":return"ArrowRight";case"":return"ArrowDown";case"":return"Insert";case"":return"Delete";default:return t}}function i(t){switch(t){case"`":case"~":return"Backquote";case"\\":case"|":return"Backslash";case"":return"Backspace";case"[":case"{":return"BracketLeft";case"]":case"}":return"BracketRight";case",":case"<":return"Comma";case"0":case")":return"Digit0";case"1":case"!":return"Digit1";case"2":case"@":return"Digit2";case"3":case"#":return"Digit3";case"4":case"$":return"Digit4";case"5":case"%":return"Digit5";case"6":case"^":return"Digit6";case"7":case"&":return"Digit7";case"8":case"*":return"Digit8";case"9":case"(":return"Digit9";case"=":case"+":return"Equal";case">":return"IntlBackslash";case"a":case"A":return"KeyA";case"b":case"B":return"KeyB";case"c":case"C":return"KeyC";case"d":case"D":return"KeyD";case"e":case"E":return"KeyE";case"f":case"F":return"KeyF";case"g":case"G":return"KeyG";case"h":case"H":return"KeyH";case"i":case"I":return"KeyI";case"j":case"J":return"KeyJ";case"k":case"K":return"KeyK";case"l":case"L":return"KeyL";case"m":case"M":return"KeyM";case"n":case"N":return"KeyN";case"o":case"O":return"KeyO";case"p":case"P":return"KeyP";case"q":case"Q":return"KeyQ";case"r":case"R":return"KeyR";case"s":case"S":return"KeyS";case"t":case"T":return"KeyT";case"u":case"U":return"KeyU";case"v":case"V":return"KeyV";case"w":case"W":return"KeyW";case"x":case"X":return"KeyX";case"y":case"Y":return"KeyY";case"z":case"Z":return"KeyZ";case"-":case"_":return"Minus";case".":return"Period";case"'":case'"':return"Quote";case";":case":":return"Semicolon";case"/":case"?":return"Slash";case"":return"AltLeft";case"":return"AltRight";case"":return"ControlLeft";case"":return"ControlRight";case"":return"Enter";case"":return"Pause";case"":return"MetaLeft";case"":return"MetaRight";case"":return"ShiftLeft";case"":return"ShiftRight";case" ":case"":return"Space";case"":return"Tab";case"":return"Delete";case"":return"End";case"":return"Help";case"":return"Home";case"":return"Insert";case"":return"PageDown";case"":return"PageUp";case"":return"ArrowDown";case"":return"ArrowLeft";case"":return"ArrowRight";case"":return"ArrowUp";case"":return"Escape";case"":return"F1";case"":return"F2";case"":return"F3";case"":return"F4";case"":return"F5";case"":return"F6";case"":return"F7";case"":return"F8";case"":return"F9";case"":return"F10";case"":return"F11";case"":return"F12";case"":return"NumpadEqual";case"":case"":return"Numpad0";case"":case"":return"Numpad1";case"":case"":return"Numpad2";case"":case"":return"Numpad3";case"":case"":return"Numpad4";case"":return"Numpad5";case"":case"":return"Numpad6";case"":case"":return"Numpad7";case"":case"":return"Numpad8";case"":case"":return"Numpad9";case"":return"NumpadAdd";case"":return"NumpadComma";case"":case"":return"NumpadDecimal";case"":return"NumpadDivide";case"":return"NumpadEnter";case"":return"NumpadMultiply";case"":return"NumpadSubtract";default:return}}function e(t){switch(t){case"":case"":case"":case"":case"":return 1;case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":return 3;case"":case"":case"":case"":return 2;default:return 0}}return oa}var Ec={},Uv;function Q1(){return Uv||(Uv=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.KeyToKeyCode=void 0,Ec.KeyToKeyCode={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,Abort:3,Help:6,Backspace:8,Tab:9,Numpad5:12,NumpadEnter:13,Enter:13,"\\r":13,"\\n":13,ShiftLeft:16,ShiftRight:16,ControlLeft:17,ControlRight:17,AltLeft:18,AltRight:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Space:32,Numpad9:33,PageUp:33,Numpad3:34,PageDown:34,End:35,Numpad1:35,Home:36,Numpad7:36,ArrowLeft:37,Numpad4:37,Numpad8:38,ArrowUp:38,ArrowRight:39,Numpad6:39,Numpad2:40,ArrowDown:40,Select:41,Open:43,PrintScreen:44,Insert:45,Numpad0:45,Delete:46,NumpadDecimal:46,Digit0:48,Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,MetaLeft:91,MetaRight:92,ContextMenu:93,NumpadMultiply:106,NumpadAdd:107,NumpadSubtract:109,NumpadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,AudioVolumeMute:173,AudioVolumeDown:174,AudioVolumeUp:175,MediaTrackNext:176,MediaTrackPrevious:177,MediaStop:178,MediaPlayPause:179,Semicolon:186,Equal:187,NumpadEqual:187,Comma:188,Minus:189,Period:190,Slash:191,Backquote:192,BracketLeft:219,Backslash:220,BracketRight:221,Quote:222,AltGraph:225,Props:247,Cancel:3,Clear:12,Shift:16,Control:17,Alt:18,Accept:30,ModeChange:31," ":32,Print:42,Execute:43,"\\u0000":46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,Meta:91,"*":106,"+":107,"-":109,"/":111,";":186,"=":187,",":188,".":190,"`":192,"[":219,"\\\\":220,"]":221,"'":222,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251,")":48,"!":49,"@":50,"#":51,$:52,"%":53,"^":54,"&":55,"(":57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,":":186,"<":188,_:189,">":190,"?":191,"~":192,"{":219,"|":220,"}":221,'"':222,Camera:44,EndCall:95,VolumeDown:182,VolumeUp:183}),Ec}var Hv;function Z1(){var g,w,v,k,C,b,D,A,mt,WC,zC,VC,GC,JC,xg,XC,YC,QC;if(Hv)return Cc;Hv=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.ActionDispatcher=void 0;const n=$e(),i=Pn(),e=X1(),t=$v(),s=Y1(),a=Q1(),o=(L=>{const F=L.getClientRects()[0],q=Math.max(0,Math.min(F.x,F.x+F.width)),B=Math.min(window.innerWidth,Math.max(F.x,F.x+F.width)),G=Math.max(0,Math.min(F.y,F.y+F.height)),Y=Math.min(window.innerHeight,Math.max(F.y,F.y+F.height));return[q+(B-q>>1),G+(Y-G>>1)]}).toString(),c=(()=>navigator.platform.toLowerCase().includes("mac")).toString();async function u(L,F){var te,V,W,ie;const B=await(await L.getOrCreateSandbox(void 0)).callFunction(o,!1,{type:"undefined"},[F]);if(B.type==="exception")throw new n.NoSuchElementException(`Origin element ${F.sharedId} was not found`);(0,i.assert)(B.result.type==="array"),(0,i.assert)(((V=(te=B.result.value)==null?void 0:te[0])==null?void 0:V.type)==="number"),(0,i.assert)(((ie=(W=B.result.value)==null?void 0:W[1])==null?void 0:ie.type)==="number");const{result:{value:[{value:G},{value:Y}]}}=B;return{x:G,y:Y}}let d=(g=class{constructor(F,q,B,G){f(this,A);f(this,w);f(this,v,0);f(this,k,0);f(this,C);f(this,b);f(this,D);y(this,w,q),y(this,C,F),y(this,b,B),y(this,D,G)}async dispatchActions(F){await r(this,C).queue.run(async()=>{for(const q of F)await this.dispatchTickActions(q)})}async dispatchTickActions(F){y(this,v,performance.now()),y(this,k,0);for(const{action:B}of F)"duration"in B&&B.duration!==void 0&&y(this,k,Math.max(r(this,k),B.duration));const q=[new Promise(B=>setTimeout(B,r(this,k)))];for(const B of F)q.push(E(this,A,WC).call(this,B));await Promise.all(q)}},w=new WeakMap,v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakMap,D=new WeakMap,A=new WeakSet,mt=function(){return r(this,w).getContext(r(this,b))},WC=async function({id:F,action:q}){const B=r(this,C).get(F),G=r(this,C).getGlobalKeyState();switch(q.type){case"keyDown":{await E(this,A,YC).call(this,B,q),r(this,C).cancelList.push({id:F,action:{...q,type:"keyUp"}});break}case"keyUp":{await E(this,A,QC).call(this,B,q);break}case"pause":break;case"pointerDown":{await E(this,A,zC).call(this,B,G,q),r(this,C).cancelList.push({id:F,action:{...q,type:"pointerUp"}});break}case"pointerMove":{await E(this,A,GC).call(this,B,G,q);break}case"pointerUp":{await E(this,A,VC).call(this,B,G,q);break}case"scroll":{await E(this,A,XC).call(this,B,G,q);break}}},zC=async function(F,q,B){const{button:G}=B;if(F.pressed.has(G))return;F.pressed.add(G);const{x:Y,y:te,subtype:V}=F,{width:W,height:ie,pressure:he,twist:ae,tangentialPressure:Se}=B,{tiltX:ce,tiltY:P}=m(B),{modifiers:I}=q,{radiusX:K,radiusY:z}=S(W??1,ie??1);switch(V){case"mouse":case"pen":await r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mousePressed",x:Y,y:te,modifiers:I,button:l(G),buttons:F.buttons,clickCount:F.setClickCount(G,new t.PointerSource.ClickContext(Y,te,performance.now())),pointerType:V,tangentialPressure:Se,tiltX:ce,tiltY:P,twist:ae,force:he});break;case"touch":await r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:[{x:Y,y:te,radiusX:K,radiusY:z,tangentialPressure:Se,tiltX:ce,tiltY:P,twist:ae,force:he,id:F.pointerId}],modifiers:I});break}F.radiusX=K,F.radiusY=z,F.force=he},VC=function(F,q,B){const{button:G}=B;if(!F.pressed.has(G))return;F.pressed.delete(G);const{x:Y,y:te,force:V,radiusX:W,radiusY:ie,subtype:he}=F,{modifiers:ae}=q;switch(he){case"mouse":case"pen":return r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseReleased",x:Y,y:te,modifiers:ae,button:l(G),buttons:F.buttons,clickCount:F.getClickCount(G),pointerType:he});case"touch":return r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[{x:Y,y:te,id:F.pointerId,force:V,radiusX:W,radiusY:ie}],modifiers:ae})}},GC=async function(F,q,B){const{x:G,y:Y,subtype:te}=F,{width:V,height:W,pressure:ie,twist:he,tangentialPressure:ae,x:Se,y:ce,origin:P="viewport",duration:I=r(this,k)}=B,{tiltX:K,tiltY:z}=m(B),{radiusX:X,radiusY:Z}=S(V??1,W??1),{targetX:ne,targetY:ge}=await E(this,A,xg).call(this,P,Se,ce,G,Y);if(ne<0||ge<0)throw new n.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${ne}, y: ${ge})`);let oe;do{const ye=I>0?(performance.now()-r(this,v))/I:1;oe=ye>=1;let fe,H;if(oe?(fe=ne,H=ge):(fe=Math.round(ye*(ne-G)+G),H=Math.round(ye*(ge-Y)+Y)),F.x!==fe||F.y!==H){const{modifiers:Q}=q;switch(te){case"mouse":await r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseMoved",x:fe,y:H,modifiers:Q,clickCount:0,button:l(F.pressed.values().next().value??5),buttons:F.buttons,pointerType:te,tangentialPressure:ae,tiltX:K,tiltY:z,twist:he,force:ie});break;case"pen":F.pressed.size!==0&&await r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseMoved",x:fe,y:H,modifiers:Q,clickCount:0,button:l(F.pressed.values().next().value??5),buttons:F.buttons,pointerType:te,tangentialPressure:ae,tiltX:K,tiltY:z,twist:he,force:ie??.5});break;case"touch":F.pressed.size!==0&&await r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchMove",touchPoints:[{x:fe,y:H,radiusX:X,radiusY:Z,tangentialPressure:ae,tiltX:K,tiltY:z,twist:he,force:ie,id:F.pointerId}],modifiers:Q});break}F.x=fe,F.y=H,F.radiusX=X,F.radiusY=Z,F.force=ie}}while(!oe)},JC=async function(){if(r(this,A,mt).id===r(this,A,mt).cdpTarget.id)return{x:0,y:0};const{backendNodeId:F}=await r(this,A,mt).cdpTarget.cdpClient.sendCommand("DOM.getFrameOwner",{frameId:r(this,A,mt).id}),{model:q}=await r(this,A,mt).cdpTarget.cdpClient.sendCommand("DOM.getBoxModel",{backendNodeId:F});return{x:q.content[0],y:q.content[1]}},xg=async function(F,q,B,G,Y){let te,V;const W=await E(this,A,JC).call(this);switch(F){case"viewport":te=q+W.x,V=B+W.y;break;case"pointer":te=G+q+W.x,V=Y+B+W.y;break;default:{const{x:ie,y:he}=await u(r(this,A,mt),F.element);te=ie+q+W.x,V=he+B+W.y;break}}return{targetX:te,targetY:V}},XC=async function(F,q,B){const{deltaX:G,deltaY:Y,x:te,y:V,origin:W="viewport",duration:ie=r(this,k)}=B;if(W==="pointer")throw new n.InvalidArgumentException('"pointer" origin is invalid for scrolling.');const{targetX:he,targetY:ae}=await E(this,A,xg).call(this,W,te,V,0,0);if(he<0||ae<0)throw new n.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${he}, y: ${ae})`);let Se=0,ce=0,P;do{const I=ie>0?(performance.now()-r(this,v))/ie:1;P=I>=1;let K,z;if(P?(K=G-Se,z=Y-ce):(K=Math.round(I*G-Se),z=Math.round(I*Y-ce)),K!==0||z!==0){const{modifiers:X}=q;await r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseWheel",deltaX:K,deltaY:z,x:he,y:ae,modifiers:X}),Se+=K,ce+=z}}while(!P)},YC=async function(F,q){const B=q.value;if(!(0,e.isSingleGrapheme)(B))throw new n.InvalidArgumentException(`Invalid key value: ${B}`);const G=(0,e.isSingleComplexGrapheme)(B),Y=(0,s.getNormalizedKey)(B),te=F.pressed.has(Y),V=(0,s.getKeyCode)(B),W=(0,s.getKeyLocation)(B);switch(Y){case"Alt":F.alt=!0;break;case"Shift":F.shift=!0;break;case"Control":F.ctrl=!0;break;case"Meta":F.meta=!0;break}F.pressed.add(Y);const{modifiers:ie}=F,he=p(Y,F,G),ae=h(V??"",F)??he;let Se;if(r(this,D)&&F.meta)switch(V){case"KeyA":Se="SelectAll";break;case"KeyC":Se="Copy";break;case"KeyV":Se=F.shift?"PasteAndMatchStyle":"Paste";break;case"KeyX":Se="Cut";break;case"KeyZ":Se=F.shift?"Redo":"Undo";break}const ce=[r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchKeyEvent",{type:ae?"keyDown":"rawKeyDown",windowsVirtualKeyCode:a.KeyToKeyCode[Y],key:Y,code:V,text:ae,unmodifiedText:he,autoRepeat:te,isSystemKey:F.alt||void 0,location:W<3?W:void 0,isKeypad:W===3,modifiers:ie,commands:Se?[Se]:void 0})];Y==="Escape"&&!F.alt&&(r(this,D)&&!F.ctrl&&!F.meta||!r(this,D))&&ce.push(r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.cancelDragging")),await Promise.all(ce)},QC=function(F,q){const B=q.value;if(!(0,e.isSingleGrapheme)(B))throw new n.InvalidArgumentException(`Invalid key value: ${B}`);const G=(0,e.isSingleComplexGrapheme)(B),Y=(0,s.getNormalizedKey)(B);if(!F.pressed.has(Y))return;const te=(0,s.getKeyCode)(B),V=(0,s.getKeyLocation)(B);switch(Y){case"Alt":F.alt=!1;break;case"Shift":F.shift=!1;break;case"Control":F.ctrl=!1;break;case"Meta":F.meta=!1;break}F.pressed.delete(Y);const{modifiers:W}=F,ie=p(Y,F,G),he=h(te??"",F)??ie;return r(this,A,mt).cdpTarget.cdpClient.sendCommand("Input.dispatchKeyEvent",{type:"keyUp",windowsVirtualKeyCode:a.KeyToKeyCode[Y],key:Y,code:te,text:he,unmodifiedText:ie,location:V<3?V:void 0,isSystemKey:F.alt||void 0,isKeypad:V===3,modifiers:W})},U(g,"isMacOS",async F=>{const q=await(await F.getOrCreateSandbox(void 0)).callFunction(c,!1);return(0,i.assert)(q.type!=="exception"),(0,i.assert)(q.result.type==="boolean"),q.result.value}),g);Cc.ActionDispatcher=d;const p=(L,F,q)=>q?L:L==="Enter"?"\r":[...L].length===1?F.shift?L.toLocaleUpperCase("en-US"):L:void 0,h=(L,F)=>{if(F.ctrl){switch(L){case"Digit2":if(F.shift)return"\0";break;case"KeyA":return"";case"KeyB":return"";case"KeyC":return"";case"KeyD":return"";case"KeyE":return"";case"KeyF":return"";case"KeyG":return"\x07";case"KeyH":return"\b";case"KeyI":return"	";case"KeyJ":return`
`;case"KeyK":return"\v";case"KeyL":return"\f";case"KeyM":return"\r";case"KeyN":return"";case"KeyO":return"";case"KeyP":return"";case"KeyQ":return"";case"KeyR":return"";case"KeyS":return"";case"KeyT":return"";case"KeyU":return"";case"KeyV":return"";case"KeyW":return"";case"KeyX":return"";case"KeyY":return"";case"KeyZ":return"";case"BracketLeft":return"\x1B";case"Backslash":return"";case"BracketRight":return"";case"Digit6":if(F.shift)return"";break;case"Minus":return""}return""}if(F.alt)return""};function l(L){switch(L){case 0:return"left";case 1:return"middle";case 2:return"right";case 3:return"back";case 4:return"forward";default:return"none"}}function m(L){const F=L.altitudeAngle??Math.PI/2,q=L.azimuthAngle??0;let B=0,G=0;if(F===0&&((q===0||q===2*Math.PI)&&(B=Math.PI/2),q===Math.PI/2&&(G=Math.PI/2),q===Math.PI&&(B=-Math.PI/2),q===3*Math.PI/2&&(G=-Math.PI/2),q>0&&q<Math.PI/2&&(B=Math.PI/2,G=Math.PI/2),q>Math.PI/2&&q<Math.PI&&(B=-Math.PI/2,G=Math.PI/2),q>Math.PI&&q<3*Math.PI/2&&(B=-Math.PI/2,G=-Math.PI/2),q>3*Math.PI/2&&q<2*Math.PI&&(B=Math.PI/2,G=-Math.PI/2)),F!==0){const te=Math.tan(F);B=Math.atan(Math.cos(q)/te),G=Math.atan(Math.sin(q)/te)}const Y=180/Math.PI;return{tiltX:Math.round(B*Y),tiltY:Math.round(G*Y)}}function S(L,F){return{radiusX:L?L/2:.5,radiusY:F?F/2:.5}}return Cc}var xc={},Pc={},_c={},Wv;function e_(){var i,e,t,Pg,a;if(Wv)return _c;Wv=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.Mutex=void 0;let n=(a=class{constructor(){f(this,t);f(this,i,!1);f(this,e,[])}acquire(){const c={resolved:!1};return r(this,i)?new Promise(u=>{r(this,e).push(()=>u(E(this,t,Pg).bind(this,c)))}):(y(this,i,!0),Promise.resolve(E(this,t,Pg).bind(this,c)))}async run(c){const u=await this.acquire();try{return await c()}finally{u()}}},i=new WeakMap,e=new WeakMap,t=new WeakSet,Pg=function(c){if(c.resolved)throw new Error("Cannot release more than once.");c.resolved=!0;const u=r(this,e).shift();if(!u){y(this,i,!1);return}u()},a);return _c.Mutex=n,_c}var zv;function t_(){var s,a,o;if(zv)return Pc;zv=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.InputState=void 0;const n=$e(),i=e_(),e=$v();let t=(o=class{constructor(){U(this,"cancelList",[]);f(this,s,new Map);f(this,a,new i.Mutex)}getOrCreate(u,d,p){let h=r(this,s).get(u);if(!h){switch(d){case"none":h=new e.NoneSource;break;case"key":h=new e.KeySource;break;case"pointer":{let l=p==="mouse"?0:2;const m=new Set;for(const[,S]of r(this,s))S.type==="pointer"&&m.add(S.pointerId);for(;m.has(l);)++l;h=new e.PointerSource(l,p);break}case"wheel":h=new e.WheelSource;break;default:throw new n.InvalidArgumentException(`Expected "none", "key", "pointer", or "wheel". Found unknown source type ${d}.`)}return r(this,s).set(u,h),h}if(h.type!==d)throw new n.InvalidArgumentException(`Input source type of ${u} is ${h.type}, but received ${d}.`);return h}get(u){const d=r(this,s).get(u);if(!d)throw new n.UnknownErrorException("Internal error.");return d}getGlobalKeyState(){const u=new e.KeySource;for(const[,d]of r(this,s))if(d.type==="key"){for(const p of d.pressed)u.pressed.add(p);u.alt||(u.alt=d.alt),u.ctrl||(u.ctrl=d.ctrl),u.meta||(u.meta=d.meta),u.shift||(u.shift=d.shift)}return u}get queue(){return r(this,a)}},s=new WeakMap,a=new WeakMap,o);return Pc.InputState=t,Pc}var Vv;function r_(){if(Vv)return xc;Vv=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.InputStateManager=void 0;const n=Pn(),i=t_();let e=class extends WeakMap{get(s){return(0,n.assert)(s.isTopLevelContext()),this.has(s)||this.set(s,new i.InputState),super.get(s)}};return xc.InputStateManager=e,xc}var Gv;function i_(){var a,o,c,ZC,d;if(Gv)return Sc;Gv=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.InputProcessor=void 0;const n=$e(),i=Pn(),e=Z1(),t=r_();let s=(d=class{constructor(h){f(this,c);f(this,a);f(this,o,new t.InputStateManager);y(this,a,h)}async performActions(h){const l=r(this,a).getContext(h.context),m=r(this,o).get(l.top),S=E(this,c,ZC).call(this,h,m);return await new e.ActionDispatcher(m,r(this,a),h.context,await e.ActionDispatcher.isMacOS(l).catch(()=>!1)).dispatchActions(S),{}}async releaseActions(h){const l=r(this,a).getContext(h.context),m=l.top,S=r(this,o).get(m);return await new e.ActionDispatcher(S,r(this,a),h.context,await e.ActionDispatcher.isMacOS(l).catch(()=>!1)).dispatchTickActions(S.cancelList.reverse()),r(this,o).delete(m),{}}async setFiles(h){const m=await r(this,a).getContext(h.context).getOrCreateSandbox(void 0);let S;try{S=await m.callFunction(String(function(k){if(!(this instanceof HTMLInputElement))return this instanceof Element?1:0;if(this.type!=="file")return 2;if(this.disabled)return 3;if(k>1&&!this.multiple)return 4}),!1,h.element,[{type:"number",value:h.files.length}])}catch{throw new n.NoSuchNodeException(`Could not find element ${h.element.sharedId}`)}if((0,i.assert)(S.type==="success"),S.result.type==="number")switch(S.result.value){case 0:throw new n.NoSuchElementException(`Could not find element ${h.element.sharedId}`);case 1:throw new n.UnableToSetFileInputException(`Element ${h.element.sharedId} is not a input`);case 2:throw new n.UnableToSetFileInputException(`Input element ${h.element.sharedId} is not a file type`);case 3:throw new n.UnableToSetFileInputException(`Input element ${h.element.sharedId} is disabled`);case 4:throw new n.UnableToSetFileInputException("Cannot set multiple files on a non-multiple input element")}if(h.files.length===0)return await m.callFunction(String(function(){var k;if(((k=this.files)==null?void 0:k.length)===0){this.dispatchEvent(new Event("cancel",{bubbles:!0}));return}this.files=new DataTransfer().files,this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}),!1,h.element),{};const g=[];for(let v=0;v<h.files.length;++v){const k=await m.callFunction(String(function(A){var R;return(R=this.files)==null?void 0:R.item(A)}),!1,h.element,[{type:"number",value:0}],"root");if((0,i.assert)(k.type==="success"),k.result.type!=="object")break;const{handle:C}=k.result;(0,i.assert)(C!==void 0);const{path:b}=await m.cdpClient.sendCommand("DOM.getFileInfo",{objectId:C});g.push(b),m.disown(C).catch(void 0)}g.sort();const w=[...h.files].sort();if(g.length!==h.files.length||w.some((v,k)=>g[k]!==v)){const{objectId:v}=await m.deserializeForCdp(h.element);(0,i.assert)(v!==void 0),await m.cdpClient.sendCommand("DOM.setFileInputFiles",{files:h.files,objectId:v})}else await m.callFunction(String(function(){this.dispatchEvent(new Event("cancel",{bubbles:!0}))}),!1,h.element);return{}}},a=new WeakMap,o=new WeakMap,c=new WeakSet,ZC=function(h,l){var S;const m=[];for(const g of h.actions){switch(g.type){case"pointer":{g.parameters??(g.parameters={pointerType:"mouse"}),(S=g.parameters).pointerType??(S.pointerType="mouse");const v=l.getOrCreate(g.id,"pointer",g.parameters.pointerType);if(v.subtype!==g.parameters.pointerType)throw new n.InvalidArgumentException(`Expected input source ${g.id} to be ${v.subtype}; got ${g.parameters.pointerType}.`);break}default:l.getOrCreate(g.id,g.type)}const w=g.actions.map(v=>({id:g.id,action:v}));for(let v=0;v<w.length;v++)m.length===v&&m.push([]),m[v].push(w[v])}return m},d);return Sc.InputProcessor=s,Sc}var Tc={},it={},Lh={},Jv;function n_(){if(Jv)return Lh;Jv=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.base64ToString=n;function n(i){return"atob"in globalThis?globalThis.atob(i):Buffer.from(i,"base64").toString("ascii")}return Lh}var Xv;function Bh(){if(Xv)return it;Xv=1,Object.defineProperty(it,"__esModule",{value:!0}),it.computeHeadersSize=e,it.bidiNetworkHeadersFromCdpNetworkHeaders=t,it.bidiNetworkHeadersFromCdpNetworkHeadersEntries=s,it.cdpNetworkHeadersFromBidiNetworkHeaders=a,it.bidiNetworkHeadersFromCdpFetchHeaders=o,it.cdpFetchHeadersFromBidiNetworkHeaders=c,it.networkHeaderFromCookieHeaders=u,it.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction=d,it.cdpToBiDiCookie=p,it.deserializeByteValue=h,it.bidiToCdpCookie=l,it.sameSiteBiDiToCdp=S,it.isSpecialScheme=g,it.matchUrlPattern=v,it.bidiBodySizeFromCdpPostDataEntries=k,it.getTiming=C;const n=Mv(),i=n_();function e(b){const D=b.reduce((A,R)=>`${A}${R.name}: ${R.value.value}\r
`,"");return new TextEncoder().encode(D).length}function t(b){return b?Object.entries(b).map(([D,A])=>({name:D,value:{type:"string",value:A}})):[]}function s(b){return b?b.map(({name:D,value:A})=>({name:D,value:{type:"string",value:A}})):[]}function a(b){if(b!==void 0)return b.reduce((D,A)=>(D[A.name]=A.value.value,D),{})}function o(b){return b?b.map(({name:D,value:A})=>({name:D,value:{type:"string",value:A}})):[]}function c(b){if(b!==void 0)return b.map(({name:D,value:A})=>({name:D,value:A.value}))}function u(b){return b===void 0?void 0:{name:"Cookie",value:{type:"string",value:b.reduce((A,R,x)=>{x>0&&(A+=";");const N=R.value.type==="base64"?btoa(R.value.value):R.value.value;return A+=`${R.name}=${N}`,A},"")}}}function d(b){switch(b){case"default":return"Default";case"cancel":return"CancelAuth";case"provideCredentials":return"ProvideCredentials"}}function p(b){const D={name:b.name,value:{type:"string",value:b.value},domain:b.domain,path:b.path,size:b.size,httpOnly:b.httpOnly,secure:b.secure,sameSite:b.sameSite===void 0?"none":m(b.sameSite),...b.expires>=0?{expiry:b.expires}:void 0};return D["goog:session"]=b.session,D["goog:priority"]=b.priority,D["goog:sameParty"]=b.sameParty,D["goog:sourceScheme"]=b.sourceScheme,D["goog:sourcePort"]=b.sourcePort,b.partitionKey!==void 0&&(D["goog:partitionKey"]=b.partitionKey),b.partitionKeyOpaque!==void 0&&(D["goog:partitionKeyOpaque"]=b.partitionKeyOpaque),D}function h(b){return b.type==="base64"?(0,i.base64ToString)(b.value):b.value}function l(b,D){const A=h(b.cookie.value),R={name:b.cookie.name,value:A,domain:b.cookie.domain,path:b.cookie.path??"/",secure:b.cookie.secure??!1,httpOnly:b.cookie.httpOnly??!1,...D.sourceOrigin!==void 0&&{partitionKey:{hasCrossSiteAncestor:!1,topLevelSite:D.sourceOrigin}},...b.cookie.expiry!==void 0&&{expires:b.cookie.expiry},...b.cookie.sameSite!==void 0&&{sameSite:S(b.cookie.sameSite)}};return b.cookie["goog:url"]!==void 0&&(R.url=b.cookie["goog:url"]),b.cookie["goog:priority"]!==void 0&&(R.priority=b.cookie["goog:priority"]),b.cookie["goog:sameParty"]!==void 0&&(R.sameParty=b.cookie["goog:sameParty"]),b.cookie["goog:sourceScheme"]!==void 0&&(R.sourceScheme=b.cookie["goog:sourceScheme"]),b.cookie["goog:sourcePort"]!==void 0&&(R.sourcePort=b.cookie["goog:sourcePort"]),R}function m(b){switch(b){case"Strict":return"strict";case"None":return"none";case"Lax":return"lax";default:return"lax"}}function S(b){switch(b){case"strict":return"Strict";case"lax":return"Lax";case"none":return"None"}throw new n.InvalidArgumentException(`Unknown 'sameSite' value ${b}`)}function g(b){return["ftp","file","http","https","ws","wss"].includes(b.replace(/:$/,""))}function w(b){return b.protocol.replace(/:$/,"")}function v(b,D){const A=new URL(D);return!(b.protocol!==void 0&&b.protocol!==w(A)||b.hostname!==void 0&&b.hostname!==A.hostname||b.port!==void 0&&b.port!==A.port||b.pathname!==void 0&&b.pathname!==A.pathname||b.search!==void 0&&b.search!==A.search)}function k(b){let D=0;for(const A of b)D+=atob(A.bytes??"").length;return D}function C(b,D=0){return!b||b<=0||b+D<=0?0:b+D}return it}var Yv;function Qv(){var s,a,o,_g,ql,d;if(Yv)return Tc;Yv=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.NetworkProcessor=void 0;const n=$e(),i=Bh();let e=(d=class{constructor(h,l){f(this,o);f(this,s);f(this,a);y(this,s,h),y(this,a,l)}async addIntercept(h){r(this,s).verifyTopLevelContextsList(h.contexts);const l=h.urlPatterns??[],m=d.parseUrlPatterns(l),S=r(this,a).addIntercept({urlPatterns:m,phases:h.phases,contexts:h.contexts});return await Promise.all(r(this,s).getAllContexts().map(g=>g.cdpTarget.toggleNetwork())),{intercept:S}}async continueRequest(h){if(h.url!==void 0&&d.parseUrlString(h.url),h.method!==void 0&&!d.isMethodValid(h.method))throw new n.InvalidArgumentException(`Method '${h.method}' is invalid.`);h.headers&&d.validateHeaders(h.headers);const l=E(this,o,ql).call(this,h.request,["beforeRequestSent"]);try{await l.continueRequest(h)}catch(m){throw d.wrapInterceptionError(m)}return{}}async continueResponse(h){h.headers&&d.validateHeaders(h.headers);const l=E(this,o,ql).call(this,h.request,["authRequired","responseStarted"]);try{await l.continueResponse(h)}catch(m){throw d.wrapInterceptionError(m)}return{}}async continueWithAuth(h){const l=h.request;return await E(this,o,ql).call(this,l,["authRequired"]).continueWithAuth(h),{}}async failRequest({request:h}){const l=E(this,o,_g).call(this,h);if(l.interceptPhase==="authRequired")throw new n.InvalidArgumentException(`Request '${h}' in 'authRequired' phase cannot be failed`);if(!l.interceptPhase)throw new n.NoSuchRequestException(`No blocked request found for network id '${h}'`);return await l.failRequest("Failed"),{}}async provideResponse(h){h.headers&&d.validateHeaders(h.headers);const l=E(this,o,ql).call(this,h.request,["beforeRequestSent","responseStarted","authRequired"]);try{await l.provideResponse(h)}catch(m){throw d.wrapInterceptionError(m)}return{}}async removeIntercept(h){return r(this,a).removeIntercept(h.intercept),await Promise.all(r(this,s).getAllContexts().map(l=>l.cdpTarget.toggleNetwork())),{}}async setCacheBehavior(h){const l=r(this,s).verifyTopLevelContextsList(h.contexts);if(l.size===0)return r(this,a).defaultCacheBehavior=h.cacheBehavior,await Promise.all(r(this,s).getAllContexts().map(S=>S.cdpTarget.toggleSetCacheDisabled())),{};const m=h.cacheBehavior==="bypass";return await Promise.all([...l.values()].map(S=>S.cdpTarget.toggleSetCacheDisabled(m))),{}}static validateHeaders(h){for(const l of h){let m;if(l.value.type==="string"?m=l.value.value:m=atob(l.value.value),m!==m.trim()||m.includes(`
`)||m.includes("\0"))throw new n.InvalidArgumentException(`Header value '${m}' is not acceptable value`)}}static isMethodValid(h){return/^[!#$%&'*+\-.^_`|~a-zA-Z\d]+$/.test(h)}static parseUrlString(h){try{return new URL(h)}catch(l){throw new n.InvalidArgumentException(`Invalid URL '${h}': ${l}`)}}static parseUrlPatterns(h){return h.map(l=>{let m="",S=!0,g=!0,w=!0,v=!0,k=!0;switch(l.type){case"string":{m=t(l.pattern);break}case"pattern":{if(l.protocol===void 0)S=!1,m+="http";else{if(l.protocol==="")throw new n.InvalidArgumentException("URL pattern must specify a protocol");if(l.protocol=t(l.protocol),!l.protocol.match(/^[a-zA-Z+-.]+$/))throw new n.InvalidArgumentException("Forbidden characters");m+=l.protocol}const b=m.toLocaleLowerCase();if(m+=":",(0,i.isSpecialScheme)(b)&&(m+="//"),l.hostname===void 0)b!=="file"&&(m+="placeholder"),g=!1;else{if(l.hostname==="")throw new n.InvalidArgumentException("URL pattern must specify a hostname");if(l.protocol==="file")throw new n.InvalidArgumentException("URL pattern protocol cannot be 'file'");l.hostname=t(l.hostname);let D=!1;for(const A of l.hostname){if(A==="/"||A==="?"||A==="#")throw new n.InvalidArgumentException("'/', '?', '#' are forbidden in hostname");if(!D&&A===":")throw new n.InvalidArgumentException("':' is only allowed inside brackets in hostname");A==="["&&(D=!0),A==="]"&&(D=!1)}m+=l.hostname}if(l.port===void 0)w=!1;else{if(l.port==="")throw new n.InvalidArgumentException("URL pattern must specify a port");if(l.port=t(l.port),m+=":",!l.port.match(/^\d+$/))throw new n.InvalidArgumentException("Forbidden characters");m+=l.port}if(l.pathname===void 0)v=!1;else{if(l.pathname=t(l.pathname),l.pathname[0]!=="/"&&(m+="/"),l.pathname.includes("#")||l.pathname.includes("?"))throw new n.InvalidArgumentException("Forbidden characters");m+=l.pathname}if(l.search===void 0)k=!1;else{if(l.search=t(l.search),l.search[0]!=="?"&&(m+="?"),l.search.includes("#"))throw new n.InvalidArgumentException("Forbidden characters");m+=l.search}break}}const C=b=>{const D={"ftp:":21,"file:":null,"http:":80,"https:":443,"ws:":80,"wss:":443};if((0,i.isSpecialScheme)(b.protocol)&&D[b.protocol]!==null&&(!b.port||String(D[b.protocol])===b.port))return"";if(b.port)return b.port};try{const b=new URL(m);return{protocol:S?b.protocol.replace(/:$/,""):void 0,hostname:g?b.hostname:void 0,port:w?C(b):void 0,pathname:v&&b.pathname?b.pathname:void 0,search:k?b.search:void 0}}catch(b){throw new n.InvalidArgumentException(`${b.message} '${m}'`)}})}static wrapInterceptionError(h){return h!=null&&h.message.includes("Invalid header")?new n.InvalidArgumentException("Invalid header"):h}},s=new WeakMap,a=new WeakMap,o=new WeakSet,_g=function(h){const l=r(this,a).getRequestById(h);if(!l)throw new n.NoSuchRequestException(`Network request with ID '${h}' doesn't exist`);return l},ql=function(h,l){const m=E(this,o,_g).call(this,h);if(!m.interceptPhase)throw new n.NoSuchRequestException(`No blocked request found for network id '${h}'`);if(m.interceptPhase&&!l.includes(m.interceptPhase))throw new n.InvalidArgumentException(`Blocked request for network id '${h}' is in '${m.interceptPhase}' phase`);return m},d);Tc.NetworkProcessor=e;function t(p){const h=new Set(["(",")","*","{","}"]);let l="",m=!1;for(const S of p){if(!m){if(h.has(S))throw new n.InvalidArgumentException("Forbidden characters");if(S==="\\"){m=!0;continue}}l+=S,m=!1}return l}return Tc}var Ic={},Zv;function s_(){var e,t;if(Zv)return Ic;Zv=1,Object.defineProperty(Ic,"__esModule",{value:!0}),Ic.PermissionsProcessor=void 0;const n=$e();let i=(t=class{constructor(a){f(this,e);y(this,e,a)}async setPermissions(a){try{const o=a["goog:userContext"]||a.userContext;await r(this,e).sendCommand("Browser.setPermission",{origin:a.origin,browserContextId:o&&o!=="default"?o:void 0,permission:{name:a.descriptor.name},setting:a.state})}catch(o){if(o.message==="Permission can't be granted to opaque origins.")return{};throw new n.InvalidArgumentException(o.message)}return{}}},e=new WeakMap,t);return Ic.PermissionsProcessor=i,Ic}var Mc={},Ac={},jh={},eb;function ca(){if(eb)return jh;eb=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.uuidv4=i;function n(e){return e.reduce((t,s)=>t+s.toString(16).padStart(2,"0"),"")}function i(){if("crypto"in globalThis&&"randomUUID"in globalThis.crypto)return globalThis.crypto.randomUUID();const e=new Uint8Array(16);return"crypto"in globalThis&&"getRandomValues"in globalThis.crypto?globalThis.crypto.getRandomValues(e):Ew.webcrypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,[n(e.subarray(0,4)),n(e.subarray(4,6)),n(e.subarray(6,8)),n(e.subarray(8,10)),n(e.subarray(10,16))].join("-")}return jh}var Rc={},tb;function rb(){var s,a,o,c,u,Tg,ek,tk,l,Ig,rk;if(tb)return Rc;tb=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.ChannelProxy=void 0;const n=$e(),i=Qt(),e=ca();let t=(u=class{constructor(w,v){f(this,l);f(this,s);f(this,a,(0,e.uuidv4)());f(this,o);y(this,s,w),y(this,o,v)}async init(w,v){var b,D;const k=await E(b=u,c,ek).call(b,w),C=await E(D=u,c,tk).call(D,w,k);return E(this,l,Ig).call(this,w,k,v),C}async startListenerFromWindow(w,v){var k;try{const C=await E(this,l,rk).call(this,w);E(this,l,Ig).call(this,w,C,v)}catch(C){(k=r(this,o))==null||k.call(this,i.LogType.debugError,C)}}getEvalInWindowStr(){var k;const w=String((C,b)=>{const D=window;return D[C]===void 0?D[C]=b:(D[C](b),delete D[C]),b.sendMessage}),v=E(k=u,c,Tg).call(k);return`(${w})('${r(this,a)}',${v})`}},s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,Tg=function(){return`(${String(()=>{const v=[];let k=null;return{async getMessage(){return await(v.length>0?Promise.resolve():new Promise(b=>{k=b})),v.shift()},sendMessage(C){v.push(C),k!==null&&(k(),k=null)}}})})()`},ek=async function(w){const v=await w.cdpClient.sendCommand("Runtime.evaluate",{expression:E(this,c,Tg).call(this),contextId:w.executionContextId,serializationOptions:{serialization:"idOnly"}});if(v.exceptionDetails||v.result.objectId===void 0)throw new Error("Cannot create channel");return v.result.objectId},tk=async function(w,v){return(await w.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(C=>C.sendMessage),arguments:[{objectId:v}],executionContextId:w.executionContextId,serializationOptions:{serialization:"idOnly"}})).result.objectId},l=new WeakSet,Ig=async function(w,v,k){var C,b;for(;;)try{const D=await w.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(async A=>await A.getMessage()),arguments:[{objectId:v}],awaitPromise:!0,executionContextId:w.executionContextId,serializationOptions:{serialization:"deep",maxDepth:((C=r(this,s).serializationOptions)==null?void 0:C.maxObjectDepth)??void 0}});if(D.exceptionDetails)throw new Error("Runtime.callFunctionOn in ChannelProxy",{cause:D.exceptionDetails});for(const A of w.associatedBrowsingContexts)k.registerEvent({type:"event",method:n.ChromiumBidi.Script.EventNames.Message,params:{channel:r(this,s).channel,data:w.cdpToBidiValue(D,r(this,s).ownership??"none"),source:w.source}},A.id)}catch(D){(b=r(this,o))==null||b.call(this,i.LogType.debugError,D);break}},rk=async function(w){const v=await w.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(k=>{const C=window;if(C[k]===void 0)return new Promise(D=>C[k]=D);const b=C[k];return delete C[k],b}),arguments:[{value:r(this,a)}],executionContextId:w.executionContextId,awaitPromise:!0,serializationOptions:{serialization:"idOnly"}});if(v.exceptionDetails!==void 0||v.result.objectId===void 0)throw new Error(`ChannelHandle not found in window["${r(this,a)}"]`);return v.result.objectId},f(u,c),u);return Rc.ChannelProxy=t,Rc}var ib;function a_(){var t,s,a,o,c,u,d,p,ik,l;if(ib)return Ac;ib=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.PreloadScript=void 0;const n=ca(),i=rb();let e=(l=class{constructor(S,g){f(this,p);f(this,t,(0,n.uuidv4)());f(this,s,[]);f(this,a);f(this,o,new Set);f(this,c);f(this,u);f(this,d);var w;y(this,c,((w=S.arguments)==null?void 0:w.map(v=>new i.ChannelProxy(v.value,g)))??[]),y(this,a,S.functionDeclaration),y(this,u,S.sandbox),y(this,d,S.contexts)}get id(){return r(this,t)}get targetIds(){return r(this,o)}get channels(){return r(this,c)}get contexts(){return r(this,d)}async initInTargets(S,g){await Promise.all(Array.from(S).map(w=>this.initInTarget(w,g)))}async initInTarget(S,g){const w=await S.cdpClient.sendCommand("Page.addScriptToEvaluateOnNewDocument",{source:E(this,p,ik).call(this),worldName:r(this,u),runImmediately:g});r(this,s).push({target:S,preloadScriptId:w.identifier}),r(this,o).add(S.id)}async remove(){await Promise.all([r(this,s).map(async S=>{const g=S.target,w=S.preloadScriptId;return await g.cdpClient.sendCommand("Page.removeScriptToEvaluateOnNewDocument",{identifier:w})})])}dispose(S){y(this,s,r(this,s).filter(g=>{var w;return((w=g.target)==null?void 0:w.id)!==S})),r(this,o).delete(S)}},t=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakSet,ik=function(){const S=`[${this.channels.map(g=>g.getEvalInWindowStr()).join(", ")}]`;return`(()=>{(${r(this,a)})(...${S})})()`},l);return Ac.PreloadScript=e,Ac}var nb;function o_(){var t,s,a,o,c,u,nk,xf,h;if(nb)return Mc;nb=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.ScriptProcessor=void 0;const n=$e(),i=a_();let e=(h=class{constructor(m,S,g,w,v){f(this,u);f(this,t);f(this,s);f(this,a);f(this,o);f(this,c);y(this,s,S),y(this,a,g),y(this,o,w),y(this,c,v),y(this,t,m),r(this,t).addSubscribeHook(n.ChromiumBidi.Script.EventNames.RealmCreated,E(this,u,nk).bind(this))}async addPreloadScript(m){const S=r(this,s).verifyTopLevelContextsList(m.contexts),g=new i.PreloadScript(m,r(this,c));r(this,o).add(g);const w=S.size===0?new Set(r(this,s).getTopLevelContexts().map(v=>v.cdpTarget)):new Set([...S.values()].map(v=>v.cdpTarget));return await g.initInTargets(w,!1),{script:g.id}}async removePreloadScript(m){const{script:S}=m,g=r(this,o).find({id:S});if(g.length===0)throw new n.NoSuchScriptException(`No preload script with id '${S}'`);return await Promise.all(g.map(w=>w.remove())),r(this,o).remove({id:S}),{}}async callFunction(m){return await(await E(this,u,xf).call(this,m.target)).callFunction(m.functionDeclaration,m.awaitPromise,m.this,m.arguments,m.resultOwnership,m.serializationOptions,m.userActivation)}async evaluate(m){return await(await E(this,u,xf).call(this,m.target)).evaluate(m.expression,m.awaitPromise,m.resultOwnership,m.serializationOptions,m.userActivation)}async disown(m){const S=await E(this,u,xf).call(this,m.target);return await Promise.all(m.handles.map(async g=>await S.disown(g))),{}}getRealms(m){return m.context!==void 0&&r(this,s).getContext(m.context),{realms:r(this,a).findRealms({browsingContextId:m.context,type:m.type}).map(g=>g.realmInfo)}}},t=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakSet,nk=function(m){const S=r(this,s).getContext(m),g=[S,...r(this,s).getContext(m).allChildren],w=new Set;for(const v of g){const k=r(this,a).findRealms({browsingContextId:v.id});for(const C of k)w.add(C)}for(const v of w)r(this,t).registerEvent({type:"event",method:n.ChromiumBidi.Script.EventNames.RealmCreated,params:v.realmInfo},S.id);return Promise.resolve()},xf=async function(m){return"context"in m?await r(this,s).getContext(m.context).getOrCreateSandbox(m.sandbox):r(this,a).getRealm({realmId:m.realm})},h);return Mc.ScriptProcessor=e,Mc}var Fc={},sb;function c_(){var e,t,s,a,o,sk,ak,d;if(sb)return Fc;sb=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.SessionProcessor=void 0;const n=$e();let i=(d=class{constructor(h,l,m){f(this,o);f(this,e);f(this,t);f(this,s);f(this,a,!1);y(this,e,h),y(this,t,l),y(this,s,m)}status(){return{ready:!1,message:"already connected"}}async new(h){if(r(this,a))throw new Error("Session has been already created.");y(this,a,!0);const l=E(this,o,sk).call(this,h.capabilities);await r(this,s).call(this,l);const m=await r(this,t).sendCommand("Browser.getVersion");return{sessionId:"unknown",capabilities:{...l,acceptInsecureCerts:l.acceptInsecureCerts??!1,browserName:m.product,browserVersion:m.revision,platformName:"",setWindowRect:!1,webSocketUrl:"",userAgent:m.userAgent}}}async subscribe(h,l={}){return{subscription:await r(this,e).subscribe(h.events,h.contexts??[],l)}}async unsubscribe(h,l={}){return await r(this,e).unsubscribe(h.events,h.contexts??[],l),{}}},e=new WeakMap,t=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakSet,sk=function(h){const l=[];for(const S of h.firstMatch??[{}]){const g={...h.alwaysMatch};for(const w of Object.keys(S)){if(g[w]!==void 0)throw new n.InvalidArgumentException(`Capability ${w} in firstMatch is already defined in alwaysMatch`);g[w]=S[w]}l.push(g)}const m=l.find(S=>S.browserName==="chrome")??l[0]??{};return m.unhandledPromptBehavior=E(this,o,ak).call(this,m.unhandledPromptBehavior),m},ak=function(h){if(h!==void 0){if(typeof h=="object")return h;if(typeof h!="string")throw new n.InvalidArgumentException(`Unexpected 'unhandledPromptBehavior' type: ${typeof h}`);switch(h){case"accept":case"accept and notify":return{default:"accept"};case"dismiss":case"dismiss and notify":return{default:"dismiss"};case"ignore":return{default:"ignore"};default:throw new n.InvalidArgumentException(`Unexpected 'unhandledPromptBehavior' value: ${h}`)}}},d);return Fc.SessionProcessor=i,Fc}var Dc={},ab;function u_(){var o,c,u,d,Pf,$l,ok,ck,_f,Mg,w;if(ab)return Dc;ab=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.StorageProcessor=void 0;const n=$e(),i=Pn(),e=Qt(),t=Qv(),s=Bh();let a=(w=class{constructor(k,C,b){f(this,d);f(this,o);f(this,c);f(this,u);y(this,c,C),y(this,o,k),y(this,u,b)}async deleteCookies(k){const C=E(this,d,_f).call(this,k.partition);let b;try{b=await r(this,o).sendCommand("Storage.getCookies",{browserContextId:E(this,d,$l).call(this,C)})}catch(A){throw E(this,d,Pf).call(this,A)?new n.NoSuchUserContextException(A.message):A}const D=b.cookies.filter(A=>{var R;return C.sourceOrigin===void 0||((R=A.partitionKey)==null?void 0:R.topLevelSite)===C.sourceOrigin}).filter(A=>{const R=(0,s.cdpToBiDiCookie)(A);return E(this,d,Mg).call(this,R,k.filter)}).map(A=>({...A,expires:1}));return await r(this,o).sendCommand("Storage.setCookies",{cookies:D,browserContextId:E(this,d,$l).call(this,C)}),{partitionKey:C}}async getCookies(k){const C=E(this,d,_f).call(this,k.partition);let b;try{b=await r(this,o).sendCommand("Storage.getCookies",{browserContextId:E(this,d,$l).call(this,C)})}catch(A){throw E(this,d,Pf).call(this,A)?new n.NoSuchUserContextException(A.message):A}return{cookies:b.cookies.filter(A=>{var R;return C.sourceOrigin===void 0||((R=A.partitionKey)==null?void 0:R.topLevelSite)===C.sourceOrigin}).map(A=>(0,s.cdpToBiDiCookie)(A)).filter(A=>E(this,d,Mg).call(this,A,k.filter)),partitionKey:C}}async setCookie(k){var D;const C=E(this,d,_f).call(this,k.partition),b=(0,s.bidiToCdpCookie)(k,C);try{await r(this,o).sendCommand("Storage.setCookies",{cookies:[b],browserContextId:E(this,d,$l).call(this,C)})}catch(A){throw E(this,d,Pf).call(this,A)?new n.NoSuchUserContextException(A.message):((D=r(this,u))==null||D.call(this,e.LogType.debugError,A),new n.UnableToSetCookieException(A.toString()))}return{partitionKey:C}}},o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakSet,Pf=function(k){var C;return(C=k.message)==null?void 0:C.startsWith("Failed to find browser context for id")},$l=function(k){return k.userContext==="default"?void 0:k.userContext},ok=function(k){const C=k.context;return{userContext:r(this,c).getContext(C).userContext}},ck=function(k){var A;const C=new Map;let b=k.sourceOrigin;if(b!==void 0){const R=t.NetworkProcessor.parseUrlString(b);R.origin==="null"?b=R.origin:b=`${R.protocol}//${R.hostname}`}for(const[R,x]of Object.entries(k))R!==void 0&&x!==void 0&&!["type","sourceOrigin","userContext"].includes(R)&&C.set(R,x);return C.size>0&&((A=r(this,u))==null||A.call(this,e.LogType.debugInfo,`Unsupported partition keys: ${JSON.stringify(Object.fromEntries(C))}`)),{userContext:k.userContext??"default",...b===void 0?{}:{sourceOrigin:b}}},_f=function(k){return k===void 0?{userContext:"default"}:k.type==="context"?E(this,d,ok).call(this,k):((0,i.assert)(k.type==="storageKey","Unknown partition type"),E(this,d,ck).call(this,k))},Mg=function(k,C){return C===void 0?!0:(C.domain===void 0||C.domain===k.domain)&&(C.name===void 0||C.name===k.name)&&(C.value===void 0||(0,s.deserializeByteValue)(C.value)===(0,s.deserializeByteValue)(k.value))&&(C.path===void 0||C.path===k.path)&&(C.size===void 0||C.size===k.size)&&(C.httpOnly===void 0||C.httpOnly===k.httpOnly)&&(C.secure===void 0||C.secure===k.secure)&&(C.sameSite===void 0||C.sameSite===k.sameSite)&&(C.expiry===void 0||C.expiry===k.expiry)},w);return Dc.StorageProcessor=a,Dc}var Oc={},ob;function Gp(){var i,e,t;if(ob)return Oc;ob=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.OutgoingMessage=void 0;let n=(t=class{constructor(a,o){f(this,i);f(this,e);y(this,i,a),y(this,e,o)}static createFromPromise(a,o){return a.then(c=>c.kind==="success"?{kind:"success",value:new t(c.value,o)}:c)}static createResolved(a,o){return Promise.resolve({kind:"success",value:new t(a,o)})}get message(){return r(this,i)}get channel(){return r(this,e)}},i=new WeakMap,e=new WeakMap,t);return Oc.OutgoingMessage=n,Oc}var cb;function d_(){var g,w,v,k,C,b,D,A,R,x,N,M,O,uk,Tf,j;if(cb)return gc;cb=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.CommandProcessor=void 0;const n=$e(),i=aa(),e=Qt(),t=z1(),s=V1(),a=G1(),o=J1(),c=i_(),u=Qv(),d=s_(),p=o_(),h=c_(),l=u_(),m=Gp();let S=(j=class extends i.EventEmitter{constructor(L,F,q,B,G,Y,te,V,W=new t.BidiNoOpParser,ie,he){super();f(this,O);f(this,g);f(this,w);f(this,v);f(this,k);f(this,C);f(this,b);f(this,D);f(this,A);f(this,R);f(this,x);f(this,N);f(this,M);y(this,N,W),y(this,M,he),y(this,g,V),y(this,w,new s.BrowserProcessor(F,B)),y(this,v,new o.BrowsingContextProcessor(F,B,q)),y(this,k,new a.CdpProcessor(B,G,L,F)),y(this,C,new c.InputProcessor(B)),y(this,b,new u.NetworkProcessor(B,te)),y(this,D,new d.PermissionsProcessor(F)),y(this,A,new p.ScriptProcessor(q,B,G,Y,he)),y(this,R,new h.SessionProcessor(q,F,ie)),y(this,x,new l.StorageProcessor(F,B,he))}async processCommand(L){var F;try{const q=await E(this,O,uk).call(this,L),B={type:"success",id:L.id,result:q};this.emit("response",{message:m.OutgoingMessage.createResolved(B,L.channel),event:L.method})}catch(q){if(q instanceof n.Exception)this.emit("response",{message:m.OutgoingMessage.createResolved(q.toErrorResponse(L.id),L.channel),event:L.method});else{const B=q;(F=r(this,M))==null||F.call(this,e.LogType.bidi,B),this.emit("response",{message:m.OutgoingMessage.createResolved(new n.UnknownErrorException(B.message,B.stack).toErrorResponse(L.id),L.channel),event:L.method})}}}},g=new WeakMap,w=new WeakMap,v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakMap,D=new WeakMap,A=new WeakMap,R=new WeakMap,x=new WeakMap,N=new WeakMap,M=new WeakMap,O=new WeakSet,uk=async function(L){switch(L.method){case"bluetooth.handleRequestDevicePrompt":return await r(this,g).handleRequestDevicePrompt(r(this,N).parseHandleRequestDevicePromptParams(L.params));case"bluetooth.simulateAdapter":return await r(this,g).simulateAdapter(r(this,N).parseSimulateAdapterParameters(L.params));case"bluetooth.simulateAdvertisement":return await r(this,g).simulateAdvertisement(r(this,N).parseSimulateAdvertisementParameters(L.params));case"bluetooth.simulatePreconnectedPeripheral":return await r(this,g).simulatePreconnectedPeripheral(r(this,N).parseSimulatePreconnectedPeripheralParameters(L.params));case"browser.close":return r(this,w).close();case"browser.createUserContext":return await r(this,w).createUserContext(L.params);case"browser.getClientWindows":return await r(this,w).getClientWindows();case"browser.getUserContexts":return await r(this,w).getUserContexts();case"browser.removeUserContext":return await r(this,w).removeUserContext(r(this,N).parseRemoveUserContextParams(L.params));case"browser.setClientWindowState":throw new n.UnknownErrorException(`Method ${L.method} is not implemented.`);case"browsingContext.activate":return await r(this,v).activate(r(this,N).parseActivateParams(L.params));case"browsingContext.captureScreenshot":return await r(this,v).captureScreenshot(r(this,N).parseCaptureScreenshotParams(L.params));case"browsingContext.close":return await r(this,v).close(r(this,N).parseCloseParams(L.params));case"browsingContext.create":return await r(this,v).create(r(this,N).parseCreateParams(L.params));case"browsingContext.getTree":return r(this,v).getTree(r(this,N).parseGetTreeParams(L.params));case"browsingContext.handleUserPrompt":return await r(this,v).handleUserPrompt(r(this,N).parseHandleUserPromptParams(L.params));case"browsingContext.locateNodes":return await r(this,v).locateNodes(r(this,N).parseLocateNodesParams(L.params));case"browsingContext.navigate":return await r(this,v).navigate(r(this,N).parseNavigateParams(L.params));case"browsingContext.print":return await r(this,v).print(r(this,N).parsePrintParams(L.params));case"browsingContext.reload":return await r(this,v).reload(r(this,N).parseReloadParams(L.params));case"browsingContext.setViewport":return await r(this,v).setViewport(r(this,N).parseSetViewportParams(L.params));case"browsingContext.traverseHistory":return await r(this,v).traverseHistory(r(this,N).parseTraverseHistoryParams(L.params));case"goog:cdp.getSession":return r(this,k).getSession(r(this,N).parseGetSessionParams(L.params));case"goog:cdp.resolveRealm":return r(this,k).resolveRealm(r(this,N).parseResolveRealmParams(L.params));case"goog:cdp.sendCommand":return await r(this,k).sendCommand(r(this,N).parseSendCommandParams(L.params));case"cdp.getSession":return r(this,k).getSession(r(this,N).parseGetSessionParams(L.params));case"cdp.resolveRealm":return r(this,k).resolveRealm(r(this,N).parseResolveRealmParams(L.params));case"cdp.sendCommand":return await r(this,k).sendCommand(r(this,N).parseSendCommandParams(L.params));case"input.performActions":return await r(this,C).performActions(r(this,N).parsePerformActionsParams(L.params));case"input.releaseActions":return await r(this,C).releaseActions(r(this,N).parseReleaseActionsParams(L.params));case"input.setFiles":return await r(this,C).setFiles(r(this,N).parseSetFilesParams(L.params));case"network.addIntercept":return await r(this,b).addIntercept(r(this,N).parseAddInterceptParams(L.params));case"network.continueRequest":return await r(this,b).continueRequest(r(this,N).parseContinueRequestParams(L.params));case"network.continueResponse":return await r(this,b).continueResponse(r(this,N).parseContinueResponseParams(L.params));case"network.continueWithAuth":return await r(this,b).continueWithAuth(r(this,N).parseContinueWithAuthParams(L.params));case"network.failRequest":return await r(this,b).failRequest(r(this,N).parseFailRequestParams(L.params));case"network.provideResponse":return await r(this,b).provideResponse(r(this,N).parseProvideResponseParams(L.params));case"network.removeIntercept":return await r(this,b).removeIntercept(r(this,N).parseRemoveInterceptParams(L.params));case"network.setCacheBehavior":return await r(this,b).setCacheBehavior(r(this,N).parseSetCacheBehavior(L.params));case"permissions.setPermission":return await r(this,D).setPermissions(r(this,N).parseSetPermissionsParams(L.params));case"script.addPreloadScript":return await r(this,A).addPreloadScript(r(this,N).parseAddPreloadScriptParams(L.params));case"script.callFunction":return await r(this,A).callFunction(r(this,N).parseCallFunctionParams(E(this,O,Tf).call(this,L.params)));case"script.disown":return await r(this,A).disown(r(this,N).parseDisownParams(E(this,O,Tf).call(this,L.params)));case"script.evaluate":return await r(this,A).evaluate(r(this,N).parseEvaluateParams(E(this,O,Tf).call(this,L.params)));case"script.getRealms":return r(this,A).getRealms(r(this,N).parseGetRealmsParams(L.params));case"script.removePreloadScript":return await r(this,A).removePreloadScript(r(this,N).parseRemovePreloadScriptParams(L.params));case"session.end":throw new n.UnknownErrorException(`Method ${L.method} is not implemented.`);case"session.new":return await r(this,R).new(L.params);case"session.status":return r(this,R).status();case"session.subscribe":return await r(this,R).subscribe(r(this,N).parseSubscribeParams(L.params),L.channel);case"session.unsubscribe":return await r(this,R).unsubscribe(r(this,N).parseSubscribeParams(L.params),L.channel);case"storage.deleteCookies":return await r(this,x).deleteCookies(r(this,N).parseDeleteCookiesParams(L.params));case"storage.getCookies":return await r(this,x).getCookies(r(this,N).parseGetCookiesParams(L.params));case"storage.setCookie":return await r(this,x).setCookie(r(this,N).parseSetCookieParams(L.params));case"webExtension.install":throw new n.UnknownErrorException(`Method ${L.method} is not implemented.`);case"webExtension.uninstall":throw new n.UnknownErrorException(`Method ${L.method} is not implemented.`)}throw new n.UnknownCommandException(`Unknown command '${L==null?void 0:L.method}'.`)},Tf=function(L){return typeof L=="object"&&L&&"target"in L&&typeof L.target=="object"&&L.target&&"context"in L.target&&delete L.target.realm,L},j);return gc.CommandProcessor=S,gc}var Nc={},ub;function l_(){var i,e,t;if(ub)return Nc;ub=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.BluetoothProcessor=void 0;let n=(t=class{constructor(a,o){f(this,i);f(this,e);y(this,i,a),y(this,e,o)}async simulateAdapter(a){const o=r(this,e).getContext(a.context);return await o.cdpTarget.browserCdpClient.sendCommand("BluetoothEmulation.disable"),await o.cdpTarget.browserCdpClient.sendCommand("BluetoothEmulation.enable",{state:a.state}),{}}async simulatePreconnectedPeripheral(a){return await r(this,e).getContext(a.context).cdpTarget.browserCdpClient.sendCommand("BluetoothEmulation.simulatePreconnectedPeripheral",{address:a.address,name:a.name,knownServiceUuids:a.knownServiceUuids,manufacturerData:a.manufacturerData}),{}}async simulateAdvertisement(a){return await r(this,e).getContext(a.context).cdpTarget.browserCdpClient.sendCommand("BluetoothEmulation.simulateAdvertisement",{entry:a.scanEntry}),{}}onCdpTargetCreated(a){a.cdpClient.on("DeviceAccess.deviceRequestPrompted",o=>{r(this,i).registerEvent({type:"event",method:"bluetooth.requestDevicePromptUpdated",params:{context:a.id,prompt:o.id,devices:o.devices}},a.id)})}async handleRequestDevicePrompt(a){const o=r(this,e).getContext(a.context);return a.accept?await o.cdpTarget.cdpClient.sendCommand("DeviceAccess.selectPrompt",{id:a.prompt,deviceId:a.device}):await o.cdpTarget.cdpClient.sendCommand("DeviceAccess.cancelPrompt",{id:a.prompt}),{}}},i=new WeakMap,e=new WeakMap,t);return Nc.BluetoothProcessor=n,Nc}var Lc={},ua={},Bc={},db;function qh(){var i,e,t,s,a,o,c;if(db)return Bc;db=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.Deferred=void 0;let n=(i=Symbol.toStringTag,c=class{constructor(){f(this,e,!1);f(this,t);f(this,s);f(this,a);f(this,o);U(this,i,"Promise");y(this,t,new Promise((d,p)=>{y(this,a,d),y(this,o,p)})),r(this,t).catch(d=>{})}get isFinished(){return r(this,e)}get result(){if(!r(this,e))throw new Error("Deferred is not finished yet");return r(this,s)}then(d,p){return r(this,t).then(d,p)}catch(d){return r(this,t).catch(d)}resolve(d){y(this,s,d),r(this,e)||(y(this,e,!0),r(this,a).call(this,d))}reject(d){r(this,e)||(y(this,e,!0),r(this,o).call(this,d))}finally(d){return r(this,t).finally(d)}},e=new WeakMap,t=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c);return Bc.Deferred=n,Bc}var $h={},lb;function hb(){if(lb)return $h;lb=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.getTimestamp=n;function n(){return new Date().getTime()}return $h}var Kh={},fb;function h_(){if(fb)return Kh;fb=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.inchesFromCm=n;function n(i){return i/2.54}return Kh}var jc={},qc={},pb;function mb(){var a,o,c,u,d,p,h,l,Ag,S,dk,Rg,Fg,lk,Dg,Og,hk,fk,Ng;if(pb)return qc;pb=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.Realm=void 0;const n=$e(),i=Qt(),e=ca(),t=rb(),x=class x{constructor(M,O,T,_,j,$,J){f(this,l);f(this,a);f(this,o);f(this,c);f(this,u);f(this,d);f(this,p);f(this,h);y(this,a,M),y(this,o,O),y(this,c,T),y(this,u,_),y(this,d,j),y(this,p,$),y(this,h,J),r(this,h).addRealm(this)}cdpToBidiValue(M,O){const T=this.serializeForBiDi(M.result.deepSerializedValue,new Map);if(M.result.objectId){const _=M.result.objectId;O==="root"?(T.handle=_,r(this,h).knownHandlesToRealmMap.set(_,this.realmId)):E(this,l,Ng).call(this,_).catch(j=>{var $;return($=r(this,u))==null?void 0:$.call(this,i.LogType.debugError,j)})}return T}serializeForBiDi(M,O){if(Object.hasOwn(M,"weakLocalObjectReference")){const _=M.weakLocalObjectReference;O.has(_)||O.set(_,(0,e.uuidv4)()),M.internalId=O.get(_),delete M.weakLocalObjectReference}if(M.type==="node"&&M.value&&Object.hasOwn(M.value,"frameId")&&delete M.value.frameId,M.type==="platformobject")return{type:"object"};const T=M.value;if(T===void 0)return M;if(["array","set","htmlcollection","nodelist"].includes(M.type))for(const _ in T)T[_]=this.serializeForBiDi(T[_],O);if(["object","map"].includes(M.type))for(const _ in T)T[_]=[this.serializeForBiDi(T[_][0],O),this.serializeForBiDi(T[_][1],O)];return M}get realmId(){return r(this,p)}get executionContextId(){return r(this,c)}get origin(){return r(this,d)}get source(){return{realm:this.realmId}}get cdpClient(){return r(this,a)}get baseInfo(){return{realm:this.realmId,origin:this.origin}}async evaluate(M,O,T="none",_={},j=!1,$=!1){var L;const J=await this.cdpClient.sendCommand("Runtime.evaluate",{contextId:this.executionContextId,expression:M,awaitPromise:O,serializationOptions:E(L=x,S,Og).call(L,"deep",_),userGesture:j,includeCommandLineAPI:$});return J.exceptionDetails?await E(this,l,Dg).call(this,J.exceptionDetails,0,T):{realm:this.realmId,result:this.cdpToBidiValue(J,T),type:"success"}}initialize(){E(this,l,Ag).call(this,{type:"event",method:n.ChromiumBidi.Script.EventNames.RealmCreated,params:this.realmInfo})}async serializeCdpObject(M,O){var j;const T=E(j=x,S,dk).call(j,M),_=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String($=>$),awaitPromise:!1,arguments:[T],serializationOptions:{serialization:"deep"},executionContextId:this.executionContextId});return this.cdpToBidiValue(_,O)}async stringifyObject(M){const{result:O}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(T=>String(T)),awaitPromise:!1,arguments:[M],returnByValue:!0,executionContextId:this.executionContextId});return O.value}async callFunction(M,O,T={type:"undefined"},_=[],j="none",$={},J=!1){var B;const L=`(...args) => {
      function callFunction(f, args) {
        const deserializedThis = args.shift();
        const deserializedArgs = args;
        return f.apply(deserializedThis, deserializedArgs);
      }
      return callFunction((
        ${M}
      ), args);
    }`,F=[await this.deserializeForCdp(T),...await Promise.all(_.map(async G=>await this.deserializeForCdp(G)))];let q;try{q=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:L,awaitPromise:O,arguments:F,serializationOptions:E(B=x,S,Og).call(B,"deep",$),executionContextId:this.executionContextId,userGesture:J})}catch(G){throw G.code===-32e3&&["Could not find object with given id","Argument should belong to the same JavaScript world as target object","Invalid remote object id"].includes(G.message)?new n.NoSuchHandleException("Handle was not found."):G}return q.exceptionDetails?await E(this,l,Dg).call(this,q.exceptionDetails,1,j):{type:"success",result:this.cdpToBidiValue(q,j),realm:this.realmId}}async deserializeForCdp(M){if("handle"in M&&M.handle)return{objectId:M.handle};if("handle"in M||"sharedId"in M)throw new n.NoSuchHandleException("Handle was not found.");switch(M.type){case"undefined":return{unserializableValue:"undefined"};case"null":return{unserializableValue:"null"};case"string":return{value:M.value};case"number":return M.value==="NaN"?{unserializableValue:"NaN"}:M.value==="-0"?{unserializableValue:"-0"}:M.value==="Infinity"?{unserializableValue:"Infinity"}:M.value==="-Infinity"?{unserializableValue:"-Infinity"}:{value:M.value};case"boolean":return{value:!!M.value};case"bigint":return{unserializableValue:`BigInt(${JSON.stringify(M.value)})`};case"date":return{unserializableValue:`new Date(Date.parse(${JSON.stringify(M.value)}))`};case"regexp":return{unserializableValue:`new RegExp(${JSON.stringify(M.value.pattern)}, ${JSON.stringify(M.value.flags)})`};case"map":{const O=await E(this,l,Rg).call(this,M.value),{result:T}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((..._)=>{const j=new Map;for(let $=0;$<_.length;$+=2)j.set(_[$],_[$+1]);return j}),awaitPromise:!1,arguments:O,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:T.objectId}}case"object":{const O=await E(this,l,Rg).call(this,M.value),{result:T}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((..._)=>{const j={};for(let $=0;$<_.length;$+=2){const J=_[$];j[J]=_[$+1]}return j}),awaitPromise:!1,arguments:O,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:T.objectId}}case"array":{const O=await E(this,l,Fg).call(this,M.value),{result:T}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((..._)=>_),awaitPromise:!1,arguments:O,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:T.objectId}}case"set":{const O=await E(this,l,Fg).call(this,M.value),{result:T}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((..._)=>new Set(_)),awaitPromise:!1,arguments:O,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:T.objectId}}case"channel":return{objectId:await new t.ChannelProxy(M.value,r(this,u)).init(this,r(this,o))}}throw new Error(`Value ${JSON.stringify(M)} is not deserializable.`)}async disown(M){r(this,h).knownHandlesToRealmMap.get(M)===this.realmId&&(await E(this,l,Ng).call(this,M),r(this,h).knownHandlesToRealmMap.delete(M))}dispose(){E(this,l,Ag).call(this,{type:"event",method:n.ChromiumBidi.Script.EventNames.RealmDestroyed,params:{realm:this.realmId}})}};a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakSet,Ag=function(M){if(this.associatedBrowsingContexts.length===0)r(this,o).registerGlobalEvent(M);else for(const O of this.associatedBrowsingContexts)r(this,o).registerEvent(M,O.id)},S=new WeakSet,dk=function(M){return M.objectId!==void 0?{objectId:M.objectId}:M.unserializableValue!==void 0?{unserializableValue:M.unserializableValue}:{value:M.value}},Rg=async function(M){return(await Promise.all(M.map(async([T,_])=>{let j;typeof T=="string"?j={value:T}:j=await this.deserializeForCdp(T);const $=await this.deserializeForCdp(_);return[j,$]}))).flat()},Fg=async function(M){return await Promise.all(M.map(O=>this.deserializeForCdp(O)))},lk=async function(M,O,T){var $;const _=(($=M.stackTrace)==null?void 0:$.callFrames.map(J=>({url:J.url,functionName:J.functionName,lineNumber:J.lineNumber-O,columnNumber:J.columnNumber})))??[],j=M.exception;return{exception:await this.serializeCdpObject(j,T),columnNumber:M.columnNumber,lineNumber:M.lineNumber-O,stackTrace:{callFrames:_},text:await this.stringifyObject(j)||M.text}},Dg=async function(M,O,T){return{exceptionDetails:await E(this,l,lk).call(this,M,O,T),realm:this.realmId,type:"exception"}},Og=function(M,O){var T,_;return{serialization:M,additionalParameters:E(T=x,S,hk).call(T,O),...E(_=x,S,fk).call(_,O)}},hk=function(M){const O={};return M.maxDomDepth!==void 0&&(O.maxNodeDepth=M.maxDomDepth===null?1e3:M.maxDomDepth),M.includeShadowTree!==void 0&&(O.includeShadowTree=M.includeShadowTree),O},fk=function(M){return M.maxObjectDepth===void 0||M.maxObjectDepth===null?{}:{maxDepth:M.maxObjectDepth}},Ng=async function(M){try{await this.cdpClient.sendCommand("Runtime.releaseObject",{objectId:M})}catch(O){if(!(O.code===-32e3&&O.message==="Invalid remote object id"))throw O}},f(x,S);let s=x;return qc.Realm=s,qc}var $c={},gb;function f_(){if(gb)return $c;gb=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.getSharedId=i,$c.parseSharedId=t;const n="_element_";function i(s,a,o){return`f.${s}.d.${a}.e.${o}`}function e(s){const a=s.match(new RegExp(`(.*)${n}(.*)`));if(!a)return null;const o=a[1],c=a[2];if(o===void 0||c===void 0)return null;const u=parseInt(c??"");return isNaN(u)?null:{documentId:o,backendNodeId:u}}function t(s){const a=e(s);if(a!==null)return{...a,frameId:void 0};const o=s.match(/f\.(.*)\.d\.(.*)\.e\.([0-9]*)/);if(!o)return null;const c=o[1],u=o[2],d=o[3];if(c===void 0||u===void 0||d===void 0)return null;const p=parseInt(d??"");return isNaN(p)?null:{frameId:c,documentId:u,backendNodeId:p}}return $c}var wb;function yb(){var s,a,o,pk;if(wb)return jc;wb=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.WindowRealm=void 0;const n=$e(),i=mb(),e=f_();class t extends i.Realm{constructor(p,h,l,m,S,g,w,v,k,C){super(l,m,S,g,w,v,k);f(this,o);f(this,s);f(this,a);U(this,"sandbox");y(this,s,p),y(this,a,h),this.sandbox=C,this.initialize()}get browsingContext(){return r(this,a).getContext(r(this,s))}get associatedBrowsingContexts(){return[this.browsingContext]}get realmType(){return"window"}get realmInfo(){return{...this.baseInfo,type:this.realmType,context:r(this,s),sandbox:this.sandbox}}get source(){return{realm:this.realmId,context:this.browsingContext.id}}serializeForBiDi(p,h){const l=p.value;if(p.type==="node"&&l!==void 0){if(Object.hasOwn(l,"backendNodeId")){let m=this.browsingContext.navigableId??"UNKNOWN";Object.hasOwn(l,"loaderId")&&(m=l.loaderId,delete l.loaderId),p.sharedId=(0,e.getSharedId)(E(this,o,pk).call(this,m),m,l.backendNodeId),delete l.backendNodeId}if(Object.hasOwn(l,"children"))for(const m in l.children)l.children[m]=this.serializeForBiDi(l.children[m],h);Object.hasOwn(l,"shadowRoot")&&l.shadowRoot!==null&&(l.shadowRoot=this.serializeForBiDi(l.shadowRoot,h)),l.namespaceURI===""&&(l.namespaceURI=null)}return super.serializeForBiDi(p,h)}async deserializeForCdp(p){if("sharedId"in p&&p.sharedId){const h=(0,e.parseSharedId)(p.sharedId);if(h===null)throw new n.NoSuchNodeException(`SharedId "${p.sharedId}" was not found.`);const{documentId:l,backendNodeId:m}=h;if(this.browsingContext.navigableId!==l)throw new n.NoSuchNodeException(`SharedId "${p.sharedId}" belongs to different document. Current document is ${this.browsingContext.navigableId}.`);try{const{object:S}=await this.cdpClient.sendCommand("DOM.resolveNode",{backendNodeId:m,executionContextId:this.executionContextId});return{objectId:S.objectId}}catch(S){throw S.code===-32e3&&S.message==="No node with given id found"?new n.NoSuchNodeException(`SharedId "${p.sharedId}" was not found.`):new n.UnknownErrorException(S.message,S.stack)}}return await super.deserializeForCdp(p)}async evaluate(p,h,l,m,S,g){return await r(this,a).getContext(r(this,s)).targetUnblockedOrThrow(),await super.evaluate(p,h,l,m,S,g)}async callFunction(p,h,l,m,S,g,w){return await r(this,a).getContext(r(this,s)).targetUnblockedOrThrow(),await super.callFunction(p,h,l,m,S,g,w)}}return s=new WeakMap,a=new WeakMap,o=new WeakSet,pk=function(p){const h=r(this,a).getAllContexts().find(l=>l.navigableId===p);return(h==null?void 0:h.id)??"UNKNOWN"},jc.WindowRealm=t,jc}var $r={},Uh={},vb;function p_(){if(vb)return Uh;vb=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.urlMatchesAboutBlank=n;function n(i){if(i==="")return!0;try{const e=new URL(i);return e.protocol.replace(/:$/,"").toLowerCase()==="about"&&e.pathname.toLowerCase()==="blank"&&e.username===""&&e.password===""&&e.host===""}catch(e){if(e instanceof TypeError)return!1;throw e}}return Uh}var bb;function m_(){var d,p,h,l,m,S,g,If,v,k,C,b,D,A,R,x,mk,M;if(bb)return $r;bb=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.NavigationTracker=$r.NavigationState=$r.NavigationResult=void 0;const n=$e(),i=qh(),e=Qt(),t=hb(),s=p_(),a=ca();class o{constructor(T,_){U(this,"eventName");U(this,"message");this.eventName=T,this.message=_}}$r.NavigationResult=o;class c{constructor(T,_,j,$){f(this,g);U(this,"navigationId",(0,a.uuidv4)());f(this,d);f(this,p,!1);f(this,h,new i.Deferred);U(this,"url");U(this,"loaderId");f(this,l);f(this,m);f(this,S,!1);U(this,"isFragmentNavigation");y(this,d,_),this.url=T,y(this,l,j),y(this,m,$)}get finished(){return r(this,h)}navigationInfo(){return{context:r(this,d),navigation:this.navigationId,timestamp:(0,t.getTimestamp)(),url:this.url}}start(){!r(this,l)&&!r(this,p)&&r(this,m).registerEvent({type:"event",method:n.ChromiumBidi.BrowsingContext.EventNames.NavigationStarted,params:this.navigationInfo()},r(this,d)),y(this,p,!0)}frameNavigated(){y(this,S,!0)}fragmentNavigated(){y(this,S,!0),E(this,g,If).call(this,new o("browsingContext.fragmentNavigated"))}load(){E(this,g,If).call(this,new o("browsingContext.load"))}fail(T){E(this,g,If).call(this,new o(r(this,S)?"browsingContext.navigationAborted":"browsingContext.navigationFailed",T))}}d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakMap,m=new WeakMap,S=new WeakMap,g=new WeakSet,If=function(T){y(this,p,!0),!r(this,l)&&!r(this,h).isFinished&&T.eventName!=="browsingContext.load"&&r(this,m).registerEvent({type:"event",method:T.eventName,params:this.navigationInfo()},r(this,d)),r(this,h).resolve(T)},$r.NavigationState=c;let u=(M=class{constructor(T,_,j,$){f(this,x);f(this,v);f(this,k);f(this,C,new Map);f(this,b);f(this,D);f(this,A);f(this,R,!0);y(this,b,_),y(this,v,j),y(this,k,$),y(this,R,!0),y(this,D,new c(T,_,(0,s.urlMatchesAboutBlank)(T),r(this,v)))}get currentNavigationId(){var T;return((T=r(this,A))==null?void 0:T.loaderId)!==void 0?r(this,A).navigationId:r(this,D).navigationId}get isInitialNavigation(){return r(this,R)}get url(){return r(this,D).url}createPendingNavigation(T,_=!1){var $,J;($=r(this,k))==null||$.call(this,e.LogType.debug,"createCommandNavigation"),y(this,R,_&&r(this,R)&&(0,s.urlMatchesAboutBlank)(T)),(J=r(this,A))==null||J.fail("navigation canceled by concurrent navigation");const j=new c(T,r(this,b),r(this,R),r(this,v));return y(this,A,j),j}dispose(){var T;(T=r(this,A))==null||T.fail("navigation canceled by context disposal"),r(this,D).fail("navigation canceled by context disposal")}onTargetInfoChanged(T){var _;(_=r(this,k))==null||_.call(this,e.LogType.debug,`onTargetInfoChanged ${T}`),r(this,D).url=T}frameNavigated(T,_,j){var J;if((J=r(this,k))==null||J.call(this,e.LogType.debug,`frameNavigated ${T}`),j!==void 0&&!r(this,C).has(_)){const L=r(this,A)??this.createPendingNavigation(j,!0);L.url=j,L.start(),L.fail("the requested url is unreachable");return}const $=E(this,x,mk).call(this,T,_);$.frameNavigated(),$!==r(this,D)&&r(this,D).fail("navigation canceled by concurrent navigation"),$.url=T,$.loaderId=_,r(this,C).set(_,$),$.start(),y(this,D,$),r(this,A)===$&&y(this,A,void 0)}navigatedWithinDocument(T,_){var $;if(($=r(this,k))==null||$.call(this,e.LogType.debug,`navigatedWithinDocument ${T}, ${_}`),r(this,D).url=T,_!=="fragment")return;const j=r(this,A)!==void 0&&r(this,A).loaderId===void 0?r(this,A):new c(T,r(this,b),!1,r(this,v));j.fragmentNavigated(),j===r(this,A)&&y(this,A,void 0)}frameRequestedNavigation(T){var _;(_=r(this,k))==null||_.call(this,e.LogType.debug,`Page.frameRequestedNavigation ${T}`),this.createPendingNavigation(T,!0)}loadPageEvent(T){var _,j;(_=r(this,k))==null||_.call(this,e.LogType.debug,"loadPageEvent"),y(this,R,!1),(j=r(this,C).get(T))==null||j.load()}failNavigation(T,_){var j;(j=r(this,k))==null||j.call(this,e.LogType.debug,"failCommandNavigation"),T.fail(_)}navigationCommandFinished(T,_){var j;(j=r(this,k))==null||j.call(this,e.LogType.debug,`finishCommandNavigation ${T.navigationId}, ${_}`),_!==void 0&&(T.loaderId=_,r(this,C).set(_,T)),T.isFragmentNavigation=_===void 0,!(_===void 0||r(this,D)===T)&&(r(this,D).fail("navigation canceled by concurrent navigation"),T.start(),y(this,D,T),r(this,A)===T&&y(this,A,void 0))}frameStartedNavigating(T,_){var $;if(($=r(this,k))==null||$.call(this,e.LogType.debug,`frameStartedNavigating ${T}, ${_}`),r(this,C).has(_))return;const j=r(this,A)??this.createPendingNavigation(T,!0);j.url=T,j.start(),j.loaderId=_,r(this,C).set(_,j)}beforeunload(){var T,_;if((T=r(this,k))==null||T.call(this,e.LogType.debug,"beforeunload"),r(this,A)===void 0){(_=r(this,k))==null||_.call(this,e.LogType.debugError,"Unexpectedly no pending navigation on beforeunload");return}r(this,A).start()}networkLoadingFailed(T,_){var j;(j=r(this,C).get(T))==null||j.fail(_)}},v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakMap,D=new WeakMap,A=new WeakMap,R=new WeakMap,x=new WeakSet,mk=function(T,_){var j;return r(this,C).has(_)?r(this,C).get(_):r(this,A)!==void 0&&((j=r(this,A))==null?void 0:j.loaderId)===void 0?r(this,A):this.createPendingNavigation(T,!0)},M);return $r.NavigationTracker=u,$r}var Sb;function Cb(){var w,v,k,C,b,D,A,R,x,N,M,O,T,_,j,$,J,L,Mf,Lg,B,gk,wk,Af,Bg,yk,jg,vk,bk,Sk;if(Sb)return ua;Sb=1;var n;Object.defineProperty(ua,"__esModule",{value:!0}),ua.BrowsingContextImpl=void 0,ua.serializeOrigin=p;const i=$e(),e=Pn(),t=qh(),s=Qt(),a=hb(),o=h_(),c=yb(),u=m_();let d=(w=class{constructor(P,I,K,z,X,Z,ne,ge,oe,ye,fe){f(this,L);f(this,v,new Set);f(this,k);U(this,"userContext");f(this,C);f(this,b,null);f(this,D,{width:0,height:0});f(this,A);f(this,R,{DOMContentLoaded:new t.Deferred,load:new t.Deferred});f(this,x);f(this,N,new t.Deferred);f(this,M);f(this,O);f(this,T);f(this,_);f(this,j);f(this,$);f(this,J);y(this,x,z),y(this,k,P),y(this,b,I),this.userContext=K,y(this,O,X),y(this,M,Z),y(this,j,ne),y(this,$,ye),y(this,T,fe),y(this,A,oe),y(this,_,new u.NavigationTracker(ge,P,X,fe))}static create(P,I,K,z,X,Z,ne,ge,oe,ye,fe){var Q;const H=new n(P,I,K,z,X,Z,ne,ge,oe,ye,fe);return E(Q=H,L,Lg).call(Q),Z.addContext(H),H.isTopLevelContext()||H.parent.addChild(H.id),X.registerPromiseEvent(H.targetUnblockedOrThrow().then(()=>({kind:"success",value:{type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,params:{...H.serializeToBidiValue(),url:ge}}}),re=>({kind:"error",error:re})),H.id,i.ChromiumBidi.BrowsingContext.EventNames.ContextCreated),H}get navigableId(){return r(this,C)}get navigationId(){return r(this,_).currentNavigationId}dispose(P){r(this,_).dispose(),E(this,L,Mf).call(this),r(this,j).deleteRealms({browsingContextId:this.id}),this.isTopLevelContext()||r(this.parent,v).delete(this.id),E(this,L,yk).call(this),P&&r(this,O).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.ContextDestroyed,params:this.serializeToBidiValue()},this.id),r(this,O).clearBufferedEvents(this.id),r(this,M).deleteContextById(this.id)}get id(){return r(this,k)}get parentId(){return r(this,b)}set parentId(P){var I;if(r(this,b)!==null){(I=r(this,T))==null||I.call(this,s.LogType.debugError,"Parent context already set");return}y(this,b,P),this.isTopLevelContext()||this.parent.addChild(this.id)}get parent(){return this.parentId===null?null:r(this,M).getContext(this.parentId)}get directChildren(){return[...r(this,v)].map(P=>r(this,M).getContext(P))}get allChildren(){const P=this.directChildren;return P.concat(...P.map(I=>I.allChildren))}isTopLevelContext(){return r(this,b)===null}get top(){let P=this,I=P.parent;for(;I;)P=I,I=P.parent;return P}addChild(P){r(this,v).add(P)}get cdpTarget(){return r(this,x)}updateCdpTarget(P){y(this,x,P),E(this,L,Lg).call(this)}get url(){return r(this,_).url}async lifecycleLoaded(){await r(this,R).load}async targetUnblockedOrThrow(){const P=await r(this,x).unblocked;if(P.kind==="error")throw P.error}async getOrCreateSandbox(P){if(P===void 0||P==="")return await r(this,N);let I=r(this,j).findRealms({browsingContextId:this.id,sandbox:P});return I.length===0&&(await r(this,x).cdpClient.sendCommand("Page.createIsolatedWorld",{frameId:this.id,worldName:P}),I=r(this,j).findRealms({browsingContextId:this.id,sandbox:P}),(0,e.assert)(I.length!==0)),I[0]}serializeToBidiValue(P=0,I=!0){return{context:r(this,k),url:this.url,userContext:this.userContext,originalOpener:r(this,A)??null,clientWindow:"",children:P>0?this.directChildren.map(K=>K.serializeToBidiValue(P-1,!1)):null,...I?{parent:r(this,b)}:{}}}onTargetInfoChanged(P){r(this,_).onTargetInfoChanged(P.targetInfo.url)}async navigate(P,I){try{new URL(P)}catch{throw new i.InvalidArgumentException(`Invalid URL: ${P}`)}const K=r(this,_).createPendingNavigation(P),z=(async()=>{const Z=await r(this,x).cdpClient.sendCommand("Page.navigate",{url:P,frameId:this.id});if(Z.errorText)throw r(this,_).failNavigation(K,Z.errorText),new i.UnknownErrorException(Z.errorText);r(this,_).navigationCommandFinished(K,Z.loaderId),E(this,L,Af).call(this,Z.loaderId)})(),X=await Promise.race([E(this,L,jg).call(this,I,z,K),K.finished]);if(X instanceof u.NavigationResult&&(X.eventName==="browsingContext.navigationAborted"||X.eventName==="browsingContext.navigationFailed"))throw new i.UnknownErrorException(X.message??"unknown exception");return{navigation:K.navigationId,url:K.url}}async reload(P,I){await this.targetUnblockedOrThrow(),E(this,L,Bg).call(this);const K=r(this,_).createPendingNavigation(r(this,_).url),z=r(this,x).cdpClient.sendCommand("Page.reload",{ignoreCache:P}),X=await Promise.race([E(this,L,jg).call(this,I,z,K),K.finished]);if(X instanceof u.NavigationResult&&(X.eventName==="browsingContext.navigationAborted"||X.eventName==="browsingContext.navigationFailed"))throw new i.UnknownErrorException(X.message??"unknown exception");return{navigation:K.navigationId,url:K.url}}async setViewport(P,I){if(P===null&&I===null)await r(this,x).cdpClient.sendCommand("Emulation.clearDeviceMetricsOverride");else try{let K;P===void 0?K=r(this,D):P===null?K={width:0,height:0}:K=P,y(this,D,K),await r(this,x).cdpClient.sendCommand("Emulation.setDeviceMetricsOverride",{width:r(this,D).width,height:r(this,D).height,deviceScaleFactor:I||0,mobile:!1,dontSetVisibleSize:!0})}catch(K){throw K.message.startsWith("Width and height values must be positive")?new i.UnsupportedOperationException("Provided viewport dimensions are not supported"):K}}async handleUserPrompt(P,I){await r(this,x).cdpClient.sendCommand("Page.handleJavaScriptDialog",{accept:P??!0,promptText:I})}async activate(){await r(this,x).cdpClient.sendCommand("Page.bringToFront")}async captureScreenshot(P){if(!this.isTopLevelContext())throw new i.UnsupportedOperationException(`Non-top-level 'context' (${P.context}) is currently not supported`);const I=h(P);let K=!1,z;switch(P.origin??(P.origin="viewport"),P.origin){case"document":{z=String(()=>{const oe=document.documentElement;return{x:0,y:0,width:oe.scrollWidth,height:oe.scrollHeight}}),K=!0;break}case"viewport":{z=String(()=>{const oe=window.visualViewport;return{x:oe.pageLeft,y:oe.pageTop,width:oe.width,height:oe.height}});break}}const Z=await(await this.getOrCreateSandbox(void 0)).callFunction(z,!1);(0,e.assert)(Z.type==="success");const ne=l(Z.result);(0,e.assert)(ne);let ge=ne;if(P.clip){const oe=P.clip;P.origin==="viewport"&&oe.type==="box"&&(oe.x+=ne.x,oe.y+=ne.y),ge=S(await E(this,L,vk).call(this,oe),ne)}if(ge.width===0||ge.height===0)throw new i.UnableToCaptureScreenException(`Unable to capture screenshot with zero dimensions: width=${ge.width}, height=${ge.height}`);return await r(this,x).cdpClient.sendCommand("Page.captureScreenshot",{clip:{...ge,scale:1},...I,captureBeyondViewport:K})}async print(P){var K,z,X,Z,ne,ge;if(!this.isTopLevelContext())throw new i.UnsupportedOperationException("Printing of non-top level contexts is not supported");const I={};if(P.background!==void 0&&(I.printBackground=P.background),((K=P.margin)==null?void 0:K.bottom)!==void 0&&(I.marginBottom=(0,o.inchesFromCm)(P.margin.bottom)),((z=P.margin)==null?void 0:z.left)!==void 0&&(I.marginLeft=(0,o.inchesFromCm)(P.margin.left)),((X=P.margin)==null?void 0:X.right)!==void 0&&(I.marginRight=(0,o.inchesFromCm)(P.margin.right)),((Z=P.margin)==null?void 0:Z.top)!==void 0&&(I.marginTop=(0,o.inchesFromCm)(P.margin.top)),P.orientation!==void 0&&(I.landscape=P.orientation==="landscape"),((ne=P.page)==null?void 0:ne.height)!==void 0&&(I.paperHeight=(0,o.inchesFromCm)(P.page.height)),((ge=P.page)==null?void 0:ge.width)!==void 0&&(I.paperWidth=(0,o.inchesFromCm)(P.page.width)),P.pageRanges!==void 0){for(const oe of P.pageRanges){if(typeof oe=="number")continue;const ye=oe.split("-");if(ye.length<1||ye.length>2)throw new i.InvalidArgumentException(`Invalid page range: ${oe} is not a valid integer range.`);if(ye.length===1){g(ye[0]??"");continue}let fe,H;const[Q="",re=""]=ye;if(Q===""?fe=1:fe=g(Q),re===""?H=Number.MAX_SAFE_INTEGER:H=g(re),fe>H)throw new i.InvalidArgumentException(`Invalid page range: ${Q} > ${re}`)}I.pageRanges=P.pageRanges.join(",")}P.scale!==void 0&&(I.scale=P.scale),P.shrinkToFit!==void 0&&(I.preferCSSPageSize=!P.shrinkToFit);try{return{data:(await r(this,x).cdpClient.sendCommand("Page.printToPDF",I)).data}}catch(oe){throw oe.message==="invalid print parameters: content area is empty"?new i.UnsupportedOperationException(oe.message):oe}}async close(){await r(this,x).cdpClient.sendCommand("Page.close")}async traverseHistory(P){if(P===0)return;const I=await r(this,x).cdpClient.sendCommand("Page.getNavigationHistory"),K=I.entries[I.currentIndex+P];if(!K)throw new i.NoSuchHistoryEntryException(`No history entry at delta ${P}`);await r(this,x).cdpClient.sendCommand("Page.navigateToHistoryEntry",{entryId:K.id})}async toggleModulesIfNeeded(){await Promise.all([r(this,x).toggleNetworkIfNeeded(),r(this,x).toggleDeviceAccessIfNeeded()])}async locateNodes(P){return await E(this,L,Sk).call(this,await r(this,N),P.locator,P.startNodes??[],P.maxNodeCount,P.serializationOptions)}},v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakMap,D=new WeakMap,A=new WeakMap,R=new WeakMap,x=new WeakMap,N=new WeakMap,M=new WeakMap,O=new WeakMap,T=new WeakMap,_=new WeakMap,j=new WeakMap,$=new WeakMap,J=new WeakMap,L=new WeakSet,Mf=function(P=!1){this.directChildren.map(I=>I.dispose(P))},Lg=function(){r(this,x).cdpClient.on("Network.loadingFailed",P=>{r(this,_).networkLoadingFailed(P.requestId,P.errorText)}),r(this,x).cdpClient.on("Page.frameNavigated",P=>{this.id===P.frame.id&&(r(this,_).frameNavigated(P.frame.url+(P.frame.urlFragment??""),P.frame.loaderId,P.frame.unreachableUrl),E(this,L,Mf).call(this),E(this,L,Af).call(this,P.frame.loaderId))}),r(this,x).on("frameStartedNavigating",P=>{var K;(K=r(this,T))==null||K.call(this,s.LogType.debugInfo,"Received frameStartedNavigating event",P),[this.id,...this.cdpTarget.id===this.id?[void 0]:[]].includes(P.frameId)&&r(this,_).frameStartedNavigating(P.url,P.loaderId)}),r(this,x).cdpClient.on("Page.navigatedWithinDocument",P=>{if(this.id===P.frameId&&(r(this,_).navigatedWithinDocument(P.url,P.navigationType),P.navigationType==="historyApi")){r(this,O).registerEvent({type:"event",method:"browsingContext.historyUpdated",params:{context:this.id,url:r(this,_).url}},this.id);return}}),r(this,x).cdpClient.on("Page.frameRequestedNavigation",P=>{this.id===P.frameId&&r(this,_).frameRequestedNavigation(P.url)}),r(this,x).cdpClient.on("Page.lifecycleEvent",P=>{if(this.id===P.frameId){if(P.name==="init"){E(this,L,Af).call(this,P.loaderId);return}if(P.name==="commit"){y(this,C,P.loaderId);return}if(r(this,C)||y(this,C,P.loaderId),P.loaderId===r(this,C))switch(P.name){case"DOMContentLoaded":r(this,_).isInitialNavigation||r(this,O).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.DomContentLoaded,params:{context:this.id,navigation:r(this,_).currentNavigationId,timestamp:(0,a.getTimestamp)(),url:r(this,_).url}},this.id),r(this,R).DOMContentLoaded.resolve();break;case"load":r(this,_).isInitialNavigation||r(this,O).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.Load,params:{context:this.id,navigation:r(this,_).currentNavigationId,timestamp:(0,a.getTimestamp)(),url:r(this,_).url}},this.id),r(this,_).loadPageEvent(P.loaderId),r(this,R).load.resolve();break}}}),r(this,x).cdpClient.on("Runtime.executionContextCreated",P=>{var oe;const{auxData:I,name:K,uniqueId:z,id:X}=P.context;if(!I||I.frameId!==this.id)return;let Z,ne;switch(I.type){case"isolated":ne=K,r(this,N).isFinished||(oe=r(this,T))==null||oe.call(this,s.LogType.debugError,"Unexpectedly, isolated realm created before the default one"),Z=r(this,N).isFinished?r(this,N).result.origin:"";break;case"default":Z=p(P.context.origin);break;default:return}const ge=new c.WindowRealm(this.id,r(this,M),r(this,x).cdpClient,r(this,O),X,r(this,T),Z,z,r(this,j),ne);I.isDefault&&(r(this,N).resolve(ge),Promise.all(r(this,x).getChannels().map(ye=>ye.startListenerFromWindow(ge,r(this,O)))))}),r(this,x).cdpClient.on("Runtime.executionContextDestroyed",P=>{r(this,N).isFinished&&r(this,N).result.executionContextId===P.executionContextId&&y(this,N,new t.Deferred),r(this,j).deleteRealms({cdpSessionId:r(this,x).cdpSessionId,executionContextId:P.executionContextId})}),r(this,x).cdpClient.on("Runtime.executionContextsCleared",()=>{r(this,N).isFinished||r(this,N).reject(new i.UnknownErrorException("execution contexts cleared")),y(this,N,new t.Deferred),r(this,j).deleteRealms({cdpSessionId:r(this,x).cdpSessionId})}),r(this,x).cdpClient.on("Page.javascriptDialogClosed",P=>{var K;const I=P.result;r(this,J)===void 0&&((K=r(this,T))==null||K.call(this,s.LogType.debugError,"Unexpectedly no opening prompt event before closing one")),r(this,O).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.UserPromptClosed,params:{context:this.id,accepted:I,type:r(this,J)??"UNKNOWN",userText:I&&P.userInput?P.userInput:void 0}},this.id),y(this,J,void 0)}),r(this,x).cdpClient.on("Page.javascriptDialogOpening",P=>{var z;const I=E(z=n,B,gk).call(z,P.type);P.type==="beforeunload"&&r(this,_).beforeunload(),y(this,J,I);const K=E(this,L,wk).call(this,I);switch(r(this,O).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.UserPromptOpened,params:{context:this.id,handler:K,type:I,message:P.message,...P.type==="prompt"?{defaultValue:P.defaultPrompt}:{}}},this.id),K){case"accept":this.handleUserPrompt(!0);break;case"dismiss":this.handleUserPrompt(!1);break}})},B=new WeakSet,gk=function(P){switch(P){case"alert":return"alert";case"beforeunload":return"beforeunload";case"confirm":return"confirm";case"prompt":return"prompt"}},wk=function(P){var K,z,X,Z,ne,ge,oe,ye;const I="dismiss";switch(P){case"alert":return((K=r(this,$))==null?void 0:K.alert)??((z=r(this,$))==null?void 0:z.default)??I;case"beforeunload":return((X=r(this,$))==null?void 0:X.beforeUnload)??((Z=r(this,$))==null?void 0:Z.default)??"accept";case"confirm":return((ne=r(this,$))==null?void 0:ne.confirm)??((ge=r(this,$))==null?void 0:ge.default)??I;case"prompt":return((oe=r(this,$))==null?void 0:oe.prompt)??((ye=r(this,$))==null?void 0:ye.default)??I}},Af=function(P){P===void 0||r(this,C)===P||(E(this,L,Bg).call(this),y(this,C,P),E(this,L,Mf).call(this,!0))},Bg=function(){var P,I;r(this,R).DOMContentLoaded.isFinished?r(this,R).DOMContentLoaded=new t.Deferred:(P=r(this,T))==null||P.call(this,n.LOGGER_PREFIX,"Document changed (DOMContentLoaded)"),r(this,R).load.isFinished?r(this,R).load=new t.Deferred:(I=r(this,T))==null||I.call(this,n.LOGGER_PREFIX,"Document changed (load)")},yk=function(){r(this,R).DOMContentLoaded.isFinished||r(this,R).DOMContentLoaded.reject(new i.UnknownErrorException("navigation canceled")),r(this,R).load.isFinished||r(this,R).load.reject(new i.UnknownErrorException("navigation canceled"))},jg=async function(P,I,K){if(P!=="none"){if(await I,K.isFragmentNavigation===!0){await K.finished;return}if(P==="interactive"){await r(this,R).DOMContentLoaded;return}if(P==="complete"){await r(this,R).load;return}throw new i.InvalidArgumentException(`Wait condition ${P} is not supported`)}},vk=async function(P){switch(P.type){case"box":return{x:P.x,y:P.y,width:P.width,height:P.height};case"element":{const I=await this.getOrCreateSandbox(void 0),K=await I.callFunction(String(z=>z instanceof Element),!1,{type:"undefined"},[P.element]);if(K.type==="exception")throw new i.NoSuchElementException(`Element '${P.element.sharedId}' was not found`);if((0,e.assert)(K.result.type==="boolean"),!K.result.value)throw new i.NoSuchElementException(`Node '${P.element.sharedId}' is not an Element`);{const z=await I.callFunction(String(Z=>{const ne=Z.getBoundingClientRect();return{x:ne.x,y:ne.y,height:ne.height,width:ne.width}}),!1,{type:"undefined"},[P.element]);(0,e.assert)(z.type==="success");const X=l(z.result);if(!X)throw new i.UnableToCaptureScreenException(`Could not get bounding box for Element '${P.element.sharedId}'`);return X}}}},bk=async function(P,I,K,z){switch(I.type){case"context":throw new Error("Unreachable");case"css":return{functionDeclaration:String((X,Z,...ne)=>{const ge=ye=>{if(!(ye instanceof HTMLElement||ye instanceof Document||ye instanceof DocumentFragment))throw new Error("startNodes in css selector should be HTMLElement, Document or DocumentFragment");return[...ye.querySelectorAll(X)]};ne=ne.length>0?ne:[document];const oe=ne.map(ye=>ge(ye)).flat(1);return Z===0?oe:oe.slice(0,Z)}),argumentsLocalValues:[{type:"string",value:I.value},{type:"number",value:K??0},...z]};case"xpath":return{functionDeclaration:String((X,Z,...ne)=>{const oe=new XPathEvaluator().createExpression(X),ye=H=>{const Q=oe.evaluate(H,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),re=[];for(let de=0;de<Q.snapshotLength;de++)re.push(Q.snapshotItem(de));return re};ne=ne.length>0?ne:[document];const fe=ne.map(H=>ye(H)).flat(1);return Z===0?fe:fe.slice(0,Z)}),argumentsLocalValues:[{type:"string",value:I.value},{type:"number",value:K??0},...z]};case"innerText":if(I.value==="")throw new i.InvalidSelectorException("innerText locator cannot be empty");return{functionDeclaration:String((X,Z,ne,ge,oe,...ye)=>{const fe=ne?X.toUpperCase():X,H=(re,de)=>{var Lt;const ve=[];if(re instanceof DocumentFragment||re instanceof Document)return[...re.children].forEach(pi=>ve.push(...H(pi,de))),ve;if(!(re instanceof HTMLElement))return[];const ke=re,Be=ne?(Lt=ke.innerText)==null?void 0:Lt.toUpperCase():ke.innerText;if(!Be.includes(fe))return[];const je=[];for(const pt of ke.children)pt instanceof HTMLElement&&je.push(pt);if(je.length===0)Z&&Be===fe?ve.push(ke):Z||ve.push(ke);else{const pt=de<=0?[]:je.map(pi=>H(pi,de-1)).flat(1);pt.length===0?(!Z||Be===fe)&&ve.push(ke):ve.push(...pt)}return ve};ye=ye.length>0?ye:[document];const Q=ye.map(re=>H(re,oe)).flat(1);return ge===0?Q:Q.slice(0,ge)}),argumentsLocalValues:[{type:"string",value:I.value},{type:"boolean",value:I.matchType!=="partial"},{type:"boolean",value:I.ignoreCase===!0},{type:"number",value:K??0},{type:"number",value:I.maxDepth??1e3},...z]};case"accessibility":{if(!I.value.name&&!I.value.role)throw new i.InvalidSelectorException("Either name or role has to be specified");await Promise.all([r(this,x).cdpClient.sendCommand("Accessibility.enable"),r(this,x).cdpClient.sendCommand("Accessibility.getRootAXNode")]);const X=await P.evaluate("({getAccessibleName, getAccessibleRole})",!1,"root",void 0,!1,!0);if(X.type!=="success")throw new Error("Could not get bindings");if(X.result.type!=="object")throw new Error("Could not get bindings");return{functionDeclaration:String((Z,ne,ge,oe,...ye)=>{const fe=[];let H=!1;function Q(re,de){if(!H)for(const ve of re){let ke=!0;if(de.role){const je=ge.getAccessibleRole(ve);de.role!==je&&(ke=!1)}if(de.name){const je=ge.getAccessibleName(ve);de.name!==je&&(ke=!1)}if(ke){if(oe!==0&&fe.length===oe){H=!0;break}fe.push(ve)}const Be=[];for(const je of ve.children)je instanceof HTMLElement&&Be.push(je);Q(Be,de)}}return ye=ye.length>0?ye:Array.from(document.documentElement.children).filter(re=>re instanceof HTMLElement),Q(ye,{role:ne,name:Z}),fe}),argumentsLocalValues:[{type:"string",value:I.value.name||""},{type:"string",value:I.value.role||""},{handle:X.result.handle},{type:"number",value:K??0},...z]}}}},Sk=async function(P,I,K,z,X){var oe,ye,fe;if(I.type==="context"){if(K.length!==0)throw new i.InvalidArgumentException("Start nodes are not supported");const H=I.value.context;if(!H)throw new i.InvalidSelectorException("Invalid context");const re=r(this,M).getContext(H).parent;if(!re)throw new i.InvalidArgumentException("This context has no container");try{const{backendNodeId:de}=await r(re,x).cdpClient.sendCommand("DOM.getFrameOwner",{frameId:H}),{object:ve}=await r(re,x).cdpClient.sendCommand("DOM.resolveNode",{backendNodeId:de}),ke=await P.callFunction("function () { return this; }",!1,{handle:ve.objectId},[],"none",X);if(ke.type==="exception")throw new Error("Unknown exception");return{nodes:[ke.result]}}catch{throw new i.InvalidArgumentException("Context does not exist")}}const Z=await E(this,L,bk).call(this,P,I,z,K);X={...X,maxObjectDepth:1};const ne=await P.callFunction(Z.functionDeclaration,!1,{type:"undefined"},Z.argumentsLocalValues,"none",X);if(ne.type!=="success")throw(oe=r(this,T))==null||oe.call(this,n.LOGGER_PREFIX,"Failed locateNodesByLocator",ne),(ye=ne.exceptionDetails.text)!=null&&ye.endsWith("is not a valid selector.")||(fe=ne.exceptionDetails.text)!=null&&fe.endsWith("is not a valid XPath expression.")?new i.InvalidSelectorException(`Not valid selector ${typeof I.value=="string"?I.value:JSON.stringify(I.value)}`):ne.exceptionDetails.text==="Error: startNodes in css selector should be HTMLElement, Document or DocumentFragment"?new i.InvalidArgumentException("startNodes in css selector should be HTMLElement, Document or DocumentFragment"):new i.UnknownErrorException(`Unexpected error in selector script: ${ne.exceptionDetails.text}`);if(ne.result.type!=="array")throw new i.UnknownErrorException(`Unexpected selector script result type: ${ne.result.type}`);return{nodes:ne.result.value.map(H=>{if(H.type!=="node")throw new i.UnknownErrorException(`Unexpected selector script result element: ${H.type}`);return H})}},f(w,B),U(w,"LOGGER_PREFIX",`${s.LogType.debug}:browsingContext`),w);ua.BrowsingContextImpl=d,n=d;function p(ce){return["://",""].includes(ce)&&(ce="null"),ce}function h(ce){const{quality:P,type:I}=ce.format??{type:"image/png"};switch(I){case"image/png":return{format:"png"};case"image/jpeg":return{format:"jpeg",...P===void 0?{}:{quality:Math.round(P*100)}};case"image/webp":return{format:"webp",...P===void 0?{}:{quality:Math.round(P*100)}}}throw new i.InvalidArgumentException(`Image format '${I}' is not a supported format`)}function l(ce){var X,Z,ne,ge;if(ce.type!=="object"||ce.value===void 0)return;const P=(X=ce.value.find(([oe])=>oe==="x"))==null?void 0:X[1],I=(Z=ce.value.find(([oe])=>oe==="y"))==null?void 0:Z[1],K=(ne=ce.value.find(([oe])=>oe==="height"))==null?void 0:ne[1],z=(ge=ce.value.find(([oe])=>oe==="width"))==null?void 0:ge[1];if(!((P==null?void 0:P.type)!=="number"||(I==null?void 0:I.type)!=="number"||(K==null?void 0:K.type)!=="number"||(z==null?void 0:z.type)!=="number"))return{x:P.value,y:I.value,width:z.value,height:K.value}}function m(ce){return{...ce.width<0?{x:ce.x+ce.width,width:-ce.width}:{x:ce.x,width:ce.width},...ce.height<0?{y:ce.y+ce.height,height:-ce.height}:{y:ce.y,height:ce.height}}}function S(ce,P){ce=m(ce),P=m(P);const I=Math.max(ce.x,P.x),K=Math.max(ce.y,P.y);return{x:I,y:K,width:Math.max(Math.min(ce.x+ce.width,P.x+P.width)-I,0),height:Math.max(Math.min(ce.y+ce.height,P.y+P.height)-K,0)}}function g(ce){if(ce=ce.trim(),!/^[0-9]+$/.test(ce))throw new i.InvalidArgumentException(`Invalid integer: ${ce}`);return parseInt(ce)}return ua}var Kc={},kb;function g_(){var e,t,s;if(kb)return Kc;kb=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.WorkerRealm=void 0;const n=mb();let i=(s=class extends n.Realm{constructor(c,u,d,p,h,l,m,S,g){super(c,u,d,p,h,m,S);f(this,e);f(this,t);y(this,t,l),y(this,e,g),this.initialize()}get associatedBrowsingContexts(){return r(this,t).flatMap(c=>c.associatedBrowsingContexts)}get realmType(){return r(this,e)}get source(){var c;return{realm:this.realmId,context:(c=this.associatedBrowsingContexts[0])==null?void 0:c.id}}get realmInfo(){const c=r(this,t).map(d=>d.realmId),{realmType:u}=this;switch(u){case"dedicated-worker":{const d=c[0];if(d===void 0||c.length!==1)throw new Error("Dedicated worker must have exactly one owner");return{...this.baseInfo,type:u,owners:[d]}}case"service-worker":case"shared-worker":return{...this.baseInfo,type:u}}}},e=new WeakMap,t=new WeakMap,s);return Kc.WorkerRealm=i,Kc}var Uc={},Hc={},Wc={},Eb;function w_(){if(Eb)return Wc;Eb=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.logMessageFormatter=t,Wc.getRemoteValuesText=o;const n=Pn(),i=["%s","%d","%i","%f","%o","%O","%c"];function e(c){return i.some(u=>c.includes(u))}function t(c){let u="";const d=c[0].value.toString(),p=c.slice(1,void 0),h=d.split(new RegExp(i.map(l=>`(${l})`).join("|"),"g"));for(const l of h)if(!(l===void 0||l===""))if(e(l)){const m=p.shift();(0,n.assert)(m,`Less value is provided: "${o(c,!1)}"`),l==="%s"?u+=a(m):l==="%d"||l==="%i"?m.type==="bigint"||m.type==="number"||m.type==="string"?u+=parseInt(m.value.toString(),10):u+="NaN":l==="%f"?m.type==="bigint"||m.type==="number"||m.type==="string"?u+=parseFloat(m.value.toString()):u+="NaN":u+=s(m)}else u+=l;if(p.length>0)throw new Error(`More value is provided: "${o(c,!1)}"`);return u}function s(c){var u;if(c.type!=="array"&&c.type!=="bigint"&&c.type!=="date"&&c.type!=="number"&&c.type!=="object"&&c.type!=="string")return a(c);if(c.type==="bigint")return`${c.value.toString()}n`;if(c.type==="number")return c.value.toString();if(["date","string"].includes(c.type))return JSON.stringify(c.value);if(c.type==="object")return`{${c.value.map(d=>`${JSON.stringify(d[0])}:${s(d[1])}`).join(",")}}`;if(c.type==="array")return`[${((u=c.value)==null?void 0:u.map(d=>s(d)).join(","))??""}]`;throw Error(`Invalid value type: ${c}`)}function a(c){var u,d,p,h;if(!Object.hasOwn(c,"value"))return c.type;switch(c.type){case"string":case"number":case"boolean":case"bigint":return String(c.value);case"regexp":return`/${c.value.pattern}/${c.value.flags??""}`;case"date":return new Date(c.value).toString();case"object":return`Object(${((u=c.value)==null?void 0:u.length)??""})`;case"array":return`Array(${((d=c.value)==null?void 0:d.length)??""})`;case"map":return`Map(${(p=c.value)==null?void 0:p.length})`;case"set":return`Set(${(h=c.value)==null?void 0:h.length})`;default:return c.type}}function o(c,u){const d=c[0];return d?d.type==="string"&&e(d.value.toString())&&u?t(c):c.map(p=>a(p)).join(" "):""}return Wc}var xb;function y_(){var u,d,p,h,l,Ck,kk,g,w,Ek;if(xb)return Hc;xb=1;var n;Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.LogManager=void 0;const i=$e(),e=Qt(),t=w_();function s(k){const C=k==null?void 0:k.callFrames.map(b=>({columnNumber:b.columnNumber,functionName:b.functionName,lineNumber:b.lineNumber,url:b.url}));return C?{callFrames:C}:void 0}function a(k){return["error","assert"].includes(k)?"error":["debug","trace"].includes(k)?"debug":["warn","warning"].includes(k)?"warn":"info"}function o(k){switch(k){case"warning":return"warn";case"startGroup":return"group";case"startGroupCollapsed":return"groupCollapsed";case"endGroup":return"groupEnd"}return k}let c=(w=class{constructor(C,b,D,A){f(this,l);f(this,u);f(this,d);f(this,p);f(this,h);y(this,p,C),y(this,d,b),y(this,u,D),y(this,h,A)}static create(C,b,D,A){var x;const R=new n(C,b,D,A);return E(x=R,l,kk).call(x),R}},u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakSet,Ck=async function(C,b){switch(C.type){case"undefined":return{type:"undefined"};case"boolean":return{type:"boolean",value:C.value};case"string":return{type:"string",value:C.value};case"number":return{type:"number",value:C.unserializableValue??C.value};case"bigint":if(C.unserializableValue!==void 0&&C.unserializableValue[C.unserializableValue.length-1]==="n")return{type:C.type,value:C.unserializableValue.slice(0,-1)};break;case"object":if(C.subtype==="null")return{type:"null"};break}return await b.serializeCdpObject(C,"none")},kk=function(){r(this,p).cdpClient.on("Runtime.consoleAPICalled",C=>{var A;const b=r(this,d).findRealm({cdpSessionId:r(this,p).cdpSessionId,executionContextId:C.executionContextId});if(b===void 0){(A=r(this,h))==null||A.call(this,e.LogType.cdp,C);return}const D=Promise.all(C.args.map(R=>E(this,l,Ck).call(this,R,b)));for(const R of b.associatedBrowsingContexts)r(this,u).registerPromiseEvent(D.then(x=>({kind:"success",value:{type:"event",method:i.ChromiumBidi.Log.EventNames.LogEntryAdded,params:{level:a(C.type),source:b.source,text:(0,t.getRemoteValuesText)(x,!0),timestamp:Math.round(C.timestamp),stackTrace:s(C.stackTrace),type:"console",method:o(C.type),args:x}}}),x=>({kind:"error",error:x})),R.id,i.ChromiumBidi.Log.EventNames.LogEntryAdded)}),r(this,p).cdpClient.on("Runtime.exceptionThrown",C=>{var D,A;const b=r(this,d).findRealm({cdpSessionId:r(this,p).cdpSessionId,executionContextId:C.exceptionDetails.executionContextId});if(b===void 0){(D=r(this,h))==null||D.call(this,e.LogType.cdp,C);return}for(const R of b.associatedBrowsingContexts)r(this,u).registerPromiseEvent(E(A=n,g,Ek).call(A,C,b).then(x=>({kind:"success",value:{type:"event",method:i.ChromiumBidi.Log.EventNames.LogEntryAdded,params:{level:"error",source:b.source,text:x,timestamp:Math.round(C.timestamp),stackTrace:s(C.exceptionDetails.stackTrace),type:"javascript"}}}),x=>({kind:"error",error:x})),R.id,i.ChromiumBidi.Log.EventNames.LogEntryAdded)})},g=new WeakSet,Ek=async function(C,b){return C.exceptionDetails.exception?b===void 0?JSON.stringify(C.exceptionDetails.exception):await b.stringifyObject(C.exceptionDetails.exception):C.exceptionDetails.text},f(w,g),w);return Hc.LogManager=c,n=c,Hc}var Pb;function v_(){var c,u,d,p,h,l,m,S,g,w,v,k,C,b,D,A,R,xk,qg,Rf,Pk,_k,Tk,Ik,$;if(Pb)return Uc;Pb=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.CdpTarget=void 0;const n=_v(),i=qh(),e=aa(),t=Qt(),s=Cb(),a=y_();let o=($=class extends e.EventEmitter{constructor(F,q,B,G,Y,te,V,W,ie,he,ae,Se){super();f(this,R);f(this,c);f(this,u);f(this,d);f(this,p);f(this,h);f(this,l);f(this,m);f(this,S);f(this,g);f(this,w);f(this,v,new i.Deferred);f(this,k);f(this,C);f(this,b,!1);f(this,D,!1);f(this,A,{request:!1,response:!1,auth:!1});y(this,c,F),y(this,u,q),y(this,d,B),y(this,p,G),y(this,l,Y),y(this,h,te),y(this,m,V),y(this,w,ie),y(this,S,W),y(this,g,he),y(this,k,ae),y(this,C,Se)}static create(F,q,B,G,Y,te,V,W,ie,he,ae,Se){var P,I;const ce=new $(F,q,B,G,te,Y,V,W,ie,he,ae,Se);return a.LogManager.create(ce,Y,te,Se),E(P=ce,R,Pk).call(P),E(I=ce,R,xk).call(I),ce}get unblocked(){return r(this,v)}get id(){return r(this,c)}get cdpClient(){return r(this,u)}get parentCdpClient(){return r(this,p)}get browserCdpClient(){return r(this,d)}get cdpSessionId(){return r(this,u).sessionId}async toggleFetchIfNeeded(){const F=r(this,w).getInterceptionStages(this.topLevelId);if(r(this,A).request===F.request&&r(this,A).response===F.response&&r(this,A).auth===F.auth)return;const q=[];if(y(this,A,F),(F.request||F.auth)&&q.push({urlPattern:"*",requestStage:"Request"}),F.response&&q.push({urlPattern:"*",requestStage:"Response"}),q.length)await r(this,u).sendCommand("Fetch.enable",{patterns:q,handleAuthRequests:F.auth});else{const B=r(this,w).getRequestsByTarget(this).filter(G=>G.interceptPhase);Promise.allSettled(B.map(G=>G.waitNextPhase)).then(async()=>r(this,w).getRequestsByTarget(this).filter(Y=>Y.interceptPhase).length?await this.toggleFetchIfNeeded():await r(this,u).sendCommand("Fetch.disable")).catch(G=>{var Y;(Y=r(this,C))==null||Y.call(this,t.LogType.bidi,"Disable failed",G)})}}async toggleNetworkIfNeeded(){var F;try{await Promise.all([this.toggleSetCacheDisabled(),this.toggleFetchIfNeeded()])}catch(q){if((F=r(this,C))==null||F.call(this,t.LogType.debugError,q),!E(this,R,Rf).call(this,q))throw q}}async toggleSetCacheDisabled(F){var G;const q=r(this,w).defaultCacheBehavior==="bypass",B=F??q;if(r(this,D)!==B){y(this,D,B);try{await r(this,u).sendCommand("Network.setCacheDisabled",{cacheDisabled:B})}catch(Y){if((G=r(this,C))==null||G.call(this,t.LogType.debugError,Y),y(this,D,!B),!E(this,R,Rf).call(this,Y))throw Y}}}async toggleDeviceAccessIfNeeded(){var q;const F=this.isSubscribedTo(n.Bluetooth.EventNames.RequestDevicePromptUpdated);if(r(this,b)!==F){y(this,b,F);try{await r(this,u).sendCommand(F?"DeviceAccess.enable":"DeviceAccess.disable")}catch(B){if((q=r(this,C))==null||q.call(this,t.LogType.debugError,B),y(this,b,!F),!E(this,R,Rf).call(this,B))throw B}}}async toggleNetwork(){var G;const F=r(this,w).getInterceptionStages(this.topLevelId),q=Object.values(F).some(Y=>Y),B=r(this,A).request!==F.request||r(this,A).response!==F.response||r(this,A).auth!==F.auth;(G=r(this,C))==null||G.call(this,t.LogType.debugInfo,"Toggle Network",`Fetch (${q}) ${B}`),q&&B&&await E(this,R,_k).call(this,F),!q&&B&&await E(this,R,Tk).call(this)}getChannels(){return r(this,m).find().flatMap(F=>F.channels)}get topLevelId(){return r(this,S).findTopLevelContextId(this.id)??this.id}isSubscribedTo(F){return r(this,l).subscriptionManager.isSubscribedTo(F,this.topLevelId)}},c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakMap,m=new WeakMap,S=new WeakMap,g=new WeakMap,w=new WeakMap,v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakMap,D=new WeakMap,A=new WeakMap,R=new WeakSet,xk=async function(){var F;try{await Promise.all([r(this,u).sendCommand("Page.enable"),r(this,u).sendCommand("Page.getFrameTree").then(q=>E(this,R,qg).call(this,q.frameTree)),r(this,u).sendCommand("Runtime.enable"),r(this,u).sendCommand("Page.setLifecycleEventsEnabled",{enabled:!0}),r(this,u).sendCommand("Page.setPrerenderingAllowed",{isAllowed:!r(this,g)}).catch(()=>{}),r(this,u).sendCommand("Network.enable").then(()=>this.toggleNetworkIfNeeded()),r(this,u).sendCommand("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),E(this,R,Ik).call(this),r(this,u).sendCommand("Runtime.runIfWaitingForDebugger"),r(this,p).sendCommand("Runtime.runIfWaitingForDebugger"),this.toggleDeviceAccessIfNeeded()])}catch(q){if((F=r(this,C))==null||F.call(this,t.LogType.debugError,"Failed to unblock target",q),!r(this,u).isCloseError(q)){r(this,v).resolve({kind:"error",error:q});return}}r(this,v).resolve({kind:"success",value:void 0})},qg=function(F){var G;const q=F.frame,B=r(this,S).findContext(q.id);if(B!==void 0&&B.parentId===null&&q.parentId!==null&&q.parentId!==void 0&&(B.parentId=q.parentId),B===void 0&&q.parentId!==void 0){const Y=r(this,S).getContext(q.parentId);s.BrowsingContextImpl.create(q.id,q.parentId,Y.userContext,Y.cdpTarget,r(this,l),r(this,S),r(this,h),q.url,void 0,r(this,k),r(this,C))}(G=F.childFrames)==null||G.map(Y=>E(this,R,qg).call(this,Y))},Rf=function(F){const q=F;return q.code===-32001&&q.message==="Session with given id not found."||r(this,u).isCloseError(F)},Pk=function(){r(this,u).on("Network.requestWillBeSent",F=>{F.loaderId===F.requestId&&this.emit("frameStartedNavigating",{loaderId:F.loaderId,url:F.request.url,frameId:F.frameId})}),r(this,u).on("*",(F,q)=>{typeof F=="string"&&(r(this,l).registerEvent({type:"event",method:`goog:cdp.${F}`,params:{event:F,params:q,session:this.cdpSessionId}},this.id),r(this,l).registerEvent({type:"event",method:`cdp.${F}`,params:{event:F,params:q,session:this.cdpSessionId}},this.id))})},_k=async function(F){const q=[];if((F.request||F.auth)&&q.push({urlPattern:"*",requestStage:"Request"}),F.response&&q.push({urlPattern:"*",requestStage:"Response"}),q.length){const B=r(this,A);y(this,A,F);try{await r(this,u).sendCommand("Fetch.enable",{patterns:q,handleAuthRequests:F.auth})}catch{y(this,A,B)}}},Tk=async function(){r(this,w).getRequestsByTarget(this).filter(q=>q.interceptPhase).length===0&&(y(this,A,{request:!1,response:!1,auth:!1}),await r(this,u).sendCommand("Fetch.disable"))},Ik=async function(){await Promise.all(r(this,m).find({targetId:this.topLevelId,global:!0}).map(F=>F.initInTarget(this,!0)))},$);return Uc.CdpTarget=o,Uc}var _b;function b_(){var o,c,u,d,p,h,l,m,S,g,w,v,k,C,b,Ff,Mk,Ak,Rk,Fk,Dk,Df,T,$g,Ok,Nk,Lk,L;if(_b)return Lc;_b=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.CdpTargetManager=void 0;const n=Qt(),i=Cb(),e=g_(),t=v_(),s={service_worker:"service-worker",shared_worker:"shared-worker",worker:"dedicated-worker"};let a=(L=class{constructor(q,B,G,Y,te,V,W,ie,he,ae,Se,ce,P){f(this,b);f(this,o);f(this,c);f(this,u,new Set);f(this,d);f(this,p);f(this,h);f(this,l);f(this,m);f(this,S);f(this,g);f(this,w);f(this,v);f(this,k);f(this,C);f(this,T,new Map);y(this,c,q),y(this,o,B),r(this,u).add(G),y(this,d,G),y(this,p,Y),y(this,h,te),y(this,S,he),y(this,l,W),y(this,m,ie),y(this,g,V),y(this,w,ae),y(this,C,Se),y(this,k,ce),y(this,v,P),E(this,b,Ff).call(this,B)}},o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakMap,m=new WeakMap,S=new WeakMap,g=new WeakMap,w=new WeakMap,v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakSet,Ff=function(q){q.on("Target.attachedToTarget",B=>{E(this,b,Fk).call(this,B,q)}),q.on("Target.detachedFromTarget",E(this,b,Ok).bind(this)),q.on("Target.targetInfoChanged",E(this,b,Nk).bind(this)),q.on("Inspector.targetCrashed",()=>{E(this,b,Lk).call(this,q)}),q.on("Page.frameAttached",E(this,b,Mk).bind(this)),q.on("Page.frameDetached",E(this,b,Ak).bind(this)),q.on("Page.frameSubtreeWillBeDetached",E(this,b,Rk).bind(this))},Mk=function(q){const B=r(this,h).findContext(q.parentFrameId);B!==void 0&&i.BrowsingContextImpl.create(q.frameId,q.parentFrameId,B.userContext,B.cdpTarget,r(this,p),r(this,h),r(this,g),"about:blank",void 0,r(this,k),r(this,v))},Ak=function(q){var B;q.reason!=="swap"&&((B=r(this,h).findContext(q.frameId))==null||B.dispose(!0))},Rk=function(q){var B;(B=r(this,h).findContext(q.frameId))==null||B.dispose(!0)},Fk=function(q,B){const{sessionId:G,targetInfo:Y}=q,te=r(this,c).getCdpClient(G),V=async()=>{await te.sendCommand("Runtime.runIfWaitingForDebugger").then(()=>B.sendCommand("Target.detachFromTarget",q)).catch(ie=>{var he;return(he=r(this,v))==null?void 0:he.call(this,n.LogType.debugError,ie)})};if(r(this,d)===Y.targetId){V();return}const W=Y.type==="service_worker"?`${B.sessionId}_${Y.targetId}`:Y.targetId;if(!r(this,u).has(W)){switch(r(this,u).add(W),Y.type){case"tab":E(this,b,Ff).call(this,te),(async()=>await te.sendCommand("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}))();return;case"page":case"iframe":{const ie=E(this,b,Df).call(this,te,B,Y),he=r(this,h).findContext(Y.targetId);if(he&&Y.type==="iframe")he.updateCdpTarget(ie);else{const ae=E(this,b,Dk).call(this,Y,B.sessionId),Se=Y.browserContextId&&Y.browserContextId!==r(this,w)?Y.browserContextId:"default";i.BrowsingContextImpl.create(Y.targetId,ae,Se,ie,r(this,p),r(this,h),r(this,g),Y.url===""?"about:blank":Y.url,Y.openerFrameId??Y.openerId,r(this,k),r(this,v))}return}case"service_worker":case"worker":{const ie=r(this,g).findRealm({cdpSessionId:B.sessionId});if(!ie){V();return}const he=E(this,b,Df).call(this,te,B,Y);E(this,b,$g).call(this,s[Y.type],he,ie);return}case"shared_worker":{const ie=E(this,b,Df).call(this,te,B,Y);E(this,b,$g).call(this,s[Y.type],ie);return}}V()}},Dk=function(q,B){var Y;if(q.type!=="iframe")return null;const G=q.openerFrameId??q.openerId;return G!==void 0?G:B!==void 0?((Y=r(this,h).findContextBySession(B))==null?void 0:Y.id)??null:null},Df=function(q,B,G){E(this,b,Ff).call(this,q);const Y=t.CdpTarget.create(G.targetId,q,r(this,o),B,r(this,g),r(this,p),r(this,S),r(this,h),r(this,l),r(this,C),r(this,k),r(this,v));return r(this,l).onCdpTargetCreated(Y),r(this,m).onCdpTargetCreated(Y),Y},T=new WeakMap,$g=function(q,B,G){B.cdpClient.on("Runtime.executionContextCreated",Y=>{const{uniqueId:te,id:V,origin:W}=Y.context,ie=new e.WorkerRealm(B.cdpClient,r(this,p),V,r(this,v),(0,i.serializeOrigin)(W),G?[G]:[],te,r(this,g),q);r(this,T).set(B.cdpSessionId,ie)})},Ok=function({sessionId:q,targetId:B}){B&&r(this,S).find({targetId:B}).map(te=>{te.dispose(B)});const G=r(this,h).findContextBySession(q);if(G){G.dispose(!0);return}const Y=r(this,T).get(q);Y&&r(this,g).deleteRealms({cdpSessionId:Y.cdpClient.sessionId})},Nk=function(q){const B=r(this,h).findContext(q.targetInfo.targetId);B&&B.onTargetInfoChanged(q)},Lk=function(q){const B=r(this,g).findRealms({cdpSessionId:q.sessionId});for(const G of B)G.dispose()},L);return Lc.CdpTargetManager=a,Lc}var zc={},Tb;function S_(){var t,s,a;if(Tb)return zc;Tb=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.BrowsingContextStorage=void 0;const n=$e(),i=aa();let e=(a=class{constructor(){f(this,t,new Map);f(this,s,new i.EventEmitter)}getTopLevelContexts(){return this.getAllContexts().filter(c=>c.isTopLevelContext())}getAllContexts(){return Array.from(r(this,t).values())}deleteContextById(c){r(this,t).delete(c)}deleteContext(c){r(this,t).delete(c.id)}addContext(c){r(this,t).set(c.id,c),r(this,s).emit("added",{browsingContext:c})}waitForContext(c){return r(this,t).has(c)?Promise.resolve(this.getContext(c)):new Promise(u=>{const d=p=>{p.browsingContext.id===c&&(r(this,s).off("added",d),u(p.browsingContext))};r(this,s).on("added",d)})}hasContext(c){return r(this,t).has(c)}findContext(c){return r(this,t).get(c)}findTopLevelContextId(c){if(c===null)return null;const u=this.findContext(c);if(!u)return null;const d=u.parentId??null;return d===null?c:this.findTopLevelContextId(d)}findContextBySession(c){for(const u of r(this,t).values())if(u.cdpTarget.cdpSessionId===c)return u}getContext(c){const u=this.findContext(c);if(u===void 0)throw new n.NoSuchFrameException(`Context ${c} not found`);return u}verifyTopLevelContextsList(c){const u=new Set;if(!c)return u;for(const d of c){const p=this.getContext(d);if(p.isTopLevelContext())u.add(p);else throw new n.InvalidArgumentException(`Non top-level context '${d}' given.`)}return u}},t=new WeakMap,s=new WeakMap,a);return zc.BrowsingContextStorage=e,zc}var Vc={},Gc={},Jc={},Ib;function Mb(){var i,e;if(Ib)return Jc;Ib=1,Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.DefaultMap=void 0;let n=(e=class extends Map{constructor(a,o){super(o);f(this,i);y(this,i,a)}get(a){return this.has(a)||this.set(a,r(this,i).call(this,a)),super.get(a)}},i=new WeakMap,e);return Jc.DefaultMap=n,Jc}var Ab;function C_(){var h,l,m,S,g,w,v,k,C,b,D,A,R,x,N,M,Kg,Bk,jk,qk,$k,Kl,Go,Ug,Kk,Uk,Hk,Hg,Jo,mi,Of,Wg,Xo,Yo,Qo,Nf,Wk,zk,Vk,Gk,Jk,Xk,Yk,Lf,oe,Qk;if(Ab)return Gc;Ab=1;var n;Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.NetworkRequest=void 0;const i=$e(),e=Pn(),t=Mb(),s=qh(),a=Qt(),o=Bh(),c=new RegExp('(?<=realm=").*(?=")');let u=(h=class{constructor(H,Q,re,de,ve=0,ke){f(this,M);f(this,l);f(this,m);f(this,S);f(this,g,!1);f(this,w);f(this,v,{});f(this,k);f(this,C);f(this,b,{});f(this,D);f(this,A);f(this,R);f(this,x);f(this,N,{[i.ChromiumBidi.Network.EventNames.AuthRequired]:!1,[i.ChromiumBidi.Network.EventNames.BeforeRequestSent]:!1,[i.ChromiumBidi.Network.EventNames.FetchError]:!1,[i.ChromiumBidi.Network.EventNames.ResponseCompleted]:!1,[i.ChromiumBidi.Network.EventNames.ResponseStarted]:!1});U(this,"waitNextPhase",new s.Deferred);y(this,l,H),y(this,D,Q),y(this,A,re),y(this,R,de),y(this,w,ve),y(this,x,ke)}get id(){return r(this,l)}get fetchId(){return r(this,m)}get interceptPhase(){return r(this,S)}get url(){var re,de,ve,ke,Be,je,Lt,pt;const H=((re=r(this,v).info)==null?void 0:re.request.urlFragment)??((de=r(this,v).paused)==null?void 0:de.request.urlFragment)??"";return`${((ve=r(this,b).paused)==null?void 0:ve.request.url)??((ke=r(this,k))==null?void 0:ke.url)??((Be=r(this,b).info)==null?void 0:Be.url)??((je=r(this,v).auth)==null?void 0:je.request.url)??((Lt=r(this,v).info)==null?void 0:Lt.request.url)??((pt=r(this,v).paused)==null?void 0:pt.request.url)??n.unknownParameter}${H}`}get redirectCount(){return r(this,w)}get cdpTarget(){return r(this,R)}get cdpClient(){return r(this,R).cdpClient}isRedirecting(){return!!r(this,v).info}handleRedirect(H){r(this,b).hasExtraInfo=!1,r(this,b).info=H.redirectResponse,E(this,M,mi).call(this,{wasRedirected:!0})}onRequestWillBeSentEvent(H){r(this,v).info=H,E(this,M,mi).call(this)}onRequestWillBeSentExtraInfoEvent(H){r(this,v).extraInfo=H,E(this,M,mi).call(this)}onResponseReceivedExtraInfoEvent(H){H.statusCode>=300&&H.statusCode<=399&&r(this,v).info&&H.headers.location===r(this,v).info.request.url||(r(this,b).extraInfo=H,E(this,M,mi).call(this))}onResponseReceivedEvent(H){r(this,b).hasExtraInfo=H.hasExtraInfo,r(this,b).info=H.response,E(this,M,mi).call(this)}onServedFromCache(){y(this,g,!0),E(this,M,mi).call(this)}onLoadingFailedEvent(H){E(this,M,mi).call(this,{hasFailed:!0}),E(this,M,Yo).call(this,()=>({method:i.ChromiumBidi.Network.EventNames.FetchError,params:{...E(this,M,Qo).call(this),errorText:H.errorText}}))}async failRequest(H){(0,e.assert)(r(this,m),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.failRequest",{requestId:r(this,m),errorReason:H}),y(this,S,void 0)}onRequestPaused(H){y(this,m,H.requestId),H.responseStatusCode||H.responseErrorReason?(r(this,b).paused=H,E(this,M,Jo).call(this,"responseStarted")&&!r(this,N)[i.ChromiumBidi.Network.EventNames.ResponseStarted]&&r(this,m)!==this.id?y(this,S,"responseStarted"):E(this,M,Wg).call(this)):(r(this,v).paused=H,E(this,M,Jo).call(this,"beforeRequestSent")&&!r(this,N)[i.ChromiumBidi.Network.EventNames.BeforeRequestSent]&&r(this,m)!==this.id?y(this,S,"beforeRequestSent"):E(this,M,Of).call(this)),E(this,M,mi).call(this)}onAuthRequired(H){y(this,m,H.requestId),r(this,v).auth=H,E(this,M,Jo).call(this,"authRequired")&&r(this,m)!==this.id?y(this,S,"authRequired"):E(this,M,Xo).call(this,{response:"Default"}),E(this,M,Yo).call(this,()=>({method:i.ChromiumBidi.Network.EventNames.AuthRequired,params:{...E(this,M,Qo).call(this,"authRequired"),response:E(this,M,Nf).call(this)}}))}async continueRequest(H={}){const Q=E(this,M,Lf).call(this,H.headers,H.cookies),re=(0,o.cdpFetchHeadersFromBidiNetworkHeaders)(Q),de=d(H.body);await E(this,M,Of).call(this,{url:H.url,method:H.method,headers:re,postData:de}),y(this,k,{url:H.url,method:H.method,headers:H.headers,cookies:H.cookies,bodySize:p(H.body)})}async continueResponse(H={}){var Q,re,de;if(this.interceptPhase==="authRequired")if(H.credentials)await Promise.all([this.waitNextPhase,await E(this,M,Xo).call(this,{response:"ProvideCredentials",username:H.credentials.username,password:H.credentials.password})]);else return await E(this,M,Xo).call(this,{response:"ProvideCredentials"});if(r(this,S)==="responseStarted"){const ve=E(this,M,Lf).call(this,H.headers,H.cookies),ke=(0,o.cdpFetchHeadersFromBidiNetworkHeaders)(ve);await E(this,M,Wg).call(this,{responseCode:H.statusCode??((Q=r(this,b).paused)==null?void 0:Q.responseStatusCode),responsePhrase:H.reasonPhrase??((re=r(this,b).paused)==null?void 0:re.responseStatusText),responseHeaders:ke??((de=r(this,b).paused)==null?void 0:de.responseHeaders)}),y(this,C,{statusCode:H.statusCode,headers:ve})}}async continueWithAuth(H){let Q,re;if(H.action==="provideCredentials"){const{credentials:ve}=H;Q=ve.username,re=ve.password}const de=(0,o.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction)(H.action);await E(this,M,Xo).call(this,{response:de,username:Q,password:re})}async provideResponse(H){if((0,e.assert)(r(this,m),"Network Interception not set-up."),this.interceptPhase==="authRequired")return await E(this,M,Xo).call(this,{response:"ProvideCredentials"});if(!H.body&&!H.headers)return await E(this,M,Of).call(this);const Q=E(this,M,Lf).call(this,H.headers,H.cookies),re=(0,o.cdpFetchHeadersFromBidiNetworkHeaders)(Q),de=H.statusCode??r(this,M,Go)??200;await this.cdpClient.sendCommand("Fetch.fulfillRequest",{requestId:r(this,m),responseCode:de,responsePhrase:H.reasonPhrase,responseHeaders:re,body:d(H.body)}),y(this,S,void 0)}dispose(){this.waitNextPhase.reject(new Error("waitNextPhase disposed"))}},l=new WeakMap,m=new WeakMap,S=new WeakMap,g=new WeakMap,w=new WeakMap,v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakMap,D=new WeakMap,A=new WeakMap,R=new WeakMap,x=new WeakMap,N=new WeakMap,M=new WeakSet,Kg=function(){return this.url.startsWith("data:")},Bk=function(){var H,Q,re,de,ve;return((H=r(this,k))==null?void 0:H.method)??((Q=r(this,v).info)==null?void 0:Q.request.method)??((re=r(this,v).paused)==null?void 0:re.request.method)??((de=r(this,v).auth)==null?void 0:de.request.method)??((ve=r(this,b).paused)==null?void 0:ve.request.method)},jk=function(){return!r(this,v).info||!r(this,v).info.loaderId||r(this,v).info.loaderId!==r(this,v).info.requestId?null:r(this,A).getNavigationId(r(this,M,Kl)??void 0)},qk=function(){let H=[];return r(this,v).extraInfo&&(H=r(this,v).extraInfo.associatedCookies.filter(({blockedReasons:Q})=>!Array.isArray(Q)||Q.length===0).map(({cookie:Q})=>(0,o.cdpToBiDiCookie)(Q))),H},$k=function(){var Q,re;let H=0;return typeof((Q=r(this,k))==null?void 0:Q.bodySize)=="number"?H=r(this,k).bodySize:H=(0,o.bidiBodySizeFromCdpPostDataEntries)(((re=r(this,v).info)==null?void 0:re.request.postDataEntries)??[]),H},Kl=function(){var H,Q,re,de;return((H=r(this,b).paused)==null?void 0:H.frameId)??((Q=r(this,v).info)==null?void 0:Q.frameId)??((re=r(this,v).paused)==null?void 0:re.frameId)??((de=r(this,v).auth)==null?void 0:de.frameId)??null},Go=function(){var H,Q,re,de;return((H=r(this,C))==null?void 0:H.statusCode)??((Q=r(this,b).paused)==null?void 0:Q.responseStatusCode)??((re=r(this,b).extraInfo)==null?void 0:re.statusCode)??((de=r(this,b).info)==null?void 0:de.status)},Ug=function(){var Q,re,de;let H=[];if((Q=r(this,k))!=null&&Q.headers){const ve=new t.DefaultMap(()=>[]);for(const ke of r(this,k).headers)ve.get(ke.name).push(ke.value.value);for(const[ke,Be]of ve.entries())H.push({name:ke,value:{type:"string",value:Be.join(`
`).trimEnd()}})}else H=[...(0,o.bidiNetworkHeadersFromCdpNetworkHeaders)((re=r(this,v).info)==null?void 0:re.request.headers),...(0,o.bidiNetworkHeadersFromCdpNetworkHeaders)((de=r(this,v).extraInfo)==null?void 0:de.headers)];return H},Kk=function(){var re;if(!r(this,b).info||!(r(this,M,Go)===401||r(this,M,Go)===407))return;const H=r(this,M,Go)===401?"WWW-Authenticate":"Proxy-Authenticate",Q=[];for(const[de,ve]of Object.entries(r(this,b).info.headers))de.localeCompare(H,void 0,{sensitivity:"base"})===0&&Q.push({scheme:ve.split(" ").at(0)??"",realm:((re=ve.match(c))==null?void 0:re.at(0))??""});return Q},Uk=function(){var Q,re,de,ve,ke,Be,je,Lt,pt,pi,Fl,Dl,Ol,Nl,CS,kS,ES,xS,PS,_S,TS,IS;const H=(0,o.getTiming)((0,o.getTiming)((re=(Q=r(this,b).info)==null?void 0:Q.timing)==null?void 0:re.requestTime)-(0,o.getTiming)((de=r(this,v).info)==null?void 0:de.timestamp));return{timeOrigin:Math.round((0,o.getTiming)((ve=r(this,v).info)==null?void 0:ve.wallTime)*1e3),requestTime:0,redirectStart:0,redirectEnd:0,fetchStart:(0,o.getTiming)((Be=(ke=r(this,b).info)==null?void 0:ke.timing)==null?void 0:Be.workerFetchStart,H),dnsStart:(0,o.getTiming)((Lt=(je=r(this,b).info)==null?void 0:je.timing)==null?void 0:Lt.dnsStart,H),dnsEnd:(0,o.getTiming)((pi=(pt=r(this,b).info)==null?void 0:pt.timing)==null?void 0:pi.dnsEnd,H),connectStart:(0,o.getTiming)((Dl=(Fl=r(this,b).info)==null?void 0:Fl.timing)==null?void 0:Dl.connectStart,H),connectEnd:(0,o.getTiming)((Nl=(Ol=r(this,b).info)==null?void 0:Ol.timing)==null?void 0:Nl.connectEnd,H),tlsStart:(0,o.getTiming)((kS=(CS=r(this,b).info)==null?void 0:CS.timing)==null?void 0:kS.sslStart,H),requestStart:(0,o.getTiming)((xS=(ES=r(this,b).info)==null?void 0:ES.timing)==null?void 0:xS.sendStart,H),responseStart:(0,o.getTiming)((_S=(PS=r(this,b).info)==null?void 0:PS.timing)==null?void 0:_S.receiveHeadersStart,H),responseEnd:(0,o.getTiming)((IS=(TS=r(this,b).info)==null?void 0:TS.timing)==null?void 0:IS.receiveHeadersEnd,H)}},Hk=function(){this.waitNextPhase.resolve(),this.waitNextPhase=new s.Deferred},Hg=function(H){return r(this,R).isSubscribedTo(`network.${H}`)?r(this,A).getInterceptsForPhase(this,H):new Set},Jo=function(H){return E(this,M,Hg).call(this,H).size>0},mi=function(H={}){const Q=H.wasRedirected||H.hasFailed||E(this,M,Kg).call(this)||!!r(this,v).extraInfo||r(this,g)||!!(r(this,b).info&&!r(this,b).hasExtraInfo),re=E(this,M,Kg).call(this)||r(this,g),de=!re&&E(this,M,Jo).call(this,"beforeRequestSent"),ve=!de||de&&!!r(this,v).paused;r(this,v).info&&(de?ve:Q)&&E(this,M,Yo).call(this,E(this,M,Gk).bind(this));const ke=!!r(this,b).extraInfo||r(this,g)||!!(r(this,b).info&&!r(this,b).hasExtraInfo),Be=!re&&E(this,M,Jo).call(this,"responseStarted");(r(this,b).info||Be&&r(this,b).paused)&&E(this,M,Yo).call(this,E(this,M,Jk).bind(this));const je=!Be||Be&&!!r(this,b).paused;r(this,b).info&&ke&&je&&(E(this,M,Yo).call(this,E(this,M,Xk).bind(this)),r(this,A).deleteRequest(this.id))},Of=async function(H={}){(0,e.assert)(r(this,m),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueRequest",{requestId:r(this,m),url:H.url,method:H.method,headers:H.headers,postData:H.postData}),y(this,S,void 0)},Wg=async function({responseCode:H,responsePhrase:Q,responseHeaders:re}={}){(0,e.assert)(r(this,m),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueResponse",{requestId:r(this,m),responseCode:H,responsePhrase:Q,responseHeaders:re}),y(this,S,void 0)},Xo=async function(H){(0,e.assert)(r(this,m),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueWithAuth",{requestId:r(this,m),authChallengeResponse:H}),y(this,S,void 0)},Yo=function(H){var re;let Q;try{Q=H()}catch(de){(re=r(this,x))==null||re.call(this,a.LogType.debugError,de);return}E(this,M,Yk).call(this)||r(this,N)[Q.method]&&Q.method!==i.ChromiumBidi.Network.EventNames.AuthRequired||(E(this,M,Hk).call(this),r(this,N)[Q.method]=!0,r(this,M,Kl)?r(this,D).registerEvent(Object.assign(Q,{type:"event"}),r(this,M,Kl)):r(this,D).registerGlobalEvent(Object.assign(Q,{type:"event"})))},Qo=function(H){var re;const Q={isBlocked:!1};if(H){const de=E(this,M,Hg).call(this,H);Q.isBlocked=de.size>0,Q.isBlocked&&(Q.intercepts=[...de])}return{context:r(this,M,Kl),navigation:r(this,M,jk),redirectCount:r(this,w),request:E(this,M,Wk).call(this),timestamp:Math.round((0,o.getTiming)((re=r(this,v).info)==null?void 0:re.wallTime)*1e3),...Q}},Nf=function(){var de,ve,ke,Be,je,Lt,pt,pi,Fl,Dl,Ol,Nl;(de=r(this,b).info)!=null&&de.fromDiskCache&&(r(this,b).extraInfo=void 0);const H=[...(0,o.bidiNetworkHeadersFromCdpNetworkHeaders)((ve=r(this,b).info)==null?void 0:ve.headers),...(0,o.bidiNetworkHeadersFromCdpNetworkHeaders)((ke=r(this,b).extraInfo)==null?void 0:ke.headers)],Q=r(this,M,Kk);return{...{url:this.url,protocol:((Be=r(this,b).info)==null?void 0:Be.protocol)??"",status:r(this,M,Go)??-1,statusText:((je=r(this,b).info)==null?void 0:je.statusText)||((Lt=r(this,b).paused)==null?void 0:Lt.responseStatusText)||"",fromCache:((pt=r(this,b).info)==null?void 0:pt.fromDiskCache)||((pi=r(this,b).info)==null?void 0:pi.fromPrefetchCache)||r(this,g),headers:((Fl=r(this,C))==null?void 0:Fl.headers)??H,mimeType:((Dl=r(this,b).info)==null?void 0:Dl.mimeType)||"",bytesReceived:((Ol=r(this,b).info)==null?void 0:Ol.encodedDataLength)||0,headersSize:(0,o.computeHeadersSize)(H),bodySize:0,content:{size:0},...Q?{authChallenges:Q}:{}},"goog:securityDetails":(Nl=r(this,b).info)==null?void 0:Nl.securityDetails}},Wk=function(){var re,de,ve,ke,Be,je;const H=r(this,M,Ug);return{...{request:r(this,l),url:this.url,method:r(this,M,Bk)??n.unknownParameter,headers:H,cookies:r(this,M,qk),headersSize:(0,o.computeHeadersSize)(H),bodySize:r(this,M,$k),destination:E(this,M,zk).call(this),initiatorType:E(this,M,Vk).call(this),timings:r(this,M,Uk)},"goog:postData":(de=(re=r(this,v).info)==null?void 0:re.request)==null?void 0:de.postData,"goog:hasPostData":(ke=(ve=r(this,v).info)==null?void 0:ve.request)==null?void 0:ke.hasPostData,"goog:resourceType":(Be=r(this,v).info)==null?void 0:Be.type,"goog:resourceInitiator":(je=r(this,v).info)==null?void 0:je.initiator}},zk=function(){var H,Q;switch((H=r(this,v).info)==null?void 0:H.type){case"Script":return"script";case"Stylesheet":return"style";case"Image":return"image";case"Document":return((Q=r(this,v).info)==null?void 0:Q.initiator.type)==="parser"?"iframe":"";default:return""}},Vk=function(){var H,Q,re,de,ve,ke,Be,je,Lt,pt;if(((H=r(this,v).info)==null?void 0:H.initiator.type)==="parser")switch((Q=r(this,v).info)==null?void 0:Q.type){case"Document":return"iframe";case"Font":return((de=(re=r(this,v).info)==null?void 0:re.initiator)==null?void 0:de.url)===((ve=r(this,v).info)==null?void 0:ve.documentURL)?"font":"css";case"Image":return((Be=(ke=r(this,v).info)==null?void 0:ke.initiator)==null?void 0:Be.url)===((je=r(this,v).info)==null?void 0:je.documentURL)?"img":"css";case"Script":return"script";case"Stylesheet":return"link";default:return null}return((pt=(Lt=r(this,v))==null?void 0:Lt.info)==null?void 0:pt.type)==="Fetch"?"fetch":null},Gk=function(){var H;return(0,e.assert)(r(this,v).info,"RequestWillBeSentEvent is not set"),{method:i.ChromiumBidi.Network.EventNames.BeforeRequestSent,params:{...E(this,M,Qo).call(this,"beforeRequestSent"),initiator:{type:E(H=n,oe,Qk).call(H,r(this,v).info.initiator.type),columnNumber:r(this,v).info.initiator.columnNumber,lineNumber:r(this,v).info.initiator.lineNumber,stackTrace:r(this,v).info.initiator.stack,request:r(this,v).info.initiator.requestId}}}},Jk=function(){return{method:i.ChromiumBidi.Network.EventNames.ResponseStarted,params:{...E(this,M,Qo).call(this,"responseStarted"),response:E(this,M,Nf).call(this)}}},Xk=function(){return{method:i.ChromiumBidi.Network.EventNames.ResponseCompleted,params:{...E(this,M,Qo).call(this),response:E(this,M,Nf).call(this)}}},Yk=function(){var Q,re;const H="/favicon.ico";return((Q=r(this,v).paused)==null?void 0:Q.request.url.endsWith(H))??((re=r(this,v).info)==null?void 0:re.request.url.endsWith(H))??!1},Lf=function(H,Q){if(!H&&!Q)return;let re=H;const de=(0,o.networkHeaderFromCookieHeaders)(Q);return de&&!re&&(re=r(this,M,Ug)),de&&re&&(re.filter(ve=>ve.name.localeCompare("cookie",void 0,{sensitivity:"base"})!==0),re.push(de)),re},oe=new WeakSet,Qk=function(H){switch(H){case"parser":case"script":case"preflight":return H;default:return"other"}},f(h,oe),U(h,"unknownParameter","UNKNOWN"),h);Gc.NetworkRequest=u,n=u;function d(fe){let H;return(fe==null?void 0:fe.type)==="string"?H=btoa(fe.value):(fe==null?void 0:fe.type)==="base64"&&(H=fe.value),H}function p(fe){return(fe==null?void 0:fe.type)==="string"?fe.value.length:(fe==null?void 0:fe.type)==="base64"?atob(fe.value).length:0}return Gc}var Rb;function k_(){var a,o,c,u,d,p,h,Nr,m;if(Rb)return Vc;Rb=1,Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.NetworkStorage=void 0;const n=$e(),i=ca(),e=C_(),t=Bh();let s=(m=class{constructor(g,w,v,k){f(this,h);f(this,a);f(this,o);f(this,c);f(this,u,new Map);f(this,d,new Map);f(this,p,"default");y(this,a,w),y(this,o,g),v.on("Target.detachedFromTarget",({sessionId:C})=>{this.disposeRequestMap(C)}),y(this,c,k)}onCdpTargetCreated(g){const w=g.cdpClient,v=[["Network.requestWillBeSent",k=>{const C=this.getRequestById(k.requestId);C&&C.isRedirecting()?(C.handleRedirect(k),this.deleteRequest(k.requestId),E(this,h,Nr).call(this,k.requestId,g,C.redirectCount+1).onRequestWillBeSentEvent(k)):E(this,h,Nr).call(this,k.requestId,g).onRequestWillBeSentEvent(k)}],["Network.requestWillBeSentExtraInfo",k=>{E(this,h,Nr).call(this,k.requestId,g).onRequestWillBeSentExtraInfoEvent(k)}],["Network.responseReceived",k=>{E(this,h,Nr).call(this,k.requestId,g).onResponseReceivedEvent(k)}],["Network.responseReceivedExtraInfo",k=>{E(this,h,Nr).call(this,k.requestId,g).onResponseReceivedExtraInfoEvent(k)}],["Network.requestServedFromCache",k=>{E(this,h,Nr).call(this,k.requestId,g).onServedFromCache()}],["Network.loadingFailed",k=>{E(this,h,Nr).call(this,k.requestId,g).onLoadingFailedEvent(k)}],["Fetch.requestPaused",k=>{E(this,h,Nr).call(this,k.networkId??k.requestId,g).onRequestPaused(k)}],["Fetch.authRequired",k=>{let C=this.getRequestByFetchId(k.requestId);C||(C=E(this,h,Nr).call(this,k.requestId,g)),C.onAuthRequired(k)}]];for(const[k,C]of v)w.on(k,C)}getInterceptionStages(g){const w={request:!1,response:!1,auth:!1};for(const v of r(this,d).values())v.contexts&&!v.contexts.includes(g)||(w.request||(w.request=v.phases.includes("beforeRequestSent")),w.response||(w.response=v.phases.includes("responseStarted")),w.auth||(w.auth=v.phases.includes("authRequired")));return w}getInterceptsForPhase(g,w){if(g.url===e.NetworkRequest.unknownParameter)return new Set;const v=new Set;for(const[k,C]of r(this,d).entries())if(!(!C.phases.includes(w)||C.contexts&&!C.contexts.includes(g.cdpTarget.topLevelId))){if(C.urlPatterns.length===0){v.add(k);continue}for(const b of C.urlPatterns)if((0,t.matchUrlPattern)(b,g.url)){v.add(k);break}}return v}disposeRequestMap(g){for(const w of r(this,u).values())w.cdpClient.sessionId===g&&(r(this,u).delete(w.id),w.dispose())}addIntercept(g){const w=(0,i.uuidv4)();return r(this,d).set(w,g),w}removeIntercept(g){if(!r(this,d).has(g))throw new n.NoSuchInterceptException(`Intercept '${g}' does not exist.`);r(this,d).delete(g)}getRequestsByTarget(g){const w=[];for(const v of r(this,u).values())v.cdpTarget===g&&w.push(v);return w}getRequestById(g){return r(this,u).get(g)}getRequestByFetchId(g){for(const w of r(this,u).values())if(w.fetchId===g)return w}addRequest(g){r(this,u).set(g.id,g)}deleteRequest(g){r(this,u).delete(g)}getNavigationId(g){var w;return g===void 0?null:((w=r(this,a).findContext(g))==null?void 0:w.navigationId)??null}set defaultCacheBehavior(g){y(this,p,g)}get defaultCacheBehavior(){return r(this,p)}},a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakSet,Nr=function(g,w,v){let k=this.getRequestById(g);return k||(k=new e.NetworkRequest(g,r(this,o),this,w,v,r(this,c)),this.addRequest(k),k)},m);return Vc.NetworkStorage=s,Vc}var Xc={},Fb;function E_(){var i,e;if(Fb)return Xc;Fb=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.PreloadScriptStorage=void 0;let n=(e=class{constructor(){f(this,i,new Set)}find(s){return s?[...r(this,i)].filter(a=>!!(s.id!==void 0&&s.id===a.id||s.targetId!==void 0&&a.targetIds.has(s.targetId)||s.global!==void 0&&(s.global&&a.contexts===void 0||!s.global&&a.contexts!==void 0))):[...r(this,i)]}add(s){r(this,i).add(s)}remove(s){for(const a of this.find(s))r(this,i).delete(a)}},i=new WeakMap,e);return Xc.PreloadScriptStorage=n,Xc}var Yc={},Db;function x_(){var t,s,a;if(Db)return Yc;Db=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.RealmStorage=void 0;const n=$e(),i=yb();let e=(a=class{constructor(){f(this,t,new Map);f(this,s,new Map)}get knownHandlesToRealmMap(){return r(this,t)}addRealm(c){r(this,s).set(c.realmId,c)}findRealms(c){return Array.from(r(this,s).values()).filter(u=>!(c.realmId!==void 0&&c.realmId!==u.realmId||c.browsingContextId!==void 0&&!u.associatedBrowsingContexts.map(d=>d.id).includes(c.browsingContextId)||c.sandbox!==void 0&&(!(u instanceof i.WindowRealm)||c.sandbox!==u.sandbox)||c.executionContextId!==void 0&&c.executionContextId!==u.executionContextId||c.origin!==void 0&&c.origin!==u.origin||c.type!==void 0&&c.type!==u.realmType||c.cdpSessionId!==void 0&&c.cdpSessionId!==u.cdpClient.sessionId))}findRealm(c){const u=this.findRealms(c);if(u.length===1)return u[0]}getRealm(c){const u=this.findRealm(c);if(u===void 0)throw new n.NoSuchFrameException(`Realm ${JSON.stringify(c)} not found`);return u}deleteRealms(c){this.findRealms(c).map(u=>{u.dispose(),r(this,s).delete(u.realmId),Array.from(this.knownHandlesToRealmMap.entries()).filter(([,d])=>d===u.realmId).map(([d])=>this.knownHandlesToRealmMap.delete(d))})}},t=new WeakMap,s=new WeakMap,a);return Yc.RealmStorage=e,Yc}var Qc={},Zc={},Ob;function P_(){var i,e,t;if(Ob)return Zc;Ob=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.Buffer=void 0;class n{constructor(a,o){f(this,i);f(this,e,[]);f(this,t);y(this,i,a),y(this,t,o)}get(){return r(this,e)}add(a){var o;for(r(this,e).push(a);r(this,e).length>r(this,i);){const c=r(this,e).shift();c!==void 0&&((o=r(this,t))==null||o.call(this,c))}}}return i=new WeakMap,e=new WeakMap,t=new WeakMap,Zc.Buffer=n,Zc}var eu={},Nb;function __(){var i,e,t;if(Nb)return eu;Nb=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.IdWrapper=void 0;let n=(i=class{constructor(){f(this,t);y(this,t,++Ho(i,e)._)}get id(){return r(this,t)}},e=new WeakMap,t=new WeakMap,f(i,e,0),i);return eu.IdWrapper=n,eu}var da={},Lb;function T_(){if(Lb)return da;Lb=1,Object.defineProperty(da,"__esModule",{value:!0}),da.isCdpEvent=i,da.isDeprecatedCdpEvent=e,da.assertSupportedEvent=t;const n=$e();function i(s){var a;return((a=s.split(".").at(0))==null?void 0:a.startsWith(n.ChromiumBidi.BiDiModule.Cdp))??!1}function e(s){var a;return((a=s.split(".").at(0))==null?void 0:a.startsWith(n.ChromiumBidi.BiDiModule.DeprecatedCdp))??!1}function t(s){if(!n.ChromiumBidi.EVENT_NAMES.has(s)&&!i(s)&&!e(s))throw new n.InvalidArgumentException(`Unknown event: ${s}`)}return da}var ki={},Bb;function I_(){var u,d,p,Bf,l;if(Bb)return ki;Bb=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.SubscriptionManager=void 0,ki.cartesianProduct=e,ki.unrollEvents=t,ki.difference=o;const n=$e(),i=ca();function e(...m){return m.reduce((S,g)=>S.flatMap(w=>g.map(v=>[w,v].flat())))}function t(m){const S=new Set;function g(w){for(const v of w)S.add(v)}for(const w of m)switch(w){case n.ChromiumBidi.BiDiModule.Bluetooth:g(Object.values(n.ChromiumBidi.Bluetooth.EventNames));break;case n.ChromiumBidi.BiDiModule.BrowsingContext:g(Object.values(n.ChromiumBidi.BrowsingContext.EventNames));break;case n.ChromiumBidi.BiDiModule.Log:g(Object.values(n.ChromiumBidi.Log.EventNames));break;case n.ChromiumBidi.BiDiModule.Network:g(Object.values(n.ChromiumBidi.Network.EventNames));break;case n.ChromiumBidi.BiDiModule.Script:g(Object.values(n.ChromiumBidi.Script.EventNames));break;default:S.add(w)}return[...S.values()]}let s=(l=class{constructor(S){f(this,p);f(this,u,[]);f(this,d);y(this,d,S)}getChannelsSubscribedToEvent(S,g){const w=new Map;for(const v of r(this,u))E(this,p,Bf).call(this,v,S,g)&&w.set(JSON.stringify(v.channel),v.channel);return Array.from(w.values())}getChannelsSubscribedToEventGlobally(S){const g=new Map;for(const w of r(this,u))E(this,p,Bf).call(this,w,S)&&g.set(JSON.stringify(w.channel),w.channel);return Array.from(g.values())}isSubscribedTo(S,g){for(const w of r(this,u))if(E(this,p,Bf).call(this,w,S,g))return!0;return!1}subscribe(S,g,w){const v={id:(0,i.uuidv4)(),eventNames:new Set(t(S)),topLevelTraversableIds:new Set(g.map(k=>{const C=r(this,d).findTopLevelContextId(k);if(!C)throw new n.NoSuchFrameException(`Top-level navigable not found for context id ${k}`);return C})),channel:w};return r(this,u).push(v),v}unsubscribe(S,g,w){const v=new Set(t(S));for(const R of g)r(this,d).getContext(R);const k=new Set(g.map(R=>{const x=r(this,d).findTopLevelContextId(R);if(!x)throw new n.NoSuchFrameException(`Top-level navigable not found for context id ${R}`);return x})),C=k.size===0,b=[],D=new Set,A=new Set;for(const R of r(this,u)){if(JSON.stringify(R.channel)!==JSON.stringify(w)){b.push(R);continue}if(a(R.eventNames,v).size===0){b.push(R);continue}if(C){if(R.topLevelTraversableIds.size!==0){b.push(R);continue}const x=new Set(R.eventNames);for(const N of v)x.has(N)&&(D.add(N),x.delete(N));x.size!==0&&b.push({...R,eventNames:x})}else{if(R.topLevelTraversableIds.size===0){b.push(R);continue}const x=new Map;for(const N of R.eventNames)x.set(N,new Set(R.topLevelTraversableIds));for(const N of v){const M=x.get(N);if(M){for(const O of k)M.has(O)&&(A.add(O),D.add(N),M.delete(O));M.size===0&&x.delete(N)}}for(const[N,M]of x){const O={id:R.id,channel:R.channel,eventNames:new Set([N]),topLevelTraversableIds:M};b.push(O)}}}if(!c(D,v))throw new n.InvalidArgumentException("No subscription found");if(!C&&!c(A,k))throw new n.InvalidArgumentException("No subscription found");y(this,u,b)}unsubscribeById(S){}},u=new WeakMap,d=new WeakMap,p=new WeakSet,Bf=function(S,g,w){let v=!1;for(const C of S.eventNames)if(C===g||C===g.split(".").at(0)||C.split(".").at(0)===g){v=!0;break}if(!v)return!1;if(S.topLevelTraversableIds.size===0)return!0;const k=w?r(this,d).findTopLevelContextId(w):null;return!!(k!==null&&S.topLevelTraversableIds.has(k))},l);ki.SubscriptionManager=s;function a(m,S){const g=new Set;for(const w of m)S.has(w)&&g.add(w);return g}function o(m,S){const g=new Set;for(const w of m)S.has(w)||g.add(w);return g}function c(m,S){if(m.size!==S.size)return!1;for(const g of m)if(!S.has(g))return!1;return!0}return ki}var jb;function M_(){var l,m,S,g,w,v,k,C,b,D,A,Ul,x,zg,jf,Vg;if(jb)return Qc;jb=1;var n;Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.EventManager=void 0;const i=$e(),e=P_(),t=Mb(),s=aa(),a=__(),o=Gp(),c=T_(),u=I_();class d{constructor(_,j){f(this,l,new a.IdWrapper);f(this,m);f(this,S);y(this,S,_),y(this,m,j)}get id(){return r(this,l).id}get contextId(){return r(this,m)}get event(){return r(this,S)}}l=new WeakMap,m=new WeakMap,S=new WeakMap;const p=new Map([[i.ChromiumBidi.Log.EventNames.LogEntryAdded,100]]);let h=(A=class extends s.EventEmitter{constructor(j){super();f(this,x);f(this,g,new t.DefaultMap(()=>new Set));f(this,w,new Map);f(this,v,new Map);f(this,k);f(this,C);f(this,b);y(this,C,j),y(this,k,new u.SubscriptionManager(j)),y(this,b,new t.DefaultMap(()=>[]))}get subscriptionManager(){return r(this,k)}addSubscribeHook(j,$){r(this,b).get(j).push($)}registerEvent(j,$){this.registerPromiseEvent(Promise.resolve({kind:"success",value:j}),$,j.method)}registerGlobalEvent(j){this.registerGlobalPromiseEvent(Promise.resolve({kind:"success",value:j}),j.method)}registerPromiseEvent(j,$,J){const L=new d(j,$),F=r(this,k).getChannelsSubscribedToEvent(J,$);E(this,x,zg).call(this,L,J);for(const q of F)this.emit("event",{message:o.OutgoingMessage.createFromPromise(j,q),event:J}),E(this,x,jf).call(this,L,q,J)}registerGlobalPromiseEvent(j,$){const J=new d(j,null),L=r(this,k).getChannelsSubscribedToEventGlobally($);E(this,x,zg).call(this,J,$);for(const F of L)this.emit("event",{message:o.OutgoingMessage.createFromPromise(j,F),event:$}),E(this,x,jf).call(this,J,F,$)}async subscribe(j,$,J){for(const G of j)(0,c.assertSupportedEvent)(G);for(const G of $)G!==null&&r(this,C).getContext(G);const L=new Set((0,u.unrollEvents)(j)),F=new Map,q=new Set($.length?$.map(G=>{const Y=r(this,C).findTopLevelContextId(G);if(!Y)throw new i.InvalidArgumentException("Invalid context id");return Y}):r(this,C).getTopLevelContexts().map(G=>G.id));for(const G of L){const Y=new Set(r(this,C).getTopLevelContexts().map(te=>te.id).filter(te=>r(this,k).isSubscribedTo(G,te)));F.set(G,(0,u.difference)(q,Y))}const B=r(this,k).subscribe(j,$,J);for(const G of B.eventNames)for(const Y of q)for(const te of E(this,x,Vg).call(this,G,Y,J))this.emit("event",{message:o.OutgoingMessage.createFromPromise(te.event,J),event:G}),E(this,x,jf).call(this,te,J,G);for(const[G,Y]of F)for(const te of Y)r(this,b).get(G).forEach(V=>V(te));return await this.toggleModulesIfNeeded(),B.id}async unsubscribe(j,$,J){for(const L of j)(0,c.assertSupportedEvent)(L);r(this,k).unsubscribe(j,$,J),await this.toggleModulesIfNeeded()}async toggleModulesIfNeeded(){await Promise.all(r(this,C).getAllContexts().map(async j=>await j.toggleModulesIfNeeded()))}clearBufferedEvents(j){var $;for(const J of p.keys()){const L=E($=n,D,Ul).call($,J,j);r(this,w).delete(L)}}},g=new WeakMap,w=new WeakMap,v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakMap,D=new WeakSet,Ul=function(j,$){return JSON.stringify({eventName:j,browsingContext:$})},x=new WeakSet,zg=function(j,$){var L;if(!p.has($))return;const J=E(L=n,D,Ul).call(L,$,j.contextId);r(this,w).has(J)||r(this,w).set(J,new e.Buffer(p.get($))),r(this,w).get(J).add(j),r(this,g).get($).add(j.contextId)},jf=function(j,$,J){var B,G;if(!p.has(J))return;const L=E(B=n,D,Ul).call(B,J,j.contextId),F=Math.max(((G=r(this,v).get(L))==null?void 0:G.get(JSON.stringify($)))??0,j.id),q=r(this,v).get(L);q?q.set(JSON.stringify($),F):r(this,v).set(L,new Map([[JSON.stringify($),F]]))},Vg=function(j,$,J){var B,G,Y;const L=E(B=n,D,Ul).call(B,j,$),F=((G=r(this,v).get(L))==null?void 0:G.get(JSON.stringify(J)))??-1/0,q=((Y=r(this,w).get(L))==null?void 0:Y.get().filter(te=>te.id>F))??[];return $===null&&Array.from(r(this,g).get(j).keys()).filter(te=>te!==null&&r(this,C).hasContext(te)).map(te=>E(this,x,Vg).call(this,j,te,J)).forEach(te=>q.push(...te)),q.sort((te,V)=>te.id-V.id)},f(A,D),A);return Qc.EventManager=h,n=h,Qc}var qb;function A_(){var l,m,S,g,w,v,k,C,b,D,A,R,Zk,N;if(qb)return fc;qb=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.BidiServer=void 0;const n=aa(),i=Qt(),e=$1(),t=d_(),s=l_(),a=b_(),o=S_(),c=k_(),u=E_(),d=x_(),p=M_();let h=(N=class extends n.EventEmitter{constructor(T,_,j,$,J,L,F){super();f(this,R);f(this,l);f(this,m);f(this,S);f(this,g);f(this,w,new o.BrowsingContextStorage);f(this,v,new d.RealmStorage);f(this,k,new u.PreloadScriptStorage);f(this,C);f(this,b);f(this,D,T=>{r(this,S).processCommand(T).catch(_=>{var j;(j=r(this,b))==null||j.call(this,i.LogType.debugError,_)})});f(this,A,async T=>{const _={...T.message,...T.channel};await r(this,m).sendMessage(_)});y(this,b,F),y(this,l,new e.ProcessingQueue(r(this,A),r(this,b))),y(this,m,T),r(this,m).setOnMessage(r(this,D)),y(this,g,new p.EventManager(r(this,w)));const q=new c.NetworkStorage(r(this,g),r(this,w),j,F);y(this,C,new s.BluetoothProcessor(r(this,g),r(this,w))),y(this,S,new t.CommandProcessor(_,j,r(this,g),r(this,w),r(this,v),r(this,k),q,r(this,C),L,async B=>{await j.sendCommand("Security.setIgnoreCertificateErrors",{ignore:B.acceptInsecureCerts??!1}),new a.CdpTargetManager(_,j,$,r(this,g),r(this,w),r(this,v),q,r(this,C),r(this,k),J,(B==null?void 0:B["goog:prerenderingDisabled"])??!1,B==null?void 0:B.unhandledPromptBehavior,F),await j.sendCommand("Target.setDiscoverTargets",{discover:!0}),await j.sendCommand("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0,filter:[{type:"page",exclude:!0},{}]}),await E(this,R,Zk).call(this)},r(this,b))),r(this,g).on("event",({message:B,event:G})=>{this.emitOutgoingMessage(B,G)}),r(this,S).on("response",({message:B,event:G})=>{this.emitOutgoingMessage(B,G)})}static async createAndStart(T,_,j,$,J,L){const[{browserContextIds:F},{targetInfos:q}]=await Promise.all([j.sendCommand("Target.getBrowserContexts"),j.sendCommand("Target.getTargets")]);let B="default";for(const Y of q)if(Y.browserContextId&&!F.includes(Y.browserContextId)){B=Y.browserContextId;break}return new N(T,_,j,$,B,J,L)}emitOutgoingMessage(T,_){r(this,l).add(T,_)}close(){r(this,m).close()}},l=new WeakMap,m=new WeakMap,S=new WeakMap,g=new WeakMap,w=new WeakMap,v=new WeakMap,k=new WeakMap,C=new WeakMap,b=new WeakMap,D=new WeakMap,A=new WeakMap,R=new WeakSet,Zk=async function(){await Promise.all(r(this,w).getTopLevelContexts().map(T=>T.lifecycleLoaded()))},N);return fc.BidiServer=h,fc}var $b;function R_(){return $b||($b=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.OutgoingMessage=n.EventEmitter=n.BidiServer=void 0;var i=A_();Object.defineProperty(n,"BidiServer",{enumerable:!0,get:function(){return i.BidiServer}});var e=aa();Object.defineProperty(n,"EventEmitter",{enumerable:!0,get:function(){return e.EventEmitter}});var t=Gp();Object.defineProperty(n,"OutgoingMessage",{enumerable:!0,get:function(){return t.OutgoingMessage}})}(Up)),Up}var Jp=R_();const _s=class _s extends ac{constructor(e,t){super();f(this,Mo,!1);f(this,dn);f(this,ci,qe.create());U(this,"frame");U(this,"onClose",()=>{_s.sessions.delete(this.id()),y(this,Mo,!0)});if(this.frame=e,!this.frame.page().browser().cdpSupported)return;const s=this.frame.page().browser().connection;y(this,dn,s),t?(r(this,ci).resolve(t),_s.sessions.set(t,this)):(async()=>{try{const{result:a}=await s.send("goog:cdp.getSession",{context:e._id});r(this,ci).resolve(a.session),_s.sessions.set(a.session,this)}catch(a){r(this,ci).reject(a)}})(),_s.sessions.set(r(this,ci).value(),this)}connection(){}async send(e,t,s){if(r(this,dn)===void 0)throw new be("CDP support is required for this feature. The current browser does not support CDP.");if(r(this,Mo))throw new ir(`Protocol error (${e}): Session closed. Most likely the page has been closed.`);const a=await r(this,ci).valueOrThrow(),{result:o}=await r(this,dn).send("goog:cdp.sendCommand",{method:e,params:t,session:a},s==null?void 0:s.timeout);return o.result}async detach(){if(!(r(this,dn)===void 0||r(this,dn).closed||r(this,Mo)))try{await this.frame.client.send("Target.detachFromTarget",{sessionId:this.id()})}finally{this.onClose()}}id(){const e=r(this,ci).value();return typeof e=="string"?e:""}};Mo=new WeakMap,dn=new WeakMap,ci=new WeakMap,U(_s,"sessions",new Map);let tu=_s;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const F_=Gs("puppeteer:webDriverBiDi:SEND ►"),D_=Gs("puppeteer:webDriverBiDi:RECV ◀");class Kb extends pe{constructor(e,t,s=0,a){super();f(this,ul);f(this,Rr);f(this,Ao);f(this,dl,0);f(this,Ts,!1);f(this,ui,new _p);f(this,ll,[]);y(this,ul,e),y(this,Ao,s),y(this,dl,a??18e4),y(this,Rr,t),r(this,Rr).onmessage=this.onMessage.bind(this),r(this,Rr).onclose=this.unbind.bind(this)}get closed(){return r(this,Ts)}get url(){return r(this,ul)}pipeTo(e){r(this,ll).push(e)}emit(e,t){for(const s of r(this,ll))s.emit(e,t);return super.emit(e,t)}send(e,t,s){return ee(!r(this,Ts),"Protocol error: Connection closed."),r(this,ui).create(e,s??r(this,dl),a=>{const o=JSON.stringify({id:a,method:e,params:t});F_(o),r(this,Rr).send(o)})}async onMessage(e){var s;r(this,Ao)&&await new Promise(a=>setTimeout(a,r(this,Ao))),D_(e);const t=JSON.parse(e);if("type"in t)switch(t.type){case"success":r(this,ui).resolve(t.id,t);return;case"error":if(t.id===null)break;r(this,ui).reject(t.id,O_(t),`${t.error}: ${t.message}`);return;case"event":if(N_(t)){(s=tu.sessions.get(t.params.session))==null||s.emit(t.params.event,t.params.params);return}this.emit(t.method,t.params);return}"id"in t&&r(this,ui).reject(t.id,`Protocol Error. Message is not in BiDi protocol format: '${e}'`,t.message),le(t)}unbind(){r(this,Ts)||(y(this,Ts,!0),r(this,Rr).onmessage=()=>{},r(this,Rr).onclose=()=>{},r(this,ui).clear())}dispose(){this.unbind(),r(this,Rr).close()}getPendingProtocolErrors(){return r(this,ui).getPendingProtocolErrors()}}ul=new WeakMap,Rr=new WeakMap,Ao=new WeakMap,dl=new WeakMap,Ts=new WeakMap,ui=new WeakMap,ll=new WeakMap;function O_(n){let i=`${n.error} ${n.message}`;return n.stacktrace&&(i+=` ${n.stacktrace}`),i}function N_(n){return n.method.startsWith("goog:cdp.")}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const L_=(n,...i)=>{Gs(`bidi:${n}`)(i)};async function B_(n){const i=new q_,e=new j_(n),t={send(o){i.emitMessage(JSON.parse(o))},close(){a.close(),e.close(),n.dispose()},onmessage(o){}};i.on("bidiResponse",o=>{t.onmessage(JSON.stringify(o))});const s=new Kb(n.url(),t,n.delay,n.timeout),a=await Jp.BidiServer.createAndStart(i,e,e.browserClient(),"",void 0,L_);return s}class j_{constructor(i){f(this,hl);f(this,Is,new Map);f(this,Ms);y(this,hl,i),y(this,Ms,new Ub(i))}browserClient(){return r(this,Ms)}getCdpClient(i){const e=r(this,hl).session(i);if(!e)throw new Error(`Unknown CDP session with id ${i}`);if(!r(this,Is).has(e)){const t=new Ub(e,i,r(this,Ms));return r(this,Is).set(e,t),t}return r(this,Is).get(e)}close(){r(this,Ms).close();for(const i of r(this,Is).values())i.close()}}hl=new WeakMap,Is=new WeakMap,Ms=new WeakMap;class Ub extends Jp.EventEmitter{constructor(e,t,s){super();f(this,Ro,!1);f(this,As);U(this,"sessionId");f(this,fl);f(this,pl,(e,t)=>{this.emit(e,t)});y(this,As,e),this.sessionId=t,y(this,fl,s),r(this,As).on("*",r(this,pl))}browserClient(){return r(this,fl)}async sendCommand(e,...t){if(!r(this,Ro))try{return await r(this,As).send(e,...t)}catch(s){if(r(this,Ro))return;throw s}}close(){r(this,As).off("*",r(this,pl)),y(this,Ro,!0)}isCloseError(e){return e instanceof ir}}Ro=new WeakMap,As=new WeakMap,fl=new WeakMap,pl=new WeakMap;class q_ extends Jp.EventEmitter{constructor(){super(...arguments);f(this,Fo,async e=>{})}emitMessage(e){r(this,Fo).call(this,e)}setOnMessage(e){y(this,Fo,e)}async sendMessage(e){this.emit("bidiResponse",e)}close(){y(this,Fo,async e=>{})}}Fo=new WeakMap;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var $_=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},K_=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};let U_=(()=>{var t,s,a,o,c,u,eE,qf,tE,l;let n=pe,i=[],e;return l=class extends n{constructor(g){super();f(this,u);f(this,t,$_(this,i));f(this,s);f(this,a);f(this,o,new Qe);f(this,c);y(this,a,g)}static from(g){var v;const w=new l(g);return E(v=w,u,eE).call(v),w}get disposed(){return r(this,o).disposed}get request(){return r(this,t)}get navigation(){return r(this,s)}dispose(){this[we]()}[(e=[bi],we)](){r(this,o).dispose(),super[we]()}},t=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakSet,eE=function(){const g=r(this,o).use(new pe(r(this,a)));g.once("closed",()=>{this.emit("failed",{url:r(this,a).url,timestamp:new Date}),this.dispose()}),g.on("request",({request:v})=>{if(v.navigation===void 0||!E(this,u,qf).call(this,v.navigation))return;y(this,t,v),this.emit("request",v),r(this,o).use(new pe(r(this,t))).on("redirect",C=>{y(this,t,C)})});const w=r(this,o).use(new pe(r(this,u,tE)));w.on("browsingContext.navigationStarted",v=>{v.context!==r(this,a).id||r(this,s)!==void 0||y(this,s,l.from(r(this,a)))});for(const v of["browsingContext.domContentLoaded","browsingContext.load"])w.on(v,k=>{k.context!==r(this,a).id||k.navigation===null||!E(this,u,qf).call(this,k.navigation)||this.dispose()});for(const[v,k]of[["browsingContext.fragmentNavigated","fragment"],["browsingContext.navigationFailed","failed"],["browsingContext.navigationAborted","aborted"]])w.on(v,C=>{C.context!==r(this,a).id||!E(this,u,qf).call(this,C.navigation)||(this.emit(k,{url:C.url,timestamp:new Date(C.timestamp)}),this.dispose())})},qf=function(g){return r(this,s)!==void 0&&!r(this,s).disposed?!1:r(this,c)===void 0?(y(this,c,g),!0):r(this,c)===g},tE=function(){return r(this,a).userContext.browser.session},(()=>{const g=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;K_(l,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:w=>"dispose"in w,get:w=>w.dispose},metadata:g},null,i),g&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g})})(),l})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var H_=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},ru=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},Xp;let Yp=(()=>{var c,u;let n=pe,i=[],e,t,s,a,o;return u=class extends n{constructor(h,l){super();f(this,c,H_(this,i));U(this,"disposables",new Qe);U(this,"id");U(this,"origin");U(this,"executionContextId");this.id=h,this.origin=l}get disposed(){return r(this,c)!==void 0}get target(){return{realm:this.id}}dispose(h){y(this,c,h),this[we]()}async disown(h){await this.session.send("script.disown",{target:this.target,handles:h})}async callFunction(h,l,m={}){const{result:S}=await this.session.send("script.callFunction",{functionDeclaration:h,awaitPromise:l,target:this.target,...m});return S}async evaluate(h,l,m={}){const{result:S}=await this.session.send("script.evaluate",{expression:h,awaitPromise:l,target:this.target,...m});return S}async resolveExecutionContextId(){if(!this.executionContextId){const{result:h}=await this.session.connection.send("goog:cdp.resolveRealm",{realm:this.id});this.executionContextId=h.executionContextId}return this.executionContextId}[(e=[bi],t=[se(h=>r(h,c))],s=[se(h=>r(h,c))],a=[se(h=>r(h,c))],o=[se(h=>r(h,c))],we)](){r(this,c)??y(this,c,"Realm already destroyed, probably because all associated browsing contexts closed."),this.emit("destroyed",{reason:r(this,c)}),this.disposables.dispose(),super[we]()}},c=new WeakMap,(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;ru(u,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:l=>"dispose"in l,get:l=>l.dispose},metadata:h},null,i),ru(u,null,t,{kind:"method",name:"disown",static:!1,private:!1,access:{has:l=>"disown"in l,get:l=>l.disown},metadata:h},null,i),ru(u,null,s,{kind:"method",name:"callFunction",static:!1,private:!1,access:{has:l=>"callFunction"in l,get:l=>l.callFunction},metadata:h},null,i),ru(u,null,a,{kind:"method",name:"evaluate",static:!1,private:!1,access:{has:l=>"evaluate"in l,get:l=>l.evaluate},metadata:h},null,i),ru(u,null,o,{kind:"method",name:"resolveExecutionContextId",static:!1,private:!1,access:{has:l=>"resolveExecutionContextId"in l,get:l=>l.resolveExecutionContextId},metadata:h},null,i),h&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),u})();const Pm=class Pm extends Yp{constructor(e,t){super("","");f(this,df);U(this,"browsingContext");U(this,"sandbox");f(this,ml,new Map);this.browsingContext=e,this.sandbox=t}static from(e,t){var a;const s=new Pm(e,t);return E(a=s,df,rE).call(a),s}get session(){return this.browsingContext.userContext.browser.session}get target(){return{context:this.browsingContext.id,sandbox:this.sandbox}}};ml=new WeakMap,df=new WeakSet,rE=function(){this.disposables.use(new pe(this.browsingContext)).on("closed",({reason:s})=>{this.dispose(s)});const t=this.disposables.use(new pe(this.session));t.on("script.realmCreated",s=>{s.type!=="window"||s.context!==this.browsingContext.id||s.sandbox!==this.sandbox||(this.id=s.realm,this.origin=s.origin,this.executionContextId=void 0,this.emit("updated",this))}),t.on("script.realmCreated",s=>{if(s.type!=="dedicated-worker"||!s.owners.includes(this.id))return;const a=Zp.from(this,s.realm,s.origin);r(this,ml).set(a.id,a);const o=this.disposables.use(new pe(a));o.once("destroyed",()=>{o.removeAllListeners(),r(this,ml).delete(a.id)}),this.emit("worker",a)})};let Qp=Pm;class Zp extends Yp{constructor(e,t,s){super(t,s);f(this,lf);f(this,gl,new Map);U(this,"owners");this.owners=new Set([e])}static from(e,t,s){var o;const a=new Xp(e,t,s);return E(o=a,lf,iE).call(o),a}get session(){return this.owners.values().next().value.session}}gl=new WeakMap,lf=new WeakSet,iE=function(){const e=this.disposables.use(new pe(this.session));e.on("script.realmDestroyed",t=>{t.realm===this.id&&this.dispose("Realm already destroyed.")}),e.on("script.realmCreated",t=>{if(t.type!=="dedicated-worker"||!t.owners.includes(this.id))return;const s=Xp.from(this,t.realm,t.origin);r(this,gl).set(s.id,s),this.disposables.use(new pe(s)).once("destroyed",()=>{r(this,gl).delete(s.id)}),this.emit("worker",s)})},Xp=Zp;const _m=class _m extends Yp{constructor(e,t,s){super(t,s);f(this,hf);f(this,wl,new Map);U(this,"browser");this.browser=e}static from(e,t,s){var o;const a=new _m(e,t,s);return E(o=a,hf,nE).call(o),a}get session(){return this.browser.session}};wl=new WeakMap,hf=new WeakSet,nE=function(){const e=this.disposables.use(new pe(this.session));e.on("script.realmDestroyed",t=>{t.realm===this.id&&this.dispose("Realm already destroyed.")}),e.on("script.realmCreated",t=>{if(t.type!=="dedicated-worker"||!t.owners.includes(this.id))return;const s=Zp.from(this,t.realm,t.origin);r(this,wl).set(s.id,s),this.disposables.use(new pe(s)).once("destroyed",()=>{r(this,wl).delete(s.id)}),this.emit("worker",s)})};let em=_m;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var W_=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},z_=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};let V_=(()=>{var t,s,a,o,c,u,d,sE,Bs,l;let n=pe,i=[],e;return l=class extends n{constructor(g,w){super();f(this,d);f(this,t,W_(this,i));f(this,s);f(this,a);f(this,o);f(this,c,new Qe);f(this,u);y(this,o,g),y(this,u,w)}static from(g,w){var k;const v=new l(g,w);return E(k=v,d,sE).call(k),v}get disposed(){return r(this,c).disposed}get error(){return r(this,t)}get headers(){return r(this,u).request.headers}get id(){return r(this,u).request.request}get initiator(){return r(this,u).initiator}get method(){return r(this,u).request.method}get navigation(){return r(this,u).navigation??void 0}get redirect(){return r(this,s)}get lastRedirect(){let g=r(this,s);for(;g;){if(g&&!r(g,s))return g;g=r(g,s)}return g}get response(){return r(this,a)}get url(){return r(this,u).request.url}get isBlocked(){return r(this,u).isBlocked}get resourceType(){return r(this,u).request["goog:resourceType"]??void 0}get postData(){return r(this,u).request["goog:postData"]??void 0}get hasPostData(){return r(this,u).request["goog:hasPostData"]??!1}async continueRequest({url:g,method:w,headers:v,cookies:k,body:C}){await r(this,d,Bs).send("network.continueRequest",{request:this.id,url:g,method:w,headers:v,body:C,cookies:k})}async failRequest(){await r(this,d,Bs).send("network.failRequest",{request:this.id})}async provideResponse({statusCode:g,reasonPhrase:w,headers:v,body:k}){await r(this,d,Bs).send("network.provideResponse",{request:this.id,statusCode:g,reasonPhrase:w,headers:v,body:k})}async continueWithAuth(g){g.action==="provideCredentials"?await r(this,d,Bs).send("network.continueWithAuth",{request:this.id,action:g.action,credentials:g.credentials}):await r(this,d,Bs).send("network.continueWithAuth",{request:this.id,action:g.action})}dispose(){this[we]()}[(e=[bi],we)](){r(this,c).dispose(),super[we]()}timing(){return r(this,u).request.timings}},t=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakSet,sE=function(){r(this,c).use(new pe(r(this,o))).once("closed",({reason:v})=>{y(this,t,v),this.emit("error",r(this,t)),this.dispose()});const w=r(this,c).use(new pe(r(this,d,Bs)));w.on("network.beforeRequestSent",v=>{v.context!==r(this,o).id||v.request.request!==this.id||v.redirectCount!==r(this,u).redirectCount+1||(y(this,s,l.from(r(this,o),v)),this.emit("redirect",r(this,s)),this.dispose())}),w.on("network.authRequired",v=>{v.context!==r(this,o).id||v.request.request!==this.id||!v.isBlocked||this.emit("authenticate",void 0)}),w.on("network.fetchError",v=>{v.context!==r(this,o).id||v.request.request!==this.id||r(this,u).redirectCount!==v.redirectCount||(y(this,t,v.errorText),this.emit("error",r(this,t)),this.dispose())}),w.on("network.responseCompleted",v=>{v.context!==r(this,o).id||v.request.request!==this.id||r(this,u).redirectCount!==v.redirectCount||(y(this,a,v.response),r(this,u).request.timings=v.request.timings,this.emit("success",r(this,a)),!(r(this,a).status>=300&&r(this,a).status<400)&&this.dispose())})},Bs=function(){return r(this,o).userContext.browser.session},(()=>{const g=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;z_(l,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:w=>"dispose"in w,get:w=>w.dispose},metadata:g},null,i),g&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g})})(),l})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var G_=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},Hb=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};let J_=(()=>{var s,a,o,c,aE,Gg,p;let n=pe,i=[],e,t;return p=class extends n{constructor(m,S){super();f(this,c);f(this,s,G_(this,i));f(this,a);f(this,o,new Qe);U(this,"browsingContext");U(this,"info");this.browsingContext=m,this.info=S}static from(m,S){var w;const g=new p(m,S);return E(w=g,c,aE).call(w),g}get closed(){return r(this,s)!==void 0}get disposed(){return this.closed}get handled(){return this.info.handler==="accept"||this.info.handler==="dismiss"?!0:r(this,a)!==void 0}get result(){return r(this,a)}dispose(m){y(this,s,m),this[we]()}async handle(m={}){return await r(this,c,Gg).send("browsingContext.handleUserPrompt",{...m,context:this.info.context}),r(this,a)}[(e=[bi],t=[se(m=>r(m,s))],we)](){r(this,s)??y(this,s,"User prompt already closed, probably because the associated browsing context was destroyed."),this.emit("closed",{reason:r(this,s)}),r(this,o).dispose(),super[we]()}},s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,aE=function(){r(this,o).use(new pe(this.browsingContext)).once("closed",({reason:g})=>{this.dispose(`User prompt already closed: ${g}`)}),r(this,o).use(new pe(r(this,c,Gg))).on("browsingContext.userPromptClosed",g=>{g.context===this.browsingContext.id&&(y(this,a,g),this.emit("handled",g),this.dispose("User prompt already handled."))})},Gg=function(){return this.browsingContext.userContext.browser.session},(()=>{const m=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;Hb(p,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:S=>"dispose"in S,get:S=>S.dispose},metadata:m},null,i),Hb(p,null,t,{kind:"method",name:"handle",static:!1,private:!1,access:{has:S=>"handle"in S,get:S=>S.handle},metadata:m},null,i),m&&Object.defineProperty(p,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})})(),p})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var X_=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},Ve=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};let Y_=(()=>{var M,O,T,_,j,$,J,L,oE,Ye,Jg,G;let n=pe,i=[],e,t,s,a,o,c,u,d,p,h,l,m,S,g,w,v,k,C,b,D,A,R,x,N;return G=class extends n{constructor(V,W,ie,he,ae){super();f(this,L);f(this,M,X_(this,i));f(this,O);f(this,T);f(this,_,new Map);f(this,j,new Qe);f(this,$,new Map);f(this,J,new Map);U(this,"defaultRealm");U(this,"id");U(this,"parent");U(this,"userContext");U(this,"originalOpener");y(this,T,he),this.id=ie,this.parent=W,this.userContext=V,this.originalOpener=ae,this.defaultRealm=E(this,L,Jg).call(this)}static from(V,W,ie,he,ae){var ce;const Se=new G(V,W,ie,he,ae);return E(ce=Se,L,oE).call(ce),Se}get children(){return r(this,_).values()}get closed(){return r(this,O)!==void 0}get disposed(){return this.closed}get realms(){const V=this;return function*(){yield V.defaultRealm,yield*r(V,$).values()}()}get top(){let V=this;for(let{parent:W}=V;W;{parent:W}=V)V=W;return V}get url(){return r(this,T)}dispose(V){y(this,O,V);for(const W of r(this,_).values())W.dispose("Parent browsing context was disposed");this[we]()}async activate(){await r(this,L,Ye).send("browsingContext.activate",{context:this.id})}async captureScreenshot(V={}){const{result:{data:W}}=await r(this,L,Ye).send("browsingContext.captureScreenshot",{context:this.id,...V});return W}async close(V){await Promise.all([...r(this,_).values()].map(async W=>{await W.close(V)})),await r(this,L,Ye).send("browsingContext.close",{context:this.id,promptUnload:V})}async traverseHistory(V){await r(this,L,Ye).send("browsingContext.traverseHistory",{context:this.id,delta:V})}async navigate(V,W){await r(this,L,Ye).send("browsingContext.navigate",{context:this.id,url:V,wait:W})}async reload(V={}){await r(this,L,Ye).send("browsingContext.reload",{context:this.id,...V})}async setCacheBehavior(V){await r(this,L,Ye).send("network.setCacheBehavior",{contexts:[this.id],cacheBehavior:V})}async print(V={}){const{result:{data:W}}=await r(this,L,Ye).send("browsingContext.print",{context:this.id,...V});return W}async handleUserPrompt(V={}){await r(this,L,Ye).send("browsingContext.handleUserPrompt",{context:this.id,...V})}async setViewport(V={}){await r(this,L,Ye).send("browsingContext.setViewport",{context:this.id,...V})}async performActions(V){await r(this,L,Ye).send("input.performActions",{context:this.id,actions:V})}async releaseActions(){await r(this,L,Ye).send("input.releaseActions",{context:this.id})}createWindowRealm(V){return E(this,L,Jg).call(this,V)}async addPreloadScript(V,W={}){return await this.userContext.browser.addPreloadScript(V,{...W,contexts:[this]})}async addIntercept(V){const{result:{intercept:W}}=await this.userContext.browser.session.send("network.addIntercept",{...V,contexts:[this.id]});return W}async removePreloadScript(V){await this.userContext.browser.removePreloadScript(V)}async getCookies(V={}){const{result:{cookies:W}}=await r(this,L,Ye).send("storage.getCookies",{...V,partition:{type:"context",context:this.id}});return W}async setCookie(V){await r(this,L,Ye).send("storage.setCookie",{cookie:V,partition:{type:"context",context:this.id}})}async setFiles(V,W){await r(this,L,Ye).send("input.setFiles",{context:this.id,element:V,files:W})}async subscribe(V){await r(this,L,Ye).subscribe(V,[this.id])}async addInterception(V){await r(this,L,Ye).subscribe(V,[this.id])}[(e=[bi],t=[se(V=>r(V,O))],s=[se(V=>r(V,O))],a=[se(V=>r(V,O))],o=[se(V=>r(V,O))],c=[se(V=>r(V,O))],u=[se(V=>r(V,O))],d=[se(V=>r(V,O))],p=[se(V=>r(V,O))],h=[se(V=>r(V,O))],l=[se(V=>r(V,O))],m=[se(V=>r(V,O))],S=[se(V=>r(V,O))],g=[se(V=>r(V,O))],w=[se(V=>r(V,O))],v=[se(V=>r(V,O))],k=[se(V=>r(V,O))],C=[se(V=>r(V,O))],b=[se(V=>r(V,O))],D=[se(V=>r(V,O))],A=[se(V=>r(V,O))],R=[se(V=>r(V,O))],we)](){r(this,O)??y(this,O,"Browsing context already closed, probably because the user context closed."),this.emit("closed",{reason:r(this,O)}),r(this,j).dispose(),super[we]()}async deleteCookie(...V){await Promise.all(V.map(async W=>{await r(this,L,Ye).send("storage.deleteCookies",{filter:W,partition:{type:"context",context:this.id}})}))}async locateNodes(V,W){return(await r(this,L,Ye).send("browsingContext.locateNodes",{context:this.id,locator:V,startNodes:W.length?W:void 0})).result.nodes}},M=new WeakMap,O=new WeakMap,T=new WeakMap,_=new WeakMap,j=new WeakMap,$=new WeakMap,J=new WeakMap,L=new WeakSet,oE=function(){r(this,j).use(new pe(this.userContext)).once("closed",({reason:ie})=>{this.dispose(`Browsing context already closed: ${ie}`)});const W=r(this,j).use(new pe(r(this,L,Ye)));W.on("browsingContext.contextCreated",ie=>{if(ie.parent!==this.id)return;const he=G.from(this.userContext,this,ie.context,ie.url,ie.originalOpener);r(this,_).set(ie.context,he);const ae=r(this,j).use(new pe(he));ae.once("closed",()=>{ae.removeAllListeners(),r(this,_).delete(he.id)}),this.emit("browsingcontext",{browsingContext:he})}),W.on("browsingContext.contextDestroyed",ie=>{ie.context===this.id&&this.dispose("Browsing context already closed.")}),W.on("browsingContext.historyUpdated",ie=>{ie.context===this.id&&(y(this,T,ie.url),this.emit("historyUpdated",void 0))}),W.on("browsingContext.domContentLoaded",ie=>{ie.context===this.id&&(y(this,T,ie.url),this.emit("DOMContentLoaded",void 0))}),W.on("browsingContext.load",ie=>{ie.context===this.id&&(y(this,T,ie.url),this.emit("load",void 0))}),W.on("browsingContext.navigationStarted",ie=>{if(ie.context!==this.id)return;for(const[ae,Se]of r(this,J))Se.disposed&&r(this,J).delete(ae);if(r(this,M)!==void 0&&!r(this,M).disposed)return;y(this,M,U_.from(this));const he=r(this,j).use(new pe(r(this,M)));for(const ae of["fragment","failed","aborted"])he.once(ae,({url:Se})=>{he[we](),y(this,T,Se)});this.emit("navigation",{navigation:r(this,M)})}),W.on("network.beforeRequestSent",ie=>{if(ie.context!==this.id||r(this,J).has(ie.request.request))return;const he=V_.from(this,ie);r(this,J).set(he.id,he),this.emit("request",{request:he})}),W.on("log.entryAdded",ie=>{ie.source.context===this.id&&this.emit("log",{entry:ie})}),W.on("browsingContext.userPromptOpened",ie=>{if(ie.context!==this.id)return;const he=J_.from(this,ie);this.emit("userprompt",{userPrompt:he})})},Ye=function(){return this.userContext.browser.session},Jg=function(V){const W=Qp.from(this,V);return W.on("worker",ie=>{this.emit("worker",{realm:ie})}),W},(()=>{const V=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;x=[se(W=>r(W,O))],N=[se(W=>r(W,O))],Ve(G,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:W=>"dispose"in W,get:W=>W.dispose},metadata:V},null,i),Ve(G,null,t,{kind:"method",name:"activate",static:!1,private:!1,access:{has:W=>"activate"in W,get:W=>W.activate},metadata:V},null,i),Ve(G,null,s,{kind:"method",name:"captureScreenshot",static:!1,private:!1,access:{has:W=>"captureScreenshot"in W,get:W=>W.captureScreenshot},metadata:V},null,i),Ve(G,null,a,{kind:"method",name:"close",static:!1,private:!1,access:{has:W=>"close"in W,get:W=>W.close},metadata:V},null,i),Ve(G,null,o,{kind:"method",name:"traverseHistory",static:!1,private:!1,access:{has:W=>"traverseHistory"in W,get:W=>W.traverseHistory},metadata:V},null,i),Ve(G,null,c,{kind:"method",name:"navigate",static:!1,private:!1,access:{has:W=>"navigate"in W,get:W=>W.navigate},metadata:V},null,i),Ve(G,null,u,{kind:"method",name:"reload",static:!1,private:!1,access:{has:W=>"reload"in W,get:W=>W.reload},metadata:V},null,i),Ve(G,null,d,{kind:"method",name:"setCacheBehavior",static:!1,private:!1,access:{has:W=>"setCacheBehavior"in W,get:W=>W.setCacheBehavior},metadata:V},null,i),Ve(G,null,p,{kind:"method",name:"print",static:!1,private:!1,access:{has:W=>"print"in W,get:W=>W.print},metadata:V},null,i),Ve(G,null,h,{kind:"method",name:"handleUserPrompt",static:!1,private:!1,access:{has:W=>"handleUserPrompt"in W,get:W=>W.handleUserPrompt},metadata:V},null,i),Ve(G,null,l,{kind:"method",name:"setViewport",static:!1,private:!1,access:{has:W=>"setViewport"in W,get:W=>W.setViewport},metadata:V},null,i),Ve(G,null,m,{kind:"method",name:"performActions",static:!1,private:!1,access:{has:W=>"performActions"in W,get:W=>W.performActions},metadata:V},null,i),Ve(G,null,S,{kind:"method",name:"releaseActions",static:!1,private:!1,access:{has:W=>"releaseActions"in W,get:W=>W.releaseActions},metadata:V},null,i),Ve(G,null,g,{kind:"method",name:"createWindowRealm",static:!1,private:!1,access:{has:W=>"createWindowRealm"in W,get:W=>W.createWindowRealm},metadata:V},null,i),Ve(G,null,w,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:W=>"addPreloadScript"in W,get:W=>W.addPreloadScript},metadata:V},null,i),Ve(G,null,v,{kind:"method",name:"addIntercept",static:!1,private:!1,access:{has:W=>"addIntercept"in W,get:W=>W.addIntercept},metadata:V},null,i),Ve(G,null,k,{kind:"method",name:"removePreloadScript",static:!1,private:!1,access:{has:W=>"removePreloadScript"in W,get:W=>W.removePreloadScript},metadata:V},null,i),Ve(G,null,C,{kind:"method",name:"getCookies",static:!1,private:!1,access:{has:W=>"getCookies"in W,get:W=>W.getCookies},metadata:V},null,i),Ve(G,null,b,{kind:"method",name:"setCookie",static:!1,private:!1,access:{has:W=>"setCookie"in W,get:W=>W.setCookie},metadata:V},null,i),Ve(G,null,D,{kind:"method",name:"setFiles",static:!1,private:!1,access:{has:W=>"setFiles"in W,get:W=>W.setFiles},metadata:V},null,i),Ve(G,null,A,{kind:"method",name:"subscribe",static:!1,private:!1,access:{has:W=>"subscribe"in W,get:W=>W.subscribe},metadata:V},null,i),Ve(G,null,R,{kind:"method",name:"addInterception",static:!1,private:!1,access:{has:W=>"addInterception"in W,get:W=>W.addInterception},metadata:V},null,i),Ve(G,null,x,{kind:"method",name:"deleteCookie",static:!1,private:!1,access:{has:W=>"deleteCookie"in W,get:W=>W.deleteCookie},metadata:V},null,i),Ve(G,null,N,{kind:"method",name:"locateNodes",static:!1,private:!1,access:{has:W=>"locateNodes"in W,get:W=>W.locateNodes},metadata:V},null,i),V&&Object.defineProperty(G,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:V})})(),G})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Q_=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},la=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};let Hh=(()=>{var u,d,p,h,l,m,cE,js;let n=pe,i=[],e,t,s,a,o,c;return u=class extends n{constructor(k,C){super();f(this,m);f(this,d,Q_(this,i));f(this,p,new Map);f(this,h,new Qe);f(this,l);U(this,"browser");y(this,l,C),this.browser=k}static create(k,C){var D;const b=new u(k,C);return E(D=b,m,cE).call(D),b}get browsingContexts(){return r(this,p).values()}get closed(){return r(this,d)!==void 0}get disposed(){return this.closed}get id(){return r(this,l)}dispose(k){y(this,d,k),this[we]()}async createBrowsingContext(k,C={}){var A;const{result:{context:b}}=await r(this,m,js).send("browsingContext.create",{type:k,...C,referenceContext:(A=C.referenceContext)==null?void 0:A.id,userContext:r(this,l)}),D=r(this,p).get(b);return ee(D,"The WebDriver BiDi implementation is failing to create a browsing context correctly."),D}async remove(){try{await r(this,m,js).send("browser.removeUserContext",{userContext:r(this,l)})}finally{this.dispose("User context already closed.")}}async getCookies(k={},C=void 0){const{result:{cookies:b}}=await r(this,m,js).send("storage.getCookies",{...k,partition:{type:"storageKey",userContext:r(this,l),sourceOrigin:C}});return b}async setCookie(k,C){await r(this,m,js).send("storage.setCookie",{cookie:k,partition:{type:"storageKey",sourceOrigin:C,userContext:this.id}})}async setPermissions(k,C,b){await r(this,m,js).send("permissions.setPermission",{origin:k,descriptor:C,state:b,userContext:r(this,l)})}[(e=[bi],t=[se(k=>r(k,d))],s=[se(k=>r(k,d))],a=[se(k=>r(k,d))],o=[se(k=>r(k,d))],c=[se(k=>r(k,d))],we)](){r(this,d)??y(this,d,"User context already closed, probably because the browser disconnected/closed."),this.emit("closed",{reason:r(this,d)}),r(this,h).dispose(),super[we]()}},d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakMap,m=new WeakSet,cE=function(){const k=r(this,h).use(new pe(this.browser));k.once("closed",({reason:b})=>{this.dispose(`User context was closed: ${b}`)}),k.once("disconnected",({reason:b})=>{this.dispose(`User context was closed: ${b}`)}),r(this,h).use(new pe(r(this,m,js))).on("browsingContext.contextCreated",b=>{if(b.parent||b.userContext!==r(this,l))return;const D=Y_.from(this,void 0,b.context,b.url,b.originalOpener);r(this,p).set(D.id,D);const A=r(this,h).use(new pe(D));A.on("closed",()=>{A.removeAllListeners(),r(this,p).delete(D.id)}),this.emit("browsingcontext",{browsingContext:D})})},js=function(){return this.browser.session},(()=>{const k=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;la(u,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:C=>"dispose"in C,get:C=>C.dispose},metadata:k},null,i),la(u,null,t,{kind:"method",name:"createBrowsingContext",static:!1,private:!1,access:{has:C=>"createBrowsingContext"in C,get:C=>C.createBrowsingContext},metadata:k},null,i),la(u,null,s,{kind:"method",name:"remove",static:!1,private:!1,access:{has:C=>"remove"in C,get:C=>C.remove},metadata:k},null,i),la(u,null,a,{kind:"method",name:"getCookies",static:!1,private:!1,access:{has:C=>"getCookies"in C,get:C=>C.getCookies},metadata:k},null,i),la(u,null,o,{kind:"method",name:"setCookie",static:!1,private:!1,access:{has:C=>"setCookie"in C,get:C=>C.setCookie},metadata:k},null,i),la(u,null,c,{kind:"method",name:"setPermissions",static:!1,private:!1,access:{has:C=>"setPermissions"in C,get:C=>C.setPermissions},metadata:k},null,i),k&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:k})})(),U(u,"DEFAULT","default"),u})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class iu{static deserialize(i){var e,t,s,a;if(!i){le("Service did not produce a result.");return}switch(i.type){case"array":return(e=i.value)==null?void 0:e.map(o=>this.deserialize(o));case"set":return(t=i.value)==null?void 0:t.reduce((o,c)=>o.add(this.deserialize(c)),new Set);case"object":return(s=i.value)==null?void 0:s.reduce((o,c)=>{const{key:u,value:d}=E(this,Rs,Xg).call(this,c);return o[u]=d,o},{});case"map":return(a=i.value)==null?void 0:a.reduce((o,c)=>{const{key:u,value:d}=E(this,Rs,Xg).call(this,c);return o.set(u,d)},new Map);case"promise":return{};case"regexp":return new RegExp(i.value.pattern,i.value.flags);case"date":return new Date(i.value);case"undefined":return;case"null":return null;case"number":return E(this,Rs,uE).call(this,i.value);case"bigint":return BigInt(i.value);case"boolean":return!!i.value;case"string":return i.value}le(`Deserialization of type ${i.type} not supported.`)}}Rs=new WeakSet,uE=function(i){switch(i){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:return i}},Xg=function([i,e]){const t=typeof i=="string"?i:this.deserialize(i),s=this.deserialize(e);return{key:t,value:s}},f(iu,Rs);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Tm=class Tm extends Cy{constructor(e){super(e.info.type,e.info.message,e.info.defaultValue);f(this,yl);y(this,yl,e),this.handled=e.handled}static from(e){return new Tm(e)}async handle(e){await r(this,yl).handle({accept:e.accept,userText:e.text})}};yl=new WeakMap;let tm=Tm;var Z_=$e();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Im=class Im extends Cn{constructor(e,t){super();f(this,Fr);U(this,"realm");f(this,Do,!1);y(this,Fr,e),this.realm=t}static from(e,t){return new Im(e,t)}get disposed(){return r(this,Do)}async jsonValue(){return await this.evaluate(e=>e)}asElement(){return null}async dispose(){r(this,Do)||(y(this,Do,!0),await this.realm.destroyHandles([this]))}get isPrimitiveValue(){switch(r(this,Fr).type){case"string":case"number":case"bigint":case"boolean":case"undefined":case"null":return!0;default:return!1}}toString(){return this.isPrimitiveValue?"JSHandle:"+iu.deserialize(r(this,Fr)):"JSHandle@"+r(this,Fr).type}get id(){return"handle"in r(this,Fr)?r(this,Fr).handle:void 0}remoteValue(){return r(this,Fr)}remoteObject(){throw new be("Not available in WebDriver BiDi")}};Fr=new WeakMap,Do=new WeakMap;let Ei=Im;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var eT=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},Wb=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},tT=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},rT=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});let nu=(()=>{var s,a;let n=My,i=[],e,t;return a=class extends n{constructor(u,d){super(Ei.from(u,d));f(this,s,eT(this,i))}static from(u,d){return new a(u,d)}get realm(){return this.handle.realm}get frame(){return this.realm.environment}remoteValue(){return this.handle.remoteValue()}async autofill(u){const d=this.frame.client,h=(await d.send("DOM.describeNode",{objectId:this.handle.id})).node.backendNodeId,l=this.frame._id;await d.send("Autofill.trigger",{fieldId:h,frameId:l,card:u.creditCard})}async contentFrame(){const u={stack:[],error:void 0,hasError:!1};try{const p=tT(u,await this.evaluateHandle(h=>{if(h instanceof HTMLIFrameElement||h instanceof HTMLFrameElement)return h.contentWindow}),!1).remoteValue();return p.type==="window"?this.frame.page().frames().find(h=>h._id===p.value.context)??null:null}catch(d){u.error=d,u.hasError=!0}finally{rT(u)}}async uploadFile(...u){const d=vi.value.path;d&&(u=u.map(p=>d.win32.isAbsolute(p)||d.posix.isAbsolute(p)?p:d.resolve(p))),await this.frame.setFiles(this,u)}async*queryAXTree(u,d){const p=await this.frame.locateNodes(this,{type:"accessibility",value:{role:d,name:u}});return yield*Ys.map(p,h=>Promise.resolve(a.from(h,this.realm)))}async backendNodeId(){if(!this.frame.page().browser().cdpSupported)throw new be;if(r(this,s))return r(this,s);const{node:u}=await this.frame.client.send("DOM.describeNode",{objectId:this.handle.id});return y(this,s,u.backendNodeId),r(this,s)}},s=new WeakMap,(()=>{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;e=[se()],t=[se(),Te],Wb(a,null,e,{kind:"method",name:"autofill",static:!1,private:!1,access:{has:d=>"autofill"in d,get:d=>d.autofill},metadata:u},null,i),Wb(a,null,t,{kind:"method",name:"contentFrame",static:!1,private:!1,access:{has:d=>"contentFrame"in d,get:d=>d.contentFrame},metadata:u},null,i),u&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})})(),a})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var rm=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},iT=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});const Mm=class Mm{constructor(i,e,t,s=!1){f(this,Dr);f(this,ln);U(this,"name");f(this,vl);f(this,Oo);f(this,No);f(this,bl,[]);f(this,Sl,new Qe);f(this,ff,async i=>{const e={stack:[],error:void 0,hasError:!1};try{if(i.channel!==r(this,No))return;const t=E(this,Dr,hE).call(this,i.source);if(!t)return;const s=rm(e,Ei.from(i.data,t),!1),a=rm(e,await s.evaluateHandle(([,,d])=>d),!1),o=rm(e,new Qe,!1),c=[];for(const[d,p]of await a.getProperties()){if(o.use(p),p instanceof nu){c[+d]=p,o.use(p);continue}c[+d]=p.jsonValue()}let u;try{u=await r(this,vl).call(this,...await Promise.all(c))}catch(d){try{d instanceof Error?await s.evaluate(([,p],h,l,m)=>{const S=new Error(l);S.name=h,m&&(S.stack=m),p(S)},d.name,d.message,d.stack):await s.evaluate(([,p],h)=>{p(h)},d)}catch(p){le(p)}return}try{await s.evaluate(([d],p)=>{d(p)},u)}catch(d){le(d)}}catch(t){e.error=t,e.hasError=!0}finally{iT(e)}});y(this,ln,i),this.name=e,y(this,vl,t),y(this,Oo,s),y(this,No,`__puppeteer__${r(this,ln)._id}_page_exposeFunction_${this.name}`)}static async from(i,e,t,s=!1){var o;const a=new Mm(i,e,t,s);return await E(o=a,Dr,dE).call(o),a}[Symbol.dispose](){this[Symbol.asyncDispose]().catch(le)}async[Symbol.asyncDispose](){r(this,Sl).dispose(),await Promise.all(r(this,bl).map(async([i,e])=>{const t=r(this,Oo)?i.isolatedRealm():i.mainRealm();try{await Promise.all([t.evaluate(s=>{delete globalThis[s]},this.name),...i.childFrames().map(s=>s.evaluate(a=>{delete globalThis[a]},this.name)),i.browsingContext.removePreloadScript(e)])}catch(s){le(s)}}))}};ln=new WeakMap,vl=new WeakMap,Oo=new WeakMap,No=new WeakMap,bl=new WeakMap,Sl=new WeakMap,Dr=new WeakSet,dE=async function(){const i=r(this,Dr,lE),e={type:"channel",value:{channel:r(this,No),ownership:"root"}};r(this,Sl).use(new pe(i)).on(Z_.ChromiumBidi.Script.EventNames.Message,r(this,ff));const s=mr(Xs(o=>{Object.assign(globalThis,{[PLACEHOLDER("name")]:function(...c){return new Promise((u,d)=>{o([u,d,c])})}})},{name:JSON.stringify(this.name)})),a=[r(this,ln)];for(const o of a)a.push(...o.childFrames());await Promise.all(a.map(async o=>{const c=r(this,Oo)?o.isolatedRealm():o.mainRealm();try{const[u]=await Promise.all([o.browsingContext.addPreloadScript(s,{arguments:[e],sandbox:c.sandbox}),c.realm.callFunction(s,!1,{arguments:[e]})]);r(this,bl).push([o,u])}catch(u){le(u)}}))},lE=function(){return r(this,ln).page().browser().connection},ff=new WeakMap,hE=function(i){const e=E(this,Dr,fE).call(this,i.context);if(e)return e.realm(i.realm)},fE=function(i){const e=[r(this,ln)];for(const t of e){if(t._id===i)return t;e.push(...t.childFrames())}};let su=Mm;var nT=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},sT=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};let zb=(()=>{var t,s,a,o,c,pE,d;let n=Oy,i=[],e;return d=class extends n{constructor(l,m,S){super();f(this,c);f(this,t,nT(this,i));f(this,s);f(this,a);f(this,o,!1);y(this,t,l),y(this,s,m),y(this,o,S);const g=l["goog:securityDetails"];S&&g&&y(this,a,new av(g))}static from(l,m,S){var w;const g=new d(l,m,S);return E(w=g,c,pE).call(w),g}remoteAddress(){return{ip:"",port:-1}}url(){return r(this,t).url}status(){return r(this,t).status}statusText(){return r(this,t).statusText}headers(){const l={};for(const m of r(this,t).headers)m.value.type==="string"&&(l[m.name.toLowerCase()]=m.value.value);return l}request(){return r(this,s)}fromCache(){return r(this,t).fromCache}timing(){const l=r(this,s).timing();return{requestTime:l.requestTime,proxyStart:-1,proxyEnd:-1,dnsStart:l.dnsStart,dnsEnd:l.dnsEnd,connectStart:l.connectStart,connectEnd:l.connectEnd,sslStart:l.tlsStart,sslEnd:-1,workerStart:-1,workerReady:-1,workerFetchStart:-1,workerRespondWithSettled:-1,workerRouterEvaluationStart:-1,workerCacheLookupStart:-1,sendStart:l.requestStart,sendEnd:-1,pushStart:-1,pushEnd:-1,receiveHeadersStart:l.responseStart,receiveHeadersEnd:l.responseEnd}}frame(){return r(this,s).frame()}fromServiceWorker(){return!1}securityDetails(){if(!r(this,o))throw new be;return r(this,a)??null}content(){throw new be}},t=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,pE=function(){var l,m;r(this,t).fromCache&&(r(this,s)._fromMemoryCache=!0,(l=r(this,s).frame())==null||l.page().trustedEmitter.emit("requestservedfromcache",r(this,s))),(m=r(this,s).frame())==null||m.page().trustedEmitter.emit("response",this)},(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;e=[nr],sT(d,null,e,{kind:"method",name:"remoteAddress",static:!1,private:!1,access:{has:m=>"remoteAddress"in m,get:m=>m.remoteAddress},metadata:l},null,i),l&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l})})(),d})();var im;const nm=new WeakMap;class sm extends Ph{constructor(e,t,s){super();f(this,zt);f(this,Fs);f(this,Cl,null);U(this,"id");f(this,ft);f(this,Ge);f(this,kl,!1);f(this,pf,async()=>{if(!r(this,ft))return;const e=r(this,ft).page()._credentials;e&&!r(this,kl)?(y(this,kl,!0),r(this,Ge).continueWithAuth({action:"provideCredentials",credentials:{type:"password",username:e.username,password:e.password}})):r(this,Ge).continueWithAuth({action:"cancel"})});nm.set(e,this),this.interception.enabled=e.isBlocked,y(this,Ge,e),y(this,ft,t),y(this,Fs,s?r(s,Fs):[]),this.id=e.id}static from(e,t,s){var o;const a=new im(e,t,s);return E(o=a,zt,mE).call(o),a}get client(){return r(this,ft).client}url(){return r(this,Ge).url}resourceType(){if(!r(this,ft).page().browser().cdpSupported)throw new be;return(r(this,Ge).resourceType||"other").toLowerCase()}method(){return r(this,Ge).method}postData(){if(!r(this,ft).page().browser().cdpSupported)throw new be;return r(this,Ge).postData}hasPostData(){if(!r(this,ft).page().browser().cdpSupported)throw new be;return r(this,Ge).hasPostData}async fetchPostData(){throw new be}headers(){const e={};for(const t of r(this,Ge).headers)e[t.name.toLowerCase()]=t.value.value;return{...e,...r(this,zt,Qg),...r(this,zt,Zg)}}response(){return r(this,Cl)}failure(){return r(this,Ge).error===void 0?null:{errorText:r(this,Ge).error}}isNavigationRequest(){return r(this,Ge).navigation!==void 0}initiator(){var e;return{...r(this,Ge).initiator,type:((e=r(this,Ge).initiator)==null?void 0:e.type)??"other"}}redirectChain(){return r(this,Fs).slice()}frame(){return r(this,ft)}async continue(e,t){return await super.continue({headers:r(this,zt,Yg)?this.headers():void 0,...e},t)}async _continue(e={}){const t=Vb(e.headers);return this.interception.handled=!0,await r(this,Ge).continueRequest({url:e.url,method:e.method,body:e.postData?{type:"base64",value:ly(e.postData)}:void 0,headers:t.length>0?t:void 0}).catch(s=>(this.interception.handled=!1,_h(s)))}async _abort(){return this.interception.handled=!0,await r(this,Ge).failRequest().catch(e=>{throw this.interception.handled=!1,e})}async _respond(e,t){this.interception.handled=!0;let s;e.body&&(s=Ph.getResponse(e.body));const a=Vb(e.headers),o=a.some(u=>u.name==="content-length");e.contentType&&a.push({name:"content-type",value:{type:"string",value:e.contentType}}),s!=null&&s.contentLength&&!o&&a.push({name:"content-length",value:{type:"string",value:String(s.contentLength)}});const c=e.status||200;return await r(this,Ge).provideResponse({statusCode:c,headers:a.length>0?a:void 0,reasonPhrase:Dy[c],body:s!=null&&s.base64?{type:"base64",value:s==null?void 0:s.base64}:void 0}).catch(u=>{throw this.interception.handled=!1,u})}timing(){return r(this,Ge).timing()}}Fs=new WeakMap,Cl=new WeakMap,ft=new WeakMap,Ge=new WeakMap,zt=new WeakSet,mE=function(){r(this,Ge).on("redirect",e=>{const t=im.from(e,r(this,ft),this);r(this,Fs).push(this),e.once("success",()=>{r(this,ft).page().trustedEmitter.emit("requestfinished",t)}),e.once("error",()=>{r(this,ft).page().trustedEmitter.emit("requestfailed",t)}),t.finalizeInterceptions()}),r(this,Ge).once("success",e=>{y(this,Cl,zb.from(e,this,r(this,ft).page().browser().cdpSupported))}),r(this,Ge).on("authenticate",r(this,pf)),r(this,ft).page().trustedEmitter.emit("request",this),r(this,zt,Yg)&&this.interception.handlers.push(async()=>{await this.continue({headers:this.headers()},0)})},Yg=function(){return!!(Object.keys(r(this,zt,Qg)).length||Object.keys(r(this,zt,Zg)).length)},Qg=function(){var e;return((e=r(this,ft))==null?void 0:e.page()._extraHTTPHeaders)??{}},Zg=function(){var e;return((e=r(this,ft))==null?void 0:e.page()._userAgentHeaders)??{}},kl=new WeakMap,pf=new WeakMap,im=sm;function Vb(n){const i=[];for(const[e,t]of Object.entries(n??[]))if(!Object.is(t,void 0)){const s=Array.isArray(t)?t:[t];for(const a of s)i.push({name:e.toLowerCase(),value:{type:"string",value:String(a)}})}return i}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Gb extends Error{}class Jb{static serialize(i){switch(typeof i){case"symbol":case"function":throw new Gb(`Unable to serializable ${typeof i}`);case"object":return E(this,Lo,wE).call(this,i);case"undefined":return{type:"undefined"};case"number":return E(this,Lo,gE).call(this,i);case"bigint":return{type:"bigint",value:i.toString()};case"string":return{type:"string",value:i};case"boolean":return{type:"boolean",value:i}}}}Lo=new WeakSet,gE=function(i){let e;return Object.is(i,-0)?e="-0":Object.is(i,1/0)?e="Infinity":Object.is(i,-1/0)?e="-Infinity":Object.is(i,NaN)?e="NaN":e=i,{type:"number",value:e}},wE=function(i){if(i===null)return{type:"null"};if(Array.isArray(i))return{type:"array",value:i.map(t=>this.serialize(t))};if(Px(i)){try{JSON.stringify(i)}catch(t){throw t instanceof TypeError&&t.message.startsWith("Converting circular structure to JSON")&&(t.message+=" Recursive objects are not allowed."),t}const e=[];for(const t in i)e.push([this.serialize(t),this.serialize(i[t])]);return{type:"object",value:e}}else{if(_x(i))return{type:"regexp",value:{pattern:i.source,flags:i.flags}};if(Tx(i))return{type:"date",value:i.toISOString()}}throw new Gb("Custom object serialization not possible. Use plain objects instead.")},f(Jb,Lo);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function aT(n){if(n.exception.type!=="error")return iu.deserialize(n.exception);const[i="",...e]=n.text.split(": "),t=e.join(": "),s=new Error(t);s.name=i;const a=[];if(n.stackTrace&&a.length<Error.stackTraceLimit)for(const o of n.stackTrace.callFrames.reverse()){if(Bt.isPuppeteerURL(o.url)&&o.url!==Bt.INTERNAL_URL){const c=Bt.parse(o.url);a.unshift(`    at ${o.functionName||c.functionName} (${c.functionName} at ${c.siteString}, <anonymous>:${o.lineNumber}:${o.columnNumber})`)}else a.push(`    at ${o.functionName||"<anonymous>"} (${o.url}:${o.lineNumber}:${o.columnNumber})`);if(a.length>=Error.stackTraceLimit)break}return s.stack=[n.text,...a].join(`
`),s}function Xb(n,i){return e=>{throw e instanceof vn?e.message+=` at ${n}`:e instanceof uh&&(e.message=`Navigation timeout of ${i} ms exceeded`),e}}var oT=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},cT=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});class am extends Wy{constructor(e,t){super(t);f(this,El);U(this,"realm");U(this,"internalPuppeteerUtil");this.realm=e}initialize(){this.realm.on("destroyed",({reason:e})=>{this.taskManager.terminateAll(new Error(e)),this.dispose()}),this.realm.on("updated",()=>{this.internalPuppeteerUtil=void 0,this.taskManager.rerunAll()})}get puppeteerUtil(){const e=Promise.resolve();return oc.inject(t=>{this.internalPuppeteerUtil&&this.internalPuppeteerUtil.then(s=>{s.dispose()}),this.internalPuppeteerUtil=e.then(()=>this.evaluateHandle(t))},!this.internalPuppeteerUtil),this.internalPuppeteerUtil}async evaluateHandle(e,...t){return await E(this,El,ew).call(this,!1,e,...t)}async evaluate(e,...t){return await E(this,El,ew).call(this,!0,e,...t)}createHandle(e){return(e.type==="node"||e.type==="window")&&this instanceof xi?nu.from(e,this):Ei.from(e,this)}async serializeAsync(e){return e instanceof jt&&(e=await e.get(this)),this.serialize(e)}serialize(e){if(e instanceof Ei||e instanceof nu){if(e.realm!==this){if(!(e.realm instanceof xi)||!(this instanceof xi))throw new Error("Trying to evaluate JSHandle from different global types. Usually this means you're using a handle from a worker in a page or vice versa.");if(e.realm.environment!==this.environment)throw new Error("Trying to evaluate JSHandle from different frames. Usually this means you're using a handle from a page on a different page.")}if(e.disposed)throw new Error("JSHandle is disposed!");return e.remoteValue()}return Jb.serialize(e)}async destroyHandles(e){if(this.disposed)return;const t=e.map(({id:s})=>s).filter(s=>s!==void 0);t.length!==0&&await this.realm.disown(t).catch(s=>{le(s)})}async adoptHandle(e){return await this.evaluateHandle(t=>t,e)}async transferHandle(e){if(e.realm===this)return e;const t=this.adoptHandle(e);return await e.dispose(),await t}}El=new WeakSet,ew=async function(e,t,...s){var p;const a=yy(((p=py(t))==null?void 0:p.toString())??Bt.INTERNAL_URL);let o;const c=e?"none":"root",u=e?{}:{maxObjectDepth:0,maxDomDepth:0};if(jr(t)){const h=hh.test(t)?t:`${t}
${a}
`;o=this.realm.evaluate(h,!0,{resultOwnership:c,userActivation:!0,serializationOptions:u})}else{let h=mr(t);h=hh.test(h)?h:`${h}
${a}
`,o=this.realm.callFunction(h,!0,{arguments:s.some(l=>l instanceof jt)?await Promise.all(s.map(l=>this.serializeAsync(l))):s.map(l=>this.serialize(l)),resultOwnership:c,userActivation:!0,serializationOptions:u})}const d=await o;if("type"in d&&d.type==="exception")throw aT(d.exceptionDetails);return e?iu.deserialize(d.result):this.createHandle(d.result)};const gf=class gf extends am{constructor(e,t){super(e,t.timeoutSettings);f(this,mf);f(this,Bo);f(this,jo,!1);y(this,Bo,t)}static from(e,t){var a;const s=new gf(e,t);return E(a=s,mf,yE).call(a),s}get puppeteerUtil(){let e=Promise.resolve();return r(this,jo)||(e=Promise.all([su.from(this.environment,"__ariaQuerySelector",Sn.queryOne,!!this.sandbox),su.from(this.environment,"__ariaQuerySelectorAll",async(t,s)=>{const a=Sn.queryAll(t,s);return await t.realm.evaluateHandle((...o)=>o,...await Ys.collect(a))},!!this.sandbox)]),y(this,jo,!0)),e.then(()=>super.puppeteerUtil)}get sandbox(){return this.realm.sandbox}get environment(){return r(this,Bo)}async adoptBackendNode(e){const t={stack:[],error:void 0,hasError:!1};try{const{object:s}=await r(this,Bo).client.send("DOM.resolveNode",{backendNodeId:e,executionContextId:await this.realm.resolveExecutionContextId()});return await oT(t,nu.from({handle:s.objectId,type:"node"},this),!1).evaluateHandle(o=>o)}catch(s){t.error=s,t.hasError=!0}finally{cT(t)}}};Bo=new WeakMap,mf=new WeakSet,yE=function(){MS(gf.prototype,this,"initialize").call(this),this.realm.on("updated",()=>{this.environment.clearDocumentHandle(),y(this,jo,!1)})},jo=new WeakMap;let xi=gf;const Am=class Am extends am{constructor(e,t){super(e,t.timeoutSettings);f(this,xl);y(this,xl,t)}static from(e,t){const s=new Am(e,t);return s.initialize(),s}get environment(){return r(this,xl)}async adoptBackendNode(){throw new Error("Cannot adopt DOM nodes into a worker.")}};xl=new WeakMap;let Wh=Am;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Rm=class Rm extends zy{constructor(e,t){super(t.origin);f(this,Pl);f(this,_l);y(this,Pl,e),y(this,_l,Wh.from(t,this))}static from(e,t){return new Rm(e,t)}get frame(){return r(this,Pl)}mainRealm(){return r(this,_l)}get client(){throw new be}};Pl=new WeakMap,_l=new WeakMap;let om=Rm;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var uT=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},_n=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},Yb=function(n,i,e){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",i):i})};function dT(n){switch(n){case"group":return"startGroup";case"groupCollapsed":return"startGroupCollapsed";case"groupEnd":return"endGroup";default:return n}}let Qb=(()=>{var h,l,m,vE,tw,$f,v,Kf,Uf,b;let n=Ry,i=[],e,t,s,a,o,c,u,d,p;return b=class extends n{constructor(R,x){super();f(this,m);f(this,h,uT(this,i));U(this,"browsingContext");f(this,l,new WeakMap);U(this,"realms");U(this,"_id");U(this,"client");U(this,"accessibility");f(this,v,new Map);y(this,h,R),this.browsingContext=x,this._id=x.id,this.client=new tu(this),this.realms={default:xi.from(this.browsingContext.defaultRealm,this),internal:xi.from(this.browsingContext.createWindowRealm(`__puppeteer_internal_${Math.ceil(Math.random()*1e4)}`),this)},this.accessibility=new Vy(this.realms.default,this._id)}static from(R,x){var M;const N=new b(R,x);return E(M=N,m,vE).call(M),N}get timeoutSettings(){return this.page()._timeoutSettings}mainRealm(){return this.realms.default}isolatedRealm(){return this.realms.internal}realm(R){for(const x of Object.values(this.realms))if(x.realm.id===R)return x}page(){let R=r(this,h);for(;R instanceof b;)R=r(R,h);return R}url(){return this.browsingContext.url}parentFrame(){return r(this,h)instanceof b?r(this,h):null}childFrames(){return[...this.browsingContext.children].map(R=>r(this,l).get(R))}async goto(R,x={}){const[N]=await Promise.all([this.waitForNavigation(x),this.browsingContext.navigate(R,"interactive").catch(M=>{if(!(Xt(M)&&M.message.includes("net::ERR_HTTP_RESPONSE_CODE_FAILURE"))&&!M.message.includes("navigation canceled")&&!M.message.includes("Navigation was aborted by another navigation"))throw M})]).catch(Xb(R,x.timeout??this.timeoutSettings.navigationTimeout()));return N}async setContent(R,x={}){await Promise.all([this.setFrameContent(R),st(th([r(this,m,Kf).call(this,x),r(this,m,Uf).call(this,x)]))])}async waitForNavigation(R={}){const{timeout:x=this.timeoutSettings.navigationTimeout(),signal:N}=R,M=this.childFrames().map(O=>{var T;return E(T=O,m,$f).call(T)});return await st(th([ay(De(this.browsingContext,"navigation"),De(this.browsingContext,"historyUpdated").pipe(Je(()=>({navigation:null})))).pipe(Vs()).pipe(sh(({navigation:O})=>O===null?pr(null):r(this,m,Kf).call(this,R).pipe(gx(()=>M.length===0?pr(void 0):th(M)),yt(De(O,"fragment"),De(O,"failed"),De(O,"aborted").pipe(Je(({url:T})=>{throw new Error(`Navigation aborted: ${T}`)}))),sh(()=>{if(O.request){let T=function(_){return O===null?pr(null):_.response||_.error?pr(O):_.redirect?T(_.redirect):De(_,"success").pipe(yt(De(_,"error")),yt(De(_,"redirect"))).pipe(sh(()=>T(_)))};return T(O.request)}return pr(O)})))),r(this,m,Uf).call(this,R)]).pipe(Je(([O])=>{if(!O)return null;const T=O.request;if(!T)return null;const _=T.lastRedirect??T;return nm.get(_).response()}),yt(Rt(x),bn(N),E(this,m,$f).call(this).pipe(Je(()=>{throw new ir("Frame detached.")})))))}waitForDevicePrompt(){throw new be}get detached(){return this.browsingContext.closed}async exposeFunction(R,x){if(r(this,v).has(R))throw new Error(`Failed to add page binding with name ${R}: globalThis['${R}'] already exists!`);const N=await su.from(this,R,x);r(this,v).set(R,N)}async removeExposedFunction(R){const x=r(this,v).get(R);if(!x)throw new Error(`Failed to remove page binding with name ${R}: window['${R}'] does not exists!`);r(this,v).delete(R),await x[Symbol.asyncDispose]()}async createCDPSession(){if(!this.page().browser().cdpSupported)throw new be;return await this.page().browser().cdpConnection._createSession({targetId:this._id})}async setFiles(R,x){await this.browsingContext.setFiles(R.remoteValue(),x)}async locateNodes(R,x){return await this.browsingContext.locateNodes(x,[R.remoteValue()])}},h=new WeakMap,l=new WeakMap,m=new WeakSet,vE=function(){for(const R of this.browsingContext.children)E(this,m,tw).call(this,R);this.browsingContext.on("browsingcontext",({browsingContext:R})=>{E(this,m,tw).call(this,R)}),this.browsingContext.on("closed",()=>{for(const R of tu.sessions.values())R.frame===this&&R.onClose();this.page().trustedEmitter.emit("framedetached",this)}),this.browsingContext.on("request",({request:R})=>{const x=sm.from(R,this);R.once("success",()=>{this.page().trustedEmitter.emit("requestfinished",x)}),R.once("error",()=>{this.page().trustedEmitter.emit("requestfailed",x)}),x.finalizeInterceptions()}),this.browsingContext.on("navigation",({navigation:R})=>{R.once("fragment",()=>{this.page().trustedEmitter.emit("framenavigated",this)})}),this.browsingContext.on("load",()=>{this.page().trustedEmitter.emit("load",void 0)}),this.browsingContext.on("DOMContentLoaded",()=>{this._hasStartedLoading=!0,this.page().trustedEmitter.emit("domcontentloaded",void 0),this.page().trustedEmitter.emit("framenavigated",this)}),this.browsingContext.on("userprompt",({userPrompt:R})=>{this.page().trustedEmitter.emit("dialog",tm.from(R))}),this.browsingContext.on("log",({entry:R})=>{if(this._id===R.source.context)if(lT(R)){const x=R.args.map(M=>this.mainRealm().createHandle(M)),N=x.reduce((M,O)=>{const T=O instanceof Ei&&O.isPrimitiveValue?iu.deserialize(O.remoteValue()):O.toString();return`${M} ${T}`},"").slice(1);this.page().trustedEmitter.emit("console",new Pp(dT(R.method),N,x,fT(R.stackTrace),this))}else if(hT(R)){const x=new Error(R.text??""),N=x.message.split(`
`).length,M=x.stack.split(`
`).splice(0,N),O=[];if(R.stackTrace){for(const T of R.stackTrace.callFrames)if(O.push(`    at ${T.functionName||"<anonymous>"} (${T.url}:${T.lineNumber+1}:${T.columnNumber+1})`),O.length>=Error.stackTraceLimit)break}x.stack=[...M,...O].join(`
`),this.page().trustedEmitter.emit("pageerror",x)}else le(`Unhandled LogEntry with type "${R.type}", text "${R.text}" and level "${R.level}"`)}),this.browsingContext.on("worker",({realm:R})=>{const x=om.from(this,R);R.on("destroyed",()=>{this.page().trustedEmitter.emit("workerdestroyed",x)}),this.page().trustedEmitter.emit("workercreated",x)})},tw=function(R){const x=b.from(this,R);return r(this,l).set(R,x),this.page().trustedEmitter.emit("frameattached",x),R.on("closed",()=>{r(this,l).delete(R)}),x},$f=function(){return wn(()=>this.detached?pr(this):De(this.page().trustedEmitter,"framedetached").pipe(yn(R=>R===this)))},v=new WeakMap,Kf=function(){return o.value},Uf=function(){return u.value},(()=>{const R=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;e=[xe],t=[xe],s=[xe],a=[xe],c=[xe],d=[xe],p=[xe],_n(b,null,e,{kind:"method",name:"goto",static:!1,private:!1,access:{has:x=>"goto"in x,get:x=>x.goto},metadata:R},null,i),_n(b,null,t,{kind:"method",name:"setContent",static:!1,private:!1,access:{has:x=>"setContent"in x,get:x=>x.setContent},metadata:R},null,i),_n(b,null,s,{kind:"method",name:"waitForNavigation",static:!1,private:!1,access:{has:x=>"waitForNavigation"in x,get:x=>x.waitForNavigation},metadata:R},null,i),_n(b,o={value:Yb(function(x={}){let{waitUntil:N="load"}=x;const{timeout:M=this.timeoutSettings.navigationTimeout()}=x;Array.isArray(N)||(N=[N]);const O=new Set;for(const T of N)switch(T){case"load":{O.add("load");break}case"domcontentloaded":{O.add("DOMContentLoaded");break}}return O.size===0?pr(void 0):th([...O].map(T=>De(this.browsingContext,T))).pipe(Je(()=>{}),Vs(),yt(Rt(M),E(this,m,$f).call(this).pipe(Je(()=>{throw new Error("Frame detached.")}))))},"#waitForLoad$")},a,{kind:"method",name:"#waitForLoad$",static:!1,private:!0,access:{has:x=>Mt(m,x),get:x=>r(x,m,Kf)},metadata:R},null,i),_n(b,u={value:Yb(function(x={}){let{waitUntil:N="load"}=x;Array.isArray(N)||(N=[N]);let M=1/0;for(const O of N)switch(O){case"networkidle0":{M=Math.min(0,M);break}case"networkidle2":{M=Math.min(2,M);break}}return M===1/0?pr(void 0):this.page().waitForNetworkIdle$({idleTime:500,timeout:x.timeout??this.timeoutSettings.timeout(),concurrency:M})},"#waitForNetworkIdle$")},c,{kind:"method",name:"#waitForNetworkIdle$",static:!1,private:!0,access:{has:x=>Mt(m,x),get:x=>r(x,m,Uf)},metadata:R},null,i),_n(b,null,d,{kind:"method",name:"setFiles",static:!1,private:!1,access:{has:x=>"setFiles"in x,get:x=>x.setFiles},metadata:R},null,i),_n(b,null,p,{kind:"method",name:"locateNodes",static:!1,private:!1,access:{has:x=>"locateNodes"in x,get:x=>x.locateNodes},metadata:R},null,i),R&&Object.defineProperty(b,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:R})})(),b})();function lT(n){return n.type==="console"}function hT(n){return n.type==="javascript"}function fT(n){const i=[];if(n)for(const e of n.callFrames)i.push({url:e.url,lineNumber:e.lineNumber,columnNumber:e.columnNumber});return i}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Ft;(function(n){n.None="none",n.Key="key",n.Pointer="pointer",n.Wheel="wheel"})(Ft||(Ft={}));var We;(function(n){n.Pause="pause",n.KeyDown="keyDown",n.KeyUp="keyUp",n.PointerUp="pointerUp",n.PointerDown="pointerDown",n.PointerMove="pointerMove",n.Scroll="scroll"})(We||(We={}));const au=n=>{switch(n){case"\r":case`
`:n="Enter";break}if([...n].length===1)return n;switch(n){case"Cancel":return"";case"Help":return"";case"Backspace":return"";case"Tab":return"";case"Clear":return"";case"Enter":return"";case"Shift":case"ShiftLeft":return"";case"Control":case"ControlLeft":return"";case"Alt":case"AltLeft":return"";case"Pause":return"";case"Escape":return"";case"PageUp":return"";case"PageDown":return"";case"End":return"";case"Home":return"";case"ArrowLeft":return"";case"ArrowUp":return"";case"ArrowRight":return"";case"ArrowDown":return"";case"Insert":return"";case"Delete":return"";case"NumpadEqual":return"";case"Numpad0":return"";case"Numpad1":return"";case"Numpad2":return"";case"Numpad3":return"";case"Numpad4":return"";case"Numpad5":return"";case"Numpad6":return"";case"Numpad7":return"";case"Numpad8":return"";case"Numpad9":return"";case"NumpadMultiply":return"";case"NumpadAdd":return"";case"NumpadSubtract":return"";case"NumpadDecimal":return"";case"NumpadDivide":return"";case"F1":return"";case"F2":return"";case"F3":return"";case"F4":return"";case"F5":return"";case"F6":return"";case"F7":return"";case"F8":return"";case"F9":return"";case"F10":return"";case"F11":return"";case"F12":return"";case"Meta":case"MetaLeft":return"";case"ShiftRight":return"";case"ControlRight":return"";case"AltRight":return"";case"MetaRight":return"";case"Digit0":return"0";case"Digit1":return"1";case"Digit2":return"2";case"Digit3":return"3";case"Digit4":return"4";case"Digit5":return"5";case"Digit6":return"6";case"Digit7":return"7";case"Digit8":return"8";case"Digit9":return"9";case"KeyA":return"a";case"KeyB":return"b";case"KeyC":return"c";case"KeyD":return"d";case"KeyE":return"e";case"KeyF":return"f";case"KeyG":return"g";case"KeyH":return"h";case"KeyI":return"i";case"KeyJ":return"j";case"KeyK":return"k";case"KeyL":return"l";case"KeyM":return"m";case"KeyN":return"n";case"KeyO":return"o";case"KeyP":return"p";case"KeyQ":return"q";case"KeyR":return"r";case"KeyS":return"s";case"KeyT":return"t";case"KeyU":return"u";case"KeyV":return"v";case"KeyW":return"w";case"KeyX":return"x";case"KeyY":return"y";case"KeyZ":return"z";case"Semicolon":return";";case"Equal":return"=";case"Comma":return",";case"Minus":return"-";case"Period":return".";case"Slash":return"/";case"Backquote":return"`";case"BracketLeft":return"[";case"Backslash":return"\\";case"BracketRight":return"]";case"Quote":return'"';default:throw new Error(`Unknown key: "${n}"`)}};class Zb extends Ly{constructor(e){super();f(this,di);y(this,di,e)}async down(e,t){await r(this,di).mainFrame().browsingContext.performActions([{type:Ft.Key,id:"__puppeteer_keyboard",actions:[{type:We.KeyDown,value:au(e)}]}])}async up(e){await r(this,di).mainFrame().browsingContext.performActions([{type:Ft.Key,id:"__puppeteer_keyboard",actions:[{type:We.KeyUp,value:au(e)}]}])}async press(e,t={}){const{delay:s=0}=t,a=[{type:We.KeyDown,value:au(e)}];s>0&&a.push({type:We.Pause,duration:s}),a.push({type:We.KeyUp,value:au(e)}),await r(this,di).mainFrame().browsingContext.performActions([{type:Ft.Key,id:"__puppeteer_keyboard",actions:a}])}async type(e,t={}){const{delay:s=0}=t,a=[...e].map(au),o=[];if(s<=0)for(const c of a)o.push({type:We.KeyDown,value:c},{type:We.KeyUp,value:c});else for(const c of a)o.push({type:We.KeyDown,value:c},{type:We.Pause,duration:s},{type:We.KeyUp,value:c});await r(this,di).mainFrame().browsingContext.performActions([{type:Ft.Key,id:"__puppeteer_keyboard",actions:o}])}async sendCharacter(e){if([...e].length>1)throw new Error("Cannot send more than 1 character.");await(await r(this,di).focusedFrame()).isolatedRealm().evaluate(async s=>{document.execCommand("insertText",!1,s)},e)}}di=new WeakMap;const cm=n=>{switch(n){case He.Left:return 0;case He.Middle:return 1;case He.Right:return 2;case He.Back:return 3;case He.Forward:return 4}};class eS extends By{constructor(e){super();f(this,Or);f(this,Ds,{x:0,y:0});y(this,Or,e)}async reset(){y(this,Ds,{x:0,y:0}),await r(this,Or).mainFrame().browsingContext.releaseActions()}async move(e,t,s={}){const a=r(this,Ds),o={x:Math.round(e),y:Math.round(t)},c=[],u=s.steps??0;for(let d=0;d<u;++d)c.push({type:We.PointerMove,x:a.x+(o.x-a.x)*(d/u),y:a.y+(o.y-a.y)*(d/u),origin:s.origin});c.push({type:We.PointerMove,...o,origin:s.origin}),y(this,Ds,o),await r(this,Or).mainFrame().browsingContext.performActions([{type:Ft.Pointer,id:"__puppeteer_mouse",actions:c}])}async down(e={}){await r(this,Or).mainFrame().browsingContext.performActions([{type:Ft.Pointer,id:"__puppeteer_mouse",actions:[{type:We.PointerDown,button:cm(e.button??He.Left)}]}])}async up(e={}){await r(this,Or).mainFrame().browsingContext.performActions([{type:Ft.Pointer,id:"__puppeteer_mouse",actions:[{type:We.PointerUp,button:cm(e.button??He.Left)}]}])}async click(e,t,s={}){const a=[{type:We.PointerMove,x:Math.round(e),y:Math.round(t),origin:s.origin}],o={type:We.PointerDown,button:cm(s.button??He.Left)},c={type:We.PointerUp,button:o.button};for(let u=1;u<(s.count??1);++u)a.push(o,c);a.push(o),s.delay&&a.push({type:We.Pause,duration:s.delay}),a.push(c),await r(this,Or).mainFrame().browsingContext.performActions([{type:Ft.Pointer,id:"__puppeteer_mouse",actions:a}])}async wheel(e={}){await r(this,Or).mainFrame().browsingContext.performActions([{type:Ft.Wheel,id:"__puppeteer_wheel",actions:[{type:We.Scroll,...r(this,Ds)??{x:0,y:0},deltaX:e.deltaX??0,deltaY:e.deltaY??0}]}])}drag(){throw new be}dragOver(){throw new be}dragEnter(){throw new be}drop(){throw new be}dragAndDrop(){throw new be}}Or=new WeakMap,Ds=new WeakMap;class pT{constructor(i,e,t,s,a,o){f(this,Tl,!1);f(this,Il);f(this,Ml);f(this,Os);f(this,Ns);f(this,Al);f(this,qo);y(this,Ns,i),y(this,Al,e),y(this,Il,Math.round(s)),y(this,Ml,Math.round(a)),y(this,qo,o),y(this,Os,`__puppeteer_finger_${t}`)}async start(i={}){if(r(this,Tl))throw new dh("Touch has already started");await r(this,Ns).mainFrame().browsingContext.performActions([{type:Ft.Pointer,id:r(this,Os),parameters:{pointerType:"touch"},actions:[{type:We.PointerMove,x:r(this,Il),y:r(this,Ml),origin:i.origin},{...r(this,qo),type:We.PointerDown,button:0}]}]),y(this,Tl,!0)}move(i,e){const t=Math.round(i),s=Math.round(e);return r(this,Ns).mainFrame().browsingContext.performActions([{type:Ft.Pointer,id:r(this,Os),parameters:{pointerType:"touch"},actions:[{...r(this,qo),type:We.PointerMove,x:t,y:s}]}])}async end(){await r(this,Ns).mainFrame().browsingContext.performActions([{type:Ft.Pointer,id:r(this,Os),parameters:{pointerType:"touch"},actions:[{type:We.PointerUp,button:0}]}]),r(this,Al).removeHandle(this)}}Tl=new WeakMap,Il=new WeakMap,Ml=new WeakMap,Os=new WeakMap,Ns=new WeakMap,Al=new WeakMap,qo=new WeakMap;class tS extends jy{constructor(e){super();f(this,Rl);y(this,Rl,e)}async touchStart(e,t,s={}){const a=this.idGenerator(),o={width:.5*2,height:.5*2,pressure:.5,altitudeAngle:Math.PI/2},c=new pT(r(this,Rl),this,a,e,t,o);return await c.start(s),this.touches.push(c),c}}Rl=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var mT=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},rS=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},iS=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},nS=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});let ou=(()=>{var s,a,o,c,u,d,p,h,bE,m,S,g,w,v,Hl,rw,iw,D;let n=Ky,i,e=[],t=[];return D=class extends n{constructor(x,N){super();f(this,h);f(this,s,rS(this,e,new pe));f(this,a,rS(this,t));f(this,o);f(this,c,null);f(this,u,new Set);U(this,"keyboard");U(this,"mouse");U(this,"touchscreen");U(this,"tracing");U(this,"coverage");f(this,d);f(this,p);U(this,"_userAgentHeaders",{});f(this,m);f(this,S);f(this,g);U(this,"_extraHTTPHeaders",{});f(this,w);U(this,"_credentials",null);f(this,v);y(this,a,x),y(this,o,Qb.from(this,N)),y(this,d,new Yy(r(this,o).client)),this.tracing=new dv(r(this,o).client),this.coverage=new Jy(r(this,o).client),this.keyboard=new Zb(this),this.mouse=new eS(this),this.touchscreen=new tS(this)}static from(x,N){var O;const M=new D(x,N);return E(O=M,h,bE).call(O),M}get trustedEmitter(){return r(this,s)}set trustedEmitter(x){y(this,s,x)}_client(){return r(this,o).client}async setUserAgent(x,N){if(!r(this,a).browser().cdpSupported&&N)throw new be("Current Browser does not support `userAgentMetadata`");if(r(this,a).browser().cdpSupported&&N)return await this._client().send("Network.setUserAgentOverride",{userAgent:x,userAgentMetadata:N});const M=x!=="";x=x??await r(this,a).browser().userAgent(),this._userAgentHeaders=M?{"User-Agent":x}:{},y(this,m,await E(this,h,Hl).call(this,["beforeRequestSent"],r(this,m),M));const O=j=>{Object.defineProperty(navigator,"userAgent",{value:j})},T=[r(this,o)];for(const j of T)T.push(...j.childFrames());r(this,S)&&await this.removeScriptToEvaluateOnNewDocument(r(this,S));const[_]=await Promise.all([M?this.evaluateOnNewDocument(O,x):void 0,T.map(j=>j.evaluate(O,x))]);y(this,S,_==null?void 0:_.identifier)}async setBypassCSP(x){await this._client().send("Page.setBypassCSP",{enabled:x})}async queryObjects(x){ee(!x.disposed,"Prototype JSHandle is disposed!"),ee(x.id,"Prototype JSHandle must not be referencing primitive value");const N=await r(this,o).client.send("Runtime.queryObjects",{prototypeObjectId:x.id});return r(this,o).mainRealm().createHandle({type:"array",handle:N.objects.objectId})}browser(){return this.browserContext().browser()}browserContext(){return r(this,a)}mainFrame(){return r(this,o)}async focusedFrame(){const x={stack:[],error:void 0,hasError:!1};try{const M=iS(x,await this.mainFrame().isolatedRealm().evaluateHandle(()=>{let T=window;for(;(T.document.activeElement instanceof T.HTMLIFrameElement||T.document.activeElement instanceof T.HTMLFrameElement)&&T.document.activeElement.contentWindow!==null;)T=T.document.activeElement.contentWindow;return T}),!1).remoteValue();ee(M.type==="window");const O=this.frames().find(T=>T._id===M.value.context);return ee(O),O}catch(N){x.error=N,x.hasError=!0}finally{nS(x)}}frames(){const x=[r(this,o)];for(const N of x)x.push(...N.childFrames());return x}isClosed(){return r(this,o).detached}async close(x){const N={stack:[],error:void 0,hasError:!1};try{const M=iS(N,await r(this,a).waitForScreenshotOperations(),!1);try{await r(this,o).browsingContext.close(x==null?void 0:x.runBeforeUnload)}catch{return}}catch(M){N.error=M,N.hasError=!0}finally{nS(N)}}async reload(x={}){const[N]=await Promise.all([r(this,o).waitForNavigation(x),r(this,o).browsingContext.reload()]).catch(Xb(this.url(),x.timeout??this._timeoutSettings.navigationTimeout()));return N}setDefaultNavigationTimeout(x){this._timeoutSettings.setDefaultNavigationTimeout(x)}setDefaultTimeout(x){this._timeoutSettings.setDefaultTimeout(x)}getDefaultTimeout(){return this._timeoutSettings.timeout()}getDefaultNavigationTimeout(){return this._timeoutSettings.navigationTimeout()}isJavaScriptEnabled(){return r(this,d).javascriptEnabled}async setGeolocation(x){return await r(this,d).setGeolocation(x)}async setJavaScriptEnabled(x){return await r(this,d).setJavaScriptEnabled(x)}async emulateMediaType(x){return await r(this,d).emulateMediaType(x)}async emulateCPUThrottling(x){return await r(this,d).emulateCPUThrottling(x)}async emulateMediaFeatures(x){return await r(this,d).emulateMediaFeatures(x)}async emulateTimezone(x){return await r(this,d).emulateTimezone(x)}async emulateIdleState(x){return await r(this,d).emulateIdleState(x)}async emulateVisionDeficiency(x){return await r(this,d).emulateVisionDeficiency(x)}async setViewport(x){if(!this.browser().cdpSupported){await r(this,o).browsingContext.setViewport({viewport:x!=null&&x.width&&(x!=null&&x.height)?{width:x.width,height:x.height}:null,devicePixelRatio:x!=null&&x.deviceScaleFactor?x.deviceScaleFactor:null}),y(this,c,x);return}const N=await r(this,d).emulateViewport(x);y(this,c,x),N&&await this.reload()}viewport(){return r(this,c)}async pdf(x={}){const{timeout:N=this._timeoutSettings.timeout(),path:M=void 0}=x,{printBackground:O,margin:T,landscape:_,width:j,height:$,pageRanges:J,scale:L,preferCSSPageSize:F}=vy(x,"cm"),q=J?J.split(", "):[];await st(_e(this.mainFrame().isolatedRealm().evaluate(()=>document.fonts.ready)).pipe(yt(Rt(N))));const B=await st(_e(r(this,o).browsingContext.print({background:O,margin:T,orientation:_?"landscape":"portrait",page:{width:j,height:$},pageRanges:q,scale:L,shrinkToFit:!F})).pipe(yt(Rt(N)))),G=dp(B,!0);return await this._maybeWriteTypedArrayToFile(M,G),G}async createPDFStream(x){const N=await this.pdf(x);return new ReadableStream({start(M){M.enqueue(N),M.close()}})}async _screenshot(x){const{clip:N,type:M,captureBeyondViewport:O,quality:T}=x;if(x.omitBackground!==void 0&&x.omitBackground)throw new be("BiDi does not support 'omitBackground'.");if(x.optimizeForSpeed!==void 0&&x.optimizeForSpeed)throw new be("BiDi does not support 'optimizeForSpeed'.");if(x.fromSurface!==void 0&&!x.fromSurface)throw new be("BiDi does not support 'fromSurface'.");if(N!==void 0&&N.scale!==void 0&&N.scale!==1)throw new be("BiDi does not support 'scale' in 'clip'.");let _;if(N)if(O)_=N;else{const[$,J]=await this.evaluate(()=>{if(!window.visualViewport)throw new Error("window.visualViewport is not supported.");return[window.visualViewport.pageLeft,window.visualViewport.pageTop]});_={...N,x:N.x-$,y:N.y-J}}return await r(this,o).browsingContext.captureScreenshot({origin:O?"document":"viewport",format:{type:`image/${M}`,...T!==void 0?{quality:T/100}:{}},..._?{clip:{type:"box",..._}}:{}})}async createCDPSession(){return await r(this,o).createCDPSession()}async bringToFront(){await r(this,o).browsingContext.activate()}async evaluateOnNewDocument(x,...N){const M=gT(x,...N);return{identifier:await r(this,o).browsingContext.addPreloadScript(M)}}async removeScriptToEvaluateOnNewDocument(x){await r(this,o).browsingContext.removePreloadScript(x)}async exposeFunction(x,N){return await this.mainFrame().exposeFunction(x,"default"in N?N.default:N)}isDragInterceptionEnabled(){return!1}async setCacheEnabled(x){if(!r(this,a).browser().cdpSupported){await r(this,o).browsingContext.setCacheBehavior(x?"default":"bypass");return}await this._client().send("Network.setCacheDisabled",{cacheDisabled:!x})}async cookies(...x){const N=(x.length?x:[this.url()]).map(O=>new URL(O));return(await r(this,o).browsingContext.getCookies()).map(O=>um(O)).filter(O=>N.some(T=>vT(O,T)))}isServiceWorkerBypassed(){throw new be}target(){throw new be}waitForFileChooser(){throw new be}workers(){return[...r(this,u)]}async setRequestInterception(x){y(this,g,await E(this,h,Hl).call(this,["beforeRequestSent"],r(this,g),x))}async setExtraHTTPHeaders(x){const N={};for(const[M,O]of Object.entries(x))ee(jr(O),`Expected value of header "${M}" to be String, but "${typeof O}" is found.`),N[M.toLowerCase()]=O;this._extraHTTPHeaders=N,y(this,w,await E(this,h,Hl).call(this,["beforeRequestSent"],r(this,w),!!Object.keys(this._extraHTTPHeaders).length))}async authenticate(x){y(this,v,await E(this,h,Hl).call(this,["authRequired"],r(this,v),!!x)),this._credentials=x}setDragInterception(){throw new be}setBypassServiceWorker(){throw new be}async setOfflineMode(x){if(!r(this,a).browser().cdpSupported)throw new be;return r(this,p)||y(this,p,{offline:!1,upload:-1,download:-1,latency:0}),r(this,p).offline=x,await E(this,h,rw).call(this)}async emulateNetworkConditions(x){if(!r(this,a).browser().cdpSupported)throw new be;return r(this,p)||y(this,p,{offline:!1,upload:-1,download:-1,latency:0}),r(this,p).upload=x?x.upload:-1,r(this,p).download=x?x.download:-1,r(this,p).latency=x?x.latency:0,await E(this,h,rw).call(this)}async setCookie(...x){const N=this.url(),M=N.startsWith("http");for(const O of x){let T=O.url||"";!T&&M&&(T=N),ee(T!=="about:blank",`Blank page can not have cookie "${O.name}"`),ee(!String.prototype.startsWith.call(T||"","data:"),`Data URL page can not have cookie "${O.name}"`),ee(O.partitionKey===void 0||typeof O.partitionKey=="string","BiDi only allows domain partition keys");const _=URL.canParse(T)?new URL(T):void 0,j=O.domain??(_==null?void 0:_.hostname);ee(j!==void 0,"At least one of the url and domain needs to be specified");const $={domain:j,name:O.name,value:{type:"string",value:O.value},...O.path!==void 0?{path:O.path}:{},...O.httpOnly!==void 0?{httpOnly:O.httpOnly}:{},...O.secure!==void 0?{secure:O.secure}:{},...O.sameSite!==void 0?{sameSite:lm(O.sameSite)}:{},expiry:hm(O.expires),...dm(O,"sameParty","sourceScheme","priority","url")};O.partitionKey!==void 0?await this.browserContext().userContext.setCookie($,O.partitionKey):await r(this,o).browsingContext.setCookie($)}}async deleteCookie(...x){await Promise.all(x.map(async N=>{const M=N.url??this.url(),O=URL.canParse(M)?new URL(M):void 0,T=N.domain??(O==null?void 0:O.hostname);ee(T!==void 0,"At least one of the url and domain needs to be specified");const _={domain:T,name:N.name,...N.path!==void 0?{path:N.path}:{}};await r(this,o).browsingContext.deleteCookie(_)}))}async removeExposedFunction(x){await r(this,o).removeExposedFunction(x)}metrics(){throw new be}async goBack(x={}){return await E(this,h,iw).call(this,-1,x)}async goForward(x={}){return await E(this,h,iw).call(this,1,x)}waitForDevicePrompt(){throw new be}},s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakSet,bE=function(){r(this,o).browsingContext.on("closed",()=>{this.trustedEmitter.emit("close",void 0),this.trustedEmitter.removeAllListeners()}),this.trustedEmitter.on("workercreated",x=>{r(this,u).add(x)}),this.trustedEmitter.on("workerdestroyed",x=>{r(this,u).delete(x)})},m=new WeakMap,S=new WeakMap,g=new WeakMap,w=new WeakMap,v=new WeakMap,Hl=async function(x,N,M){if(M&&!N)return await r(this,o).browsingContext.addIntercept({phases:x});if(!M&&N){await r(this,o).browsingContext.userContext.browser.removeIntercept(N);return}return N},rw=async function(){r(this,p)&&await this._client().send("Network.emulateNetworkConditions",{offline:r(this,p).offline,latency:r(this,p).latency,uploadThroughput:r(this,p).upload,downloadThroughput:r(this,p).download})},iw=async function(x,N){const M=new AbortController;try{const[O]=await Promise.all([this.waitForNavigation({...N,signal:M.signal}),r(this,o).browsingContext.traverseHistory(x)]);return O}catch(O){if(M.abort(),Xt(O)&&O.message.includes("no such history entry"))return null;throw O}},(()=>{const x=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;i=[bh()],mT(D,null,i,{kind:"accessor",name:"trustedEmitter",static:!1,private:!1,access:{has:N=>"trustedEmitter"in N,get:N=>N.trustedEmitter,set:(N,M)=>{N.trustedEmitter=M}},metadata:x},e,t),x&&Object.defineProperty(D,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:x})})(),D})();function gT(n,...i){return`() => {${hp(n,...i)}}`}function wT(n,i){const e=n.domain.toLowerCase(),t=i.hostname.toLowerCase();return e===t?!0:e.startsWith(".")&&t.endsWith(e)}function yT(n,i){const e=i.pathname,t=n.path;return!!(e===t||e.startsWith(t)&&(t.endsWith("/")||e[t.length]==="/"))}function vT(n,i){const e=new URL(i);return ee(n!==void 0),wT(n,e)?yT(n,e):!1}function um(n,i=!1){const e=n[zh+"partitionKey"];function t(){return typeof e=="string"?{partitionKey:e}:typeof e=="object"&&e!==null?i?{partitionKey:{sourceOrigin:e.topLevelSite,hasCrossSiteAncestor:e.hasCrossSiteAncestor??!1}}:{partitionKey:e.topLevelSite}:{}}return{name:n.name,value:n.value.value,domain:n.domain,path:n.path,size:n.size,httpOnly:n.httpOnly,secure:n.secure,sameSite:ST(n.sameSite),expires:n.expiry??-1,session:n.expiry===void 0||n.expiry<=0,...bT(n,"sameParty","sourceScheme","partitionKeyOpaque","priority"),...t()}}const zh="goog:";function bT(n,...i){const e={};for(const t of i)n[zh+t]!==void 0&&(e[t]=n[zh+t]);return e}function dm(n,...i){const e={};for(const t of i)n[t]!==void 0&&(e[zh+t]=n[t]);return e}function ST(n){return n==="strict"?"Strict":n==="lax"?"Lax":"None"}function lm(n){return n==="Strict"?"strict":n==="Lax"?"lax":"none"}function hm(n){return[void 0,-1].includes(n)?void 0:n}function sS(n){if(n===void 0||typeof n=="string")return n;if(n.hasCrossSiteAncestor)throw new be("WebDriver BiDi does not support `hasCrossSiteAncestor` yet.");return n.sourceOrigin}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class CT extends lc{constructor(e){super();f(this,$o);y(this,$o,e)}asPage(){throw new be}url(){return""}createCDPSession(){throw new be}type(){return bt.BROWSER}browser(){return r(this,$o)}browserContext(){return r(this,$o).defaultBrowserContext()}opener(){throw new be}}$o=new WeakMap;class kT extends lc{constructor(e){super();f(this,li);y(this,li,e)}async page(){return r(this,li)}async asPage(){return ou.from(this.browserContext(),r(this,li).mainFrame().browsingContext)}url(){return r(this,li).url()}createCDPSession(){return r(this,li).createCDPSession()}type(){return bt.PAGE}browser(){return this.browserContext().browser()}browserContext(){return r(this,li).browserContext()}opener(){throw new be}}li=new WeakMap;class ET extends lc{constructor(e){super();f(this,hi);f(this,Ko);y(this,hi,e)}async page(){return r(this,Ko)===void 0&&y(this,Ko,ou.from(this.browserContext(),r(this,hi).browsingContext)),r(this,Ko)}async asPage(){return ou.from(this.browserContext(),r(this,hi).browsingContext)}url(){return r(this,hi).url()}createCDPSession(){return r(this,hi).createCDPSession()}type(){return bt.PAGE}browser(){return this.browserContext().browser()}browserContext(){return r(this,hi).page().browserContext()}opener(){throw new be}}hi=new WeakMap,Ko=new WeakMap;class xT extends lc{constructor(e){super();f(this,Uo);y(this,Uo,e)}async page(){throw new be}async asPage(){throw new be}url(){return r(this,Uo).url()}createCDPSession(){throw new be}type(){return bt.OTHER}browser(){return this.browserContext().browser()}browserContext(){return r(this,Uo).frame.page().browserContext()}opener(){throw new be}}Uo=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var PT=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},aS=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},_T=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},TT=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});let oS=(()=>{var s,a,o,c,u,d,p,SE,nw,m;let n=Sy,i,e=[],t=[];return m=class extends n{constructor(w,v,k){super();f(this,p);f(this,s,aS(this,e,new pe));f(this,a,aS(this,t));f(this,o);U(this,"userContext");f(this,c,new WeakMap);f(this,u,new Map);f(this,d,[]);y(this,a,w),this.userContext=v,y(this,o,k.defaultViewport)}static from(w,v,k){var b;const C=new m(w,v,k);return E(b=C,p,SE).call(b),C}get trustedEmitter(){return r(this,s)}set trustedEmitter(w){y(this,s,w)}targets(){return[...r(this,u).values()].flatMap(([w,v])=>[w,...v.values()])}async newPage(){const w={stack:[],error:void 0,hasError:!1};try{const v=_T(w,await this.waitForScreenshotOperations(),!1),k=await this.userContext.createBrowsingContext("tab"),C=r(this,c).get(k);if(!C)throw new Error("Page is not found");if(r(this,o))try{await C.setViewport(r(this,o))}catch{}return C}catch(v){w.error=v,w.hasError=!0}finally{TT(w)}}async close(){ee(this.userContext.id!==Hh.DEFAULT,"Default BrowserContext cannot be closed!");try{await this.userContext.remove()}catch(w){le(w)}r(this,u).clear()}browser(){return r(this,a)}async pages(){return[...this.userContext.browsingContexts].map(w=>r(this,c).get(w))}async overridePermissions(w,v){const k=new Set(v.map(C=>{if(!pp.get(C))throw new Error("Unknown permission: "+C);return C}));await Promise.all(Array.from(pp.keys()).map(C=>{const b=this.userContext.setPermissions(w,{name:C},k.has(C)?"granted":"denied");return r(this,d).push({origin:w,permission:C}),k.has(C)?b:b.catch(le)}))}async clearPermissionOverrides(){const w=r(this,d).map(({permission:v,origin:k})=>this.userContext.setPermissions(k,{name:v},"prompt").catch(le));y(this,d,[]),await Promise.all(w)}get id(){if(this.userContext.id!==Hh.DEFAULT)return this.userContext.id}async cookies(){return(await this.userContext.getCookies()).map(v=>um(v,!0))}async setCookie(...w){await Promise.all(w.map(async v=>{const k={domain:v.domain,name:v.name,value:{type:"string",value:v.value},...v.path!==void 0?{path:v.path}:{},...v.httpOnly!==void 0?{httpOnly:v.httpOnly}:{},...v.secure!==void 0?{secure:v.secure}:{},...v.sameSite!==void 0?{sameSite:lm(v.sameSite)}:{},expiry:hm(v.expires),...dm(v,"sameParty","sourceScheme","priority","url")};return await this.userContext.setCookie(k,sS(v.partitionKey))}))}},s=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakSet,SE=function(){for(const w of this.userContext.browsingContexts)E(this,p,nw).call(this,w);this.userContext.on("browsingcontext",({browsingContext:w})=>{const v=E(this,p,nw).call(this,w);if(w.originalOpener)for(const k of this.userContext.browsingContexts)k.id===w.originalOpener&&r(this,c).get(k).trustedEmitter.emit("popup",v)}),this.userContext.on("closed",()=>{this.trustedEmitter.removeAllListeners()})},nw=function(w){const v=ou.from(this,w);r(this,c).set(w,v),v.trustedEmitter.on("close",()=>{r(this,c).delete(w)});const k=new kT(v),C=new Map;return r(this,u).set(v,[k,C]),v.trustedEmitter.on("frameattached",b=>{const D=b,A=new ET(D);C.set(D,A),this.trustedEmitter.emit("targetcreated",A)}),v.trustedEmitter.on("framenavigated",b=>{const D=b,A=C.get(D);A===void 0?this.trustedEmitter.emit("targetchanged",k):this.trustedEmitter.emit("targetchanged",A)}),v.trustedEmitter.on("framedetached",b=>{const D=b,A=C.get(D);A!==void 0&&(C.delete(D),this.trustedEmitter.emit("targetdestroyed",A))}),v.trustedEmitter.on("workercreated",b=>{const D=b,A=new xT(D);C.set(D,A),this.trustedEmitter.emit("targetcreated",A)}),v.trustedEmitter.on("workerdestroyed",b=>{const D=b,A=C.get(D);A!==void 0&&(C.delete(b),this.trustedEmitter.emit("targetdestroyed",A))}),v.trustedEmitter.on("close",()=>{r(this,u).delete(v),this.trustedEmitter.emit("targetdestroyed",k)}),this.trustedEmitter.emit("targetcreated",k),v},(()=>{const w=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;i=[bh()],PT(m,null,i,{kind:"accessor",name:"trustedEmitter",static:!1,private:!1,access:{has:v=>"trustedEmitter"in v,get:v=>v.trustedEmitter,set:(v,k)=>{v.trustedEmitter=k}},metadata:w},e,t),w&&Object.defineProperty(m,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:w})})(),m})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var IT=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},ha=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},MT=function(n,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(s=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");s&&(t=function(){try{s.call(this)}catch(a){return Promise.reject(a)}}),n.stack.push({value:i,dispose:t,async:e})}else e&&n.stack.push({async:!0});return i},AT=function(n){return function(i){function e(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(n,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=n,t.suppressed=i,t});let RT=(()=>{var u,d,p,h,l,m,CE,kE,EE,sw,k;let n=pe,i=[],e,t,s,a,o,c;return k=class extends n{constructor(D){super();f(this,m);f(this,u,(IT(this,i),!1));f(this,d);f(this,p,new Qe);f(this,h,new Map);U(this,"session");f(this,l,new Map);this.session=D}static async from(D){var R;const A=new k(D);return await E(R=A,m,CE).call(R),A}get closed(){return r(this,u)}get defaultUserContext(){return r(this,h).get(Hh.DEFAULT)}get disconnected(){return r(this,d)!==void 0}get disposed(){return this.disconnected}get userContexts(){return r(this,h).values()}dispose(D,A=!1){y(this,u,A),y(this,d,D),this[we]()}async close(){try{await this.session.send("browser.close",{})}finally{this.dispose("Browser already closed.",!0)}}async addPreloadScript(D,A={}){var x;const{result:{script:R}}=await this.session.send("script.addPreloadScript",{functionDeclaration:D,...A,contexts:(x=A.contexts)==null?void 0:x.map(N=>N.id)});return R}async removeIntercept(D){await this.session.send("network.removeIntercept",{intercept:D})}async removePreloadScript(D){await this.session.send("script.removePreloadScript",{script:D})}async createUserContext(){const{result:{userContext:D}}=await this.session.send("browser.createUserContext",{});return E(this,m,sw).call(this,D)}[(e=[bi],t=[se(D=>r(D,d))],s=[se(D=>r(D,d))],a=[se(D=>r(D,d))],o=[se(D=>r(D,d))],c=[se(D=>r(D,d))],we)](){r(this,d)??y(this,d,"Browser was disconnected, probably because the session ended."),this.closed&&this.emit("closed",{reason:r(this,d)}),this.emit("disconnected",{reason:r(this,d)}),r(this,p).dispose(),super[we]()}},u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,l=new WeakMap,m=new WeakSet,CE=async function(){const D=r(this,p).use(new pe(this.session));D.once("ended",({reason:A})=>{this.dispose(A)}),D.on("script.realmCreated",A=>{A.type==="shared-worker"&&r(this,l).set(A.realm,em.from(this,A.realm,A.origin))}),await E(this,m,kE).call(this),await E(this,m,EE).call(this)},kE=async function(){const{result:{userContexts:D}}=await this.session.send("browser.getUserContexts",{});for(const A of D)E(this,m,sw).call(this,A.userContext)},EE=async function(){const D=new Set;let A;{const R={stack:[],error:void 0,hasError:!1};try{MT(R,new pe(this.session),!1).on("browsingContext.contextCreated",M=>{D.add(M.context)});const{result:N}=await this.session.send("browsingContext.getTree",{});A=N.contexts}catch(x){R.error=x,R.hasError=!0}finally{AT(R)}}for(const R of A)D.has(R.context)||this.session.emit("browsingContext.contextCreated",R),R.children&&A.push(...R.children)},sw=function(D){const A=Hh.create(this,D);r(this,h).set(A.id,A);const R=r(this,p).use(new pe(A));return R.once("closed",()=>{R.removeAllListeners(),r(this,h).delete(A.id)}),A},(()=>{const D=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;ha(k,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:A=>"dispose"in A,get:A=>A.dispose},metadata:D},null,i),ha(k,null,t,{kind:"method",name:"close",static:!1,private:!1,access:{has:A=>"close"in A,get:A=>A.close},metadata:D},null,i),ha(k,null,s,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:A=>"addPreloadScript"in A,get:A=>A.addPreloadScript},metadata:D},null,i),ha(k,null,a,{kind:"method",name:"removeIntercept",static:!1,private:!1,access:{has:A=>"removeIntercept"in A,get:A=>A.removeIntercept},metadata:D},null,i),ha(k,null,o,{kind:"method",name:"removePreloadScript",static:!1,private:!1,access:{has:A=>"removePreloadScript"in A,get:A=>A.removePreloadScript},metadata:D},null,i),ha(k,null,c,{kind:"method",name:"createUserContext",static:!1,private:!1,access:{has:A=>"createUserContext"in A,get:A=>A.createUserContext},metadata:D},null,i),D&&Object.defineProperty(k,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:D})})(),k})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var fm=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},fa=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0};let FT=(()=>{var p,h,l,m,S,xE,w;let n=pe,i=[],e,t=[],s=[],a,o,c,u,d;return w=class extends n{constructor(C,b){super();f(this,S);f(this,p,fm(this,i));f(this,h,new Qe);f(this,l);U(this,"browser");f(this,m,fm(this,t,void 0));fm(this,s),y(this,l,b),this.connection=C}static async from(C,b){var R;const{result:D}=await C.send("session.new",{capabilities:b}),A=new w(C,D);return await E(R=A,S,xE).call(R),A}get connection(){return r(this,m)}set connection(C){y(this,m,C)}get capabilities(){return r(this,l).capabilities}get disposed(){return this.ended}get ended(){return r(this,p)!==void 0}get id(){return r(this,l).sessionId}dispose(C){y(this,p,C),this[we]()}async send(C,b){return await this.connection.send(C,b)}async subscribe(C,b){await this.send("session.subscribe",{events:C,contexts:b})}async addIntercepts(C,b){await this.send("session.subscribe",{events:C,contexts:b})}async end(){try{await this.send("session.end",{})}finally{this.dispose("Session already ended.")}}[(e=[bh()],a=[bi],o=[se(C=>r(C,p))],c=[se(C=>r(C,p))],u=[se(C=>r(C,p))],d=[se(C=>r(C,p))],we)](){r(this,p)??y(this,p,"Session already destroyed, probably because the connection broke."),this.emit("ended",{reason:r(this,p)}),r(this,h).dispose(),super[we]()}},p=new WeakMap,h=new WeakMap,l=new WeakMap,m=new WeakMap,S=new WeakSet,xE=async function(){this.browser=await RT.from(this),r(this,h).use(this.browser).once("closed",({reason:D})=>{this.dispose(D)});const b=new WeakSet;this.on("browsingContext.fragmentNavigated",D=>{b.has(D)||(b.add(D),this.emit("browsingContext.navigationStarted",D),this.emit("browsingContext.fragmentNavigated",D))})},(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;fa(w,null,e,{kind:"accessor",name:"connection",static:!1,private:!1,access:{has:b=>"connection"in b,get:b=>b.connection,set:(b,D)=>{b.connection=D}},metadata:C},t,s),fa(w,null,a,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:b=>"dispose"in b,get:b=>b.dispose},metadata:C},null,i),fa(w,null,o,{kind:"method",name:"send",static:!1,private:!1,access:{has:b=>"send"in b,get:b=>b.send},metadata:C},null,i),fa(w,null,c,{kind:"method",name:"subscribe",static:!1,private:!1,access:{has:b=>"subscribe"in b,get:b=>b.subscribe},metadata:C},null,i),fa(w,null,u,{kind:"method",name:"addIntercepts",static:!1,private:!1,access:{has:b=>"addIntercepts"in b,get:b=>b.addIntercepts},metadata:C},null,i),fa(w,null,d,{kind:"method",name:"end",static:!1,private:!1,access:{has:b=>"end"in b,get:b=>b.end},metadata:C},null,i),C&&Object.defineProperty(w,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C})})(),w})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var DT=function(n,i,e,t,s,a){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",d=!i&&n?t.static?n:n.prototype:null,p=i||(d?Object.getOwnPropertyDescriptor(d,t.name):{}),h,l=!1,m=e.length-1;m>=0;m--){var S={};for(var g in t)S[g]=g==="access"?{}:t[g];for(var g in t.access)S.access[g]=t.access[g];S.addInitializer=function(v){if(l)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(v||null))};var w=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],S);if(c==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=o(w.get))&&(p.get=h),(h=o(w.set))&&(p.set=h),(h=o(w.init))&&s.unshift(h)}else(h=o(w))&&(c==="field"?s.unshift(h):p[u]=h)}d&&Object.defineProperty(d,t.name,p),l=!0},cS=function(n,i,e){for(var t=arguments.length>2,s=0;s<i.length;s++)e=t?i[s].call(n,e):i[s].call(n);return t?e:void 0},uS=function(n,i,e){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:e?"".concat(e," ",i):i})};let OT=(()=>{var a,o,c,qs,PE,p,h,l,m,S,g,w,_E,TE,IE,aw;let n=by,i,e=[],t=[],s;return a=class extends n{constructor(R,x){super();f(this,c);U(this,"protocol","webDriverBiDi");f(this,o,cS(this,e,new pe));f(this,p,cS(this,t));f(this,h);f(this,l);f(this,m);f(this,S,new WeakMap);f(this,g,new CT(this));f(this,w);y(this,p,x.process),y(this,h,x.closeCallback),y(this,l,R),y(this,m,x.defaultViewport),y(this,w,x.cdpConnection)}static async create(R){var M,O,T;const x=await FT.from(R.connection,{firstMatch:(M=R.capabilities)==null?void 0:M.firstMatch,alwaysMatch:{...(O=R.capabilities)==null?void 0:O.alwaysMatch,acceptInsecureCerts:R.acceptInsecureCerts,unhandledPromptBehavior:{default:"ignore"},webSocketUrl:!0,"goog:prerenderingDisabled":!0}});await x.subscribe(x.capabilities.browserName.toLocaleLowerCase().includes("firefox")?a.subscribeModules:[...a.subscribeModules,...a.subscribeCdpEvents]);const N=new a(x.browser,R);return E(T=N,c,_E).call(T),N}get cdpSupported(){return r(this,w)!==void 0}get cdpConnection(){return r(this,w)}async userAgent(){return r(this,l).session.capabilities.userAgent}get connection(){return r(this,l).session.connection}wsEndpoint(){return this.connection.url}async close(){var R;if(!this.connection.closed)try{await r(this,l).close(),await((R=r(this,h))==null?void 0:R.call(null))}catch(x){le(x)}finally{this.connection.dispose()}}get connected(){return!r(this,l).disconnected}process(){return r(this,p)??null}async createBrowserContext(R){const x=await r(this,l).createUserContext();return E(this,c,aw).call(this,x)}async version(){return`${r(this,c,TE)}/${r(this,c,IE)}`}browserContexts(){return[...r(this,l).userContexts].map(R=>r(this,S).get(R))}defaultBrowserContext(){return r(this,S).get(r(this,l).defaultUserContext)}newPage(){return this.defaultBrowserContext().newPage()}targets(){return[r(this,g),...this.browserContexts().flatMap(R=>R.targets())]}target(){return r(this,g)}async disconnect(){try{await r(this,l).session.end()}catch(R){le(R)}finally{this.connection.dispose()}}get debugInfo(){return{pendingProtocolErrors:this.connection.getPendingProtocolErrors()}}},o=new WeakMap,c=new WeakSet,qs=function(){return s.get.call(this)},PE=function(R){return s.set.call(this,R)},p=new WeakMap,h=new WeakMap,l=new WeakMap,m=new WeakMap,S=new WeakMap,g=new WeakMap,w=new WeakMap,_E=function(){var R;for(const x of r(this,l).userContexts)E(this,c,aw).call(this,x);r(this,l).once("disconnected",()=>{r(this,c,qs).emit("disconnected",void 0),r(this,c,qs).removeAllListeners()}),(R=r(this,p))==null||R.once("close",()=>{r(this,l).dispose("Browser process exited.",!0),this.connection.dispose()})},TE=function(){return r(this,l).session.capabilities.browserName},IE=function(){return r(this,l).session.capabilities.browserVersion},aw=function(R){const x=oS.from(this,R,{defaultViewport:r(this,m)});return r(this,S).set(R,x),x.trustedEmitter.on("targetcreated",N=>{r(this,c,qs).emit("targetcreated",N)}),x.trustedEmitter.on("targetchanged",N=>{r(this,c,qs).emit("targetchanged",N)}),x.trustedEmitter.on("targetdestroyed",N=>{r(this,c,qs).emit("targetdestroyed",N)}),x},(()=>{const R=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;i=[bh()],DT(a,s={get:uS(function(){return r(this,o)},"#trustedEmitter","get"),set:uS(function(x){y(this,o,x)},"#trustedEmitter","set")},i,{kind:"accessor",name:"#trustedEmitter",static:!1,private:!0,access:{has:x=>Mt(c,x),get:x=>r(x,c,qs),set:(x,N)=>{y(x,c,N,PE)}},metadata:R},e,t),R&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:R})})(),U(a,"subscribeModules",["browsingContext","network","log","script"]),U(a,"subscribeCdpEvents",["goog:cdp.Debugger.scriptParsed","goog:cdp.CSS.styleSheetAdded","goog:cdp.Runtime.executionContextsCleared","goog:cdp.Tracing.tracingComplete","goog:cdp.Network.requestWillBeSent","goog:cdp.Debugger.scriptParsed","goog:cdp.Page.screencastFrame"]),a})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const dS=Object.freeze(Object.defineProperty({__proto__:null,BidiBrowser:OT,BidiBrowserContext:oS,BidiConnection:Kb,BidiElementHandle:nu,BidiFrame:Qb,BidiFrameRealm:xi,BidiHTTPRequest:sm,BidiHTTPResponse:zb,BidiJSHandle:Ei,BidiKeyboard:Zb,BidiMouse:eS,BidiPage:ou,BidiRealm:am,BidiTouchscreen:tS,BidiWorkerRealm:Wh,bidiToPuppeteerCookie:um,cdpSpecificCookiePropertiesFromPuppeteerToBidi:dm,connectBidiOverCdp:B_,convertCookiesExpiryCdpToBiDi:hm,convertCookiesPartitionKeyFromPuppeteerToBiDi:sS,convertCookiesSameSiteCdpToBiDi:lm,requests:nm},Symbol.toStringTag,{value:"Module"}));var pm,lS;function NT(){return lS||(lS=1,pm=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),pm}var LT=NT();const BT=zf(LT);/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Fm=class Fm{constructor(i){f(this,fi);U(this,"onmessage");U(this,"onclose");y(this,fi,i),r(this,fi).addEventListener("message",e=>{this.onmessage&&this.onmessage.call(null,e.data)}),r(this,fi).addEventListener("close",()=>{this.onclose&&this.onclose.call(null)}),r(this,fi).addEventListener("error",()=>{})}static create(i,e){return new Promise((t,s)=>{const a=new BT(i,[],{followRedirects:!0,perMessageDeflate:!1,allowSynchronousEvents:!1,maxPayload:268435456,headers:{"User-Agent":`Puppeteer ${dy}`,...e}});a.addEventListener("open",()=>t(new Fm(a))),a.addEventListener("error",s)})}send(i){r(this,fi).send(i)}close(){r(this,fi).close()}};fi=new WeakMap;let mm=Fm;const jT=Object.freeze(Object.defineProperty({__proto__:null,NodeWebSocketTransport:mm},Symbol.toStringTag,{value:"Module"}));return F1}();
background;
