var background=function(){"use strict";var LT=Object.defineProperty;var BT=Object.getPrototypeOf;var jT=Reflect.get;var Mm=_e=>{throw TypeError(_e)};var qT=(_e,be,Oe)=>be in _e?LT(_e,be,{enumerable:!0,configurable:!0,writable:!0,value:Oe}):_e[be]=Oe;var W=(_e,be,Oe)=>qT(_e,typeof be!="symbol"?be+"":be,Oe),Im=(_e,be,Oe)=>be.has(_e)||Mm("Cannot "+Oe),Tt=(_e,be)=>Object(be)!==be?Mm('Cannot use the "in" operator on this value'):_e.has(be),r=(_e,be,Oe)=>(Im(_e,be,"read from private field"),Oe?Oe.call(_e):be.get(_e)),f=(_e,be,Oe)=>be.has(_e)?Mm("Cannot add the same private member more than once"):be instanceof WeakSet?be.add(_e):be.set(_e,Oe),y=(_e,be,Oe,us)=>(Im(_e,be,"write to private field"),us?us.call(_e,Oe):be.set(_e,Oe),Oe),k=(_e,be,Oe)=>(Im(_e,be,"access private method"),Oe);var Nn=(_e,be,Oe,us)=>({set _($d){y(_e,be,$d,Oe)},get _(){return r(_e,be,us)}}),xS=(_e,be,Oe)=>jT(BT(_e),Oe,be);var cS,uS,Ci,jr,lS,dS,ki,qr,$r,br,hS,cu,uu,Ps,_s,Ei,xi,Ms,lu,Uh,fa,du,hu,Am,pa,Is,fu,pu,fS,Pi,ma,mu,As,ga,gu,wu,yu,vu,wa,ya,Rs,Rm,PS,sr,Ds,Fs,Os,Su,Ns,Ls,Sr,AS,RS,DS,FS,va,ba,yt,Sa,Ca,ka,Ea,zh,xa,Pa,ff,Kr,Bs,Ur,_a,Cu,_i,js,ku,Eu,qs,Lt,$s,Ta,xu,Ti,Pu,pS,_u,Mi,Tu,Ma,Mu,Ks,Iu,Us,Bt,Au,Hs,Ru,Hr,NS,LS,Bm,Wr,Du,Fu,Ou,Nu,Lu,Ia,Aa,Ra,Bu,Ws,Jt,Xh,ju,qu,zs,Da,$u,Vs,Fa,zr,nr,Oa,Na,Ku,Uu,Cr,Gs,La,kt,Xs,Ba,kr,ja,Hu,jm,Js,Ys,Et,Qs,Zs,en,qa,Wu,$a,Ka,Ua,BS,jS,jt,tn,Ii,rn,Ha,zu,Wa,qS,$S,Vu,sn,za,Gu,Xu,Ju,Va,qt,Yu,nn,an,Ga,Xa,Qu,Jm,ar,Ja,Vr,Jh,KS,Ya,Rt,Qa,Ai,on,or,Za,Zu,cn,Yh,Dt,HS,WS,zS,el,Ri,Ym,Qm,Er,cr,Di,vt,VS,GS,XS,pf,mf,tl,Fi,eo,Oi,un,rl,Ni,il,sl,nl,al,ol,Gr,Ke,JS,YS,QS,ZS,eC,tC,gf,Ln,ln,to,Li,ro,io,cl,xr,ul,ll,dl,hl,fl,pl,ml,gl,wl,yl,vl,bl,Sl,Cl,kl,Pr,so,no,El,xl,Pl,_l,Tl,Ml,Il,Al,Qh,nC,Bi,ji,qi,$i,dn,hn,ao,Pe,fn,Ki,oo,_r,Xr,Ui,bt,co,Rl,Zh,Hi,oe,aC,Zm,cs,wf,eg,yf,Od,oC,cC,uC,tg,lC,Uo,dC,hC,rg,fC,pC,vf,mC,ig,gC,sg,ng,Dl,Wi,uo,Fl,Yt,pn,lo,mn,Ol,xt,Ce,ag,wC,yC,vC,og,cg,ug,bC,SC,CC,kC,Ho,zi,ho,Vi,lg,dg,$t,ur,fo,Ve,Ht,gn,EC,bf,Nl,Ll,Jr,Gi,wn,po,Bl,Yr,mo,jl,Tr,Qr,ql,$l,Kl,Xi,Te,lr,Ji,yn,Yi,go,wo,Be,Ye,yo,Qi,vo,bo,So,vn,Zr,ef,Ul,Hl,ye,xC,PC,_C,hg,Wl,Co,TC,MC,IC,AC,RC,fg,pg,DC,FC,mg,OC,gg,ei,ti,Kt,Zi,es,Mr,ko,ts,Eo,mS,zl,xo,ct,rs,ut,bn,Vl,is,Sn,Cn,ss,Gl,kn,Xl,Po,tf,Ft,wg,yg,Jl,Yl,Ql,Zl,rf,Wo,sf,_o,ed,lt,td,rd,To,ri,ii,Qe,id,En,NC,nf,sd,nd,ad,od,vg,xn,cd,Pt,Wt,si,gS,wS,Mo,ns,ni,ud,Ir,Io,ld,_n,ai,dd,hd,Tn,Mn,Ao,In,fd,pd,Ro,md,af,Q0,gd,of,Z0,wd,cf,ek,An,nk,Wg,yd,Ar,Do,as,vd,Fo,Oo,bd,Sd,Rr,ak,ok,uf,ck,uk,Rn,Cd,dt,He,Ut,dk,zg,Vg,Gg,kd,lf,No,hk,fk,Ed,Xg,Lo,df,pk,Bo,xd,Pd,_d,oi,Dr,Dn,Td,Md,Id,Fn,On,Ad,jo,Rd,qo,ci,ui,$o,Ko,li;function _e(s){return s==null||typeof s=="function"?{main:s}:s}const be="BOSS",Oe="51JOB",us="ZHILIAN",$d="LAGOU",rw="LIEPIN",Kd="AUTOMATE_ERROR_UNKNOW",fi="AUTOMATE_ERROR_HUMAN_VALID",Pk=()=>!1,ht=[];for(let s=0;s<256;++s)ht.push((s+256).toString(16).slice(1));function _k(s,i=0){return(ht[s[i+0]]+ht[s[i+1]]+ht[s[i+2]]+ht[s[i+3]]+"-"+ht[s[i+4]]+ht[s[i+5]]+"-"+ht[s[i+6]]+ht[s[i+7]]+"-"+ht[s[i+8]]+ht[s[i+9]]+"-"+ht[s[i+10]]+ht[s[i+11]]+ht[s[i+12]]+ht[s[i+13]]+ht[s[i+14]]+ht[s[i+15]]).toLowerCase()}let jf;const Tk=new Uint8Array(16);function Mk(){if(!jf){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jf=crypto.getRandomValues.bind(crypto)}return jf(Tk)}const iw={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Ik(s,i,e){var n;if(iw.randomUUID&&!i&&!s)return iw.randomUUID();s=s||{};const t=s.random??((n=s.rng)==null?void 0:n.call(s))??Mk();if(t.length<16)throw new Error("Random bytes length must be >= 16");return t[6]=t[6]&15|64,t[8]=t[8]&63|128,_k(t)}const sw="Iv23liutsRB7F1OJkVIL",Ak="762e843b1d346533626fe2e9362834c30ad1408c",Rk="https://github.com/apps/job-hunting-github-app/installations/new",Dk="https://github.com/login/oauth/authorize",Fk="https://github.com/login/oauth/access_token",Ok="https://api.github.com/user",Nk="https://github.com/lastsunday/job-hunting-github-app/blob/main/INSTALL",Lk=3e4,nw="KEY_GITHUB_USER",aw="KEY_GITHUB_OAUTH_TOKEN";var qf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $f(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function ow(s){if(s.__esModule)return s;var i=s.default;if(typeof i=="function"){var e=function t(){return this instanceof t?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};e.prototype=i.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(s).forEach(function(t){var n=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return s[t]}})}),e}var Ud={exports:{}},Bk=Ud.exports,cw;function jk(){return cw||(cw=1,function(s,i){(function(e,t){s.exports=t()})(Bk,function(){var e=1e3,t=6e4,n=36e5,a="millisecond",o="second",c="minute",u="hour",l="day",p="week",h="month",d="quarter",m="year",b="date",w="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,S=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,E={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var j=["th","st","nd","rd"],O=K%100;return"["+K+(j[(O-20)%10]||j[O]||j[0])+"]"}},v=function(K,j,O){var D=String(K);return!D||D.length>=j?K:""+Array(j+1-D.length).join(O)+K},C={s:v,z:function(K){var j=-K.utcOffset(),O=Math.abs(j),D=Math.floor(O/60),N=O%60;return(j<=0?"+":"-")+v(D,2,"0")+":"+v(N,2,"0")},m:function K(j,O){if(j.date()<O.date())return-K(O,j);var D=12*(O.year()-j.year())+(O.month()-j.month()),N=j.clone().add(D,h),$=O-N<0,B=j.clone().add(D+($?-1:1),h);return+(-(D+(O-N)/($?N-B:B-N))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:h,y:m,w:p,d:l,D:b,h:u,m:c,s:o,ms:a,Q:d}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},A="en",F={};F[A]=E;var R="$isDayjsObject",P=function(K){return K instanceof I||!(!K||!K[R])},T=function K(j,O,D){var N;if(!j)return A;if(typeof j=="string"){var $=j.toLowerCase();F[$]&&(N=$),O&&(F[$]=O,N=$);var B=j.split("-");if(!N&&B.length>1)return K(B[0])}else{var X=j.name;F[X]=j,N=X}return!D&&N&&(A=N),N||!D&&A},q=function(K,j){if(P(K))return K.clone();var O=typeof j=="object"?j:{};return O.date=K,O.args=arguments,new I(O)},L=C;L.l=T,L.i=P,L.w=function(K,j){return q(K,{locale:j.$L,utc:j.$u,x:j.$x,$offset:j.$offset})};var I=function(){function K(O){this.$L=T(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[R]=!0}var j=K.prototype;return j.parse=function(O){this.$d=function(D){var N=D.date,$=D.utc;if(N===null)return new Date(NaN);if(L.u(N))return new Date;if(N instanceof Date)return new Date(N);if(typeof N=="string"&&!/Z$/i.test(N)){var B=N.match(g);if(B){var X=B[2]-1||0,Y=(B[7]||"0").substring(0,3);return $?new Date(Date.UTC(B[1],X,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Y)):new Date(B[1],X,B[3]||1,B[4]||0,B[5]||0,B[6]||0,Y)}}return new Date(N)}(O),this.init()},j.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},j.$utils=function(){return L},j.isValid=function(){return this.$d.toString()!==w},j.isSame=function(O,D){var N=q(O);return this.startOf(D)<=N&&N<=this.endOf(D)},j.isAfter=function(O,D){return q(O)<this.startOf(D)},j.isBefore=function(O,D){return this.endOf(D)<q(O)},j.$g=function(O,D,N){return L.u(O)?this[D]:this.set(N,O)},j.unix=function(){return Math.floor(this.valueOf()/1e3)},j.valueOf=function(){return this.$d.getTime()},j.startOf=function(O,D){var N=this,$=!!L.u(D)||D,B=L.p(O),X=function(Me,ae){var x=L.w(N.$u?Date.UTC(N.$y,ae,Me):new Date(N.$y,ae,Me),N);return $?x:x.endOf(l)},Y=function(Me,ae){return L.w(N.toDate()[Me].apply(N.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(ae)),N)},le=this.$W,V=this.$M,z=this.$D,ne="set"+(this.$u?"UTC":"");switch(B){case m:return $?X(1,0):X(31,11);case h:return $?X(1,V):X(0,V+1);case p:var fe=this.$locale().weekStart||0,ce=(le<fe?le+7:le)-fe;return X($?z-ce:z+(6-ce),V);case l:case b:return Y(ne+"Hours",0);case u:return Y(ne+"Minutes",1);case c:return Y(ne+"Seconds",2);case o:return Y(ne+"Milliseconds",3);default:return this.clone()}},j.endOf=function(O){return this.startOf(O,!1)},j.$set=function(O,D){var N,$=L.p(O),B="set"+(this.$u?"UTC":""),X=(N={},N[l]=B+"Date",N[b]=B+"Date",N[h]=B+"Month",N[m]=B+"FullYear",N[u]=B+"Hours",N[c]=B+"Minutes",N[o]=B+"Seconds",N[a]=B+"Milliseconds",N)[$],Y=$===l?this.$D+(D-this.$W):D;if($===h||$===m){var le=this.clone().set(b,1);le.$d[X](Y),le.init(),this.$d=le.set(b,Math.min(this.$D,le.daysInMonth())).$d}else X&&this.$d[X](Y);return this.init(),this},j.set=function(O,D){return this.clone().$set(O,D)},j.get=function(O){return this[L.p(O)]()},j.add=function(O,D){var N,$=this;O=Number(O);var B=L.p(D),X=function(V){var z=q($);return L.w(z.date(z.date()+Math.round(V*O)),$)};if(B===h)return this.set(h,this.$M+O);if(B===m)return this.set(m,this.$y+O);if(B===l)return X(1);if(B===p)return X(7);var Y=(N={},N[c]=t,N[u]=n,N[o]=e,N)[B]||1,le=this.$d.getTime()+O*Y;return L.w(le,this)},j.subtract=function(O,D){return this.add(-1*O,D)},j.format=function(O){var D=this,N=this.$locale();if(!this.isValid())return N.invalidDate||w;var $=O||"YYYY-MM-DDTHH:mm:ssZ",B=L.z(this),X=this.$H,Y=this.$m,le=this.$M,V=N.weekdays,z=N.months,ne=N.meridiem,fe=function(ae,x,M,H){return ae&&(ae[x]||ae(D,$))||M[x].slice(0,H)},ce=function(ae){return L.s(X%12||12,ae,"0")},Me=ne||function(ae,x,M){var H=ae<12?"AM":"PM";return M?H.toLowerCase():H};return $.replace(S,function(ae,x){return x||function(M){switch(M){case"YY":return String(D.$y).slice(-2);case"YYYY":return L.s(D.$y,4,"0");case"M":return le+1;case"MM":return L.s(le+1,2,"0");case"MMM":return fe(N.monthsShort,le,z,3);case"MMMM":return fe(z,le);case"D":return D.$D;case"DD":return L.s(D.$D,2,"0");case"d":return String(D.$W);case"dd":return fe(N.weekdaysMin,D.$W,V,2);case"ddd":return fe(N.weekdaysShort,D.$W,V,3);case"dddd":return V[D.$W];case"H":return String(X);case"HH":return L.s(X,2,"0");case"h":return ce(1);case"hh":return ce(2);case"a":return Me(X,Y,!0);case"A":return Me(X,Y,!1);case"m":return String(Y);case"mm":return L.s(Y,2,"0");case"s":return String(D.$s);case"ss":return L.s(D.$s,2,"0");case"SSS":return L.s(D.$ms,3,"0");case"Z":return B}return null}(ae)||B.replace(":","")})},j.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},j.diff=function(O,D,N){var $,B=this,X=L.p(D),Y=q(O),le=(Y.utcOffset()-this.utcOffset())*t,V=this-Y,z=function(){return L.m(B,Y)};switch(X){case m:$=z()/12;break;case h:$=z();break;case d:$=z()/3;break;case p:$=(V-le)/6048e5;break;case l:$=(V-le)/864e5;break;case u:$=V/n;break;case c:$=V/t;break;case o:$=V/e;break;default:$=V}return N?$:L.a($)},j.daysInMonth=function(){return this.endOf(h).$D},j.$locale=function(){return F[this.$L]},j.locale=function(O,D){if(!O)return this.$L;var N=this.clone(),$=T(O,D,!0);return $&&(N.$L=$),N},j.clone=function(){return L.w(this.$d,this)},j.toDate=function(){return new Date(this.valueOf())},j.toJSON=function(){return this.isValid()?this.toISOString():null},j.toISOString=function(){return this.$d.toISOString()},j.toString=function(){return this.$d.toUTCString()},K}(),_=I.prototype;return q.prototype=_,[["$ms",a],["$s",o],["$m",c],["$H",u],["$W",l],["$M",h],["$y",m],["$D",b]].forEach(function(K){_[K[1]]=function(j){return this.$g(j,K[0],K[1])}}),q.extend=function(K,j){return K.$i||(K(j,I,q),K.$i=!0),q},q.locale=T,q.isDayjs=P,q.unix=function(K){return q(1e3*K)},q.en=F[A],q.Ls=F,q.p={},q})}(Ud)),Ud.exports}var qk=jk();const Kf=$f(qk),uw="YYYY-MM-DD HH:mm:ss.SSS";function Mt(s){console.log(`${Kf(new Date).format(uw)} ${s}`)}function KT(s){}function Or(s){console.error(`${Kf(new Date).format(uw)} ${s}`),console.error(s)}const lw="CONTENT_SCRIPT",dw="BACKGROUND",hw="OFFSCREEN",fw="WEB_WORKER",pw=[{regex:/.*worker.*\.js/,world:fw},{regex:/.*offscreen.*\.html/,world:hw},{regex:/.*background.*\.js/,world:dw}],$k=(()=>{let s=lw;return(()=>{const t=location.pathname;Mt(`[App] location pathname = ${t}`);for(let n=0;n<pw.length;n++){const{regex:a,world:o}=pw[n];a.test(t)&&(s=o)}Mt(`[App] world = ${s}`)})(),{setWorld(t){s=t},getWorld(){return s},isWorld(t){return s==t}}})(),ls=lw,zt=dw,$n=hw,Kn=fw,Kk=()=>$k.getWorld(),Uf=new Map;let UT=0;function De(s,i,{onMessageCallback:e=null,invokeEnv:t=null}={}){t??(t=Kk());let n=zk();return new Promise((o,c)=>{try{Hk(n,{resolve:o,reject:c});let u={action:s,callbackId:n,param:i,from:ls,to:zt,invokeEnv:t};if(Pk(),e&&e(u),t==ls)""+u.from+u.to+u.action+u.invokeEnv+u.callbackId+u.error;else if(t==zt)u.from=zt,u.to=$n,""+u.from+u.to+u.action+u.invokeEnv+u.callbackId+u.error;else if(t==Kn)u.from=Kn,u.to=$n,""+u.from+u.to+u.action+u.invokeEnv+u.callbackId+u.error;else{c(`unknow invokeEnv = ${t}`);return}Uk(u)}catch(u){Or(u),c(u)}})}const Yo=1024*1024*50;async function Uk(s){let i=s.param;if(typeof i=="string"&&i.length>Yo){let e=i.length,t=parseInt(e/Yo);e%Yo>0&&(t+=1);for(let n=0;n<t;n++){let a=n*Yo,o=n+1;if(s.chunk=o,s.chunkTotal=t,o==t)s.param=i.slice(a,e),await Hf(s);else{let c=o*Yo;s.param=i.slice(a,c),await Hf(s)}}}else await Hf(s)}async function Hf(s){s.invokeEnv==Kn?postMessage({data:s}):await chrome.runtime.sendMessage(s)}function Hk(s,i){Uf.set(s,i)}function Wk(s){let i=Uf.get(s);return Uf.delete(s),i}function zk(){return Ik()}function pi(s,i){s.invokeEnv==Kn?(s.from=zt,s.to=$n):(s.from=zt,s.to=ls),""+s.from+s.to+s.action+s.invokeEnv+s.callbackId+s.error;let e=JSON.parse(JSON.stringify(s));e.data=i,s.tabId?chrome.tabs.sendMessage(s.tabId,e):chrome.runtime.sendMessage(e)}function Zt(s,i){s.invokeEnv==Kn?(s.from=zt,s.to=$n):(s.from=zt,s.to=ls),Or("[Message][send]["+s.from+" -> "+s.to+"] message [action="+s.action+",invokeEnv="+s.invokeEnv+",callbackId="+s.callbackId+",error="+s.error+"]"),s.tabId?chrome.tabs.sendMessage(s.tabId,s):chrome.runtime.sendMessage(s)}const Vk=(s,i,e)=>{if(s){if(s.from==ls&&s.to==zt){i.tab&&(s.tabId=i.tab.id),""+s.from+s.to+s.action+s.invokeEnv+s.callbackId+s.error;let t=s.action;e.has(t)?e.get(t)(s,s.param):(s.from=zt,s.to=$n,""+s.from+s.to+s.action+s.invokeEnv+s.callbackId+s.error,chrome.runtime.sendMessage(s))}else if(s.from==$n&&s.to==zt){const t=s.invokeEnv;if(""+s.from+s.to+s.action+t+s.callbackId+s.error,t==ls)s.from=zt,s.to=ls,""+s.from+s.to+s.action+t+s.callbackId+s.error,s.tabId?chrome.tabs.sendMessage(s.tabId,s):chrome.runtime.sendMessage(s);else if(t==zt){let n=Wk(s.callbackId);n?s.error?(s.message=s.error,n.reject(s)):n.resolve(s):Or(`callbackId = ${s.callbackId} lost callback promiseHook`)}else if(t==Kn){""+s.from+s.to+s.action+t+s.callbackId+s.error;let n=s.action;e.get(n)(s,s.param)}}}};function Gk(){return{mergeServiceMethod:(i,e)=>{let t=Object.keys(e);for(let n=0;n<t.length;n++){let a=t[n];i.set(a,e[a])}}}}class mw{constructor(){W(this,"accessToken");W(this,"expiresIn");W(this,"refreshToken");W(this,"refreshTokenExpiresIn");W(this,"scope");W(this,"tokenType")}}const gw={batchAddOrUpdateJobBrowse:async function(s){return await De(this.batchAddOrUpdateJobBrowse.name,s)},batchAddOrUpdateJob:async function(s){return await De(this.batchAddOrUpdateJob.name,s)},searchJob:async function(s){return(await De(this.searchJob.name,s)).data},getJobBrowseInfoByIds:async function(s){return(await De(this.getJobBrowseInfoByIds.name,s)).data},statisticJobBrowse:async function(){return(await De(this.statisticJobBrowse.name,{})).data},statisticJobSearchGroupByAvgSalary:async function(s){return(await De(this.statisticJobSearchGroupByAvgSalary.name,s)).data},getJobByDetailUrl:async function(s){return(await De(this.getJobByDetailUrl.name,s)).data},addJobBrowseDetailHistory:async function(s){return await De(this.addJobBrowseDetailHistory.name,s)},jobGetByIds:async function(s){return(await De(this.jobGetByIds.name,s)).data},jobTagAddOrUpdate:async function(s){return De(this.jobTagAddOrUpdate.name,s)},jobTagBatchAddOrUpdate:async function(s){return De(this.jobTagBatchAddOrUpdate.name,s)},jobTagGetAllDTOByJobId:async function(s){return(await De(this.jobTagGetAllDTOByJobId.name,s)).data},jobTagGetAllDTOByJobIds:async function(s){return(await De(this.jobTagGetAllDTOByJobIds.name,s)).data},jobTagSearch:async function(s){return(await De(this.jobTagSearch.name,s)).data},jobTagDeleteByJobIds:async function(s){return De(this.jobTagDeleteByJobIds.name,s)},jobTagNameStatistic:async function(s){return(await De(this.jobTagNameStatistic.name,s)).data},jobStatisticGroupByPublishDate:async function(s){return(await De(this.jobStatisticGroupByPublishDate.name,s)).data},jobStatisticGroupByPlatform:async function(s){return(await De(this.jobStatisticGroupByPlatform.name,s)).data},jobTagExport:async function(s){return(await De(this.jobTagExport.name,s)).data},jobStatisticJobCompanyTagGroupByPlatform:async function(s){return(await De(this.jobStatisticJobCompanyTagGroupByPlatform.name,s)).data},jobStatisticJobCompanyTagGroupByCompany:async function(s){return(await De(this.jobStatisticJobCompanyTagGroupByCompany.name,s)).data}},Hd={getConfigByKey:async function(s){return(await De(this.getConfigByKey.name,s)).data},getAllConfig:async function(){return(await De(this.getAllConfig.name,{})).data},addOrUpdateConfig:async function(s){return await De(this.addOrUpdateConfig.name,s)}},Xk={appBackgroundTaskRun:async function(s){return(await De(this.appBackgroundTaskRun.name,s)).data}};async function Jk(s,i){return(await De("httpFetchGetText",s,{onMessageCallback:t=>{i(()=>{ww(t.callbackId)})}})).data}async function Yk(s,i){return(await De("httpFetchJson",s,{onMessageCallback:t=>{i&&i(()=>{ww(t.callbackId)})}})).data}async function ww(s){await De("httpFetchGetTextAbort",s)}class yw{constructor(){W(this,"login");W(this,"id");W(this,"nodeId");W(this,"avatarUrl");W(this,"gravatarId");W(this,"url");W(this,"htmlUrl");W(this,"followersUrl");W(this,"followingUrl");W(this,"gistsUrl");W(this,"starredUrl");W(this,"subscriptionsUrl");W(this,"organizationsUrl");W(this,"reposUrl");W(this,"eventsUrl");W(this,"receivedEventsUrl");W(this,"type");W(this,"siteAdmin");W(this,"name");W(this,"company");W(this,"blog");W(this,"location");W(this,"email");W(this,"hireable");W(this,"bio");W(this,"twitterUsername");W(this,"publicRepos");W(this,"publicGists");W(this,"followers");W(this,"following");W(this,"createdAt");W(this,"updatedAt")}}var Wd={exports:{}};function Qk(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zd={exports:{}};const vw=ow(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Zk=zd.exports,bw;function eE(){return bw||(bw=1,function(s,i){(function(e,t){s.exports=t()})(Zk,function(){var e=e||function(t,n){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof qf<"u"&&qf.crypto&&(a=qf.crypto),!a&&typeof Qk=="function")try{a=vw}catch{}var o=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},c=Object.create||function(){function E(){}return function(v){var C;return E.prototype=v,C=new E,E.prototype=null,C}}(),u={},l=u.lib={},p=l.Base=function(){return{extend:function(E){var v=c(this);return E&&v.mixIn(E),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var E=this.extend();return E.init.apply(E,arguments),E},init:function(){},mixIn:function(E){for(var v in E)E.hasOwnProperty(v)&&(this[v]=E[v]);E.hasOwnProperty("toString")&&(this.toString=E.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),h=l.WordArray=p.extend({init:function(E,v){E=this.words=E||[],v!=n?this.sigBytes=v:this.sigBytes=E.length*4},toString:function(E){return(E||m).stringify(this)},concat:function(E){var v=this.words,C=E.words,A=this.sigBytes,F=E.sigBytes;if(this.clamp(),A%4)for(var R=0;R<F;R++){var P=C[R>>>2]>>>24-R%4*8&255;v[A+R>>>2]|=P<<24-(A+R)%4*8}else for(var T=0;T<F;T+=4)v[A+T>>>2]=C[T>>>2];return this.sigBytes+=F,this},clamp:function(){var E=this.words,v=this.sigBytes;E[v>>>2]&=4294967295<<32-v%4*8,E.length=t.ceil(v/4)},clone:function(){var E=p.clone.call(this);return E.words=this.words.slice(0),E},random:function(E){for(var v=[],C=0;C<E;C+=4)v.push(o());return new h.init(v,E)}}),d=u.enc={},m=d.Hex={stringify:function(E){for(var v=E.words,C=E.sigBytes,A=[],F=0;F<C;F++){var R=v[F>>>2]>>>24-F%4*8&255;A.push((R>>>4).toString(16)),A.push((R&15).toString(16))}return A.join("")},parse:function(E){for(var v=E.length,C=[],A=0;A<v;A+=2)C[A>>>3]|=parseInt(E.substr(A,2),16)<<24-A%8*4;return new h.init(C,v/2)}},b=d.Latin1={stringify:function(E){for(var v=E.words,C=E.sigBytes,A=[],F=0;F<C;F++){var R=v[F>>>2]>>>24-F%4*8&255;A.push(String.fromCharCode(R))}return A.join("")},parse:function(E){for(var v=E.length,C=[],A=0;A<v;A++)C[A>>>2]|=(E.charCodeAt(A)&255)<<24-A%4*8;return new h.init(C,v)}},w=d.Utf8={stringify:function(E){try{return decodeURIComponent(escape(b.stringify(E)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(E){return b.parse(unescape(encodeURIComponent(E)))}},g=l.BufferedBlockAlgorithm=p.extend({reset:function(){this._data=new h.init,this._nDataBytes=0},_append:function(E){typeof E=="string"&&(E=w.parse(E)),this._data.concat(E),this._nDataBytes+=E.sigBytes},_process:function(E){var v,C=this._data,A=C.words,F=C.sigBytes,R=this.blockSize,P=R*4,T=F/P;E?T=t.ceil(T):T=t.max((T|0)-this._minBufferSize,0);var q=T*R,L=t.min(q*4,F);if(q){for(var I=0;I<q;I+=R)this._doProcessBlock(A,I);v=A.splice(0,q),C.sigBytes-=L}return new h.init(v,L)},clone:function(){var E=p.clone.call(this);return E._data=this._data.clone(),E},_minBufferSize:0});l.Hasher=g.extend({cfg:p.extend(),init:function(E){this.cfg=this.cfg.extend(E),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(E){return this._append(E),this._process(),this},finalize:function(E){E&&this._append(E);var v=this._doFinalize();return v},blockSize:16,_createHelper:function(E){return function(v,C){return new E.init(C).finalize(v)}},_createHmacHelper:function(E){return function(v,C){return new S.HMAC.init(E,C).finalize(v)}}});var S=u.algo={};return u}(Math);return e})}(zd)),zd.exports}var tE=Wd.exports,Sw;function rE(){return Sw||(Sw=1,function(s,i){(function(e,t){s.exports=t(eE())})(tE,function(e){return function(t){var n=e,a=n.lib,o=a.WordArray,c=a.Hasher,u=n.algo,l=[],p=[];(function(){function m(S){for(var E=t.sqrt(S),v=2;v<=E;v++)if(!(S%v))return!1;return!0}function b(S){return(S-(S|0))*4294967296|0}for(var w=2,g=0;g<64;)m(w)&&(g<8&&(l[g]=b(t.pow(w,.5))),p[g]=b(t.pow(w,.3333333333333333)),g++),w++})();var h=[],d=u.SHA256=c.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(m,b){for(var w=this._hash.words,g=w[0],S=w[1],E=w[2],v=w[3],C=w[4],A=w[5],F=w[6],R=w[7],P=0;P<64;P++){if(P<16)h[P]=m[b+P]|0;else{var T=h[P-15],q=(T<<25|T>>>7)^(T<<14|T>>>18)^T>>>3,L=h[P-2],I=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;h[P]=q+h[P-7]+I+h[P-16]}var _=C&A^~C&F,K=g&S^g&E^S&E,j=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),O=(C<<26|C>>>6)^(C<<21|C>>>11)^(C<<7|C>>>25),D=R+O+_+p[P]+h[P],N=j+K;R=F,F=A,A=C,C=v+D|0,v=E,E=S,S=g,g=D+N|0}w[0]=w[0]+g|0,w[1]=w[1]+S|0,w[2]=w[2]+E|0,w[3]=w[3]+v|0,w[4]=w[4]+C|0,w[5]=w[5]+A|0,w[6]=w[6]+F|0,w[7]=w[7]+R|0},_doFinalize:function(){var m=this._data,b=m.words,w=this._nDataBytes*8,g=m.sigBytes*8;return b[g>>>5]|=128<<24-g%32,b[(g+64>>>9<<4)+14]=t.floor(w/4294967296),b[(g+64>>>9<<4)+15]=w,m.sigBytes=b.length*4,this._process(),this._hash},clone:function(){var m=c.clone.call(this);return m._hash=this._hash.clone(),m}});n.SHA256=c._createHelper(d),n.HmacSHA256=c._createHmacHelper(d)}(Math),e.SHA256})}(Wd)),Wd.exports}rE();function iE(s){return Math.floor(Math.random()*s)}function sE(s){return s.replace(/\_(\w)/g,function(i,e){return e.toUpperCase()})}function Cw(s,i){let e=Object.assign({},s),t=Object.keys(i);for(let n=0;n<t.length;n++){let a=t[n];e[sE(a)]=i[a]}return e}function Qo(s,i){return new Promise(e=>setTimeout(e,s+iE(i)))}function nE(s){let i=new URL(s);return i.origin+i.pathname}function aE(s){const i={};for(const[e,t]of s)i[e]=t;return i}class kw{constructor(){W(this,"key");W(this,"value");W(this,"createDatetime");W(this,"updateDatetime")}}const Wf=new Map,oE={authOauth2Login:async function(s,i){try{chrome.tabs.create({url:`${Dk}?client_id=${sw}`}),Wf.set(s)}catch(e){Zt(s,"[background] authOauth2Login error : "+e.message)}},authInstallAndLogin:async function(s,i){try{chrome.tabs.create({url:`${Rk}`}),Wf.set(s)}catch(e){Zt(s,"[background] authInstallAndLogin error : "+e.message)}},authGetToken:async function(s,i){try{pi(s,await xw())}catch(e){Zt(s,"[background] authGetToken error : "+e.message)}},authSetToken:async function(s,i){try{await Ew(i),pi(s,{})}catch(e){Zt(s,"[background] authSetToken error : "+e.message)}}};function cE(){return Wf}async function Ew(s){let i=new kw;return i.key=aw,i.value=JSON.stringify(s),Hd.addOrUpdateConfig(i)}async function xw(){let s=new mw,i=await Hd.getConfigByKey(aw);if(i){let e=JSON.parse(i.value);if(e)return Object.assign(s,e),s}return null}var zf=function(s,i){return zf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},zf(s,i)};function Nr(s,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");zf(s,i);function e(){this.constructor=s}s.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}function uE(s,i,e,t){function n(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function c(p){try{l(t.next(p))}catch(h){o(h)}}function u(p){try{l(t.throw(p))}catch(h){o(h)}}function l(p){p.done?a(p.value):n(p.value).then(c,u)}l((t=t.apply(s,[])).next())})}function Pw(s,i){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},t,n,a,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(l){return function(p){return u([l,p])}}function u(l){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(e=0)),e;)try{if(t=1,n&&(a=l[0]&2?n.return:l[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,l[1])).done)return a;switch(n=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,n=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){e.label=l[1];break}if(l[0]===6&&e.label<a[1]){e.label=a[1],a=l;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(l);break}a[2]&&e.ops.pop(),e.trys.pop();continue}l=i.call(s,e)}catch(p){l=[6,p],n=0}finally{t=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Un(s){var i=typeof Symbol=="function"&&Symbol.iterator,e=i&&s[i],t=0;if(e)return e.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&t>=s.length&&(s=void 0),{value:s&&s[t++],done:!s}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function ds(s,i){var e=typeof Symbol=="function"&&s[Symbol.iterator];if(!e)return s;var t=e.call(s),n,a=[],o;try{for(;(i===void 0||i-- >0)&&!(n=t.next()).done;)a.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(e=t.return)&&e.call(t)}finally{if(o)throw o.error}}return a}function Hn(s,i,e){if(arguments.length===2)for(var t=0,n=i.length,a;t<n;t++)(a||!(t in i))&&(a||(a=Array.prototype.slice.call(i,0,t)),a[t]=i[t]);return s.concat(a||Array.prototype.slice.call(i))}function Wn(s){return this instanceof Wn?(this.v=s,this):new Wn(s)}function lE(s,i,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e.apply(s,i||[]),n,a=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(d){t[d]&&(n[d]=function(m){return new Promise(function(b,w){a.push([d,m,b,w])>1||c(d,m)})})}function c(d,m){try{u(t[d](m))}catch(b){h(a[0][3],b)}}function u(d){d.value instanceof Wn?Promise.resolve(d.value.v).then(l,p):h(a[0][2],d)}function l(d){c("next",d)}function p(d){c("throw",d)}function h(d,m){d(m),a.shift(),a.length&&c(a[0][0],a[0][1])}}function dE(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s[Symbol.asyncIterator],e;return i?i.call(s):(s=typeof Un=="function"?Un(s):s[Symbol.iterator](),e={},t("next"),t("throw"),t("return"),e[Symbol.asyncIterator]=function(){return this},e);function t(a){e[a]=s[a]&&function(o){return new Promise(function(c,u){o=s[a](o),n(c,u,o.done,o.value)})}}function n(a,o,c,u){Promise.resolve(u).then(function(l){a({value:l,done:c})},o)}}function Fe(s){return typeof s=="function"}function Vf(s){var i=function(t){Error.call(t),t.stack=new Error().stack},e=s(i);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Gf=Vf(function(s){return function(e){s(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Vd(s,i){if(s){var e=s.indexOf(i);0<=e&&s.splice(e,1)}}var Zo=function(){function s(i){this.initialTeardown=i,this.closed=!1,this._parentage=null,this._finalizers=null}return s.prototype.unsubscribe=function(){var i,e,t,n,a;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var c=Un(o),u=c.next();!u.done;u=c.next()){var l=u.value;l.remove(this)}}catch(w){i={error:w}}finally{try{u&&!u.done&&(e=c.return)&&e.call(c)}finally{if(i)throw i.error}}else o.remove(this);var p=this.initialTeardown;if(Fe(p))try{p()}catch(w){a=w instanceof Gf?w.errors:[w]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var d=Un(h),m=d.next();!m.done;m=d.next()){var b=m.value;try{Mw(b)}catch(w){a=a??[],w instanceof Gf?a=Hn(Hn([],ds(a)),ds(w.errors)):a.push(w)}}}catch(w){t={error:w}}finally{try{m&&!m.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}}if(a)throw new Gf(a)}},s.prototype.add=function(i){var e;if(i&&i!==this)if(this.closed)Mw(i);else{if(i instanceof s){if(i.closed||i._hasParent(this))return;i._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(i)}},s.prototype._hasParent=function(i){var e=this._parentage;return e===i||Array.isArray(e)&&e.includes(i)},s.prototype._addParent=function(i){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(i),e):e?[e,i]:i},s.prototype._removeParent=function(i){var e=this._parentage;e===i?this._parentage=null:Array.isArray(e)&&Vd(e,i)},s.prototype.remove=function(i){var e=this._finalizers;e&&Vd(e,i),i instanceof s&&i._removeParent(this)},s.EMPTY=function(){var i=new s;return i.closed=!0,i}(),s}(),_w=Zo.EMPTY;function Tw(s){return s instanceof Zo||s&&"closed"in s&&Fe(s.remove)&&Fe(s.add)&&Fe(s.unsubscribe)}function Mw(s){Fe(s)?s():s.unsubscribe()}var hE={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},fE={setTimeout:function(s,i){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];return setTimeout.apply(void 0,Hn([s,i],ds(e)))},clearTimeout:function(s){return clearTimeout(s)},delegate:void 0};function Iw(s){fE.setTimeout(function(){throw s})}function zn(){}function Gd(s){s()}var Xf=function(s){Nr(i,s);function i(e){var t=s.call(this)||this;return t.isStopped=!1,e?(t.destination=e,Tw(e)&&e.add(t)):t.destination=gE,t}return i.create=function(e,t,n){return new Xd(e,t,n)},i.prototype.next=function(e){this.isStopped||this._next(e)},i.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,s.prototype.unsubscribe.call(this),this.destination=null)},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},i.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(Zo),pE=function(){function s(i){this.partialObserver=i}return s.prototype.next=function(i){var e=this.partialObserver;if(e.next)try{e.next(i)}catch(t){Jd(t)}},s.prototype.error=function(i){var e=this.partialObserver;if(e.error)try{e.error(i)}catch(t){Jd(t)}else Jd(i)},s.prototype.complete=function(){var i=this.partialObserver;if(i.complete)try{i.complete()}catch(e){Jd(e)}},s}(),Xd=function(s){Nr(i,s);function i(e,t,n){var a=s.call(this)||this,o;return Fe(e)||!e?o={next:e??void 0,error:t??void 0,complete:n??void 0}:o=e,a.destination=new pE(o),a}return i}(Xf);function Jd(s){Iw(s)}function mE(s){throw s}var gE={closed:!0,next:zn,error:mE,complete:zn},Jf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function dr(s){return s}function wE(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return Aw(s)}function Aw(s){return s.length===0?dr:s.length===1?s[0]:function(e){return s.reduce(function(t,n){return n(t)},e)}}var Ze=function(){function s(i){i&&(this._subscribe=i)}return s.prototype.lift=function(i){var e=new s;return e.source=this,e.operator=i,e},s.prototype.subscribe=function(i,e,t){var n=this,a=vE(i)?i:new Xd(i,e,t);return Gd(function(){var o=n,c=o.operator,u=o.source;a.add(c?c.call(a,u):u?n._subscribe(a):n._trySubscribe(a))}),a},s.prototype._trySubscribe=function(i){try{return this._subscribe(i)}catch(e){i.error(e)}},s.prototype.forEach=function(i,e){var t=this;return e=Rw(e),new e(function(n,a){var o=new Xd({next:function(c){try{i(c)}catch(u){a(u),o.unsubscribe()}},error:a,complete:n});t.subscribe(o)})},s.prototype._subscribe=function(i){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(i)},s.prototype[Jf]=function(){return this},s.prototype.pipe=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];return Aw(i)(this)},s.prototype.toPromise=function(i){var e=this;return i=Rw(i),new i(function(t,n){var a;e.subscribe(function(o){return a=o},function(o){return n(o)},function(){return t(a)})})},s.create=function(i){return new s(i)},s}();function Rw(s){var i;return(i=s??hE.Promise)!==null&&i!==void 0?i:Promise}function yE(s){return s&&Fe(s.next)&&Fe(s.error)&&Fe(s.complete)}function vE(s){return s&&s instanceof Xf||yE(s)&&Tw(s)}function bE(s){return Fe(s==null?void 0:s.lift)}function ft(s){return function(i){if(bE(i))return i.lift(function(e){try{return s(e,this)}catch(t){this.error(t)}});throw new TypeError("Unable to lift unknown Observable type")}}function rt(s,i,e,t,n){return new SE(s,i,e,t,n)}var SE=function(s){Nr(i,s);function i(e,t,n,a,o,c){var u=s.call(this,e)||this;return u.onFinalize=o,u.shouldUnsubscribe=c,u._next=t?function(l){try{t(l)}catch(p){e.error(p)}}:s.prototype._next,u._error=a?function(l){try{a(l)}catch(p){e.error(p)}finally{this.unsubscribe()}}:s.prototype._error,u._complete=n?function(){try{n()}catch(l){e.error(l)}finally{this.unsubscribe()}}:s.prototype._complete,u}return i.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;s.prototype.unsubscribe.call(this),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},i}(Xf),CE=Vf(function(s){return function(){s(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Dw=function(s){Nr(i,s);function i(){var e=s.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i.prototype.lift=function(e){var t=new Fw(this,this);return t.operator=e,t},i.prototype._throwIfClosed=function(){if(this.closed)throw new CE},i.prototype.next=function(e){var t=this;Gd(function(){var n,a;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var o=Un(t.currentObservers),c=o.next();!c.done;c=o.next()){var u=c.value;u.next(e)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(a=o.return)&&a.call(o)}finally{if(n)throw n.error}}}})},i.prototype.error=function(e){var t=this;Gd(function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}})},i.prototype.complete=function(){var e=this;Gd(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}})},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),i.prototype._trySubscribe=function(e){return this._throwIfClosed(),s.prototype._trySubscribe.call(this,e)},i.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},i.prototype._innerSubscribe=function(e){var t=this,n=this,a=n.hasError,o=n.isStopped,c=n.observers;return a||o?_w:(this.currentObservers=null,c.push(e),new Zo(function(){t.currentObservers=null,Vd(c,e)}))},i.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,a=t.thrownError,o=t.isStopped;n?e.error(a):o&&e.complete()},i.prototype.asObservable=function(){var e=new Ze;return e.source=this,e},i.create=function(e,t){return new Fw(e,t)},i}(Ze),Fw=function(s){Nr(i,s);function i(e,t){var n=s.call(this)||this;return n.destination=e,n.source=t,n}return i.prototype.next=function(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.next)===null||n===void 0||n.call(t,e)},i.prototype.error=function(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.error)===null||n===void 0||n.call(t,e)},i.prototype.complete=function(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)},i.prototype._subscribe=function(e){var t,n;return(n=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&n!==void 0?n:_w},i}(Dw),Yf={now:function(){return(Yf.delegate||Date).now()},delegate:void 0},kE=function(s){Nr(i,s);function i(e,t,n){e===void 0&&(e=1/0),t===void 0&&(t=1/0),n===void 0&&(n=Yf);var a=s.call(this)||this;return a._bufferSize=e,a._windowTime=t,a._timestampProvider=n,a._buffer=[],a._infiniteTimeWindow=!0,a._infiniteTimeWindow=t===1/0,a._bufferSize=Math.max(1,e),a._windowTime=Math.max(1,t),a}return i.prototype.next=function(e){var t=this,n=t.isStopped,a=t._buffer,o=t._infiniteTimeWindow,c=t._timestampProvider,u=t._windowTime;n||(a.push(e),!o&&a.push(c.now()+u)),this._trimBuffer(),s.prototype.next.call(this,e)},i.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),n=this,a=n._infiniteTimeWindow,o=n._buffer,c=o.slice(),u=0;u<c.length&&!e.closed;u+=a?1:2)e.next(c[u]);return this._checkFinalizedStatuses(e),t},i.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,n=e._timestampProvider,a=e._buffer,o=e._infiniteTimeWindow,c=(o?1:2)*t;if(t<1/0&&c<a.length&&a.splice(0,a.length-c),!o){for(var u=n.now(),l=0,p=1;p<a.length&&a[p]<=u;p+=2)l=p;l&&a.splice(0,l+1)}},i}(Dw),EE=function(s){Nr(i,s);function i(e,t){return s.call(this)||this}return i.prototype.schedule=function(e,t){return this},i}(Zo),Ow={setInterval:function(s,i){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];return setInterval.apply(void 0,Hn([s,i],ds(e)))},clearInterval:function(s){return clearInterval(s)},delegate:void 0},xE=function(s){Nr(i,s);function i(e,t){var n=s.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.pending=!1,n}return i.prototype.schedule=function(e,t){var n;if(t===void 0&&(t=0),this.closed)return this;this.state=e;var a=this.id,o=this.scheduler;return a!=null&&(this.id=this.recycleAsyncId(o,a,t)),this.pending=!0,this.delay=t,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(o,this.id,t),this},i.prototype.requestAsyncId=function(e,t,n){return n===void 0&&(n=0),Ow.setInterval(e.flush.bind(e,this),n)},i.prototype.recycleAsyncId=function(e,t,n){if(n===void 0&&(n=0),n!=null&&this.delay===n&&this.pending===!1)return t;t!=null&&Ow.clearInterval(t)},i.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(e,t){var n=!1,a;try{this.work(e)}catch(o){n=!0,a=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),a},i.prototype.unsubscribe=function(){if(!this.closed){var e=this,t=e.id,n=e.scheduler,a=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Vd(a,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,s.prototype.unsubscribe.call(this)}},i}(EE),Nw=function(){function s(i,e){e===void 0&&(e=s.now),this.schedulerActionCtor=i,this.now=e}return s.prototype.schedule=function(i,e,t){return e===void 0&&(e=0),new this.schedulerActionCtor(this,i).schedule(t,e)},s.now=Yf.now,s}(),PE=function(s){Nr(i,s);function i(e,t){t===void 0&&(t=Nw.now);var n=s.call(this,e,t)||this;return n.actions=[],n._active=!1,n}return i.prototype.flush=function(e){var t=this.actions;if(this._active){t.push(e);return}var n;this._active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},i}(Nw),_E=new PE(xE),TE=_E,hs=new Ze(function(s){return s.complete()});function ME(s){return s&&Fe(s.schedule)}function Qf(s){return s[s.length-1]}function IE(s){return Fe(Qf(s))?s.pop():void 0}function ec(s){return ME(Qf(s))?s.pop():void 0}function AE(s,i){return typeof Qf(s)=="number"?s.pop():i}var Zf=function(s){return s&&typeof s.length=="number"&&typeof s!="function"};function Lw(s){return Fe(s==null?void 0:s.then)}function Bw(s){return Fe(s[Jf])}function jw(s){return Symbol.asyncIterator&&Fe(s==null?void 0:s[Symbol.asyncIterator])}function qw(s){return new TypeError("You provided "+(s!==null&&typeof s=="object"?"an invalid object":"'"+s+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function RE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $w=RE();function Kw(s){return Fe(s==null?void 0:s[$w])}function Uw(s){return lE(this,arguments,function(){var e,t,n,a;return Pw(this,function(o){switch(o.label){case 0:e=s.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Wn(e.read())];case 3:return t=o.sent(),n=t.value,a=t.done,a?[4,Wn(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Wn(n)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function Hw(s){return Fe(s==null?void 0:s.getReader)}function Ct(s){if(s instanceof Ze)return s;if(s!=null){if(Bw(s))return DE(s);if(Zf(s))return FE(s);if(Lw(s))return OE(s);if(jw(s))return Ww(s);if(Kw(s))return NE(s);if(Hw(s))return LE(s)}throw qw(s)}function DE(s){return new Ze(function(i){var e=s[Jf]();if(Fe(e.subscribe))return e.subscribe(i);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function FE(s){return new Ze(function(i){for(var e=0;e<s.length&&!i.closed;e++)i.next(s[e]);i.complete()})}function OE(s){return new Ze(function(i){s.then(function(e){i.closed||(i.next(e),i.complete())},function(e){return i.error(e)}).then(null,Iw)})}function NE(s){return new Ze(function(i){var e,t;try{for(var n=Un(s),a=n.next();!a.done;a=n.next()){var o=a.value;if(i.next(o),i.closed)return}}catch(c){e={error:c}}finally{try{a&&!a.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}i.complete()})}function Ww(s){return new Ze(function(i){BE(s,i).catch(function(e){return i.error(e)})})}function LE(s){return Ww(Uw(s))}function BE(s,i){var e,t,n,a;return uE(this,void 0,void 0,function(){var o,c;return Pw(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),e=dE(s),u.label=1;case 1:return[4,e.next()];case 2:if(t=u.sent(),!!t.done)return[3,4];if(o=t.value,i.next(o),i.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=u.sent(),n={error:c},[3,11];case 6:return u.trys.push([6,,9,10]),t&&!t.done&&(a=e.return)?[4,a.call(e)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(n)throw n.error;return[7];case 10:return[7];case 11:return i.complete(),[2]}})})}function mi(s,i,e,t,n){t===void 0&&(t=0),n===void 0&&(n=!1);var a=i.schedule(function(){e(),n?s.add(this.schedule(null,t)):this.unsubscribe()},t);if(s.add(a),!n)return a}function zw(s,i){return i===void 0&&(i=0),ft(function(e,t){e.subscribe(rt(t,function(n){return mi(t,s,function(){return t.next(n)},i)},function(){return mi(t,s,function(){return t.complete()},i)},function(n){return mi(t,s,function(){return t.error(n)},i)}))})}function Vw(s,i){return i===void 0&&(i=0),ft(function(e,t){t.add(s.schedule(function(){return e.subscribe(t)},i))})}function jE(s,i){return Ct(s).pipe(Vw(i),zw(i))}function qE(s,i){return Ct(s).pipe(Vw(i),zw(i))}function $E(s,i){return new Ze(function(e){var t=0;return i.schedule(function(){t===s.length?e.complete():(e.next(s[t++]),e.closed||this.schedule())})})}function KE(s,i){return new Ze(function(e){var t;return mi(e,i,function(){t=s[$w](),mi(e,i,function(){var n,a,o;try{n=t.next(),a=n.value,o=n.done}catch(c){e.error(c);return}o?e.complete():e.next(a)},0,!0)}),function(){return Fe(t==null?void 0:t.return)&&t.return()}})}function Gw(s,i){if(!s)throw new Error("Iterable cannot be null");return new Ze(function(e){mi(e,i,function(){var t=s[Symbol.asyncIterator]();mi(e,i,function(){t.next().then(function(n){n.done?e.complete():e.next(n.value)})},0,!0)})})}function UE(s,i){return Gw(Uw(s),i)}function HE(s,i){if(s!=null){if(Bw(s))return jE(s,i);if(Zf(s))return $E(s,i);if(Lw(s))return qE(s,i);if(jw(s))return Gw(s,i);if(Kw(s))return KE(s,i);if(Hw(s))return UE(s,i)}throw qw(s)}function ke(s,i){return i?HE(s,i):Ct(s)}function hr(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];var e=ec(s);return ke(s,e)}var ep=Vf(function(s){return function(){s(this),this.name="EmptyError",this.message="no elements in sequence"}});function it(s,i){return new Promise(function(e,t){var n=new Xd({next:function(a){e(a),n.unsubscribe()},error:t,complete:function(){t(new ep)}});s.subscribe(n)})}function WE(s){return s instanceof Date&&!isNaN(s)}function ze(s,i){return ft(function(e,t){var n=0;e.subscribe(rt(t,function(a){t.next(s.call(i,a,n++))}))})}var zE=Array.isArray;function VE(s,i){return zE(i)?s.apply(void 0,Hn([],ds(i))):s(i)}function Xw(s){return ze(function(i){return VE(s,i)})}var GE=Array.isArray,XE=Object.getPrototypeOf,JE=Object.prototype,YE=Object.keys;function QE(s){if(s.length===1){var i=s[0];if(GE(i))return{args:i,keys:null};if(ZE(i)){var e=YE(i);return{args:e.map(function(t){return i[t]}),keys:e}}}return{args:s,keys:null}}function ZE(s){return s&&typeof s=="object"&&XE(s)===JE}function ex(s,i){return s.reduce(function(e,t,n){return e[t]=i[n],e},{})}function Yd(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];var e=ec(s),t=IE(s),n=QE(s),a=n.args,o=n.keys;if(a.length===0)return ke([],e);var c=new Ze(tx(a,e,o?function(u){return ex(o,u)}:dr));return t?c.pipe(Xw(t)):c}function tx(s,i,e){return e===void 0&&(e=dr),function(t){Jw(i,function(){for(var n=s.length,a=new Array(n),o=n,c=n,u=function(p){Jw(i,function(){var h=ke(s[p],i),d=!1;h.subscribe(rt(t,function(m){a[p]=m,d||(d=!0,c--),c||t.next(e(a.slice()))},function(){--o||t.complete()}))},t)},l=0;l<n;l++)u(l)},t)}}function Jw(s,i,e){s?mi(e,s,i):i()}function Yw(s,i,e,t,n,a,o,c){var u=[],l=0,p=0,h=!1,d=function(){h&&!u.length&&!l&&i.complete()},m=function(w){return l<t?b(w):u.push(w)},b=function(w){a&&i.next(w),l++;var g=!1;Ct(e(w,p++)).subscribe(rt(i,function(S){n==null||n(S),a?m(S):i.next(S)},function(){g=!0},void 0,function(){if(g)try{l--;for(var S=function(){var E=u.shift();o||b(E)};u.length&&l<t;)S();d()}catch(E){i.error(E)}}))};return s.subscribe(rt(i,m,function(){h=!0,d()})),function(){c==null||c()}}function st(s,i,e){return e===void 0&&(e=1/0),Fe(i)?st(function(t,n){return ze(function(a,o){return i(t,a,n,o)})(Ct(s(t,n)))},e):(typeof i=="number"&&(e=i),ft(function(t,n){return Yw(t,n,s,e)}))}function Qw(s){return s===void 0&&(s=1/0),st(dr,s)}function rx(){return Qw(1)}function tp(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return rx()(ke(s,ec(s)))}function fs(s){return new Ze(function(i){Ct(s()).subscribe(i)})}var ix=["addListener","removeListener"],sx=["addEventListener","removeEventListener"],nx=["on","off"];function rp(s,i,e,t){if(Fe(e)&&(t=e,e=void 0),t)return rp(s,i,e).pipe(Xw(t));var n=ds(cx(s)?sx.map(function(c){return function(u){return s[c](i,u,e)}}):ax(s)?ix.map(Zw(s,i)):ox(s)?nx.map(Zw(s,i)):[],2),a=n[0],o=n[1];if(!a&&Zf(s))return st(function(c){return rp(c,i,e)})(Ct(s));if(!a)throw new TypeError("Invalid event target");return new Ze(function(c){var u=function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];return c.next(1<l.length?l:l[0])};return a(u),function(){return o(u)}})}function Zw(s,i){return function(e){return function(t){return s[e](i,t)}}}function ax(s){return Fe(s.addListener)&&Fe(s.removeListener)}function ox(s){return Fe(s.on)&&Fe(s.off)}function cx(s){return Fe(s.addEventListener)&&Fe(s.removeEventListener)}function ip(s,i,e){return s===void 0&&(s=0),e===void 0&&(e=TE),new Ze(function(t){var n=WE(s)?+s-e.now():s;n<0&&(n=0);var a=0;return e.schedule(function(){t.closed||(t.next(a++),t.complete())},n)})}function tc(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];var e=ec(s),t=AE(s,1/0),n=s;return n.length?n.length===1?Ct(n[0]):Qw(t)(ke(n,e)):hs}var ey=new Ze(zn),ux=Array.isArray;function lx(s){return s.length===1&&ux(s[0])?s[0]:s}function ps(s,i){return ft(function(e,t){var n=0;e.subscribe(rt(t,function(a){return s.call(i,a,n++)&&t.next(a)}))})}function ty(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return s=lx(s),s.length===1?Ct(s[0]):new Ze(ry(s))}function ry(s){return function(i){for(var e=[],t=function(a){e.push(Ct(s[a]).subscribe(rt(i,function(o){if(e){for(var c=0;c<e.length;c++)c!==a&&e[c].unsubscribe();e=null}i.next(o)})))},n=0;e&&!i.closed&&n<s.length;n++)t(n)}}function rc(s){return ft(function(i,e){var t=null,n=!1,a;t=i.subscribe(rt(e,void 0,void 0,function(o){a=Ct(s(o,rc(s)(i))),t?(t.unsubscribe(),t=null,a.subscribe(e)):n=!0})),n&&(t.unsubscribe(),t=null,a.subscribe(e))})}function iy(s){return ft(function(i,e){var t=!1;i.subscribe(rt(e,function(n){t=!0,e.next(n)},function(){t||e.next(s),e.complete()}))})}function sp(s){return s<=0?function(){return hs}:ft(function(i,e){var t=0;i.subscribe(rt(e,function(n){++t<=s&&(e.next(n),s<=t&&e.complete())}))})}function Qd(){return ft(function(s,i){s.subscribe(rt(i,zn))})}function dx(s){return ze(function(){return s})}function hx(s,i){return st(function(e,t){return Ct(s(e,t)).pipe(sp(1),dx(e))})}function Zd(s){return s===void 0&&(s=fx),ft(function(i,e){var t=!1;i.subscribe(rt(e,function(n){t=!0,e.next(n)},function(){return t?e.complete():e.error(s())}))})}function fx(){return new ep}function Vn(s,i){var e=arguments.length>=2;return function(t){return t.pipe(s?ps(function(n,a){return s(n,a,t)}):dr,sp(1),e?iy(i):Zd(function(){return new ep}))}}function px(s,i,e){return e===void 0&&(e=1/0),ft(function(t,n){var a=i;return Yw(t,n,function(o,c){return s(a,o,c)},e,function(o){a=o},!1,void 0,function(){return a=null})})}function pt(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];return s.length?ft(function(e,t){ry(Hn([e],ds(s)))(t)}):dr}function eh(s){s===void 0&&(s=1/0);var i;s&&typeof s=="object"?i=s:i={count:s};var e=i.count,t=e===void 0?1/0:e,n=i.delay,a=i.resetOnSuccess,o=a===void 0?!1:a;return t<=0?dr:ft(function(c,u){var l=0,p,h=function(){var d=!1;p=c.subscribe(rt(u,function(m){o&&(l=0),u.next(m)},void 0,function(m){if(l++<t){var b=function(){p?(p.unsubscribe(),p=null,h()):d=!0};if(n!=null){var w=typeof n=="number"?ip(n):Ct(n(m,l)),g=rt(u,function(){g.unsubscribe(),b()},function(){u.complete()});w.subscribe(g)}else b()}else u.error(m)})),d&&(p.unsubscribe(),p=null,h())};h()})}function mx(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];var e=ec(s);return ft(function(t,n){(e?tp(s,t,e):tp(s,t)).subscribe(n)})}function th(s,i){return ft(function(e,t){var n=null,a=0,o=!1,c=function(){return o&&!n&&t.complete()};e.subscribe(rt(t,function(u){n==null||n.unsubscribe();var l=0,p=a++;Ct(s(u,p)).subscribe(n=rt(t,function(h){return t.next(i?i(u,h,p,l++):h)},function(){n=null,c()}))},function(){o=!0,c()}))})}function gx(s){return ft(function(i,e){Ct(s).subscribe(rt(e,function(){return e.complete()},zn)),!e.closed&&i.subscribe(e)})}function rh(s,i,e){var t=Fe(s)||i||e?{next:s,error:i,complete:e}:s;return t?ft(function(n,a){var o;(o=t.subscribe)===null||o===void 0||o.call(t);var c=!0;n.subscribe(rt(a,function(u){var l;(l=t.next)===null||l===void 0||l.call(t,u),a.next(u)},function(){var u;c=!1,(u=t.complete)===null||u===void 0||u.call(t),a.complete()},function(u){var l;c=!1,(l=t.error)===null||l===void 0||l.call(t,u),a.error(u)},function(){var u,l;c&&((u=t.unsubscribe)===null||u===void 0||u.call(t)),(l=t.finalize)===null||l===void 0||l.call(t)}))}):dr}function wx(s){return{all:s=s||new Map,on:function(i,e){var t=s.get(i);t?t.push(e):s.set(i,[e])},off:function(i,e){var t=s.get(i);t&&(e?t.splice(t.indexOf(e)>>>0,1):s.set(i,[]))},emit:function(i,e){var t=s.get(i);t&&t.slice().map(function(n){n(e)}),(t=s.get("*"))&&t.slice().map(function(n){n(i,e)})}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */Symbol.dispose??(Symbol.dispose=Symbol("dispose")),Symbol.asyncDispose??(Symbol.asyncDispose=Symbol("asyncDispose"));const ge=Symbol.dispose,er=Symbol.asyncDispose;uS=ge,cS=Symbol.toStringTag;const dm=class dm{constructor(){f(this,Ci,!1);f(this,jr,[]);W(this,uS,this.dispose);W(this,cS,"DisposableStack")}get disposed(){return r(this,Ci)}dispose(){if(!r(this,Ci)){y(this,Ci,!0);for(const i of r(this,jr).reverse())i[ge]()}}use(i){return i&&r(this,jr).push(i),i}adopt(i,e){return r(this,jr).push({[ge](){e(i)}}),i}defer(i){r(this,jr).push({[ge](){i()}})}move(){if(r(this,Ci))throw new ReferenceError("a disposed stack can not use anything new");const i=new dm;return y(i,jr,r(this,jr)),y(this,Ci,!0),i}};Ci=new WeakMap,jr=new WeakMap;let Xe=dm;dS=er,lS=Symbol.toStringTag;const hm=class hm{constructor(){f(this,ki,!1);f(this,qr,[]);W(this,dS,this.dispose);W(this,lS,"AsyncDisposableStack")}get disposed(){return r(this,ki)}async dispose(){if(!r(this,ki)){y(this,ki,!0);for(const i of r(this,qr).reverse())await i[er]()}}use(i){return i&&r(this,qr).push(i),i}adopt(i,e){return r(this,qr).push({[er](){return e(i)}}),i}defer(i){r(this,qr).push({[er](){return i()}})}move(){if(r(this,ki))throw new ReferenceError("a disposed stack can not use anything new");const i=new hm;return y(i,qr,r(this,qr)),y(this,ki,!0),i}};ki=new WeakMap,qr=new WeakMap;let ih=hm;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let he=(hS=class{constructor(i=wx(new Map)){f(this,$r);f(this,br,new Map);y(this,$r,i)}on(i,e){const t=r(this,br).get(i);return t===void 0?r(this,br).set(i,[e]):t.push(e),r(this,$r).on(i,e),this}off(i,e){const t=r(this,br).get(i)??[];if(e===void 0){for(const a of t)r(this,$r).off(i,a);return r(this,br).delete(i),this}const n=t.lastIndexOf(e);return n>-1&&r(this,$r).off(i,...t.splice(n,1)),this}emit(i,e){return r(this,$r).emit(i,e),this.listenerCount(i)>0}once(i,e){const t=n=>{e(n),this.off(i,t)};return this.on(i,t)}listenerCount(i){var e;return((e=r(this,br).get(i))==null?void 0:e.length)||0}removeAllListeners(i){return i!==void 0?this.off(i):(this[ge](),this)}[ge](){for(const[i,e]of r(this,br))for(const t of e)r(this,$r).off(i,t);r(this,br).clear()}},$r=new WeakMap,br=new WeakMap,hS);/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const sy=!!(typeof process<"u"&&process.version),gi={value:{get fs(){throw new Error("fs is not available in this environment")},get ScreenRecorder(){throw new Error("ScreenRecorder is not available in this environment")}}},ny="24.1.0";/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const te=(s,i)=>{if(!s)throw new Error(i)};/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function np(s,i=!1){if(i){const e=atob(s);return Uint8Array.from(e,t=>t.codePointAt(0))}return new TextEncoder().encode(s)}function ay(s){return oy(new TextEncoder().encode(s))}function oy(s){const e=[];for(let n=0;n<s.length;n+=65534){const a=s.subarray(n,n+65534);e.push(String.fromCodePoint.apply(null,a))}const t=e.join("");return btoa(t)}function yx(s){let i=0;for(const n of s)i+=n.length;const e=new Uint8Array(i);let t=0;for(const n of s)e.set(n,t),t+=n.length;return e}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let ap=null;async function vx(){return ap||(ap=(await Promise.resolve().then(()=>F_)).default),ap}const Gn=s=>sy?async(...i)=>{(await vx())(s)(i)}:(...i)=>{const e=globalThis.__PUPPETEER_DEBUG;!e||!(e==="*"||(e.endsWith("*")?s.startsWith(e):s===e))||console.log(`${s}:`,...i)};/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class sh extends Error{constructor(i,e){super(i,e),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class nh extends sh{}class ah extends sh{}class ms extends sh{constructor(){super(...arguments);f(this,cu);f(this,uu,"")}set code(e){y(this,cu,e)}get code(){return r(this,cu)}set originalMessage(e){y(this,uu,e)}get originalMessage(){return r(this,uu)}}cu=new WeakMap,uu=new WeakMap;class we extends sh{}class tr extends ms{}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const bx={letter:{width:8.5,height:11},legal:{width:8.5,height:14},tabloid:{width:11,height:17},ledger:{width:17,height:11},a0:{width:33.1102,height:46.811},a1:{width:23.3858,height:33.1102},a2:{width:16.5354,height:23.3858},a3:{width:11.6929,height:16.5354},a4:{width:8.2677,height:11.6929},a5:{width:5.8268,height:8.2677},a6:{width:4.1339,height:5.8268}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const de=Gn("puppeteer:error"),cy=Object.freeze({width:800,height:600}),oh=Symbol("Source URL for Puppeteer evaluation scripts"),Ts=class Ts{constructor(){f(this,Ps);f(this,_s)}static fromCallSite(i,e){const t=new Ts;return y(t,Ps,i),y(t,_s,e.toString()),t}get functionName(){return r(this,Ps)}get siteString(){return r(this,_s)}toString(){return`pptr:${[r(this,Ps),encodeURIComponent(r(this,_s))].join(";")}`}};Ps=new WeakMap,_s=new WeakMap,W(Ts,"INTERNAL_URL","pptr:internal"),W(Ts,"parse",i=>{i=i.slice(5);const[e="",t=""]=i.split(";"),n=new Ts;return y(n,Ps,e),y(n,_s,decodeURIComponent(t)),n}),W(Ts,"isPuppeteerURL",i=>i.startsWith("pptr:"));let Ot=Ts;const nt=(s,i)=>{if(Object.prototype.hasOwnProperty.call(i,oh))return i;const e=Error.prepareStackTrace;Error.prepareStackTrace=(n,a)=>a[2];const t=new Error().stack;return Error.prepareStackTrace=e,Object.assign(i,{[oh]:Ot.fromCallSite(s,t)})},uy=s=>{if(Object.prototype.hasOwnProperty.call(s,oh))return s[oh]},Lr=s=>typeof s=="string"||s instanceof String,Sx=s=>typeof s=="number"||s instanceof Number,Cx=s=>typeof s=="object"&&(s==null?void 0:s.constructor)===Object,kx=s=>typeof s=="object"&&(s==null?void 0:s.constructor)===RegExp,Ex=s=>typeof s=="object"&&(s==null?void 0:s.constructor)===Date;function op(s,...i){if(Lr(s))return te(i.length===0,"Cannot evaluate a string with arguments"),s;function e(t){return Object.is(t,void 0)?"undefined":JSON.stringify(t)}return`(${s})(${i.map(e).join(",")})`}async function ly(s,i){const e=[],t=s.getReader();if(i){const n=await gi.value.fs.promises.open(i,"w+");try{for(;;){const{done:a,value:o}=await t.read();if(a)break;e.push(o),await n.writeFile(o)}}finally{await n.close()}}else for(;;){const{done:n,value:a}=await t.read();if(n)break;e.push(a)}try{const n=yx(e);return n.length===0?null:n}catch(n){return de(n),null}}async function dy(s,i){return new ReadableStream({async pull(e){function t(c,u){return u?Uint8Array.from(atob(c),p=>p.codePointAt(0)):new TextEncoder().encode(c)}const{data:n,base64Encoded:a,eof:o}=await s.send("IO.read",{handle:i});e.enqueue(t(n,a??!1)),o&&(await s.send("IO.close",{handle:i}),e.close())}})}function xx(s){let i=null;return new Set(["alert","confirm","prompt","beforeunload"]).has(s)&&(i=s),te(i,`Unknown javascript dialog type: ${s}`),i}function It(s,i){return s===0?ey:ip(s).pipe(ze(()=>{throw new nh(`Timed out after waiting ${s}ms`,{cause:i})}))}const hy="__puppeteer_utility_world__"+ny,ch=/^[\x20\t]*\/\/[@#] sourceURL=\s{0,10}(\S*?)\s{0,10}$/m;function fy(s){return`//# sourceURL=${s}`}const Px=500;function py(s={},i="in"){var o,c,u,l;const e={scale:1,displayHeaderFooter:!1,headerTemplate:"",footerTemplate:"",printBackground:!1,landscape:!1,pageRanges:"",preferCSSPageSize:!1,omitBackground:!1,outline:!1,tagged:!0,waitForFonts:!0};let t=8.5,n=11;if(s.format){const p=bx[s.format.toLowerCase()];te(p,"Unknown paper format: "+s.format),t=p.width,n=p.height}else t=Xn(s.width,i)??t,n=Xn(s.height,i)??n;const a={top:Xn((o=s.margin)==null?void 0:o.top,i)||0,left:Xn((c=s.margin)==null?void 0:c.left,i)||0,bottom:Xn((u=s.margin)==null?void 0:u.bottom,i)||0,right:Xn((l=s.margin)==null?void 0:l.right,i)||0};return s.outline&&(s.tagged=!0),{...e,...s,width:t,height:n,margin:a}}const cp={px:1,in:96,cm:37.8,mm:3.78};function Xn(s,i="in"){if(typeof s>"u")return;let e;if(Sx(s))e=s;else if(Lr(s)){const t=s;let n=t.substring(t.length-2).toLowerCase(),a="";n in cp?a=t.substring(0,t.length-2):(n="px",a=t);const o=Number(a);te(!isNaN(o),"Failed to parse parameter value: "+t),e=o*cp[n]}else throw new Error("page.pdf() Cannot handle parameter type: "+typeof s);return e/cp[i]}function Ae(s,i){return new Ze(e=>{const t=n=>{e.next(n)};return s.on(i,t),()=>{s.off(i,t)}})}function gs(s,i){return s?rp(s,"abort").pipe(ze(()=>{throw s.reason instanceof Error?(s.reason.cause=i,s.reason):new Error(s.reason,{cause:i})})):ey}function ic(s){return st(i=>ke(Promise.resolve(s(i))).pipe(ps(e=>e),ze(()=>i)))}const up=new Map([["geolocation","geolocation"],["midi","midi"],["notifications","notifications"],["camera","videoCapture"],["microphone","audioCapture"],["background-sync","backgroundSync"],["ambient-light-sensor","sensors"],["accelerometer","sensors"],["gyroscope","sensors"],["magnetometer","sensors"],["accessibility-events","accessibilityEvents"],["clipboard-read","clipboardReadWrite"],["clipboard-write","clipboardReadWrite"],["clipboard-sanitized-write","clipboardSanitizedWrite"],["payment-handler","paymentHandler"],["persistent-storage","durableStorage"],["idle-detection","idleDetection"],["midi-sysex","midiSysex"]]);let my=class extends he{constructor(){super()}async waitForTarget(i,e={}){const{timeout:t=3e4,signal:n}=e;return await it(tc(Ae(this,"targetcreated"),Ae(this,"targetchanged"),ke(this.targets())).pipe(ic(i),pt(gs(n),It(t))))}async pages(){return(await Promise.all(this.browserContexts().map(e=>e.pages()))).reduce((e,t)=>e.concat(t),[])}async cookies(){return await this.defaultBrowserContext().cookies()}async setCookie(...i){return await this.defaultBrowserContext().setCookie(...i)}async deleteCookie(...i){return await this.defaultBrowserContext().deleteCookie(...i)}isConnected(){return this.connected}[ge](){return this.process()?void this.close().catch(de):void this.disconnect().catch(de)}[er](){return this.process()?this.close():this.disconnect()}};/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let Ne=(Is=class{constructor(i){f(this,hu);f(this,Ei,!1);f(this,xi,!1);f(this,Ms);f(this,lu);f(this,Uh,new Promise(i=>{y(this,lu,i)}));f(this,fa);f(this,du);f(this,pa);i&&i.timeout>0&&(y(this,du,new nh(i.message)),y(this,fa,setTimeout(()=>{this.reject(r(this,du))},i.timeout)))}static create(i){return new Is(i)}static async race(i){const e=new Set;try{const t=i.map(n=>n instanceof Is?(r(n,fa)&&e.add(n),n.valueOrThrow()):n);return await Promise.race(t)}finally{for(const t of e)t.reject(new Error("Timeout cleared"))}}resolve(i){r(this,xi)||r(this,Ei)||(y(this,Ei,!0),k(this,hu,Am).call(this,i))}reject(i){r(this,xi)||r(this,Ei)||(y(this,xi,!0),k(this,hu,Am).call(this,i))}resolved(){return r(this,Ei)}finished(){return r(this,Ei)||r(this,xi)}value(){return r(this,Ms)}valueOrThrow(){return r(this,pa)||y(this,pa,(async()=>{if(await r(this,Uh),r(this,xi))throw r(this,Ms);return r(this,Ms)})()),r(this,pa)}},Ei=new WeakMap,xi=new WeakMap,Ms=new WeakMap,lu=new WeakMap,Uh=new WeakMap,fa=new WeakMap,du=new WeakMap,hu=new WeakSet,Am=function(i){clearTimeout(r(this,fa)),y(this,Ms,i),r(this,lu).call(this)},pa=new WeakMap,Is);/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let lp=(Pi=class{constructor(){f(this,ma,!1);f(this,mu,[])}async acquire(i){if(!r(this,ma))return y(this,ma,!0),new Pi.Guard(this);const e=Ne.create();return r(this,mu).push(e.resolve.bind(e)),await e.valueOrThrow(),new Pi.Guard(this,i)}release(){const i=r(this,mu).shift();if(!i){y(this,ma,!1);return}i()}},ma=new WeakMap,mu=new WeakMap,W(Pi,"Guard",(fS=class{constructor(e,t){f(this,fu);f(this,pu);y(this,fu,e),y(this,pu,t)}[ge](){var e;return(e=r(this,pu))==null||e.call(this),r(this,fu).release()}},fu=new WeakMap,pu=new WeakMap,fS)),Pi);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class gy extends he{constructor(){super();f(this,As);f(this,ga,0)}startScreenshot(){const e=r(this,As)||new lp;return y(this,As,e),Nn(this,ga)._++,e.acquire(()=>{Nn(this,ga)._--,r(this,ga)===0&&y(this,As,void 0)})}waitForScreenshotOperations(){var e;return(e=r(this,As))==null?void 0:e.acquire()}async waitForTarget(e,t={}){const{timeout:n=3e4}=t;return await it(tc(Ae(this,"targetcreated"),Ae(this,"targetchanged"),ke(this.targets())).pipe(ic(e),pt(It(n))))}async deleteCookie(...e){return await this.setCookie(...e.map(t=>({...t,expires:1})))}get closed(){return!this.browser().browserContexts().includes(this)}get id(){}[ge](){return void this.close().catch(de)}[er](){return this.close()}}As=new WeakMap,ga=new WeakMap;var je;(function(s){s.Disconnected=Symbol("CDPSession.Disconnected"),s.Swapped=Symbol("CDPSession.Swapped"),s.Ready=Symbol("CDPSession.Ready"),s.SessionAttached="sessionattached",s.SessionDetached="sessiondetached"})(je||(je={}));class sc extends he{constructor(){super()}parentSession(){}}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class wy{constructor(i,e,t=""){f(this,gu);f(this,wu);f(this,yu);W(this,"handled",!1);y(this,gu,i),y(this,wu,e),y(this,yu,t)}type(){return r(this,gu)}message(){return r(this,wu)}defaultValue(){return r(this,yu)}async accept(i){te(!this.handled,"Cannot accept dialog which is already handled!"),this.handled=!0,await this.handle({accept:!0,text:i})}async dismiss(){te(!this.handled,"Cannot dismiss dialog which is already handled!"),this.handled=!0,await this.handle({accept:!1})}}gu=new WeakMap,wu=new WeakMap,yu=new WeakMap;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const uh=Symbol("_isElementHandle");/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Vt(s){return typeof s=="object"&&s!==null&&"name"in s&&"message"in s}function yy(s,i,e){return s.message=i,s.originalMessage=e??s.originalMessage,s}function vy(s){let i=s.error.message;return s.error&&typeof s.error=="object"&&"data"in s.error&&(i+=` ${s.error.data}`),i}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const by=new Map,_x=s=>{let i=by.get(s);return i||(i=new Function(`return ${s}`)(),by.set(s,i),i)};function fr(s){let i=s.toString();try{new Function(`(${i})`)}catch(e){if(e.message.includes("Refused to evaluate a string as JavaScript because 'unsafe-eval' is not an allowed source of script in the following Content Security Policy directive"))return i;let t="function ";i.startsWith("async ")&&(t=`async ${t}`,i=i.substring(6)),i=`${t}${i}`;try{new Function(`(${i})`)}catch{throw new Error("Passed function cannot be serialized!")}}return i}const Jn=(s,i)=>{let e=fr(s);for(const[t,n]of Object.entries(i))e=e.replace(new RegExp(`PLACEHOLDER\\(\\s*(?:'${t}'|"${t}")\\s*\\)`,"g"),`(${n})`);return _x(e)};/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var lh=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},dp=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});const Tx=20;async function*Mx(s,i){const e={stack:[],error:void 0,hasError:!1};try{const n=await lh(e,await s.evaluateHandle(async(c,u)=>{const l=[];for(;l.length<u;){const p=await c.next();if(p.done)break;l.push(p.value)}return l},i),!1).getProperties(),a=n.values();return lh(e,new Xe,!1).defer(()=>{for(const c of a){const u={stack:[],error:void 0,hasError:!1};try{lh(u,c,!1)[ge]()}catch(l){u.error=l,u.hasError=!0}finally{dp(u)}}}),yield*a,n.size===0}catch(t){e.error=t,e.hasError=!0}finally{dp(e)}}async function*Ix(s){let i=Tx;for(;!(yield*Mx(s,i));)i<<=1}async function*Sy(s){const i={stack:[],error:void 0,hasError:!1};try{const e=lh(i,await s.evaluateHandle(t=>async function*(){yield*t}()),!1);yield*Ix(e)}catch(e){i.error=e,i.hasError=!0}finally{dp(i)}}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Hh=class Hh{constructor(i){f(this,vu);y(this,vu,i)}async get(i){return await r(this,vu).call(this,i)}};vu=new WeakMap,W(Hh,"create",i=>new Hh(i));let Nt=Hh;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var dh=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},hh=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});class Br{static get _querySelector(){if(this.querySelector)return this.querySelector;if(!this.querySelectorAll)throw new Error("Cannot create default `querySelector`.");return this.querySelector=Jn(async(i,e,t)=>{const a=PLACEHOLDER("querySelectorAll")(i,e,t);for await(const o of a)return o;return null},{querySelectorAll:fr(this.querySelectorAll)})}static get _querySelectorAll(){if(this.querySelectorAll)return this.querySelectorAll;if(!this.querySelector)throw new Error("Cannot create default `querySelectorAll`.");return this.querySelectorAll=Jn(async function*(i,e,t){const a=await PLACEHOLDER("querySelector")(i,e,t);a&&(yield a)},{querySelector:fr(this.querySelector)})}static async*queryAll(i,e){const t={stack:[],error:void 0,hasError:!1};try{const n=dh(t,await i.evaluateHandle(this._querySelectorAll,e,Nt.create(a=>a.puppeteerUtil)),!1);yield*Sy(n)}catch(n){t.error=n,t.hasError=!0}finally{hh(t)}}static async queryOne(i,e){const t={stack:[],error:void 0,hasError:!1};try{const n=dh(t,await i.evaluateHandle(this._querySelector,e,Nt.create(a=>a.puppeteerUtil)),!1);return uh in n?n.move():null}catch(n){t.error=n,t.hasError=!0}finally{hh(t)}}static async waitFor(i,e,t){const n={stack:[],error:void 0,hasError:!1};try{let a;const o=dh(n,await(async()=>{if(!(uh in i)){a=i;return}return a=i.frame,await a.isolatedRealm().adoptHandle(i)})(),!1),{visible:c=!1,hidden:u=!1,timeout:l,signal:p}=t,h=c||u?"raf":t.polling;try{const d={stack:[],error:void 0,hasError:!1};try{p==null||p.throwIfAborted();const m=dh(d,await a.isolatedRealm().waitForFunction(async(b,w,g,S,E)=>{const C=await b.createFunction(w)(S??document,g,b);return b.checkVisibility(C,E)},{polling:h,root:o,timeout:l,signal:p},Nt.create(b=>b.puppeteerUtil),fr(this._querySelector),e,o,c?!0:u?!1:void 0),!1);if(p!=null&&p.aborted)throw p.reason;return uh in m?await a.mainRealm().transferHandle(m):null}catch(m){d.error=m,d.hasError=!0}finally{hh(d)}}catch(d){throw!Vt(d)||d.name==="AbortError"||(d.message=`Waiting for selector \`${e}\` failed: ${d.message}`),d}}catch(a){n.error=a,n.hasError=!0}finally{hh(n)}}}W(Br,"querySelectorAll"),W(Br,"querySelector");class Yn{static async*map(i,e){for await(const t of i)yield await e(t)}static async*flatMap(i,e){for await(const t of i)yield*e(t)}static async collect(i){const e=[];for await(const t of i)e.push(t);return e}static async first(i){for await(const e of i)return e}}/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Ax=s=>["name","role"].includes(s),Rx=/\[\s*(?<attribute>\w+)\s*=\s*(?<quote>"|')(?<value>\\.|.*?(?=\k<quote>))\k<quote>\s*\]/g,Dx=s=>{if(s.length>1e4)throw new Error(`Selector ${s} is too long`);const i={},e=s.replace(Rx,(t,n,a,o)=>(te(Ax(n),`Unknown aria attribute "${n}" in selector`),i[n]=o,""));return e&&!i.name&&(i.name=e),i},bu=class bu extends Br{static async*queryAll(i,e){const{name:t,role:n}=Dx(e);yield*i.queryAXTree(t,n)}};W(bu,"querySelector",async(i,e,{ariaQuerySelector:t})=>await t(i,e)),W(bu,"queryOne",async(i,e)=>await Yn.first(bu.queryAll(i,e))??null);let ws=bu;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class fh extends Br{}W(fh,"querySelector",(i,e,{cssQuerySelector:t})=>t(i,e)),W(fh,"querySelectorAll",(i,e,{cssQuerySelectorAll:t})=>t(i,e));const Fx='"use strict";var g=Object.defineProperty;var X=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var Y=Object.prototype.hasOwnProperty;var l=(t,e)=>{for(var r in e)g(t,r,{get:e[r],enumerable:!0})},J=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of B(e))!Y.call(t,n)&&n!==r&&g(t,n,{get:()=>e[n],enumerable:!(o=X(e,n))||o.enumerable});return t};var z=t=>J(g({},"__esModule",{value:!0}),t);var pe={};l(pe,{default:()=>he});module.exports=z(pe);var N=class extends Error{constructor(e,r){super(e,r),this.name=this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}},p=class extends N{};var c=class t{static create(e){return new t(e)}static async race(e){let r=new Set;try{let o=e.map(n=>n instanceof t?(n.#n&&r.add(n),n.valueOrThrow()):n);return await Promise.race(o)}finally{for(let o of r)o.reject(new Error("Timeout cleared"))}}#e=!1;#r=!1;#o;#t;#a=new Promise(e=>{this.#t=e});#n;#i;constructor(e){e&&e.timeout>0&&(this.#i=new p(e.message),this.#n=setTimeout(()=>{this.reject(this.#i)},e.timeout))}#l(e){clearTimeout(this.#n),this.#o=e,this.#t()}resolve(e){this.#r||this.#e||(this.#e=!0,this.#l(e))}reject(e){this.#r||this.#e||(this.#r=!0,this.#l(e))}resolved(){return this.#e}finished(){return this.#e||this.#r}value(){return this.#o}#s;valueOrThrow(){return this.#s||(this.#s=(async()=>{if(await this.#a,this.#r)throw this.#o;return this.#o})()),this.#s}};var L=new Map,F=t=>{let e=L.get(t);return e||(e=new Function(`return ${t}`)(),L.set(t,e),e)};var x={};l(x,{ariaQuerySelector:()=>G,ariaQuerySelectorAll:()=>b});var G=(t,e)=>globalThis.__ariaQuerySelector(t,e),b=async function*(t,e){yield*await globalThis.__ariaQuerySelectorAll(t,e)};var E={};l(E,{cssQuerySelector:()=>K,cssQuerySelectorAll:()=>Z});var K=(t,e)=>t.querySelector(e),Z=function(t,e){return t.querySelectorAll(e)};var A={};l(A,{customQuerySelectors:()=>P});var v=class{#e=new Map;register(e,r){if(!r.queryOne&&r.queryAll){let o=r.queryAll;r.queryOne=(n,i)=>{for(let s of o(n,i))return s;return null}}else if(r.queryOne&&!r.queryAll){let o=r.queryOne;r.queryAll=(n,i)=>{let s=o(n,i);return s?[s]:[]}}else if(!r.queryOne||!r.queryAll)throw new Error("At least one query method must be defined.");this.#e.set(e,{querySelector:r.queryOne,querySelectorAll:r.queryAll})}unregister(e){this.#e.delete(e)}get(e){return this.#e.get(e)}clear(){this.#e.clear()}},P=new v;var R={};l(R,{pierceQuerySelector:()=>ee,pierceQuerySelectorAll:()=>te});var ee=(t,e)=>{let r=null,o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&!r&&s.matches(e)&&(r=s)}while(!r&&i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r},te=(t,e)=>{let r=[],o=n=>{let i=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT);do{let s=i.currentNode;s.shadowRoot&&o(s.shadowRoot),!(s instanceof ShadowRoot)&&s!==n&&s.matches(e)&&r.push(s)}while(i.nextNode())};return t instanceof Document&&(t=t.documentElement),o(t),r};var u=(t,e)=>{if(!t)throw new Error(e)};var y=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=new MutationObserver(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())}),this.#o.observe(this.#r,{childList:!0,subtree:!0,attributes:!0})}async stop(){u(this.#t,"Polling never started."),this.#t.finished()||this.#t.reject(new Error("Polling stopped")),this.#o&&(this.#o.disconnect(),this.#o=void 0)}result(){return u(this.#t,"Polling never started."),this.#t.valueOrThrow()}},w=class{#e;#r;constructor(e){this.#e=e}async start(){let e=this.#r=c.create(),r=await this.#e();if(r){e.resolve(r);return}let o=async()=>{if(e.finished())return;let n=await this.#e();if(!n){window.requestAnimationFrame(o);return}e.resolve(n),await this.stop()};window.requestAnimationFrame(o)}async stop(){u(this.#r,"Polling never started."),this.#r.finished()||this.#r.reject(new Error("Polling stopped"))}result(){return u(this.#r,"Polling never started."),this.#r.valueOrThrow()}},S=class{#e;#r;#o;#t;constructor(e,r){this.#e=e,this.#r=r}async start(){let e=this.#t=c.create(),r=await this.#e();if(r){e.resolve(r);return}this.#o=setInterval(async()=>{let o=await this.#e();o&&(e.resolve(o),await this.stop())},this.#r)}async stop(){u(this.#t,"Polling never started."),this.#t.finished()||this.#t.reject(new Error("Polling stopped")),this.#o&&(clearInterval(this.#o),this.#o=void 0)}result(){return u(this.#t,"Polling never started."),this.#t.valueOrThrow()}};var _={};l(_,{PCombinator:()=>H,pQuerySelector:()=>fe,pQuerySelectorAll:()=>$});var a=class{static async*map(e,r){for await(let o of e)yield await r(o)}static async*flatMap(e,r){for await(let o of e)yield*r(o)}static async collect(e){let r=[];for await(let o of e)r.push(o);return r}static async first(e){for await(let r of e)return r}};var C={};l(C,{textQuerySelectorAll:()=>m});var re=new Set(["checkbox","image","radio"]),oe=t=>t instanceof HTMLSelectElement||t instanceof HTMLTextAreaElement||t instanceof HTMLInputElement&&!re.has(t.type),ne=new Set(["SCRIPT","STYLE"]),f=t=>!ne.has(t.nodeName)&&!document.head?.contains(t),I=new WeakMap,j=t=>{for(;t;)I.delete(t),t instanceof ShadowRoot?t=t.host:t=t.parentNode},W=new WeakSet,se=new MutationObserver(t=>{for(let e of t)j(e.target)}),d=t=>{let e=I.get(t);if(e||(e={full:"",immediate:[]},!f(t)))return e;let r="";if(oe(t))e.full=t.value,e.immediate.push(t.value),t.addEventListener("input",o=>{j(o.target)},{once:!0,capture:!0});else{for(let o=t.firstChild;o;o=o.nextSibling){if(o.nodeType===Node.TEXT_NODE){e.full+=o.nodeValue??"",r+=o.nodeValue??"";continue}r&&e.immediate.push(r),r="",o.nodeType===Node.ELEMENT_NODE&&(e.full+=d(o).full)}r&&e.immediate.push(r),t instanceof Element&&t.shadowRoot&&(e.full+=d(t.shadowRoot).full),W.has(t)||(se.observe(t,{childList:!0,characterData:!0,subtree:!0}),W.add(t))}return I.set(t,e),e};var m=function*(t,e){let r=!1;for(let o of t.childNodes)if(o instanceof Element&&f(o)){let n;o.shadowRoot?n=m(o.shadowRoot,e):n=m(o,e);for(let i of n)yield i,r=!0}r||t instanceof Element&&f(t)&&d(t).full.includes(e)&&(yield t)};var k={};l(k,{checkVisibility:()=>le,pierce:()=>T,pierceAll:()=>O});var ie=["hidden","collapse"],le=(t,e)=>{if(!t)return e===!1;if(e===void 0)return t;let r=t.nodeType===Node.TEXT_NODE?t.parentElement:t,o=window.getComputedStyle(r),n=o&&!ie.includes(o.visibility)&&!ae(r);return e===n?t:!1};function ae(t){let e=t.getBoundingClientRect();return e.width===0||e.height===0}var ce=t=>"shadowRoot"in t&&t.shadowRoot instanceof ShadowRoot;function*T(t){ce(t)?yield t.shadowRoot:yield t}function*O(t){t=T(t).next().value,yield t;let e=[document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT)];for(let r of e){let o;for(;o=r.nextNode();)o.shadowRoot&&(yield o.shadowRoot,e.push(document.createTreeWalker(o.shadowRoot,NodeFilter.SHOW_ELEMENT)))}}var Q={};l(Q,{xpathQuerySelectorAll:()=>q});var q=function*(t,e,r=-1){let n=(t.ownerDocument||document).evaluate(e,t,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE),i=[],s;for(;(s=n.iterateNext())&&(i.push(s),!(r&&i.length===r)););for(let h=0;h<i.length;h++)s=i[h],yield s,delete i[h]};var ue=/[-\\w\\P{ASCII}*]/u,H=(r=>(r.Descendent=">>>",r.Child=">>>>",r))(H||{}),V=t=>"querySelectorAll"in t,M=class{#e;#r=[];#o=void 0;elements;constructor(e,r){this.elements=[e],this.#e=r,this.#t()}async run(){if(typeof this.#o=="string")switch(this.#o.trimStart()){case":scope":this.#t();break}for(;this.#o!==void 0;this.#t()){let e=this.#o;typeof e=="string"?e[0]&&ue.test(e[0])?this.elements=a.flatMap(this.elements,async function*(r){V(r)&&(yield*r.querySelectorAll(e))}):this.elements=a.flatMap(this.elements,async function*(r){if(!r.parentElement){if(!V(r))return;yield*r.querySelectorAll(e);return}let o=0;for(let n of r.parentElement.children)if(++o,n===r)break;yield*r.parentElement.querySelectorAll(`:scope>:nth-child(${o})${e}`)}):this.elements=a.flatMap(this.elements,async function*(r){switch(e.name){case"text":yield*m(r,e.value);break;case"xpath":yield*q(r,e.value);break;case"aria":yield*b(r,e.value);break;default:let o=P.get(e.name);if(!o)throw new Error(`Unknown selector type: ${e.name}`);yield*o.querySelectorAll(r,e.value)}})}}#t(){if(this.#r.length!==0){this.#o=this.#r.shift();return}if(this.#e.length===0){this.#o=void 0;return}let e=this.#e.shift();switch(e){case">>>>":{this.elements=a.flatMap(this.elements,T),this.#t();break}case">>>":{this.elements=a.flatMap(this.elements,O),this.#t();break}default:this.#r=e,this.#t();break}}},D=class{#e=new WeakMap;calculate(e,r=[]){if(e===null)return r;e instanceof ShadowRoot&&(e=e.host);let o=this.#e.get(e);if(o)return[...o,...r];let n=0;for(let s=e.previousSibling;s;s=s.previousSibling)++n;let i=this.calculate(e.parentNode,[n]);return this.#e.set(e,i),[...i,...r]}},U=(t,e)=>{if(t.length+e.length===0)return 0;let[r=-1,...o]=t,[n=-1,...i]=e;return r===n?U(o,i):r<n?-1:1},de=async function*(t){let e=new Set;for await(let o of t)e.add(o);let r=new D;yield*[...e.values()].map(o=>[o,r.calculate(o)]).sort(([,o],[,n])=>U(o,n)).map(([o])=>o)},$=function(t,e){let r=JSON.parse(e);if(r.some(o=>{let n=0;return o.some(i=>(typeof i=="string"?++n:n=0,n>1))}))throw new Error("Multiple deep combinators found in sequence.");return de(a.flatMap(r,o=>{let n=new M(t,o);return n.run(),n.elements}))},fe=async function(t,e){for await(let r of $(t,e))return r;return null};var me=Object.freeze({...x,...A,...R,..._,...C,...k,...Q,...E,Deferred:c,createFunction:F,createTextContent:d,IntervalPoller:S,isSuitableNodeForTextMatching:f,MutationPoller:y,RAFPoller:w}),he=me;\n';/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ox{constructor(){f(this,Rs);f(this,wa,!1);f(this,ya,new Set)}append(i){k(this,Rs,Rm).call(this,()=>{r(this,ya).add(i)})}pop(i){k(this,Rs,Rm).call(this,()=>{r(this,ya).delete(i)})}inject(i,e=!1){(r(this,wa)||e)&&i(k(this,Rs,PS).call(this)),y(this,wa,!1)}}wa=new WeakMap,ya=new WeakMap,Rs=new WeakSet,Rm=function(i){i(),y(this,wa,!0)},PS=function(){return`(() => {
      const module = {};
      ${Fx}
      ${[...r(this,ya)].map(i=>`(${i})(module.exports.default);`).join("")}
      return module.exports.default;
    })()`};const nc=new Ox;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Nx{constructor(){f(this,sr,new Map)}get(i){const e=r(this,sr).get(i);return e?e[1]:void 0}register(i,e){var a;te(!r(this,sr).has(i),`Cannot register over existing handler: ${i}`),te(/^[a-zA-Z]+$/.test(i),"Custom query handler names may only contain [a-zA-Z]"),te(e.queryAll||e.queryOne,"At least one query method must be implemented.");const t=(a=class extends Br{},W(a,"querySelectorAll",Jn((o,c,u)=>u.customQuerySelectors.get(PLACEHOLDER("name")).querySelectorAll(o,c),{name:JSON.stringify(i)})),W(a,"querySelector",Jn((o,c,u)=>u.customQuerySelectors.get(PLACEHOLDER("name")).querySelector(o,c),{name:JSON.stringify(i)})),a),n=Jn(o=>{o.customQuerySelectors.register(PLACEHOLDER("name"),{queryAll:PLACEHOLDER("queryAll"),queryOne:PLACEHOLDER("queryOne")})},{name:JSON.stringify(i),queryAll:e.queryAll?fr(e.queryAll):String(void 0),queryOne:e.queryOne?fr(e.queryOne):String(void 0)}).toString();r(this,sr).set(i,[n,t]),nc.append(n)}unregister(i){const e=r(this,sr).get(i);if(!e)throw new Error(`Cannot unregister unknown handler: ${i}`);nc.pop(e[0]),r(this,sr).delete(i)}names(){return[...r(this,sr).keys()]}clear(){for(const[i]of r(this,sr))nc.pop(i);r(this,sr).clear()}}sr=new WeakMap;const hp=new Nx;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class fp extends Br{}W(fp,"querySelector",(i,e,{pierceQuerySelector:t})=>t(i,e)),W(fp,"querySelectorAll",(i,e,{pierceQuerySelectorAll:t})=>t(i,e));/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class pp extends Br{}W(pp,"querySelectorAll",(i,e,{pQuerySelectorAll:t})=>t(i,e)),W(pp,"querySelector",(i,e,{pQuerySelector:t})=>t(i,e));var Qn={attribute:/\[\s*(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?(?<name>[-\w\P{ASCII}]+)\s*(?:(?<operator>\W?=)\s*(?<value>.+?)\s*(\s(?<caseSensitive>[iIsS]))?\s*)?\]/gu,id:/#(?<name>[-\w\P{ASCII}]+)/gu,class:/\.(?<name>[-\w\P{ASCII}]+)/gu,comma:/\s*,\s*/g,combinator:/\s*[\s>+~]\s*/g,"pseudo-element":/::(?<name>[-\w\P{ASCII}]+)(?:\((?<argument>¶*)\))?/gu,"pseudo-class":/:(?<name>[-\w\P{ASCII}]+)(?:\((?<argument>¶*)\))?/gu,universal:/(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?\*/gu,type:/(?:(?<namespace>\*|[-\w\P{ASCII}]*)\|)?(?<name>[-\w\P{ASCII}]+)/gu},Lx=new Set(["combinator","comma"]),Bx=s=>{switch(s){case"pseudo-element":case"pseudo-class":return new RegExp(Qn[s].source.replace("(?<argument>¶*)","(?<argument>.*)"),"gu");default:return Qn[s]}};function jx(s,i){let e=0,t="";for(;i<s.length;i++){const n=s[i];switch(n){case"(":++e;break;case")":--e;break}if(t+=n,e===0)return t}return t}function qx(s,i=Qn){if(!s)return[];const e=[s];for(const[n,a]of Object.entries(i))for(let o=0;o<e.length;o++){const c=e[o];if(typeof c!="string")continue;a.lastIndex=0;const u=a.exec(c);if(!u)continue;const l=u.index-1,p=[],h=u[0],d=c.slice(0,l+1);d&&p.push(d),p.push({...u.groups,type:n,content:h});const m=c.slice(l+h.length+1);m&&p.push(m),e.splice(o,1,...p)}let t=0;for(const n of e)switch(typeof n){case"string":throw new Error(`Unexpected sequence ${n} found at index ${t}`);case"object":t+=n.content.length,n.pos=[t-n.content.length,t],Lx.has(n.type)&&(n.content=n.content.trim()||" ");break}return e}var $x=/(['"])([^\\\n]+?)\1/g,Kx=/\\./g;function Ux(s,i=Qn){if(s=s.trim(),s==="")return[];const e=[];s=s.replace(Kx,(a,o)=>(e.push({value:a,offset:o}),"".repeat(a.length))),s=s.replace($x,(a,o,c,u)=>(e.push({value:a,offset:u}),`${o}${"".repeat(c.length)}${o}`));{let a=0,o;for(;(o=s.indexOf("(",a))>-1;){const c=jx(s,o);e.push({value:c,offset:o}),s=`${s.substring(0,o)}(${"¶".repeat(c.length-2)})${s.substring(o+c.length)}`,a=o+c.length}}const t=qx(s,i),n=new Set;for(const a of e.reverse())for(const o of t){const{offset:c,value:u}=a;if(!(o.pos[0]<=c&&c+u.length<=o.pos[1]))continue;const{content:l}=o,p=c-o.pos[0];o.content=l.slice(0,p)+u+l.slice(p+u.length),o.content!==l&&n.add(o)}for(const a of n){const o=Bx(a.type);if(!o)throw new Error(`Unknown token type: ${a.type}`);o.lastIndex=0;const c=o.exec(a.content);if(!c)throw new Error(`Unable to parse content for ${a.type}: ${a.content}`);Object.assign(a,c.groups)}return t}function pr(s){if(Array.isArray(s))return s.map(i=>i.content).join("");switch(s.type){case"list":return s.list.map(pr).join(",");case"relative":return s.combinator+pr(s.right);case"complex":return pr(s.left)+s.combinator+pr(s.right);case"compound":return s.list.map(pr).join("");default:return s.content}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */Qn.nesting=/&/g,Qn.combinator=/\s*(>>>>?|[\s>+~])\s*/g;const Hx=/\\[\s\S]/g,Wx=s=>s.length<=1?s:((s[0]==='"'||s[0]==="'")&&s.endsWith(s[0])&&(s=s.slice(1,-1)),s.replace(Hx,i=>i[1]));function zx(s){let i=!0,e=!1,t=!1;const n=Ux(s);if(n.length===0)return[[],i,t,!1];let a=[],o=[a];const c=[o],u=[];for(const l of n){switch(l.type){case"combinator":switch(l.content){case">>>":i=!1,u.length&&(a.push(pr(u)),u.splice(0)),a=[],o.push(">>>"),o.push(a);continue;case">>>>":i=!1,u.length&&(a.push(pr(u)),u.splice(0)),a=[],o.push(">>>>"),o.push(a);continue}break;case"pseudo-element":if(!l.name.startsWith("-p-"))break;i=!1,u.length&&(a.push(pr(u)),u.splice(0));const p=l.name.slice(3);p==="aria"&&(e=!0),a.push({name:p,value:Wx(l.argument??"")});continue;case"pseudo-class":t=!0;break;case"comma":u.length&&(a.push(pr(u)),u.splice(0)),a=[],o=[a],c.push(o);continue}u.push(l)}return u.length&&a.push(pr(u)),[c,i,t,e]}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Cy extends Br{}W(Cy,"querySelectorAll",(i,e,{textQuerySelectorAll:t})=>t(i,e));/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class mp extends Br{}W(mp,"querySelectorAll",(i,e,{xpathQuerySelectorAll:t})=>t(i,e)),W(mp,"querySelector",(i,e,{xpathQuerySelectorAll:t})=>{for(const n of t(i,e,1))return n;return null});/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Vx={aria:ws,pierce:fp,xpath:mp,text:Cy},Gx=["=","/"];function ph(s){for(const i of[hp.names().map(e=>[e,hp.get(e)]),Object.entries(Vx)])for(const[e,t]of i)for(const n of Gx){const a=`${e}${n}`;if(s.startsWith(a))return s=s.slice(a.length),{updatedSelector:s,polling:e==="aria"?"raf":"mutation",QueryHandler:t}}try{const[i,e,t,n]=zx(s);return e?{updatedSelector:s,polling:t?"raf":"mutation",QueryHandler:fh}:{updatedSelector:JSON.stringify(i),polling:n?"raf":"mutation",QueryHandler:pp}}catch{return{updatedSelector:s,polling:"mutation",QueryHandler:fh}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Xx=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},Jx=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});const ac=new WeakSet;function Yx(s,i){let e=!1;if(s.prototype[ge]){const t=s.prototype[ge];s.prototype[ge]=function(){if(ac.has(this)){ac.delete(this);return}return t.call(this)},e=!0}if(s.prototype[er]){const t=s.prototype[er];s.prototype[er]=function(){if(ac.has(this)){ac.delete(this);return}return t.call(this)},e=!0}return e&&(s.prototype.move=function(){return ac.add(this),this}),s}function se(s=i=>`Attempted to use disposed ${i.constructor.name}.`){return(i,e)=>function(...t){if(this.disposed)throw new Error(s(this));return i.call(this,...t)}}function wi(s,i){return function(...e){if(!this.disposed)return s.call(this,...e)}}function rr(s,i){const e=new WeakMap;let t=-1;return function(...n){if(t===-1&&(t=n.length),t!==n.length)throw new Error("Memoized method was called with the wrong number of arguments");let a=!1,o=e;for(const c of n)o.has(c)||(a=!0,o.set(c,new WeakMap)),o=o.get(c);if(a)return s.call(this,...n)}}function Qx(s=function(){return this}){return(i,e)=>{const t=new WeakMap;return async function(...n){const a={stack:[],error:void 0,hasError:!1};try{const o=s.call(this);let c=t.get(o);c||(c=new lp,t.set(o,c));const u=Xx(a,await c.acquire(),!0);return await i.call(this,...n)}catch(o){a.error=o,a.hasError=!0}finally{const o=Jx(a);o&&await o}}}}const mh=new WeakMap,ky=function(s){const i=mh.get(this)??new Map;if(i.has(s))return;const e=s!==void 0?(t,n)=>{s.includes(t)&&this.emit(t,n)}:(t,n)=>{this.emit(t,n)};i.set(s,e),mh.set(this,i)};function gh(s){return({set:i,get:e},t)=>(t.addInitializer(function(){return ky.apply(this,[s])}),{set(n){const a=mh.get(this).get(s),o=e.call(this);o!==void 0&&o.off("*",a),n!==void 0&&(n.on("*",a),i.call(this,n))},init(n){if(n===void 0)return n;ky.apply(this,[s]);const a=mh.get(this).get(s);return n.on("*",a),n}})}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Ey=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},gp=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},Zx=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},eP=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});let ys=(()=>{var c;let s=[Yx],i,e=[],t,n=[],a,o;return c=class{constructor(){Ey(this,n)}async evaluate(l,...p){return l=nt(this.evaluate.name,l),await this.realm.evaluate(l,this,...p)}async evaluateHandle(l,...p){return l=nt(this.evaluateHandle.name,l),await this.realm.evaluateHandle(l,this,...p)}async getProperty(l){return await this.evaluateHandle((p,h)=>p[h],l)}async getProperties(){const l=await this.evaluate(d=>{var w;const m=[],b=Object.getOwnPropertyDescriptors(d);for(const g in b)(w=b[g])!=null&&w.enumerable&&m.push(g);return m}),p=new Map,h=await Promise.all(l.map(d=>this.getProperty(d)));for(const[d,m]of Object.entries(l)){const b={stack:[],error:void 0,hasError:!1};try{const w=Zx(b,h[d],!1);w&&p.set(m,w.move())}catch(w){b.error=w,b.hasError=!0}finally{eP(b)}}return p}[(a=[se()],o=[se()],ge)](){return void this.dispose().catch(de)}[er](){return this.dispose()}},t=c,(()=>{const l=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;gp(c,null,a,{kind:"method",name:"getProperty",static:!1,private:!1,access:{has:p=>"getProperty"in p,get:p=>p.getProperty},metadata:l},null,n),gp(c,null,o,{kind:"method",name:"getProperties",static:!1,private:!1,access:{has:p=>"getProperties"in p,get:p=>p.getProperties},metadata:l},null,n),gp(null,i={value:t},s,{kind:"class",name:t.name,metadata:l},null,e),t=i.value,l&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:l}),Ey(t,e)})(),t})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var tP=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},Ie=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},oc=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},cc=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t}),rP=function(s,i,e){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:e?"".concat(e," ",i):i})};function Ee(s,i){return async function(...e){if(this.realm===this.frame.isolatedRealm())return await s.call(this,...e);let t;this.isolatedHandle?t=this.isolatedHandle:this.isolatedHandle=t=await this.frame.isolatedRealm().adoptHandle(this);const n=await s.call(t,...e);return n===t?this:n instanceof ys?await this.realm.transferHandle(n):(Array.isArray(n)&&await Promise.all(n.map(async(a,o,c)=>{a instanceof ys&&(c[o]=await this.realm.transferHandle(a))})),n instanceof Map&&await Promise.all([...n.entries()].map(async([a,o])=>{o instanceof ys&&n.set(a,await this.realm.transferHandle(o))})),n)}}let xy=(()=>{var N,Dm,Fm,Om,_S,Nm,Lm,TS,MS,IS,ce;let s=ys,i=[],e,t,n,a,o,c,u,l,p,h,d,m,b,w,g,S,E,v,C,A,F,R,P,T,q,L,I,_,K,j,O,D;return ce=class extends s{constructor(x){super();f(this,N);W(this,"isolatedHandle",tP(this,i));W(this,"handle");this.handle=x,this[uh]=!0}get id(){return this.handle.id}get disposed(){return this.handle.disposed}async getProperty(x){return await this.handle.getProperty(x)}async getProperties(){return await this.handle.getProperties()}async evaluate(x,...M){return x=nt(this.evaluate.name,x),await this.handle.evaluate(x,...M)}async evaluateHandle(x,...M){return x=nt(this.evaluateHandle.name,x),await this.handle.evaluateHandle(x,...M)}async jsonValue(){return await this.handle.jsonValue()}toString(){return this.handle.toString()}remoteObject(){return this.handle.remoteObject()}dispose(){return this.handle.dispose()}asElement(){return this}async $(x){const{updatedSelector:M,QueryHandler:H}=ph(x);return await H.queryOne(this,M)}async $$(x,M){return(M==null?void 0:M.isolate)===!1?await k(this,N,Fm).call(this,x):await r(this,N,Dm).call(this,x)}async $eval(x,M,...H){const G={stack:[],error:void 0,hasError:!1};try{M=nt(this.$eval.name,M);const J=oc(G,await this.$(x),!1);if(!J)throw new Error(`Error: failed to find element matching selector "${x}"`);return await J.evaluate(M,...H)}catch(J){G.error=J,G.hasError=!0}finally{cc(G)}}async $$eval(x,M,...H){const G={stack:[],error:void 0,hasError:!1};try{M=nt(this.$$eval.name,M);const J=await this.$$(x),Z=oc(G,await this.evaluateHandle((ue,...U)=>U,...J),!1),[ie]=await Promise.all([Z.evaluate(M,...H),...J.map(ue=>ue.dispose())]);return ie}catch(J){G.error=J,G.hasError=!0}finally{cc(G)}}async waitForSelector(x,M={}){const{updatedSelector:H,QueryHandler:G,polling:J}=ph(x);return await G.waitFor(this,H,{polling:J,...M})}async isVisible(){return await k(this,N,Om).call(this,!0)}async isHidden(){return await k(this,N,Om).call(this,!1)}async toElement(x){if(!await this.evaluate((H,G)=>H.nodeName===G.toUpperCase(),x))throw new Error(`Element is not a(n) \`${x}\` element`);return this}async clickablePoint(x){const M=await k(this,N,_S).call(this);if(!M)throw new Error("Node is either not clickable or not an Element");return x!==void 0?{x:M.x+x.x,y:M.y+x.y}:{x:M.x+M.width/2,y:M.y+M.height/2}}async hover(){await this.scrollIntoViewIfNeeded();const{x,y:M}=await this.clickablePoint();await this.frame.page().mouse.move(x,M)}async click(x={}){await this.scrollIntoViewIfNeeded();const{x:M,y:H}=await this.clickablePoint(x.offset);await this.frame.page().mouse.click(M,H,x)}async drag(x){await this.scrollIntoViewIfNeeded();const M=this.frame.page();if(M.isDragInterceptionEnabled()){const H=await this.clickablePoint();return x instanceof ce&&(x=await x.clickablePoint()),await M.mouse.drag(H,x)}try{M._isDragging||(M._isDragging=!0,await this.hover(),await M.mouse.down()),x instanceof ce?await x.hover():await M.mouse.move(x.x,x.y)}catch(H){throw M._isDragging=!1,H}}async dragEnter(x={items:[],dragOperationsMask:1}){const M=this.frame.page();await this.scrollIntoViewIfNeeded();const H=await this.clickablePoint();await M.mouse.dragEnter(H,x)}async dragOver(x={items:[],dragOperationsMask:1}){const M=this.frame.page();await this.scrollIntoViewIfNeeded();const H=await this.clickablePoint();await M.mouse.dragOver(H,x)}async drop(x={items:[],dragOperationsMask:1}){const M=this.frame.page();if("items"in x){await this.scrollIntoViewIfNeeded();const H=await this.clickablePoint();await M.mouse.drop(H,x)}else await x.drag(this),M._isDragging=!1,await M.mouse.up()}async dragAndDrop(x,M){const H=this.frame.page();te(H.isDragInterceptionEnabled(),"Drag Interception is not enabled!"),await this.scrollIntoViewIfNeeded();const G=await this.clickablePoint(),J=await x.clickablePoint();await H.mouse.dragAndDrop(G,J,M)}async select(...x){for(const M of x)te(Lr(M),'Values must be strings. Found value "'+M+'" of type "'+typeof M+'"');return await this.evaluate((M,H)=>{const G=new Set(H);if(!(M instanceof HTMLSelectElement))throw new Error("Element is not a <select> element.");const J=new Set;if(M.multiple)for(const Z of M.options)Z.selected=G.has(Z.value),Z.selected&&J.add(Z.value);else{for(const Z of M.options)Z.selected=!1;for(const Z of M.options)if(G.has(Z.value)){Z.selected=!0,J.add(Z.value);break}}return M.dispatchEvent(new Event("input",{bubbles:!0})),M.dispatchEvent(new Event("change",{bubbles:!0})),[...J.values()]},x)}async tap(){await this.scrollIntoViewIfNeeded();const{x,y:M}=await this.clickablePoint();await this.frame.page().touchscreen.tap(x,M)}async touchStart(){await this.scrollIntoViewIfNeeded();const{x,y:M}=await this.clickablePoint();return await this.frame.page().touchscreen.touchStart(x,M)}async touchMove(x){await this.scrollIntoViewIfNeeded();const{x:M,y:H}=await this.clickablePoint();if(x)return await x.move(M,H);await this.frame.page().touchscreen.touchMove(M,H)}async touchEnd(){await this.scrollIntoViewIfNeeded(),await this.frame.page().touchscreen.touchEnd()}async focus(){await this.evaluate(x=>{if(!(x instanceof HTMLElement))throw new Error("Cannot focus non-HTMLElement");return x.focus()})}async type(x,M){await this.focus(),await this.frame.page().keyboard.type(x,M)}async press(x,M){await this.focus(),await this.frame.page().keyboard.press(x,M)}async boundingBox(){const x=await this.evaluate(H=>{if(!(H instanceof Element)||H.getClientRects().length===0)return null;const G=H.getBoundingClientRect();return{x:G.x,y:G.y,width:G.width,height:G.height}});if(!x)return null;const M=await k(this,N,Lm).call(this);return M?{x:x.x+M.x,y:x.y+M.y,height:x.height,width:x.width}:null}async boxModel(){const x=await this.evaluate(H=>{if(!(H instanceof Element)||H.getClientRects().length===0)return null;const G=H.getBoundingClientRect(),J=window.getComputedStyle(H),Z={padding:{left:parseInt(J.paddingLeft,10),top:parseInt(J.paddingTop,10),right:parseInt(J.paddingRight,10),bottom:parseInt(J.paddingBottom,10)},margin:{left:-parseInt(J.marginLeft,10),top:-parseInt(J.marginTop,10),right:-parseInt(J.marginRight,10),bottom:-parseInt(J.marginBottom,10)},border:{left:parseInt(J.borderLeft,10),top:parseInt(J.borderTop,10),right:parseInt(J.borderRight,10),bottom:parseInt(J.borderBottom,10)}},ie=[{x:G.left,y:G.top},{x:G.left+G.width,y:G.top},{x:G.left+G.width,y:G.top+G.height},{x:G.left,y:G.top+G.height}],ue=ee(ie,Z.border),U=ee(ue,Z.padding),Q=ee(ie,Z.margin);return{content:U,padding:ue,border:ie,margin:Q,width:G.width,height:G.height};function ee(re,pe){return[{x:re[0].x+pe.left,y:re[0].y+pe.top},{x:re[1].x-pe.right,y:re[1].y+pe.top},{x:re[2].x-pe.right,y:re[2].y-pe.bottom},{x:re[3].x+pe.left,y:re[3].y-pe.bottom}]}});if(!x)return null;const M=await k(this,N,Lm).call(this);if(!M)return null;for(const H of["content","padding","border","margin"])for(const G of x[H])G.x+=M.x,G.y+=M.y;return x}async screenshot(x={}){const{scrollIntoView:M=!0,clip:H}=x,G=this.frame.page();M&&await this.scrollIntoViewIfNeeded();const J=await k(this,N,TS).call(this),[Z,ie]=await this.evaluate(()=>{if(!window.visualViewport)throw new Error("window.visualViewport is not supported.");return[window.visualViewport.pageLeft,window.visualViewport.pageTop]});return J.x+=Z,J.y+=ie,H&&(J.x+=H.x,J.y+=H.y,J.height=H.height,J.width=H.width),await G.screenshot({...x,clip:J})}async assertConnectedElement(){const x=await this.evaluate(async M=>{if(!M.isConnected)return"Node is detached from document";if(M.nodeType!==Node.ELEMENT_NODE)return"Node is not of type HTMLElement"});if(x)throw new Error(x)}async scrollIntoViewIfNeeded(){await this.isIntersectingViewport({threshold:1})||await this.scrollIntoView()}async isIntersectingViewport(x={}){var H;const M={stack:[],error:void 0,hasError:!1};try{await this.assertConnectedElement();const G=await k(this,N,MS).call(this);return await(oc(M,G&&await k(H=G,N,IS).call(H),!1)??this).evaluate(async(Z,ie)=>{const ue=await new Promise(U=>{const Q=new IntersectionObserver(ee=>{U(ee[0].intersectionRatio),Q.disconnect()});Q.observe(Z)});return ie===1?ue===1:ue>ie},x.threshold??0)}catch(G){M.error=G,M.hasError=!0}finally{cc(M)}}async scrollIntoView(){await this.assertConnectedElement(),await this.evaluate(async x=>{x.scrollIntoView({block:"center",inline:"center",behavior:"instant"})})}},N=new WeakSet,Dm=function(){return u.value},Fm=async function(x){const{updatedSelector:M,QueryHandler:H}=ph(x);return await Yn.collect(H.queryAll(this,M))},Om=async function(x){return await this.evaluate(async(M,H,G)=>!!H.checkVisibility(M,G),Nt.create(M=>M.puppeteerUtil),x)},_S=async function(){var J;const x=await this.evaluate(Z=>Z instanceof Element?[...Z.getClientRects()].map(ie=>({x:ie.x,y:ie.y,width:ie.width,height:ie.height})):null);if(!(x!=null&&x.length))return null;await k(this,N,Nm).call(this,x);let M=this.frame,H;for(;H=M==null?void 0:M.parentFrame();){const Z={stack:[],error:void 0,hasError:!1};try{const ie=oc(Z,await M.frameElement(),!1);if(!ie)throw new Error("Unsupported frame type");const ue=await ie.evaluate(U=>{if(U.getClientRects().length===0)return null;const Q=U.getBoundingClientRect(),ee=window.getComputedStyle(U);return{left:Q.left+parseInt(ee.paddingLeft,10)+parseInt(ee.borderLeftWidth,10),top:Q.top+parseInt(ee.paddingTop,10)+parseInt(ee.borderTopWidth,10)}});if(!ue)return null;for(const U of x)U.x+=ue.left,U.y+=ue.top;await k(J=ie,N,Nm).call(J,x),M=H}catch(ie){Z.error=ie,Z.hasError=!0}finally{cc(Z)}}const G=x.find(Z=>Z.width>=1&&Z.height>=1);return G?{x:G.x,y:G.y,height:G.height,width:G.width}:null},Nm=async function(x){const{documentWidth:M,documentHeight:H}=await this.frame.isolatedRealm().evaluate(()=>({documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight}));for(const G of x)iP(G,M,H)},Lm=async function(){const x={x:0,y:0};let M=this.frame,H;for(;H=M==null?void 0:M.parentFrame();){const G={stack:[],error:void 0,hasError:!1};try{const J=oc(G,await M.frameElement(),!1);if(!J)throw new Error("Unsupported frame type");const Z=await J.evaluate(ie=>{if(ie.getClientRects().length===0)return null;const ue=ie.getBoundingClientRect(),U=window.getComputedStyle(ie);return{left:ue.left+parseInt(U.paddingLeft,10)+parseInt(U.borderLeftWidth,10),top:ue.top+parseInt(U.paddingTop,10)+parseInt(U.borderTopWidth,10)}});if(!Z)return null;x.x+=Z.left,x.y+=Z.top,M=H}catch(J){G.error=J,G.hasError=!0}finally{cc(G)}}return x},TS=async function(){const x=await this.boundingBox();return te(x,"Node is either not visible or not an HTMLElement"),te(x.width!==0,"Node has 0 width."),te(x.height!==0,"Node has 0 height."),x},MS=async function(){return await this.evaluate(x=>x instanceof SVGElement)?this:null},IS=async function(){return await this.evaluateHandle(x=>x instanceof SVGSVGElement?x:x.ownerSVGElement)},(()=>{const x=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[se(),Ee],t=[se(),Ee],n=[se(),Ee],a=[se(),Ee],o=[se()],c=[Ee],l=[se(),Ee],p=[se(),Ee],h=[se(),Ee],d=[se(),Ee],m=[se(),Ee],b=[se(),Ee],w=[se(),Ee],g=[se(),Ee],S=[se(),Ee],E=[se(),Ee],v=[se(),Ee],C=[se(),Ee],A=[se(),Ee],F=[se(),Ee],R=[se(),Ee],P=[se(),Ee],T=[se(),Ee],q=[se(),Ee],L=[se(),Ee],I=[se(),Ee],_=[se(),Ee],K=[se(),Ee],j=[se(),Ee],O=[se(),Ee],D=[se(),Ee],Ie(ce,null,e,{kind:"method",name:"getProperty",static:!1,private:!1,access:{has:M=>"getProperty"in M,get:M=>M.getProperty},metadata:x},null,i),Ie(ce,null,t,{kind:"method",name:"getProperties",static:!1,private:!1,access:{has:M=>"getProperties"in M,get:M=>M.getProperties},metadata:x},null,i),Ie(ce,null,n,{kind:"method",name:"jsonValue",static:!1,private:!1,access:{has:M=>"jsonValue"in M,get:M=>M.jsonValue},metadata:x},null,i),Ie(ce,null,a,{kind:"method",name:"$",static:!1,private:!1,access:{has:M=>"$"in M,get:M=>M.$},metadata:x},null,i),Ie(ce,null,o,{kind:"method",name:"$$",static:!1,private:!1,access:{has:M=>"$$"in M,get:M=>M.$$},metadata:x},null,i),Ie(ce,u={value:rP(async function(M){return await k(this,N,Fm).call(this,M)},"#$$")},c,{kind:"method",name:"#$$",static:!1,private:!0,access:{has:M=>Tt(N,M),get:M=>r(M,N,Dm)},metadata:x},null,i),Ie(ce,null,l,{kind:"method",name:"waitForSelector",static:!1,private:!1,access:{has:M=>"waitForSelector"in M,get:M=>M.waitForSelector},metadata:x},null,i),Ie(ce,null,p,{kind:"method",name:"isVisible",static:!1,private:!1,access:{has:M=>"isVisible"in M,get:M=>M.isVisible},metadata:x},null,i),Ie(ce,null,h,{kind:"method",name:"isHidden",static:!1,private:!1,access:{has:M=>"isHidden"in M,get:M=>M.isHidden},metadata:x},null,i),Ie(ce,null,d,{kind:"method",name:"toElement",static:!1,private:!1,access:{has:M=>"toElement"in M,get:M=>M.toElement},metadata:x},null,i),Ie(ce,null,m,{kind:"method",name:"clickablePoint",static:!1,private:!1,access:{has:M=>"clickablePoint"in M,get:M=>M.clickablePoint},metadata:x},null,i),Ie(ce,null,b,{kind:"method",name:"hover",static:!1,private:!1,access:{has:M=>"hover"in M,get:M=>M.hover},metadata:x},null,i),Ie(ce,null,w,{kind:"method",name:"click",static:!1,private:!1,access:{has:M=>"click"in M,get:M=>M.click},metadata:x},null,i),Ie(ce,null,g,{kind:"method",name:"drag",static:!1,private:!1,access:{has:M=>"drag"in M,get:M=>M.drag},metadata:x},null,i),Ie(ce,null,S,{kind:"method",name:"dragEnter",static:!1,private:!1,access:{has:M=>"dragEnter"in M,get:M=>M.dragEnter},metadata:x},null,i),Ie(ce,null,E,{kind:"method",name:"dragOver",static:!1,private:!1,access:{has:M=>"dragOver"in M,get:M=>M.dragOver},metadata:x},null,i),Ie(ce,null,v,{kind:"method",name:"drop",static:!1,private:!1,access:{has:M=>"drop"in M,get:M=>M.drop},metadata:x},null,i),Ie(ce,null,C,{kind:"method",name:"dragAndDrop",static:!1,private:!1,access:{has:M=>"dragAndDrop"in M,get:M=>M.dragAndDrop},metadata:x},null,i),Ie(ce,null,A,{kind:"method",name:"select",static:!1,private:!1,access:{has:M=>"select"in M,get:M=>M.select},metadata:x},null,i),Ie(ce,null,F,{kind:"method",name:"tap",static:!1,private:!1,access:{has:M=>"tap"in M,get:M=>M.tap},metadata:x},null,i),Ie(ce,null,R,{kind:"method",name:"touchStart",static:!1,private:!1,access:{has:M=>"touchStart"in M,get:M=>M.touchStart},metadata:x},null,i),Ie(ce,null,P,{kind:"method",name:"touchMove",static:!1,private:!1,access:{has:M=>"touchMove"in M,get:M=>M.touchMove},metadata:x},null,i),Ie(ce,null,T,{kind:"method",name:"touchEnd",static:!1,private:!1,access:{has:M=>"touchEnd"in M,get:M=>M.touchEnd},metadata:x},null,i),Ie(ce,null,q,{kind:"method",name:"focus",static:!1,private:!1,access:{has:M=>"focus"in M,get:M=>M.focus},metadata:x},null,i),Ie(ce,null,L,{kind:"method",name:"type",static:!1,private:!1,access:{has:M=>"type"in M,get:M=>M.type},metadata:x},null,i),Ie(ce,null,I,{kind:"method",name:"press",static:!1,private:!1,access:{has:M=>"press"in M,get:M=>M.press},metadata:x},null,i),Ie(ce,null,_,{kind:"method",name:"boundingBox",static:!1,private:!1,access:{has:M=>"boundingBox"in M,get:M=>M.boundingBox},metadata:x},null,i),Ie(ce,null,K,{kind:"method",name:"boxModel",static:!1,private:!1,access:{has:M=>"boxModel"in M,get:M=>M.boxModel},metadata:x},null,i),Ie(ce,null,j,{kind:"method",name:"screenshot",static:!1,private:!1,access:{has:M=>"screenshot"in M,get:M=>M.screenshot},metadata:x},null,i),Ie(ce,null,O,{kind:"method",name:"isIntersectingViewport",static:!1,private:!1,access:{has:M=>"isIntersectingViewport"in M,get:M=>M.isIntersectingViewport},metadata:x},null,i),Ie(ce,null,D,{kind:"method",name:"scrollIntoView",static:!1,private:!1,access:{has:M=>"scrollIntoView"in M,get:M=>M.scrollIntoView},metadata:x},null,i),x&&Object.defineProperty(ce,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:x})})(),ce})();function iP(s,i,e){s.width=Math.max(s.x>=0?Math.min(i-s.x,s.width):Math.min(i,s.width+s.x),0),s.height=Math.max(s.y>=0?Math.min(e-s.y,s.height):Math.min(e,s.height+s.y),0)}var sP=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},nP=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t}),Zn;(function(s){s.Action="action"})(Zn||(Zn={}));class ea extends he{constructor(){super(...arguments);f(this,Sr);W(this,"visibility",null);W(this,"_timeout",3e4);f(this,Ds,!0);f(this,Fs,!0);f(this,Os,!0);W(this,"operators",{conditions:(e,t)=>st(n=>tc(...e.map(a=>a(n,t))).pipe(iy(n))),retryAndRaceWithSignalAndTimer:(e,t)=>{const n=[];return e&&n.push(gs(e,t)),n.push(It(this._timeout,t)),wE(eh({delay:Sh}),pt(...n))}});f(this,Su,(e,t)=>r(this,Fs)?ke(e.frame.waitForFunction(n=>n instanceof HTMLElement?!["BUTTON","INPUT","SELECT","TEXTAREA","OPTION","OPTGROUP"].includes(n.nodeName)||!n.hasAttribute("disabled"):!0,{timeout:this._timeout,signal:t},e)).pipe(Qd()):hs);f(this,Ns,e=>r(this,Os)?fs(()=>ke(e.evaluate(t=>new Promise(n=>{window.requestAnimationFrame(()=>{const a=t.getBoundingClientRect();window.requestAnimationFrame(()=>{const o=t.getBoundingClientRect();n([{x:a.x,y:a.y,width:a.width,height:a.height},{x:o.x,y:o.y,width:o.width,height:o.height}])})})})))).pipe(Vn(([t,n])=>t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height),eh({delay:Sh}),Qd()):hs);f(this,Ls,e=>r(this,Ds)?ke(e.isIntersectingViewport({threshold:0})).pipe(ps(t=>!t),st(()=>ke(e.scrollIntoView())),st(()=>fs(()=>ke(e.isIntersectingViewport({threshold:0}))).pipe(Vn(dr),eh({delay:Sh}),Qd()))):hs)}static race(e){return wp.create(e)}get timeout(){return this._timeout}setTimeout(e){const t=this._clone();return t._timeout=e,t}setVisibility(e){const t=this._clone();return t.visibility=e,t}setWaitForEnabled(e){const t=this._clone();return y(t,Fs,e),t}setEnsureElementIsInTheViewport(e){const t=this._clone();return y(t,Ds,e),t}setWaitForStableBoundingBox(e){const t=this._clone();return y(t,Os,e),t}copyOptions(e){return this._timeout=e._timeout,this.visibility=e.visibility,y(this,Fs,r(e,Fs)),y(this,Ds,r(e,Ds)),y(this,Os,r(e,Os)),this}clone(){return this._clone()}async waitHandle(e){const t=new Error("Locator.waitHandle");return await it(this._wait(e).pipe(this.operators.retryAndRaceWithSignalAndTimer(e==null?void 0:e.signal,t)))}async wait(e){const t={stack:[],error:void 0,hasError:!1};try{return await sP(t,await this.waitHandle(e),!1).jsonValue()}catch(n){t.error=n,t.hasError=!0}finally{nP(t)}}map(e){return new vh(this._clone(),t=>t.evaluateHandle(e))}filter(e){return new yh(this._clone(),async(t,n)=>(await t.frame.waitForFunction(e,{signal:n,timeout:this._timeout},t),!0))}filterHandle(e){return new yh(this._clone(),e)}mapHandle(e){return new vh(this._clone(),e)}click(e){return it(k(this,Sr,AS).call(this,e))}fill(e,t){return it(k(this,Sr,RS).call(this,e,t))}hover(e){return it(k(this,Sr,DS).call(this,e))}scroll(e){return it(k(this,Sr,FS).call(this,e))}}Ds=new WeakMap,Fs=new WeakMap,Os=new WeakMap,Su=new WeakMap,Ns=new WeakMap,Ls=new WeakMap,Sr=new WeakSet,AS=function(e){const t=e==null?void 0:e.signal,n=new Error("Locator.click");return this._wait(e).pipe(this.operators.conditions([r(this,Ls),r(this,Ns),r(this,Su)],t),rh(()=>this.emit(Zn.Action,void 0)),st(a=>ke(a.click(e)).pipe(rc(o=>{throw a.dispose().catch(de),o}))),this.operators.retryAndRaceWithSignalAndTimer(t,n))},RS=function(e,t){const n=t==null?void 0:t.signal,a=new Error("Locator.fill");return this._wait(t).pipe(this.operators.conditions([r(this,Ls),r(this,Ns),r(this,Su)],n),rh(()=>this.emit(Zn.Action,void 0)),st(o=>ke(o.evaluate(c=>c instanceof HTMLSelectElement?"select":c instanceof HTMLTextAreaElement?"typeable-input":c instanceof HTMLInputElement?new Set(["textarea","text","url","tel","search","password","number","email"]).has(c.type)?"typeable-input":"other-input":c.isContentEditable?"contenteditable":"unknown")).pipe(st(c=>{switch(c){case"select":return ke(o.select(e).then(zn));case"contenteditable":case"typeable-input":return ke(o.evaluate((u,l)=>{const p=u.isContentEditable?u.innerText:u.value;if(l.length<=p.length||!l.startsWith(u.value))return u.isContentEditable?u.innerText="":u.value="",l;const h=u.isContentEditable?u.innerText:u.value;return u.isContentEditable?(u.innerText="",u.innerText=h):(u.value="",u.value=h),l.substring(h.length)},e)).pipe(st(u=>ke(o.type(u))));case"other-input":return ke(o.focus()).pipe(st(()=>ke(o.evaluate((u,l)=>{u.value=l,u.dispatchEvent(new Event("input",{bubbles:!0})),u.dispatchEvent(new Event("change",{bubbles:!0}))},e))));case"unknown":throw new Error("Element cannot be filled out.")}})).pipe(rc(c=>{throw o.dispose().catch(de),c}))),this.operators.retryAndRaceWithSignalAndTimer(n,a))},DS=function(e){const t=e==null?void 0:e.signal,n=new Error("Locator.hover");return this._wait(e).pipe(this.operators.conditions([r(this,Ls),r(this,Ns)],t),rh(()=>this.emit(Zn.Action,void 0)),st(a=>ke(a.hover()).pipe(rc(o=>{throw a.dispose().catch(de),o}))),this.operators.retryAndRaceWithSignalAndTimer(t,n))},FS=function(e){const t=e==null?void 0:e.signal,n=new Error("Locator.scroll");return this._wait(e).pipe(this.operators.conditions([r(this,Ls),r(this,Ns)],t),rh(()=>this.emit(Zn.Action,void 0)),st(a=>ke(a.evaluate((o,c,u)=>{c!==void 0&&(o.scrollTop=c),u!==void 0&&(o.scrollLeft=u)},e==null?void 0:e.scrollTop,e==null?void 0:e.scrollLeft)).pipe(rc(o=>{throw a.dispose().catch(de),o}))),this.operators.retryAndRaceWithSignalAndTimer(t,n))};const Wh=class Wh extends ea{constructor(e,t){super();f(this,va);f(this,ba);y(this,va,e),y(this,ba,t)}static create(e,t){return new Wh(e,t).setTimeout("getDefaultTimeout"in e?e.getDefaultTimeout():e.page().getDefaultTimeout())}_clone(){return new Wh(r(this,va),r(this,ba))}_wait(e){const t=e==null?void 0:e.signal;return fs(()=>ke(r(this,va).waitForFunction(r(this,ba),{timeout:this.timeout,signal:t}))).pipe(Zd())}};va=new WeakMap,ba=new WeakMap;let wh=Wh;class Py extends ea{constructor(e){super();f(this,yt);y(this,yt,e),this.copyOptions(r(this,yt))}get delegate(){return r(this,yt)}setTimeout(e){const t=super.setTimeout(e);return y(t,yt,r(this,yt).setTimeout(e)),t}setVisibility(e){const t=super.setVisibility(e);return y(t,yt,r(t,yt).setVisibility(e)),t}setWaitForEnabled(e){const t=super.setWaitForEnabled(e);return y(t,yt,r(this,yt).setWaitForEnabled(e)),t}setEnsureElementIsInTheViewport(e){const t=super.setEnsureElementIsInTheViewport(e);return y(t,yt,r(this,yt).setEnsureElementIsInTheViewport(e)),t}setWaitForStableBoundingBox(e){const t=super.setWaitForStableBoundingBox(e);return y(t,yt,r(this,yt).setWaitForStableBoundingBox(e)),t}}yt=new WeakMap;const fm=class fm extends Py{constructor(e,t){super(e);f(this,Sa);y(this,Sa,t)}_clone(){return new fm(this.delegate.clone(),r(this,Sa)).copyOptions(this)}_wait(e){return this.delegate._wait(e).pipe(st(t=>ke(Promise.resolve(r(this,Sa).call(this,t,e==null?void 0:e.signal))).pipe(ps(n=>n),ze(()=>t))),Zd())}};Sa=new WeakMap;let yh=fm;const pm=class pm extends Py{constructor(e,t){super(e);f(this,Ca);y(this,Ca,t)}_clone(){return new pm(this.delegate.clone(),r(this,Ca)).copyOptions(this)}_wait(e){return this.delegate._wait(e).pipe(st(t=>ke(Promise.resolve(r(this,Ca).call(this,t,e==null?void 0:e.signal)))))}};Ca=new WeakMap;let vh=pm;const Vh=class Vh extends ea{constructor(e,t){super();f(this,ka);f(this,Ea);f(this,zh,e=>this.visibility?(()=>{switch(this.visibility){case"hidden":return fs(()=>ke(e.isHidden()));case"visible":return fs(()=>ke(e.isVisible()))}})().pipe(Vn(dr),eh({delay:Sh}),Qd()):hs);y(this,ka,e),y(this,Ea,t)}static create(e,t){return new Vh(e,t).setTimeout("getDefaultTimeout"in e?e.getDefaultTimeout():e.page().getDefaultTimeout())}_clone(){return new Vh(r(this,ka),r(this,Ea)).copyOptions(this)}_wait(e){const t=e==null?void 0:e.signal;return fs(()=>ke(r(this,ka).waitForSelector(r(this,Ea),{visible:!1,timeout:this._timeout,signal:t}))).pipe(ps(n=>n!==null),Zd(),this.operators.conditions([r(this,zh)],t))}};ka=new WeakMap,Ea=new WeakMap,zh=new WeakMap;let bh=Vh;function aP(s){for(const i of s)if(!(i instanceof ea))throw new Error("Unknown locator for race candidate");return s}const Gh=class Gh extends ea{constructor(e){super();f(this,xa);y(this,xa,e)}static create(e){const t=aP(e);return new Gh(t)}_clone(){return new Gh(r(this,xa).map(e=>e.clone())).copyOptions(this)}_wait(e){return ty(...r(this,xa).map(t=>t._wait(e)))}};xa=new WeakMap;let wp=Gh;const Sh=100;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var oP=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},Je=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},yi=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},vi=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t}),mt;(function(s){s.FrameNavigated=Symbol("Frame.FrameNavigated"),s.FrameSwapped=Symbol("Frame.FrameSwapped"),s.LifecycleEvent=Symbol("Frame.LifecycleEvent"),s.FrameNavigatedWithinDocument=Symbol("Frame.FrameNavigatedWithinDocument"),s.FrameDetached=Symbol("Frame.FrameDetached"),s.FrameSwappedByActivation=Symbol("Frame.FrameSwappedByActivation")})(mt||(mt={}));const Se=se(s=>`Attempted to use detached Frame '${s._id}'.`);let _y=(()=>{var F,R,Fd,T;let s=he,i=[],e,t,n,a,o,c,u,l,p,h,d,m,b,w,g,S,E,v,C,A;return T=class extends s{constructor(){super();f(this,R);W(this,"_id",oP(this,i));W(this,"_parentId");W(this,"_name");W(this,"_hasStartedLoading",!1);f(this,F)}clearDocumentHandle(){y(this,F,void 0)}async frameElement(){const I={stack:[],error:void 0,hasError:!1};try{const _=this.parentFrame();if(!_)return null;const K=yi(I,await _.isolatedRealm().evaluateHandle(()=>document.querySelectorAll("iframe,frame")),!1);for await(const j of Sy(K)){const O={stack:[],error:void 0,hasError:!1};try{const D=yi(O,j,!1),N=await D.contentFrame();if((N==null?void 0:N._id)===this._id)return await _.mainRealm().adoptHandle(D)}catch(D){O.error=D,O.hasError=!0}finally{vi(O)}}return null}catch(_){I.error=_,I.hasError=!0}finally{vi(I)}}async evaluateHandle(I,..._){return I=nt(this.evaluateHandle.name,I),await this.mainRealm().evaluateHandle(I,..._)}async evaluate(I,..._){return I=nt(this.evaluate.name,I),await this.mainRealm().evaluate(I,..._)}locator(I){return typeof I=="string"?bh.create(this,I):wh.create(this,I)}async $(I){return await(await k(this,R,Fd).call(this)).$(I)}async $$(I,_){return await(await k(this,R,Fd).call(this)).$$(I,_)}async $eval(I,_,...K){return _=nt(this.$eval.name,_),await(await k(this,R,Fd).call(this)).$eval(I,_,...K)}async $$eval(I,_,...K){return _=nt(this.$$eval.name,_),await(await k(this,R,Fd).call(this)).$$eval(I,_,...K)}async waitForSelector(I,_={}){const{updatedSelector:K,QueryHandler:j,polling:O}=ph(I);return await j.waitFor(this,K,{polling:O,..._})}async waitForFunction(I,_={},...K){return await this.mainRealm().waitForFunction(I,_,...K)}async content(){return await this.evaluate(()=>{let I="";for(const _ of document.childNodes)switch(_){case document.documentElement:I+=document.documentElement.outerHTML;break;default:I+=new XMLSerializer().serializeToString(_);break}return I})}async setFrameContent(I){return await this.evaluate(_=>{document.open(),document.write(_),document.close()},I)}name(){return this._name||""}isDetached(){return this.detached}get disposed(){return this.detached}async addScriptTag(I){let{content:_="",type:K}=I;const{path:j}=I;if(+!!I.url+ +!!j+ +!!_!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");return j&&(_=await gi.value.fs.promises.readFile(j,"utf8"),_+=`//# sourceURL=${j.replace(/\n/g,"")}`),K=K??"text/javascript",await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle(async({url:O,id:D,type:N,content:$})=>await new Promise((B,X)=>{const Y=document.createElement("script");Y.type=N,Y.text=$,Y.addEventListener("error",le=>{X(new Error(le.message??"Could not load script"))},{once:!0}),D&&(Y.id=D),O?(Y.src=O,Y.addEventListener("load",()=>{B(Y)},{once:!0}),document.head.appendChild(Y)):(document.head.appendChild(Y),B(Y))}),{...I,type:K,content:_}))}async addStyleTag(I){let{content:_=""}=I;const{path:K}=I;if(+!!I.url+ +!!K+ +!!_!=1)throw new Error("Exactly one of `url`, `path`, or `content` must be specified.");return K&&(_=await gi.value.fs.promises.readFile(K,"utf8"),_+="/*# sourceURL="+K.replace(/\n/g,"")+"*/",I.content=_),await this.mainRealm().transferHandle(await this.isolatedRealm().evaluateHandle(async({url:j,content:O})=>await new Promise((D,N)=>{let $;if(!j)$=document.createElement("style"),$.appendChild(document.createTextNode(O));else{const B=document.createElement("link");B.rel="stylesheet",B.href=j,$=B}return $.addEventListener("load",()=>{D($)},{once:!0}),$.addEventListener("error",B=>{N(new Error(B.message??"Could not load style"))},{once:!0}),document.head.appendChild($),$}),I))}async click(I,_={}){const K={stack:[],error:void 0,hasError:!1};try{const j=yi(K,await this.$(I),!1);te(j,`No element found for selector: ${I}`),await j.click(_),await j.dispose()}catch(j){K.error=j,K.hasError=!0}finally{vi(K)}}async focus(I){const _={stack:[],error:void 0,hasError:!1};try{const K=yi(_,await this.$(I),!1);te(K,`No element found for selector: ${I}`),await K.focus()}catch(K){_.error=K,_.hasError=!0}finally{vi(_)}}async hover(I){const _={stack:[],error:void 0,hasError:!1};try{const K=yi(_,await this.$(I),!1);te(K,`No element found for selector: ${I}`),await K.hover()}catch(K){_.error=K,_.hasError=!0}finally{vi(_)}}async select(I,..._){const K={stack:[],error:void 0,hasError:!1};try{const j=yi(K,await this.$(I),!1);return te(j,`No element found for selector: ${I}`),await j.select(..._)}catch(j){K.error=j,K.hasError=!0}finally{vi(K)}}async tap(I){const _={stack:[],error:void 0,hasError:!1};try{const K=yi(_,await this.$(I),!1);te(K,`No element found for selector: ${I}`),await K.tap()}catch(K){_.error=K,_.hasError=!0}finally{vi(_)}}async type(I,_,K){const j={stack:[],error:void 0,hasError:!1};try{const O=yi(j,await this.$(I),!1);te(O,`No element found for selector: ${I}`),await O.type(_,K)}catch(O){j.error=O,j.hasError=!0}finally{vi(j)}}async title(){return await this.isolatedRealm().evaluate(()=>document.title)}},F=new WeakMap,R=new WeakSet,Fd=function(){return r(this,F)||y(this,F,this.mainRealm().evaluateHandle(()=>document)),r(this,F)},(()=>{const I=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[Se],t=[Se],n=[Se],a=[Se],o=[Se],c=[Se],u=[Se],l=[Se],p=[Se],h=[Se],d=[Se],m=[Se],b=[Se],w=[Se],g=[Se],S=[Se],E=[Se],v=[Se],C=[Se],A=[Se],Je(T,null,e,{kind:"method",name:"frameElement",static:!1,private:!1,access:{has:_=>"frameElement"in _,get:_=>_.frameElement},metadata:I},null,i),Je(T,null,t,{kind:"method",name:"evaluateHandle",static:!1,private:!1,access:{has:_=>"evaluateHandle"in _,get:_=>_.evaluateHandle},metadata:I},null,i),Je(T,null,n,{kind:"method",name:"evaluate",static:!1,private:!1,access:{has:_=>"evaluate"in _,get:_=>_.evaluate},metadata:I},null,i),Je(T,null,a,{kind:"method",name:"locator",static:!1,private:!1,access:{has:_=>"locator"in _,get:_=>_.locator},metadata:I},null,i),Je(T,null,o,{kind:"method",name:"$",static:!1,private:!1,access:{has:_=>"$"in _,get:_=>_.$},metadata:I},null,i),Je(T,null,c,{kind:"method",name:"$$",static:!1,private:!1,access:{has:_=>"$$"in _,get:_=>_.$$},metadata:I},null,i),Je(T,null,u,{kind:"method",name:"$eval",static:!1,private:!1,access:{has:_=>"$eval"in _,get:_=>_.$eval},metadata:I},null,i),Je(T,null,l,{kind:"method",name:"$$eval",static:!1,private:!1,access:{has:_=>"$$eval"in _,get:_=>_.$$eval},metadata:I},null,i),Je(T,null,p,{kind:"method",name:"waitForSelector",static:!1,private:!1,access:{has:_=>"waitForSelector"in _,get:_=>_.waitForSelector},metadata:I},null,i),Je(T,null,h,{kind:"method",name:"waitForFunction",static:!1,private:!1,access:{has:_=>"waitForFunction"in _,get:_=>_.waitForFunction},metadata:I},null,i),Je(T,null,d,{kind:"method",name:"content",static:!1,private:!1,access:{has:_=>"content"in _,get:_=>_.content},metadata:I},null,i),Je(T,null,m,{kind:"method",name:"addScriptTag",static:!1,private:!1,access:{has:_=>"addScriptTag"in _,get:_=>_.addScriptTag},metadata:I},null,i),Je(T,null,b,{kind:"method",name:"addStyleTag",static:!1,private:!1,access:{has:_=>"addStyleTag"in _,get:_=>_.addStyleTag},metadata:I},null,i),Je(T,null,w,{kind:"method",name:"click",static:!1,private:!1,access:{has:_=>"click"in _,get:_=>_.click},metadata:I},null,i),Je(T,null,g,{kind:"method",name:"focus",static:!1,private:!1,access:{has:_=>"focus"in _,get:_=>_.focus},metadata:I},null,i),Je(T,null,S,{kind:"method",name:"hover",static:!1,private:!1,access:{has:_=>"hover"in _,get:_=>_.hover},metadata:I},null,i),Je(T,null,E,{kind:"method",name:"select",static:!1,private:!1,access:{has:_=>"select"in _,get:_=>_.select},metadata:I},null,i),Je(T,null,v,{kind:"method",name:"tap",static:!1,private:!1,access:{has:_=>"tap"in _,get:_=>_.tap},metadata:I},null,i),Je(T,null,C,{kind:"method",name:"type",static:!1,private:!1,access:{has:_=>"type"in _,get:_=>_.type},metadata:I},null,i),Je(T,null,A,{kind:"method",name:"title",static:!1,private:!1,access:{has:_=>"title"in _,get:_=>_.title},metadata:I},null,i),I&&Object.defineProperty(T,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:I})})(),T})();class Ch{constructor(){f(this,Pa);W(this,"_interceptionId");W(this,"_failureText",null);W(this,"_response",null);W(this,"_fromMemoryCache",!1);W(this,"_redirectChain",[]);W(this,"interception",{enabled:!1,handled:!1,handlers:[],resolutionState:{action:mr.None},requestOverrides:{},response:null,abortReason:null})}continueRequestOverrides(){return te(this.interception.enabled,"Request Interception is not enabled!"),this.interception.requestOverrides}responseForRequest(){return te(this.interception.enabled,"Request Interception is not enabled!"),this.interception.response}abortErrorReason(){return te(this.interception.enabled,"Request Interception is not enabled!"),this.interception.abortReason}interceptResolutionState(){return this.interception.enabled?this.interception.handled?{action:mr.AlreadyHandled}:{...this.interception.resolutionState}:{action:mr.Disabled}}isInterceptResolutionHandled(){return this.interception.handled}enqueueInterceptAction(i){this.interception.handlers.push(i)}async finalizeInterceptions(){await this.interception.handlers.reduce((e,t)=>e.then(t),Promise.resolve()),this.interception.handlers=[];const{action:i}=this.interceptResolutionState();switch(i){case"abort":return await this._abort(this.interception.abortReason);case"respond":if(this.interception.response===null)throw new Error("Response is missing for the interception");return await this._respond(this.interception.response);case"continue":return await this._continue(this.interception.requestOverrides)}}async continue(i={},e){if(k(this,Pa,ff).call(this)){if(te(this.interception.enabled,"Request Interception is not enabled!"),te(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._continue(i);if(this.interception.requestOverrides=i,this.interception.resolutionState.priority===void 0||e>this.interception.resolutionState.priority){this.interception.resolutionState={action:mr.Continue,priority:e};return}if(e===this.interception.resolutionState.priority){if(this.interception.resolutionState.action==="abort"||this.interception.resolutionState.action==="respond")return;this.interception.resolutionState.action=mr.Continue}}}async respond(i,e){if(k(this,Pa,ff).call(this)){if(te(this.interception.enabled,"Request Interception is not enabled!"),te(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._respond(i);if(this.interception.response=i,this.interception.resolutionState.priority===void 0||e>this.interception.resolutionState.priority){this.interception.resolutionState={action:mr.Respond,priority:e};return}if(e===this.interception.resolutionState.priority){if(this.interception.resolutionState.action==="abort")return;this.interception.resolutionState.action=mr.Respond}}}async abort(i="failed",e){if(!k(this,Pa,ff).call(this))return;const t=cP[i];if(te(t,"Unknown error code: "+i),te(this.interception.enabled,"Request Interception is not enabled!"),te(!this.interception.handled,"Request is already handled!"),e===void 0)return await this._abort(t);if(this.interception.abortReason=t,this.interception.resolutionState.priority===void 0||e>=this.interception.resolutionState.priority){this.interception.resolutionState={action:mr.Abort,priority:e};return}}static getResponse(i){const e=Lr(i)?new TextEncoder().encode(i):i;return{contentLength:e.byteLength,base64:oy(e)}}}Pa=new WeakSet,ff=function(){return!this.url().startsWith("data:")&&!this._fromMemoryCache};var mr;(function(s){s.Abort="abort",s.Respond="respond",s.Continue="continue",s.Disabled="disabled",s.None="none",s.AlreadyHandled="already-handled"})(mr||(mr={}));function Ty(s){const i=[];for(const e in s){const t=s[e];if(!Object.is(t,void 0)){const n=Array.isArray(t)?t:[t];i.push(...n.map(a=>({name:e,value:a+""})))}}return i}const My={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Switch Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"},cP={aborted:"Aborted",accessdenied:"AccessDenied",addressunreachable:"AddressUnreachable",blockedbyclient:"BlockedByClient",blockedbyresponse:"BlockedByResponse",connectionaborted:"ConnectionAborted",connectionclosed:"ConnectionClosed",connectionfailed:"ConnectionFailed",connectionrefused:"ConnectionRefused",connectionreset:"ConnectionReset",internetdisconnected:"InternetDisconnected",namenotresolved:"NameNotResolved",timedout:"TimedOut",failed:"Failed"};function kh(s){if(s.originalMessage.includes("Invalid header")||s.originalMessage.includes('Expected "header"')||s.originalMessage.includes("invalid argument"))throw s;de(s)}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Iy{constructor(){}ok(){const i=this.status();return i===0||i>=200&&i<=299}async buffer(){const i=await this.content();return Buffer.from(i)}async text(){const i=await this.content();return new TextDecoder().decode(i)}async json(){const i=await this.text();return JSON.parse(i)}}/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Ay(){let s=0;return()=>++s}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ry{constructor(){}}const qe=Object.freeze({Left:"left",Right:"right",Middle:"middle",Back:"back",Forward:"forward"});class Dy{constructor(){}}class Fy{constructor(){W(this,"idGenerator",Ay());W(this,"touches",[])}removeHandle(i){const e=this.touches.indexOf(i);e!==-1&&this.touches.splice(e,1)}async tap(i,e){await(await this.touchStart(i,e)).end()}async touchMove(i,e){const t=this.touches[0];if(!t)throw new ah("Must start a new Touch first");return await t.move(i,e)}async touchEnd(){const i=this.touches.shift();if(!i)throw new ah("Must start a new Touch first");await i.end()}}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Oy=3e4;class yp{constructor(){f(this,Kr);f(this,Bs);y(this,Kr,null),y(this,Bs,null)}setDefaultTimeout(i){y(this,Kr,i)}setDefaultNavigationTimeout(i){y(this,Bs,i)}navigationTimeout(){return r(this,Bs)!==null?r(this,Bs):r(this,Kr)!==null?r(this,Kr):Oy}timeout(){return r(this,Kr)!==null?r(this,Kr):Oy}}Kr=new WeakMap,Bs=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var uP=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},lP=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},vp=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},Ny=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});function dP(s){s.optimizeForSpeed??(s.optimizeForSpeed=!1),s.type??(s.type="png"),s.fromSurface??(s.fromSurface=!0),s.fullPage??(s.fullPage=!1),s.omitBackground??(s.omitBackground=!1),s.encoding??(s.encoding="binary"),s.captureBeyondViewport??(s.captureBeyondViewport=!0)}let Ly=(()=>{var t,n,a,o,c,OS,l;let s=he,i=[],e;return l=class extends s{constructor(){super();f(this,c);W(this,"_isDragging",(uP(this,i),!1));W(this,"_timeoutSettings",new yp);f(this,t,new WeakMap);f(this,n,new kE(1));f(this,a,0);f(this,o);Ae(this,"request").pipe(st(d=>tp(hr(1),tc(Ae(this,"requestfailed"),Ae(this,"requestfinished"),Ae(this,"response").pipe(ze(m=>m.request()))).pipe(ps(m=>m.id===d.id),sp(1),ze(()=>-1)))),px((d,m)=>hr(d+m),0),gx(Ae(this,"close")),mx(0)).subscribe(r(this,n))}on(d,m){if(d!=="request")return super.on(d,m);let b=r(this,t).get(m);return b===void 0&&(b=w=>{w.enqueueInterceptAction(()=>m(w))},r(this,t).set(m,b)),super.on(d,b)}off(d,m){return d==="request"&&(m=r(this,t).get(m)||m),super.off(d,m)}get accessibility(){return this.mainFrame().accessibility}locator(d){return typeof d=="string"?bh.create(this,d):wh.create(this,d)}locatorRace(d){return ea.race(d)}async $(d){return await this.mainFrame().$(d)}async $$(d,m){return await this.mainFrame().$$(d,m)}async evaluateHandle(d,...m){return d=nt(this.evaluateHandle.name,d),await this.mainFrame().evaluateHandle(d,...m)}async $eval(d,m,...b){return m=nt(this.$eval.name,m),await this.mainFrame().$eval(d,m,...b)}async $$eval(d,m,...b){return m=nt(this.$$eval.name,m),await this.mainFrame().$$eval(d,m,...b)}async addScriptTag(d){return await this.mainFrame().addScriptTag(d)}async addStyleTag(d){return await this.mainFrame().addStyleTag(d)}url(){return this.mainFrame().url()}async content(){return await this.mainFrame().content()}async setContent(d,m){await this.mainFrame().setContent(d,m)}async goto(d,m){return await this.mainFrame().goto(d,m)}async waitForNavigation(d={}){return await this.mainFrame().waitForNavigation(d)}waitForRequest(d,m={}){const{timeout:b=this._timeoutSettings.timeout(),signal:w}=m;if(typeof d=="string"){const S=d;d=E=>E.url()===S}const g=Ae(this,"request").pipe(ic(d),pt(It(b),gs(w),Ae(this,"close").pipe(ze(()=>{throw new tr("Page closed!")}))));return it(g)}waitForResponse(d,m={}){const{timeout:b=this._timeoutSettings.timeout(),signal:w}=m;if(typeof d=="string"){const S=d;d=E=>E.url()===S}const g=Ae(this,"response").pipe(ic(d),pt(It(b),gs(w),Ae(this,"close").pipe(ze(()=>{throw new tr("Page closed!")}))));return it(g)}waitForNetworkIdle(d={}){return it(this.waitForNetworkIdle$(d))}waitForNetworkIdle$(d={}){const{timeout:m=this._timeoutSettings.timeout(),idleTime:b=Px,concurrency:w=0,signal:g}=d;return r(this,n).pipe(th(S=>S>w?hs:ip(b)),ze(()=>{}),pt(It(m),gs(g),Ae(this,"close").pipe(ze(()=>{throw new tr("Page closed!")}))))}async waitForFrame(d,m={}){const{timeout:b=this.getDefaultTimeout(),signal:w}=m,g=Lr(d)?S=>d===S.url():d;return await it(tc(Ae(this,"frameattached"),Ae(this,"framenavigated"),ke(this.frames())).pipe(ic(g),Vn(),pt(It(b),gs(w),Ae(this,"close").pipe(ze(()=>{throw new tr("Page closed.")})))))}async emulate(d){await Promise.all([this.setUserAgent(d.userAgent),this.setViewport(d.viewport)])}async evaluate(d,...m){return d=nt(this.evaluate.name,d),await this.mainFrame().evaluate(d,...m)}async _maybeWriteTypedArrayToFile(d,m){d&&await gi.value.fs.promises.writeFile(d,m)}async screencast(d={}){const m=gi.value.ScreenRecorder,[b,w,g]=await k(this,c,OS).call(this);let S;if(d.crop){const{x:v,y:C,width:A,height:F}=jy(By(d.crop));if(v<0||C<0)throw new Error("`crop.x` and `crop.y` must be greater than or equal to 0.");if(A<=0||F<=0)throw new Error("`crop.height` and `crop.width` must be greater than or equal to 0.");const R=b/g,P=w/g;if(v+A>R)throw new Error(`\`crop.width\` cannot be larger than the viewport width (${R}).`);if(C+F>P)throw new Error(`\`crop.height\` cannot be larger than the viewport height (${P}).`);S={x:v*g,y:C*g,width:A*g,height:F*g}}if(d.speed!==void 0&&d.speed<=0)throw new Error("`speed` must be greater than 0.");if(d.scale!==void 0&&d.scale<=0)throw new Error("`scale` must be greater than 0.");const E=new m(this,b,w,{...d,path:d.ffmpegPath,crop:S});try{await this._startScreencast()}catch(v){throw E.stop(),v}if(d.path){const{createWriteStream:v}=gi.value.fs,C=v(d.path,"binary");E.pipe(C)}return E}async _startScreencast(){++Nn(this,a)._,r(this,o)||y(this,o,this.mainFrame().client.send("Page.startScreencast",{format:"png"}).then(()=>new Promise(d=>this.mainFrame().client.once("Page.screencastFrame",()=>d())))),await r(this,o)}async _stopScreencast(){--Nn(this,a)._,r(this,o)&&(y(this,o,void 0),r(this,a)===0&&await this.mainFrame().client.send("Page.stopScreencast"))}async screenshot(d={}){const m={stack:[],error:void 0,hasError:!1};try{const b=vp(m,await this.browserContext().startScreenshot(),!1),w={...d,clip:d.clip?{...d.clip}:void 0};if(w.type===void 0&&w.path!==void 0){const v=w.path;switch(v.slice(v.lastIndexOf(".")+1).toLowerCase()){case"png":w.type="png";break;case"jpeg":case"jpg":w.type="jpeg";break;case"webp":w.type="webp";break}}if(w.quality!==void 0){if(w.quality<0||w.quality>100)throw new Error(`Expected 'quality' (${w.quality}) to be between 0 and 100, inclusive.`);if(w.type===void 0||!["jpeg","webp"].includes(w.type))throw new Error(`${w.type??"png"} screenshots do not support 'quality'.`)}if(w.clip){if(w.clip.width<=0)throw new Error("'width' in 'clip' must be positive.");if(w.clip.height<=0)throw new Error("'height' in 'clip' must be positive.")}dP(w);const g=vp(m,new ih,!0);if(w.clip){if(w.fullPage)throw new Error("'clip' and 'fullPage' are mutually exclusive");w.clip=jy(By(w.clip))}else if(w.fullPage){if(!w.captureBeyondViewport){const v=await this.mainFrame().isolatedRealm().evaluate(()=>{const A=document.documentElement;return{width:A.scrollWidth,height:A.scrollHeight}}),C=this.viewport();await this.setViewport({...C,...v}),g.defer(async()=>{await this.setViewport(C).catch(de)})}}else w.captureBeyondViewport=!1;const S=await this._screenshot(w);if(w.encoding==="base64")return S;const E=np(S,!0);return await this._maybeWriteTypedArrayToFile(w.path,E),E}catch(b){m.error=b,m.hasError=!0}finally{const b=Ny(m);b&&await b}}async title(){return await this.mainFrame().title()}click(d,m){return this.mainFrame().click(d,m)}focus(d){return this.mainFrame().focus(d)}hover(d){return this.mainFrame().hover(d)}select(d,...m){return this.mainFrame().select(d,...m)}tap(d){return this.mainFrame().tap(d)}type(d,m,b){return this.mainFrame().type(d,m,b)}async waitForSelector(d,m={}){return await this.mainFrame().waitForSelector(d,m)}waitForFunction(d,m,...b){return this.mainFrame().waitForFunction(d,m,...b)}[(e=[Qx(function(){return this.browser()})],ge)](){return void this.close().catch(de)}[er](){return this.close()}},t=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,OS=async function(){const d={stack:[],error:void 0,hasError:!1};try{const m=this.viewport(),b=vp(d,new Xe,!1);return m&&m.deviceScaleFactor!==0&&(await this.setViewport({...m,deviceScaleFactor:0}),b.defer(()=>{this.setViewport(m).catch(de)})),await this.mainFrame().isolatedRealm().evaluate(()=>[window.visualViewport.width*window.devicePixelRatio,window.visualViewport.height*window.devicePixelRatio,window.devicePixelRatio])}catch(m){d.error=m,d.hasError=!0}finally{Ny(d)}},(()=>{const d=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;lP(l,null,e,{kind:"method",name:"screenshot",static:!1,private:!1,access:{has:m=>"screenshot"in m,get:m=>m.screenshot},metadata:d},null,i),d&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})})(),l})();function By(s){return{...s,...s.width<0?{x:s.x+s.width,width:-s.width}:{x:s.x,width:s.width},...s.height<0?{y:s.y+s.height,height:-s.height}:{y:s.y,height:s.height}}}function jy(s){const i=Math.round(s.x),e=Math.round(s.y),t=Math.round(s.width+s.x-i),n=Math.round(s.height+s.y-e);return{...s,x:i,y:e,width:t,height:n}}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class hP{constructor(i,e,t,...n){f(this,Ur);f(this,_a);f(this,Cu);f(this,_i);f(this,js);f(this,ku);f(this,Eu);f(this,qs,Ne.create());f(this,Lt);f(this,$s);f(this,Ta,[]);f(this,xu,()=>{var i;this.terminate((i=r(this,$s))==null?void 0:i.reason)});var a;switch(y(this,Ur,i),y(this,_a,e.polling),y(this,Cu,e.root),y(this,$s,e.signal),(a=r(this,$s))==null||a.addEventListener("abort",r(this,xu),{once:!0}),typeof t){case"string":y(this,_i,`() => {return (${t});}`);break;default:y(this,_i,fr(t));break}y(this,js,n),r(this,Ur).taskManager.add(this),e.timeout&&(y(this,Eu,new nh(`Waiting failed: ${e.timeout}ms exceeded`)),y(this,ku,setTimeout(()=>{this.terminate(r(this,Eu))},e.timeout))),this.rerun()}get result(){return r(this,qs).valueOrThrow()}async rerun(){for(const e of r(this,Ta))e.abort();r(this,Ta).length=0;const i=new AbortController;r(this,Ta).push(i);try{switch(r(this,_a)){case"raf":y(this,Lt,await r(this,Ur).evaluateHandle(({RAFPoller:t,createFunction:n},a,...o)=>{const c=n(a);return new t(()=>c(...o))},Nt.create(t=>t.puppeteerUtil),r(this,_i),...r(this,js)));break;case"mutation":y(this,Lt,await r(this,Ur).evaluateHandle(({MutationPoller:t,createFunction:n},a,o,...c)=>{const u=n(o);return new t(()=>u(...c),a||document)},Nt.create(t=>t.puppeteerUtil),r(this,Cu),r(this,_i),...r(this,js)));break;default:y(this,Lt,await r(this,Ur).evaluateHandle(({IntervalPoller:t,createFunction:n},a,o,...c)=>{const u=n(o);return new t(()=>u(...c),a)},Nt.create(t=>t.puppeteerUtil),r(this,_a),r(this,_i),...r(this,js)));break}await r(this,Lt).evaluate(t=>{t.start()});const e=await r(this,Lt).evaluateHandle(t=>t.result());r(this,qs).resolve(e),await this.terminate()}catch(e){if(i.signal.aborted)return;const t=this.getBadError(e);t&&await this.terminate(t)}}async terminate(i){var e;if(r(this,Ur).taskManager.delete(this),(e=r(this,$s))==null||e.removeEventListener("abort",r(this,xu)),clearTimeout(r(this,ku)),i&&!r(this,qs).finished()&&r(this,qs).reject(i),r(this,Lt))try{await r(this,Lt).evaluateHandle(async t=>{await t.stop()}),r(this,Lt)&&(await r(this,Lt).dispose(),y(this,Lt,void 0))}catch{}}getBadError(i){return Vt(i)?i.message.includes("Execution context is not available in detached frame")?new Error("Waiting failed: Frame detached"):i.message.includes("Execution context was destroyed")||i.message.includes("Cannot find context with specified id")||i.message.includes("DiscardedBrowsingContextError")?void 0:i:new Error("WaitTask failed with an error",{cause:i})}}Ur=new WeakMap,_a=new WeakMap,Cu=new WeakMap,_i=new WeakMap,js=new WeakMap,ku=new WeakMap,Eu=new WeakMap,qs=new WeakMap,Lt=new WeakMap,$s=new WeakMap,Ta=new WeakMap,xu=new WeakMap;class fP{constructor(){f(this,Ti,new Set)}add(i){r(this,Ti).add(i)}delete(i){r(this,Ti).delete(i)}terminateAll(i){for(const e of r(this,Ti))e.terminate(i);r(this,Ti).clear()}async rerunAll(){await Promise.all([...r(this,Ti)].map(i=>i.rerun()))}}Ti=new WeakMap;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */let qy=(pS=class{constructor(i){W(this,"timeoutSettings");W(this,"taskManager",new fP);f(this,Pu,!1);this.timeoutSettings=i}async waitForFunction(i,e={},...t){const{polling:n="raf",timeout:a=this.timeoutSettings.timeout(),root:o,signal:c}=e;if(typeof n=="number"&&n<0)throw new Error("Cannot poll with non-positive interval");return await new hP(this,{polling:n,root:o,timeout:a,signal:c},i,...t).result}get disposed(){return r(this,Pu)}dispose(){y(this,Pu,!0),this.taskManager.terminateAll(new Error("waitForFunction failed: frame got detached."))}[ge](){this.dispose()}},Pu=new WeakMap,pS);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var gt;(function(s){s.PAGE="page",s.BACKGROUND_PAGE="background_page",s.SERVICE_WORKER="service_worker",s.SHARED_WORKER="shared_worker",s.BROWSER="browser",s.WEBVIEW="webview",s.OTHER="other",s.TAB="tab"})(gt||(gt={}));class uc{constructor(){}async worker(){return null}async page(){return null}}/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class $y extends he{constructor(e){super();W(this,"timeoutSettings",new yp);f(this,_u);y(this,_u,e)}url(){return r(this,_u)}async evaluate(e,...t){return e=nt(this.evaluate.name,e),await this.mainRealm().evaluate(e,...t)}async evaluateHandle(e,...t){return e=nt(this.evaluateHandle.name,e),await this.mainRealm().evaluateHandle(e,...t)}async close(){throw new we("WebWorker.close() is not supported")}}_u=new WeakMap;/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var pP=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},mP=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});class Ky{constructor(i,e=""){f(this,Mi);f(this,Tu);y(this,Mi,i),y(this,Tu,e)}async snapshot(i={}){const{interestingOnly:e=!0,root:t=null,includeIframes:n=!1}=i,{nodes:a}=await r(this,Mi).environment.client.send("Accessibility.getFullAXTree",{frameId:r(this,Tu)});let o;if(t){const{node:h}=await r(this,Mi).environment.client.send("DOM.describeNode",{objectId:t.id});o=h.backendNodeId}const c=bp.createTree(r(this,Mi),a),u=async h=>{var d;if(((d=h.payload.role)==null?void 0:d.value)==="Iframe"){const m={stack:[],error:void 0,hasError:!1};try{if(!h.payload.backendDOMNodeId)return;const b=pP(m,await r(this,Mi).adoptBackendNode(h.payload.backendDOMNodeId),!1);if(!b||!("contentFrame"in b))return;const w=await b.contentFrame();if(!w)return;const g=await w.accessibility.snapshot(i);h.iframeSnapshot=g??void 0}catch(b){m.error=b,m.hasError=!0}finally{mP(m)}}for(const m of h.children)await u(m)};let l=c;if(!c||(n&&await u(c),o&&(l=c.find(h=>h.payload.backendDOMNodeId===o)),!l))return null;if(!e)return this.serializeTree(l)[0]??null;const p=new Set;return this.collectInterestingNodes(p,c,!1),p.has(l)?this.serializeTree(l,p)[0]??null:null}serializeTree(i,e){const t=[];for(const a of i.children)t.push(...this.serializeTree(a,e));if(e&&!e.has(i))return t;const n=i.serialize();return t.length&&(n.children=t),i.iframeSnapshot&&(n.children||(n.children=[]),n.children.push(i.iframeSnapshot)),[n]}collectInterestingNodes(i,e,t){if((e.isInteresting(t)||e.iframeSnapshot)&&i.add(e),!e.isLeafNode()){t=t||e.isControl();for(const n of e.children)this.collectInterestingNodes(i,n,t)}}}Mi=new WeakMap,Tu=new WeakMap;const mm=class mm{constructor(i,e){f(this,Hr);W(this,"payload");W(this,"children",[]);W(this,"iframeSnapshot");f(this,Ma,!1);f(this,Mu,!1);f(this,Ks,!1);f(this,Iu,!1);f(this,Us);f(this,Bt);f(this,Au);f(this,Hs);f(this,Ru);this.payload=e,y(this,Us,this.payload.name?this.payload.name.value:""),y(this,Bt,this.payload.role?this.payload.role.value:"Unknown"),y(this,Au,this.payload.ignored),y(this,Ru,i);for(const t of this.payload.properties||[])t.name==="editable"&&(y(this,Ma,t.value.value==="richtext"),y(this,Mu,!0)),t.name==="focusable"&&y(this,Ks,t.value.value),t.name==="hidden"&&y(this,Iu,t.value.value)}find(i){if(i(this))return this;for(const e of this.children){const t=e.find(i);if(t)return t}return null}isLeafNode(){if(!this.children.length||k(this,Hr,NS).call(this)||k(this,Hr,LS).call(this))return!0;switch(r(this,Bt)){case"doc-cover":case"graphics-symbol":case"img":case"image":case"Meter":case"scrollbar":case"slider":case"separator":case"progressbar":return!0}return k(this,Hr,Bm).call(this)?!1:!!(r(this,Ks)&&r(this,Us)||r(this,Bt)==="heading"&&r(this,Us))}isControl(){switch(r(this,Bt)){case"button":case"checkbox":case"ColorWell":case"combobox":case"DisclosureTriangle":case"listbox":case"menu":case"menubar":case"menuitem":case"menuitemcheckbox":case"menuitemradio":case"radio":case"scrollbar":case"searchbox":case"slider":case"spinbutton":case"switch":case"tab":case"textbox":case"tree":case"treeitem":return!0;default:return!1}}isInteresting(i){return r(this,Bt)==="Ignored"||r(this,Iu)||r(this,Au)?!1:r(this,Ks)||r(this,Ma)||this.isControl()?!0:i?!1:this.isLeafNode()&&!!r(this,Us)}serialize(){const i=new Map;for(const d of this.payload.properties||[])i.set(d.name.toLowerCase(),d.value.value);this.payload.name&&i.set("name",this.payload.name.value),this.payload.value&&i.set("value",this.payload.value.value),this.payload.description&&i.set("description",this.payload.description.value);const e={role:r(this,Bt),elementHandle:async()=>this.payload.backendDOMNodeId?await r(this,Ru).adoptBackendNode(this.payload.backendDOMNodeId):null},t=["name","value","description","keyshortcuts","roledescription","valuetext"],n=d=>i.get(d);for(const d of t)i.has(d)&&(e[d]=n(d));const a=["disabled","expanded","focused","modal","multiline","multiselectable","readonly","required","selected"],o=d=>i.get(d);for(const d of a)d==="focused"&&r(this,Bt)==="RootWebArea"||!o(d)||(e[d]=o(d));const c=["checked","pressed"];for(const d of c){if(!i.has(d))continue;const m=i.get(d);e[d]=m==="mixed"?"mixed":m==="true"}const u=["level","valuemax","valuemin"],l=d=>i.get(d);for(const d of u)i.has(d)&&(e[d]=l(d));const p=["autocomplete","haspopup","invalid","orientation"],h=d=>i.get(d);for(const d of p){const m=h(d);!m||m==="false"||(e[d]=h(d))}return e}static createTree(i,e){const t=new Map;for(const n of e)t.set(n.nodeId,new mm(i,n));for(const n of t.values())for(const a of n.payload.childIds||[]){const o=t.get(a);o&&n.children.push(o)}return t.values().next().value??null}};Ma=new WeakMap,Mu=new WeakMap,Ks=new WeakMap,Iu=new WeakMap,Us=new WeakMap,Bt=new WeakMap,Au=new WeakMap,Hs=new WeakMap,Ru=new WeakMap,Hr=new WeakSet,NS=function(){return r(this,Ma)?!1:r(this,Mu)?!0:r(this,Bt)==="textbox"||r(this,Bt)==="searchbox"},LS=function(){const i=r(this,Bt);return i==="LineBreak"||i==="text"||i==="InlineTextBox"||i==="StaticText"},Bm=function(){var i;if(r(this,Hs)===void 0){y(this,Hs,!1);for(const e of this.children)if(r(e,Ks)||k(i=e,Hr,Bm).call(i)){y(this,Hs,!0);break}}return r(this,Hs)};let bp=mm;var gP=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},wP=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});class Eh{constructor(i,e,t){f(this,Wr);f(this,Du);f(this,Fu);y(this,Wr,i),y(this,Du,e),y(this,Fu,t)}get name(){return r(this,Wr)}get initSource(){return r(this,Fu)}async run(i,e,t,n){const a=new Xe;try{if(!n){const o={stack:[],error:void 0,hasError:!1};try{const u=await gP(o,await i.evaluateHandle((l,p)=>globalThis[l].args.get(p),r(this,Wr),e),!1).getProperties();for(const[l,p]of u)if(l in t)switch(p.remoteObject().subtype){case"node":t[+l]=p;break;default:a.use(p)}else a.use(p)}catch(c){o.error=c,o.hasError=!0}finally{wP(o)}}await i.evaluate((o,c,u)=>{const l=globalThis[o].callbacks;l.get(c).resolve(u),l.delete(c)},r(this,Wr),e,await r(this,Du).call(this,...t));for(const o of t)o instanceof ys&&a.use(o)}catch(o){Vt(o)?await i.evaluate((c,u,l,p)=>{const h=new Error(l);h.stack=p;const d=globalThis[c].callbacks;d.get(u).reject(h),d.delete(u)},r(this,Wr),e,o.message,o.stack).catch(de):await i.evaluate((c,u,l)=>{const p=globalThis[c].callbacks;p.get(u).reject(l),p.delete(u)},r(this,Wr),e,o).catch(de)}}}Wr=new WeakMap,Du=new WeakMap,Fu=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Sp{constructor(i,e,t,n,a){f(this,Ou);f(this,Nu);f(this,Lu);f(this,Ia);f(this,Aa);y(this,Ou,i),y(this,Nu,e),y(this,Lu,t),y(this,Ia,n),y(this,Aa,a)}type(){return r(this,Ou)}text(){return r(this,Nu)}args(){return r(this,Lu)}location(){return r(this,Ia)[0]??(r(this,Aa)?{url:r(this,Aa).url()}:{})}stackTrace(){return r(this,Ia)}}Ou=new WeakMap,Nu=new WeakMap,Lu=new WeakMap,Ia=new WeakMap,Aa=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class yP{constructor(i,e){f(this,Ra);f(this,Bu);f(this,Ws,!1);y(this,Ra,i),y(this,Bu,e.mode!=="selectSingle")}isMultiple(){return r(this,Bu)}async accept(i){te(!r(this,Ws),"Cannot accept FileChooser which is already handled!"),y(this,Ws,!0),await r(this,Ra).uploadFile(...i)}async cancel(){te(!r(this,Ws),"Cannot cancel FileChooser which is already handled!"),y(this,Ws,!0),await r(this,Ra).evaluate(i=>{i.dispatchEvent(new Event("cancel",{bubbles:!0}))})}}Ra=new WeakMap,Bu=new WeakMap,Ws=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var at;(function(s){s.Request=Symbol("NetworkManager.Request"),s.RequestServedFromCache=Symbol("NetworkManager.RequestServedFromCache"),s.Response=Symbol("NetworkManager.Response"),s.RequestFailed=Symbol("NetworkManager.RequestFailed"),s.RequestFinished=Symbol("NetworkManager.RequestFinished")})(at||(at={}));/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Cp{constructor(){f(this,Jt,new Map);f(this,Xh,Ay())}create(i,e,t){const n=new vP(r(this,Xh).call(this),i,e);r(this,Jt).set(n.id,n);try{t(n.id)}catch(a){throw n.promise.catch(de).finally(()=>{r(this,Jt).delete(n.id)}),n.reject(a),a}return n.promise.finally(()=>{r(this,Jt).delete(n.id)})}reject(i,e,t){const n=r(this,Jt).get(i);n&&this._reject(n,e,t)}rejectRaw(i,e){const t=r(this,Jt).get(i);t&&t.reject(e)}_reject(i,e,t){let n,a;e instanceof ms?(n=e,n.cause=i.error,a=e.message):(n=i.error,a=e),i.reject(yy(n,`Protocol error (${i.label}): ${a}`,t))}resolve(i,e){const t=r(this,Jt).get(i);t&&t.resolve(e)}clear(){for(const i of r(this,Jt).values())this._reject(i,new tr("Target closed"));r(this,Jt).clear()}getPendingProtocolErrors(){const i=[];for(const e of r(this,Jt).values())i.push(new Error(`${e.label} timed out. Trace: ${e.error.stack}`));return i}}Jt=new WeakMap,Xh=new WeakMap;class vP{constructor(i,e,t){f(this,ju);f(this,qu,new ms);f(this,zs,Ne.create());f(this,Da);f(this,$u);y(this,ju,i),y(this,$u,e),t&&y(this,Da,setTimeout(()=>{r(this,zs).reject(yy(r(this,qu),`${e} timed out. Increase the 'protocolTimeout' setting in launch/connect calls for a higher timeout if needed.`))},t))}resolve(i){clearTimeout(r(this,Da)),r(this,zs).resolve(i)}reject(i){clearTimeout(r(this,Da)),r(this,zs).reject(i)}get id(){return r(this,ju)}get promise(){return r(this,zs).valueOrThrow()}get error(){return r(this,qu)}get label(){return r(this,$u)}}ju=new WeakMap,qu=new WeakMap,zs=new WeakMap,Da=new WeakMap,$u=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class ta extends sc{constructor(e,t,n,a,o){super();f(this,Vs);f(this,Fa);f(this,zr,new Cp);f(this,nr);f(this,Oa);f(this,Na);f(this,Ku,!1);y(this,nr,e),y(this,Fa,t),y(this,Vs,n),y(this,Oa,a),y(this,Ku,o)}_setTarget(e){y(this,Na,e)}_target(){return te(r(this,Na),"Target must exist"),r(this,Na)}connection(){return r(this,nr)}parentSession(){var t;return r(this,Oa)?((t=r(this,nr))==null?void 0:t.session(r(this,Oa)))??void 0:this}send(e,t,n){return r(this,nr)?r(this,nr)._rawSend(r(this,zr),e,t,r(this,Vs),n):Promise.reject(new tr(`Protocol error (${e}): Session closed. Most likely the ${r(this,Fa)} has been closed.`))}_onMessage(e){e.id?e.error?r(this,Ku)?r(this,zr).rejectRaw(e.id,e.error):r(this,zr).reject(e.id,vy(e),e.error.message):r(this,zr).resolve(e.id,e.result):(te(!e.id),this.emit(e.method,e.params))}async detach(){if(!r(this,nr))throw new Error(`Session already detached. Most likely the ${r(this,Fa)} has been closed.`);await r(this,nr).send("Target.detachFromTarget",{sessionId:r(this,Vs)})}_onClosed(){r(this,zr).clear(),y(this,nr,void 0),this.emit(je.Disconnected,void 0)}id(){return r(this,Vs)}getPendingProtocolErrors(){return r(this,zr).getPendingProtocolErrors()}}Vs=new WeakMap,Fa=new WeakMap,zr=new WeakMap,nr=new WeakMap,Oa=new WeakMap,Na=new WeakMap,Ku=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const bP=Gn("puppeteer:protocol:SEND ►"),SP=Gn("puppeteer:protocol:RECV ◀");class Uy extends he{constructor(e,t,n=0,a,o=!1){super();f(this,Hu);f(this,Uu);f(this,Cr);f(this,Gs);f(this,La);f(this,kt,new Map);f(this,Xs,!1);f(this,Ba,new Set);f(this,kr);f(this,ja,!1);y(this,ja,o),y(this,kr,new Cp),y(this,Uu,e),y(this,Gs,n),y(this,La,a??18e4),y(this,Cr,t),r(this,Cr).onmessage=this.onMessage.bind(this),r(this,Cr).onclose=k(this,Hu,jm).bind(this)}static fromSession(e){return e.connection()}get delay(){return r(this,Gs)}get timeout(){return r(this,La)}get _closed(){return r(this,Xs)}get _sessions(){return r(this,kt)}session(e){return r(this,kt).get(e)||null}url(){return r(this,Uu)}send(e,t,n){return this._rawSend(r(this,kr),e,t,void 0,n)}_rawSend(e,t,n,a,o){return r(this,Xs)?Promise.reject(new Error("Protocol error: Connection closed.")):e.create(t,(o==null?void 0:o.timeout)??r(this,La),c=>{const u=JSON.stringify({method:t,params:n,id:c,sessionId:a});bP(u),r(this,Cr).send(u)})}async closeBrowser(){await this.send("Browser.close")}async onMessage(e){r(this,Gs)&&await new Promise(n=>setTimeout(n,r(this,Gs))),SP(e);const t=JSON.parse(e);if(t.method==="Target.attachedToTarget"){const n=t.params.sessionId,a=new ta(this,t.params.targetInfo.type,n,t.sessionId,r(this,ja));r(this,kt).set(n,a),this.emit(je.SessionAttached,a);const o=r(this,kt).get(t.sessionId);o&&o.emit(je.SessionAttached,a)}else if(t.method==="Target.detachedFromTarget"){const n=r(this,kt).get(t.params.sessionId);if(n){n._onClosed(),r(this,kt).delete(t.params.sessionId),this.emit(je.SessionDetached,n);const a=r(this,kt).get(t.sessionId);a&&a.emit(je.SessionDetached,n)}}if(t.sessionId){const n=r(this,kt).get(t.sessionId);n&&n._onMessage(t)}else t.id?t.error?r(this,ja)?r(this,kr).rejectRaw(t.id,t.error):r(this,kr).reject(t.id,vy(t),t.error.message):r(this,kr).resolve(t.id,t.result):this.emit(t.method,t.params)}dispose(){k(this,Hu,jm).call(this),r(this,Cr).close()}isAutoAttached(e){return!r(this,Ba).has(e)}async _createSession(e,t=!0){t||r(this,Ba).add(e.targetId);const{sessionId:n}=await this.send("Target.attachToTarget",{targetId:e.targetId,flatten:!0});r(this,Ba).delete(e.targetId);const a=r(this,kt).get(n);if(!a)throw new Error("CDPSession creation failed.");return a}async createSession(e){return await this._createSession(e,!1)}getPendingProtocolErrors(){const e=[];e.push(...r(this,kr).getPendingProtocolErrors());for(const t of r(this,kt).values())e.push(...t.getPendingProtocolErrors());return e}}Uu=new WeakMap,Cr=new WeakMap,Gs=new WeakMap,La=new WeakMap,kt=new WeakMap,Xs=new WeakMap,Ba=new WeakMap,kr=new WeakMap,ja=new WeakMap,Hu=new WeakSet,jm=function(){if(!r(this,Xs)){y(this,Xs,!0),r(this,Cr).onmessage=void 0,r(this,Cr).onclose=void 0,r(this,kr).clear();for(const e of r(this,kt).values())e._onClosed();r(this,kt).clear(),this.emit(je.Disconnected,void 0)}};function kp(s){return s instanceof tr}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Hy{constructor(i){f(this,Js);f(this,Ys);y(this,Js,new CP(i)),y(this,Ys,new kP(i))}updateClient(i){r(this,Js).updateClient(i),r(this,Ys).updateClient(i)}async startJSCoverage(i={}){return await r(this,Js).start(i)}async stopJSCoverage(){return await r(this,Js).stop()}async startCSSCoverage(i={}){return await r(this,Ys).start(i)}async stopCSSCoverage(){return await r(this,Ys).stop()}}Js=new WeakMap,Ys=new WeakMap;class CP{constructor(i){f(this,Ua);f(this,Et);f(this,Qs,!1);f(this,Zs,new Map);f(this,en,new Map);f(this,qa);f(this,Wu,!1);f(this,$a,!1);f(this,Ka,!1);y(this,Et,i)}updateClient(i){y(this,Et,i)}async start(i={}){te(!r(this,Qs),"JSCoverage is already enabled");const{resetOnNavigation:e=!0,reportAnonymousScripts:t=!1,includeRawScriptCoverage:n=!1,useBlockCoverage:a=!0}=i;y(this,Wu,e),y(this,$a,t),y(this,Ka,n),y(this,Qs,!0),r(this,Zs).clear(),r(this,en).clear(),y(this,qa,new Xe);const o=r(this,qa).use(new he(r(this,Et)));o.on("Debugger.scriptParsed",k(this,Ua,jS).bind(this)),o.on("Runtime.executionContextsCleared",k(this,Ua,BS).bind(this)),await Promise.all([r(this,Et).send("Profiler.enable"),r(this,Et).send("Profiler.startPreciseCoverage",{callCount:r(this,Ka),detailed:a}),r(this,Et).send("Debugger.enable"),r(this,Et).send("Debugger.setSkipAllPauses",{skip:!0})])}async stop(){var n;te(r(this,Qs),"JSCoverage is not enabled"),y(this,Qs,!1);const i=await Promise.all([r(this,Et).send("Profiler.takePreciseCoverage"),r(this,Et).send("Profiler.stopPreciseCoverage"),r(this,Et).send("Profiler.disable"),r(this,Et).send("Debugger.disable")]);(n=r(this,qa))==null||n.dispose();const e=[],t=i[0];for(const a of t.result){let o=r(this,Zs).get(a.scriptId);!o&&r(this,$a)&&(o="debugger://VM"+a.scriptId);const c=r(this,en).get(a.scriptId);if(c===void 0||o===void 0)continue;const u=[];for(const p of a.functions)u.push(...p.ranges);const l=Wy(u);r(this,Ka)?e.push({url:o,ranges:l,text:c,rawScriptCoverage:a}):e.push({url:o,ranges:l,text:c})}return e}}Et=new WeakMap,Qs=new WeakMap,Zs=new WeakMap,en=new WeakMap,qa=new WeakMap,Wu=new WeakMap,$a=new WeakMap,Ka=new WeakMap,Ua=new WeakSet,BS=function(){r(this,Wu)&&(r(this,Zs).clear(),r(this,en).clear())},jS=async function(i){if(!Ot.isPuppeteerURL(i.url)&&!(!i.url&&!r(this,$a)))try{const e=await r(this,Et).send("Debugger.getScriptSource",{scriptId:i.scriptId});r(this,Zs).set(i.scriptId,i.url),r(this,en).set(i.scriptId,e.scriptSource)}catch(e){de(e)}};class kP{constructor(i){f(this,Wa);f(this,jt);f(this,tn,!1);f(this,Ii,new Map);f(this,rn,new Map);f(this,Ha);f(this,zu,!1);y(this,jt,i)}updateClient(i){y(this,jt,i)}async start(i={}){te(!r(this,tn),"CSSCoverage is already enabled");const{resetOnNavigation:e=!0}=i;y(this,zu,e),y(this,tn,!0),r(this,Ii).clear(),r(this,rn).clear(),y(this,Ha,new Xe);const t=r(this,Ha).use(new he(r(this,jt)));t.on("CSS.styleSheetAdded",k(this,Wa,$S).bind(this)),t.on("Runtime.executionContextsCleared",k(this,Wa,qS).bind(this)),await Promise.all([r(this,jt).send("DOM.enable"),r(this,jt).send("CSS.enable"),r(this,jt).send("CSS.startRuleUsageTracking")])}async stop(){var n;te(r(this,tn),"CSSCoverage is not enabled"),y(this,tn,!1);const i=await r(this,jt).send("CSS.stopRuleUsageTracking");await Promise.all([r(this,jt).send("CSS.disable"),r(this,jt).send("DOM.disable")]),(n=r(this,Ha))==null||n.dispose();const e=new Map;for(const a of i.ruleUsage){let o=e.get(a.styleSheetId);o||(o=[],e.set(a.styleSheetId,o)),o.push({startOffset:a.startOffset,endOffset:a.endOffset,count:a.used?1:0})}const t=[];for(const a of r(this,Ii).keys()){const o=r(this,Ii).get(a);te(typeof o<"u",`Stylesheet URL is undefined (styleSheetId=${a})`);const c=r(this,rn).get(a);te(typeof c<"u",`Stylesheet text is undefined (styleSheetId=${a})`);const u=Wy(e.get(a)||[]);t.push({url:o,ranges:u,text:c})}return t}}jt=new WeakMap,tn=new WeakMap,Ii=new WeakMap,rn=new WeakMap,Ha=new WeakMap,zu=new WeakMap,Wa=new WeakSet,qS=function(){r(this,zu)&&(r(this,Ii).clear(),r(this,rn).clear())},$S=async function(i){const e=i.header;if(e.sourceURL)try{const t=await r(this,jt).send("CSS.getStyleSheetText",{styleSheetId:e.styleSheetId});r(this,Ii).set(e.styleSheetId,e.sourceURL),r(this,rn).set(e.styleSheetId,t.text)}catch(t){de(t)}};function Wy(s){const i=[];for(const a of s)i.push({offset:a.startOffset,type:0,range:a}),i.push({offset:a.endOffset,type:1,range:a});i.sort((a,o)=>{if(a.offset!==o.offset)return a.offset-o.offset;if(a.type!==o.type)return o.type-a.type;const c=a.range.endOffset-a.range.startOffset,u=o.range.endOffset-o.range.startOffset;return a.type===0?u-c:c-u});const e=[],t=[];let n=0;for(const a of i){if(e.length&&n<a.offset&&e[e.length-1]>0){const o=t[t.length-1];o&&o.end===n?o.end=a.offset:t.push({start:n,end:a.offset})}n=a.offset,a.type===0?e.push(a.range.count):e.pop()}return t.filter(a=>a.end-a.start>0)}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class EP extends wy{constructor(e,t,n,a=""){super(t,n,a);f(this,Vu);y(this,Vu,e)}async handle(e){await r(this,Vu).send("Page.handleJavaScriptDialog",{accept:e.accept,promptText:e.text})}}Vu=new WeakMap;var xP=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},gr=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},wr=function(s,i,e){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:e?"".concat(e," ",i):i})};class yr{constructor(i,e,t){f(this,sn);f(this,za);f(this,Gu);y(this,sn,i),y(this,za,e),y(this,Gu,t),r(this,za).registerState(this)}async setState(i){y(this,sn,i),await this.sync()}get state(){return r(this,sn)}async sync(){await Promise.all(r(this,za).clients().map(i=>r(this,Gu).call(this,i,r(this,sn))))}}sn=new WeakMap,za=new WeakMap,Gu=new WeakMap;let zy=(()=>{var A,F,R,P,T,q,L,I,_,K,j,O,D,N,$,B,qm,$m,Km,Um,Hm,Wm,zm,Vm,Gm,Xm,x;let s=[],i,e,t,n,a,o,c,u,l,p,h,d,m,b,w,g,S,E,v,C;return x=class{constructor(H){f(this,B);f(this,A,xP(this,s));f(this,F,!1);f(this,R,!1);f(this,P,[]);f(this,T,new yr({active:!1},this,r(this,B,qm)));f(this,q,new yr({active:!1},this,r(this,B,$m)));f(this,L,new yr({active:!1},this,r(this,B,Km)));f(this,I,new yr({active:!1},this,r(this,B,Um)));f(this,_,new yr({active:!1},this,r(this,B,Hm)));f(this,K,new yr({active:!1},this,r(this,B,Wm)));f(this,j,new yr({active:!1},this,r(this,B,zm)));f(this,O,new yr({active:!1},this,r(this,B,Vm)));f(this,D,new yr({active:!1},this,r(this,B,Gm)));f(this,N,new yr({javaScriptEnabled:!0,active:!1},this,r(this,B,Xm)));f(this,$,new Set);y(this,A,H)}updateClient(H){y(this,A,H),r(this,$).delete(H)}registerState(H){r(this,P).push(H)}clients(){return[r(this,A),...Array.from(r(this,$))]}async registerSpeculativeSession(H){r(this,$).add(H),H.once(je.Disconnected,()=>{r(this,$).delete(H)}),Promise.all(r(this,P).map(G=>G.sync().catch(de)))}get javascriptEnabled(){return r(this,N).state.javaScriptEnabled}async emulateViewport(H){const G=r(this,T).state;if(!H&&!G.active)return!1;await r(this,T).setState(H?{viewport:H,active:!0}:{active:!1});const J=(H==null?void 0:H.isMobile)||!1,Z=(H==null?void 0:H.hasTouch)||!1,ie=r(this,F)!==J||r(this,R)!==Z;return y(this,F,J),y(this,R,Z),ie}async emulateIdleState(H){await r(this,q).setState({active:!0,overrides:H})}async emulateTimezone(H){await r(this,L).setState({timezoneId:H,active:!0})}async emulateVisionDeficiency(H){te(!H||new Set(["none","achromatopsia","blurredVision","deuteranopia","protanopia","reducedContrast","tritanopia"]).has(H),`Unsupported vision deficiency: ${H}`),await r(this,I).setState({active:!0,visionDeficiency:H})}async emulateCPUThrottling(H){te(H===null||H>=1,"Throttling rate should be greater or equal to 1"),await r(this,_).setState({active:!0,factor:H??void 0})}async emulateMediaFeatures(H){if(Array.isArray(H))for(const G of H){const J=G.name;te(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(J),"Unsupported media feature: "+J)}await r(this,K).setState({active:!0,mediaFeatures:H})}async emulateMediaType(H){te(H==="screen"||H==="print"||(H??void 0)===void 0,"Unsupported media type: "+H),await r(this,j).setState({type:H,active:!0})}async setGeolocation(H){const{longitude:G,latitude:J,accuracy:Z=0}=H;if(G<-180||G>180)throw new Error(`Invalid longitude "${G}": precondition -180 <= LONGITUDE <= 180 failed.`);if(J<-90||J>90)throw new Error(`Invalid latitude "${J}": precondition -90 <= LATITUDE <= 90 failed.`);if(Z<0)throw new Error(`Invalid accuracy "${Z}": precondition 0 <= ACCURACY failed.`);await r(this,O).setState({active:!0,geoLocation:{longitude:G,latitude:J,accuracy:Z}})}async resetDefaultBackgroundColor(){await r(this,D).setState({active:!0,color:void 0})}async setTransparentBackgroundColor(){await r(this,D).setState({active:!0,color:{r:0,g:0,b:0,a:0}})}async setJavaScriptEnabled(H){await r(this,N).setState({active:!0,javaScriptEnabled:H})}},A=new WeakMap,F=new WeakMap,R=new WeakMap,P=new WeakMap,T=new WeakMap,q=new WeakMap,L=new WeakMap,I=new WeakMap,_=new WeakMap,K=new WeakMap,j=new WeakMap,O=new WeakMap,D=new WeakMap,N=new WeakMap,$=new WeakMap,B=new WeakSet,qm=function(){return e.value},$m=function(){return n.value},Km=function(){return o.value},Um=function(){return u.value},Hm=function(){return p.value},Wm=function(){return d.value},zm=function(){return b.value},Vm=function(){return g.value},Gm=function(){return E.value},Xm=function(){return C.value},(()=>{const H=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[rr],t=[rr],a=[rr],c=[rr],l=[rr],h=[rr],m=[rr],w=[rr],S=[rr],v=[rr],gr(x,e={value:wr(async function(G,J){if(!J.viewport){await Promise.all([G.send("Emulation.clearDeviceMetricsOverride"),G.send("Emulation.setTouchEmulationEnabled",{enabled:!1})]).catch(de);return}const{viewport:Z}=J,ie=Z.isMobile||!1,ue=Z.width,U=Z.height,Q=Z.deviceScaleFactor??1,ee=Z.isLandscape?{angle:90,type:"landscapePrimary"}:{angle:0,type:"portraitPrimary"},re=Z.hasTouch||!1;await Promise.all([G.send("Emulation.setDeviceMetricsOverride",{mobile:ie,width:ue,height:U,deviceScaleFactor:Q,screenOrientation:ee}).catch(pe=>{if(pe.message.includes("Target does not support metrics override")){de(pe);return}throw pe}),G.send("Emulation.setTouchEmulationEnabled",{enabled:re})])},"#applyViewport")},i,{kind:"method",name:"#applyViewport",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,qm)},metadata:H},null,s),gr(x,n={value:wr(async function(G,J){J.active&&(J.overrides?await G.send("Emulation.setIdleOverride",{isUserActive:J.overrides.isUserActive,isScreenUnlocked:J.overrides.isScreenUnlocked}):await G.send("Emulation.clearIdleOverride"))},"#emulateIdleState")},t,{kind:"method",name:"#emulateIdleState",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,$m)},metadata:H},null,s),gr(x,o={value:wr(async function(G,J){if(J.active)try{await G.send("Emulation.setTimezoneOverride",{timezoneId:J.timezoneId||""})}catch(Z){throw Vt(Z)&&Z.message.includes("Invalid timezone")?new Error(`Invalid timezone ID: ${J.timezoneId}`):Z}},"#emulateTimezone")},a,{kind:"method",name:"#emulateTimezone",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,Km)},metadata:H},null,s),gr(x,u={value:wr(async function(G,J){J.active&&await G.send("Emulation.setEmulatedVisionDeficiency",{type:J.visionDeficiency||"none"})},"#emulateVisionDeficiency")},c,{kind:"method",name:"#emulateVisionDeficiency",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,Um)},metadata:H},null,s),gr(x,p={value:wr(async function(G,J){J.active&&await G.send("Emulation.setCPUThrottlingRate",{rate:J.factor??1})},"#emulateCpuThrottling")},l,{kind:"method",name:"#emulateCpuThrottling",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,Hm)},metadata:H},null,s),gr(x,d={value:wr(async function(G,J){J.active&&await G.send("Emulation.setEmulatedMedia",{features:J.mediaFeatures})},"#emulateMediaFeatures")},h,{kind:"method",name:"#emulateMediaFeatures",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,Wm)},metadata:H},null,s),gr(x,b={value:wr(async function(G,J){J.active&&await G.send("Emulation.setEmulatedMedia",{media:J.type||""})},"#emulateMediaType")},m,{kind:"method",name:"#emulateMediaType",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,zm)},metadata:H},null,s),gr(x,g={value:wr(async function(G,J){J.active&&await G.send("Emulation.setGeolocationOverride",J.geoLocation?{longitude:J.geoLocation.longitude,latitude:J.geoLocation.latitude,accuracy:J.geoLocation.accuracy}:void 0)},"#setGeolocation")},w,{kind:"method",name:"#setGeolocation",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,Vm)},metadata:H},null,s),gr(x,E={value:wr(async function(G,J){J.active&&await G.send("Emulation.setDefaultBackgroundColorOverride",{color:J.color})},"#setDefaultBackgroundColor")},S,{kind:"method",name:"#setDefaultBackgroundColor",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,Gm)},metadata:H},null,s),gr(x,C={value:wr(async function(G,J){J.active&&await G.send("Emulation.setScriptExecutionDisabled",{value:!J.javaScriptEnabled})},"#setJavaScriptEnabled")},v,{kind:"method",name:"#setJavaScriptEnabled",static:!1,private:!0,access:{has:G=>Tt(B,G),get:G=>r(G,B,Xm)},metadata:H},null,s),H&&Object.defineProperty(x,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H})})(),x})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class PP{constructor(i,e,t){f(this,Xu);f(this,Ju);f(this,Va,new WeakMap);y(this,Xu,e),y(this,Ju,t),r(this,Va).set(i,e)}get id(){return r(this,Xu)}get source(){return r(this,Ju)}getIdForFrame(i){return r(this,Va).get(i)}setIdForFrame(i,e){r(this,Va).set(i,e)}}Xu=new WeakMap,Ju=new WeakMap,Va=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class _P{constructor(i,e){W(this,"id");W(this,"name");this.id=i,this.name=e}}class TP{constructor(i,e,t){f(this,Qu);f(this,qt);f(this,Yu);f(this,nn);f(this,an,!1);f(this,Ga,k(this,Qu,Jm).bind(this));f(this,Xa,new Set);W(this,"devices",[]);y(this,qt,i),y(this,Yu,e),y(this,nn,t.id),r(this,qt).on("DeviceAccess.deviceRequestPrompted",r(this,Ga)),r(this,qt).on("Target.detachedFromTarget",()=>{y(this,qt,null)}),k(this,Qu,Jm).call(this,t)}async waitForDevice(i,e={}){for(const o of this.devices)if(i(o))return o;const{timeout:t=r(this,Yu).timeout()}=e,n=Ne.create({message:`Waiting for \`DeviceRequestPromptDevice\` failed: ${t}ms exceeded`,timeout:t});e.signal&&e.signal.addEventListener("abort",()=>{var o;n.reject((o=e.signal)==null?void 0:o.reason)},{once:!0});const a={filter:i,promise:n};r(this,Xa).add(a);try{return await n.valueOrThrow()}finally{r(this,Xa).delete(a)}}async select(i){return te(r(this,qt)!==null,"Cannot select device through detached session!"),te(this.devices.includes(i),"Cannot select unknown device!"),te(!r(this,an),"Cannot select DeviceRequestPrompt which is already handled!"),r(this,qt).off("DeviceAccess.deviceRequestPrompted",r(this,Ga)),y(this,an,!0),await r(this,qt).send("DeviceAccess.selectPrompt",{id:r(this,nn),deviceId:i.id})}async cancel(){return te(r(this,qt)!==null,"Cannot cancel prompt through detached session!"),te(!r(this,an),"Cannot cancel DeviceRequestPrompt which is already handled!"),r(this,qt).off("DeviceAccess.deviceRequestPrompted",r(this,Ga)),y(this,an,!0),await r(this,qt).send("DeviceAccess.cancelPrompt",{id:r(this,nn)})}}qt=new WeakMap,Yu=new WeakMap,nn=new WeakMap,an=new WeakMap,Ga=new WeakMap,Xa=new WeakMap,Qu=new WeakSet,Jm=function(i){if(i.id===r(this,nn))for(const e of i.devices){if(this.devices.some(n=>n.id===e.id))continue;const t=new _P(e.id,e.name);this.devices.push(t);for(const n of r(this,Xa))n.filter(t)&&n.promise.resolve(t)}};class MP{constructor(i,e){f(this,Jh);f(this,ar);f(this,Ja);f(this,Vr,new Set);y(this,ar,i),y(this,Ja,e),r(this,ar).on("DeviceAccess.deviceRequestPrompted",t=>{k(this,Jh,KS).call(this,t)}),r(this,ar).on("Target.detachedFromTarget",()=>{y(this,ar,null)})}async waitForDevicePrompt(i={}){te(r(this,ar)!==null,"Cannot wait for device prompt through detached session!");const e=r(this,Vr).size===0;let t;e&&(t=r(this,ar).send("DeviceAccess.enable"));const{timeout:n=r(this,Ja).timeout()}=i,a=Ne.create({message:`Waiting for \`DeviceRequestPrompt\` failed: ${n}ms exceeded`,timeout:n});i.signal&&i.signal.addEventListener("abort",()=>{var o;a.reject((o=i.signal)==null?void 0:o.reason)},{once:!0}),r(this,Vr).add(a);try{const[o]=await Promise.all([a.valueOrThrow(),t]);return o}finally{r(this,Vr).delete(a)}}}ar=new WeakMap,Ja=new WeakMap,Vr=new WeakMap,Jh=new WeakSet,KS=function(i){if(!r(this,Vr).size)return;te(r(this,ar)!==null);const e=new TP(r(this,ar),r(this,Ja),i);for(const t of r(this,Vr))t.resolve(e);r(this,Vr).clear()};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Vy(s){let i,e;if(!s.exception)i="Error",e=s.text;else{if((s.exception.type!=="object"||s.exception.subtype!=="error")&&!s.exception.objectId)return vs(s.exception);{const c=Gy(s);i=c.name,e=c.message}}const t=e.split(`
`).length,n=new Error(e);n.name=i;const a=n.stack.split(`
`),o=a.splice(0,t);if(a.shift(),s.stackTrace&&a.length<Error.stackTraceLimit)for(const c of s.stackTrace.callFrames.reverse()){if(Ot.isPuppeteerURL(c.url)&&c.url!==Ot.INTERNAL_URL){const u=Ot.parse(c.url);a.unshift(`    at ${c.functionName||u.functionName} (${u.functionName} at ${u.siteString}, <anonymous>:${c.lineNumber}:${c.columnNumber})`)}else a.push(`    at ${c.functionName||"<anonymous>"} (${c.url}:${c.lineNumber}:${c.columnNumber})`);if(a.length>=Error.stackTraceLimit)break}return n.stack=[...o,...a].join(`
`),n}const Gy=s=>{var a,o,c,u;let i="",e;const t=((o=(a=s.exception)==null?void 0:a.description)==null?void 0:o.split(`
    at `))??[],n=Math.min(((c=s.stackTrace)==null?void 0:c.callFrames.length)??0,t.length-1);return t.splice(-n,n),(u=s.exception)!=null&&u.className&&(i=s.exception.className),e=t.join(`
`),i&&e.startsWith(`${i}: `)&&(e=e.slice(i.length+2)),{message:e,name:i}};function IP(s){let i,e;if(!s.exception)i="Error",e=s.text;else{if((s.exception.type!=="object"||s.exception.subtype!=="error")&&!s.exception.objectId)return vs(s.exception);{const c=Gy(s);i=c.name,e=c.message}}const t=new Error(e);t.name=i;const n=t.message.split(`
`).length,a=t.stack.split(`
`).splice(0,n),o=[];if(s.stackTrace){for(const c of s.stackTrace.callFrames)if(o.push(`    at ${c.functionName||"<anonymous>"} (${c.url}:${c.lineNumber+1}:${c.columnNumber+1})`),o.length>=Error.stackTraceLimit)break}return t.stack=[...a,...o].join(`
`),t}function vs(s){if(te(!s.objectId,"Cannot extract value when objectId is given"),s.unserializableValue){if(s.type==="bigint")return BigInt(s.unserializableValue.replace("n",""));switch(s.unserializableValue){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error("Unsupported unserializable value: "+s.unserializableValue)}}return s.value}function Xy(s,i,e){globalThis[i]||Object.assign(globalThis,{[i](...t){const n=globalThis[i];n.args??(n.args=new Map),n.callbacks??(n.callbacks=new Map);const a=(n.lastSeq??0)+1;return n.lastSeq=a,n.args.set(a,t),globalThis[e+i](JSON.stringify({type:s,name:i,seq:a,args:t,isTrivial:!t.some(o=>o instanceof Node)})),new Promise((o,c)=>{n.callbacks.set(a,{resolve(u){n.args.delete(a),o(u)},reject(u){n.args.delete(a),c(u)}})})}})}const ra="puppeteer_";function AP(s,i){return op(Xy,s,i,ra)}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class xh extends ys{constructor(e,t){super();f(this,Ya,!1);f(this,Rt);f(this,Qa);y(this,Qa,e),y(this,Rt,t)}get disposed(){return r(this,Ya)}get realm(){return r(this,Qa)}get client(){return this.realm.environment.client}async jsonValue(){if(!r(this,Rt).objectId)return vs(r(this,Rt));const e=await this.evaluate(t=>t);if(e===void 0)throw new Error("Could not serialize referenced object");return e}asElement(){return null}async dispose(){r(this,Ya)||(y(this,Ya,!0),await Jy(this.client,r(this,Rt)))}toString(){return r(this,Rt).objectId?"JSHandle@"+(r(this,Rt).subtype||r(this,Rt).type):"JSHandle:"+vs(r(this,Rt))}get id(){return r(this,Rt).objectId}remoteObject(){return r(this,Rt)}async getProperties(){const e=await this.client.send("Runtime.getProperties",{objectId:r(this,Rt).objectId,ownProperties:!0}),t=new Map;for(const n of e.result)!n.enumerable||!n.value||t.set(n.name,r(this,Qa).createCdpHandle(n.value));return t}}Ya=new WeakMap,Rt=new WeakMap,Qa=new WeakMap;async function Jy(s,i){i.objectId&&await s.send("Runtime.releaseObject",{objectId:i.objectId}).catch(e=>{de(e)})}/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var RP=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},Ph=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};const DP=new Set(["StaticText","InlineTextBox"]);let Yy=(()=>{var o,c,US,l;let s=xy,i=[],e,t,n,a;return l=class extends s{constructor(d,m){super(new xh(d,m));f(this,c);f(this,o,RP(this,i))}get realm(){return this.handle.realm}get client(){return this.handle.client}remoteObject(){return this.handle.remoteObject()}get frame(){return this.realm.environment}async contentFrame(){const d=await this.client.send("DOM.describeNode",{objectId:this.id});return typeof d.node.frameId!="string"?null:r(this,c,US).frame(d.node.frameId)}async scrollIntoView(){await this.assertConnectedElement();try{await this.client.send("DOM.scrollIntoViewIfNeeded",{objectId:this.id})}catch(d){de(d),await super.scrollIntoView()}}async uploadFile(...d){const m=await this.evaluate(g=>g.multiple);te(d.length<=1||m,"Multiple file uploads only work with <input type=file multiple>");const b=gi.value.path;if(b&&(d=d.map(g=>b.win32.isAbsolute(g)||b.posix.isAbsolute(g)?g:b.resolve(g))),d.length===0){await this.evaluate(g=>{g.files=new DataTransfer().files,g.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),g.dispatchEvent(new Event("change",{bubbles:!0}))});return}const{node:{backendNodeId:w}}=await this.client.send("DOM.describeNode",{objectId:this.id});await this.client.send("DOM.setFileInputFiles",{objectId:this.id,files:d,backendNodeId:w})}async autofill(d){const b=(await this.client.send("DOM.describeNode",{objectId:this.handle.id})).node.backendNodeId,w=this.frame._id;await this.client.send("Autofill.trigger",{fieldId:b,frameId:w,card:d.creditCard})}async*queryAXTree(d,m){const{nodes:b}=await this.client.send("Accessibility.queryAXTree",{objectId:this.id,accessibleName:d,role:m}),w=b.filter(g=>!(g.ignored||!g.role||DP.has(g.role.value)));return yield*Yn.map(w,g=>this.realm.adoptBackendNode(g.backendDOMNodeId))}async backendNodeId(){if(r(this,o))return r(this,o);const{node:d}=await this.client.send("DOM.describeNode",{objectId:this.handle.id});return y(this,o,d.backendNodeId),r(this,o)}},o=new WeakMap,c=new WeakSet,US=function(){return this.frame._frameManager},(()=>{const d=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[se()],t=[se(),Ee],n=[se(),Ee],a=[se()],Ph(l,null,e,{kind:"method",name:"contentFrame",static:!1,private:!1,access:{has:m=>"contentFrame"in m,get:m=>m.contentFrame},metadata:d},null,i),Ph(l,null,t,{kind:"method",name:"scrollIntoView",static:!1,private:!1,access:{has:m=>"scrollIntoView"in m,get:m=>m.scrollIntoView},metadata:d},null,i),Ph(l,null,n,{kind:"method",name:"uploadFile",static:!1,private:!1,access:{has:m=>"uploadFile"in m,get:m=>m.uploadFile},metadata:d},null,i),Ph(l,null,a,{kind:"method",name:"autofill",static:!1,private:!1,access:{has:m=>"autofill"in m,get:m=>m.autofill},metadata:d},null,i),d&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})})(),l})();/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var FP=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},OP=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});const NP=new Eh("__ariaQuerySelector",ws.queryOne,""),LP=new Eh("__ariaQuerySelectorAll",async(s,i)=>{const e=ws.queryAll(s,i);return await s.realm.evaluateHandle((...t)=>t,...await Yn.collect(e))},"");class Qy extends he{constructor(e,t,n){super();f(this,Dt);f(this,Ai);f(this,on);f(this,or);f(this,Za);f(this,Zu,new Xe);f(this,cn,new Map);f(this,Yh,new lp);f(this,el,!1);f(this,Ri);y(this,Ai,e),y(this,on,n),y(this,or,t.id),t.name&&y(this,Za,t.name);const a=r(this,Zu).use(new he(r(this,Ai)));a.on("Runtime.bindingCalled",k(this,Dt,WS).bind(this)),a.on("Runtime.executionContextDestroyed",async o=>{o.executionContextId===r(this,or)&&this[ge]()}),a.on("Runtime.executionContextsCleared",async()=>{this[ge]()}),a.on("Runtime.consoleAPICalled",k(this,Dt,zS).bind(this)),a.on(je.Disconnected,()=>{this[ge]()})}get id(){return r(this,or)}get puppeteerUtil(){let e=Promise.resolve();return r(this,el)||(e=Promise.all([k(this,Dt,Ym).call(this,NP),k(this,Dt,Ym).call(this,LP)]),y(this,el,!0)),nc.inject(t=>{r(this,Ri)&&r(this,Ri).then(n=>{n.dispose()}),y(this,Ri,e.then(()=>this.evaluateHandle(t)))},!r(this,Ri)),r(this,Ri)}async evaluate(e,...t){return await k(this,Dt,Qm).call(this,!0,e,...t)}async evaluateHandle(e,...t){return await k(this,Dt,Qm).call(this,!1,e,...t)}[ge](){r(this,Zu).dispose(),this.emit("disposed",void 0)}}Ai=new WeakMap,on=new WeakMap,or=new WeakMap,Za=new WeakMap,Zu=new WeakMap,cn=new WeakMap,Yh=new WeakMap,Dt=new WeakSet,HS=async function(e){const t={stack:[],error:void 0,hasError:!1};try{if(r(this,cn).has(e.name))return;const n=FP(t,await r(this,Yh).acquire(),!1);try{await r(this,Ai).send("Runtime.addBinding",r(this,Za)?{name:ra+e.name,executionContextName:r(this,Za)}:{name:ra+e.name,executionContextId:r(this,or)}),await this.evaluate(Xy,"internal",e.name,ra),r(this,cn).set(e.name,e)}catch(a){if(a instanceof Error&&(a.message.includes("Execution context was destroyed")||a.message.includes("Cannot find context with specified id")))return;de(a)}}catch(n){t.error=n,t.hasError=!0}finally{OP(t)}},WS=async function(e){if(e.executionContextId!==r(this,or))return;let t;try{t=JSON.parse(e.payload)}catch{return}const{type:n,name:a,seq:o,args:c,isTrivial:u}=t;if(n!=="internal"){this.emit("bindingcalled",e);return}if(!r(this,cn).has(a)){this.emit("bindingcalled",e);return}try{const l=r(this,cn).get(a);await(l==null?void 0:l.run(this,o,c,u))}catch(l){de(l)}},zS=function(e){e.executionContextId===r(this,or)&&this.emit("consoleapicalled",e)},el=new WeakMap,Ri=new WeakMap,Ym=async function(e){try{await k(this,Dt,HS).call(this,e)}catch(t){de(t)}},Qm=async function(e,t,...n){var m;const a=fy(((m=uy(t))==null?void 0:m.toString())??Ot.INTERNAL_URL);if(Lr(t)){const b=r(this,or),w=t,g=ch.test(w)?w:`${w}
${a}
`,{exceptionDetails:S,result:E}=await r(this,Ai).send("Runtime.evaluate",{expression:g,contextId:b,returnByValue:e,awaitPromise:!0,userGesture:!0}).catch(Zy);if(S)throw Vy(S);return e?vs(E):r(this,on).createCdpHandle(E)}const o=fr(t),c=ch.test(o)?o:`${o}
${a}
`;let u;try{u=r(this,Ai).send("Runtime.callFunctionOn",{functionDeclaration:c,executionContextId:r(this,or),arguments:n.some(b=>b instanceof Nt)?await Promise.all(n.map(b=>h(this,b))):n.map(b=>d(this,b)),returnByValue:e,awaitPromise:!0,userGesture:!0})}catch(b){throw b instanceof TypeError&&b.message.startsWith("Converting circular structure to JSON")&&(b.message+=" Recursive objects are not allowed."),b}const{exceptionDetails:l,result:p}=await u.catch(Zy);if(l)throw Vy(l);return e?vs(p):r(this,on).createCdpHandle(p);async function h(b,w){return w instanceof Nt&&(w=await w.get(b)),d(b,w)}function d(b,w){if(typeof w=="bigint")return{unserializableValue:`${w.toString()}n`};if(Object.is(w,-0))return{unserializableValue:"-0"};if(Object.is(w,1/0))return{unserializableValue:"Infinity"};if(Object.is(w,-1/0))return{unserializableValue:"-Infinity"};if(Object.is(w,NaN))return{unserializableValue:"NaN"};const g=w&&(w instanceof xh||w instanceof Yy)?w:null;if(g){if(g.realm!==r(b,on))throw new Error("JSHandles can be evaluated only in the context they were created!");if(g.disposed)throw new Error("JSHandle is disposed!");return g.remoteObject().unserializableValue?{unserializableValue:g.remoteObject().unserializableValue}:g.remoteObject().objectId?{objectId:g.remoteObject().objectId}:{value:g.remoteObject().value}}return{value:w}}};const Zy=s=>{if(s.message.includes("Object reference chain is too long"))return{result:{type:"undefined"}};if(s.message.includes("Object couldn't be returned by value"))return{result:{type:"undefined"}};throw s.message.endsWith("Cannot find context with specified id")||s.message.endsWith("Inspected target navigated or closed")?new Error("Execution context was destroyed, most likely because of a navigation."):s};/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var ot;(function(s){s.FrameAttached=Symbol("FrameManager.FrameAttached"),s.FrameNavigated=Symbol("FrameManager.FrameNavigated"),s.FrameDetached=Symbol("FrameManager.FrameDetached"),s.FrameSwapped=Symbol("FrameManager.FrameSwapped"),s.LifecycleEvent=Symbol("FrameManager.LifecycleEvent"),s.FrameNavigatedWithinDocument=Symbol("FrameManager.FrameNavigatedWithinDocument"),s.ConsoleApiCalled=Symbol("FrameManager.ConsoleApiCalled"),s.BindingCalled=Symbol("FrameManager.BindingCalled")})(ot||(ot={}));/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Ep extends qy{constructor(e,t){super(t);f(this,vt);f(this,Er);f(this,cr,new he);f(this,Di);y(this,Di,e)}get environment(){return r(this,Di)}get client(){return r(this,Di).client}get emitter(){return r(this,cr)}setContext(e){var t;(t=r(this,Er))==null||t[ge](),e.once("disposed",k(this,vt,VS).bind(this)),e.on("consoleapicalled",k(this,vt,GS).bind(this)),e.on("bindingcalled",k(this,vt,XS).bind(this)),y(this,Er,e),r(this,cr).emit("context",e),this.taskManager.rerunAll()}hasContext(){return!!r(this,Er)}get context(){return r(this,Er)}async evaluateHandle(e,...t){e=nt(this.evaluateHandle.name,e);let n=k(this,vt,pf).call(this);return n||(n=await k(this,vt,mf).call(this)),await n.evaluateHandle(e,...t)}async evaluate(e,...t){e=nt(this.evaluate.name,e);let n=k(this,vt,pf).call(this);return n||(n=await k(this,vt,mf).call(this)),await n.evaluate(e,...t)}async adoptBackendNode(e){let t=k(this,vt,pf).call(this);t||(t=await k(this,vt,mf).call(this));const{object:n}=await this.client.send("DOM.resolveNode",{backendNodeId:e,executionContextId:t.id});return this.createCdpHandle(n)}async adoptHandle(e){if(e.realm===this)return await e.evaluateHandle(n=>n);const t=await this.client.send("DOM.describeNode",{objectId:e.id});return await this.adoptBackendNode(t.node.backendNodeId)}async transferHandle(e){if(e.realm===this||e.remoteObject().objectId===void 0)return e;const t=await this.client.send("DOM.describeNode",{objectId:e.remoteObject().objectId}),n=await this.adoptBackendNode(t.node.backendNodeId);return await e.dispose(),n}createCdpHandle(e){return e.subtype==="node"?new Yy(this,e):new xh(this,e)}[ge](){var e;(e=r(this,Er))==null||e[ge](),r(this,cr).emit("disposed",void 0),super[ge](),r(this,cr).removeAllListeners()}}Er=new WeakMap,cr=new WeakMap,Di=new WeakMap,vt=new WeakSet,VS=function(){y(this,Er,void 0),"clearDocumentHandle"in r(this,Di)&&r(this,Di).clearDocumentHandle()},GS=function(e){r(this,cr).emit("consoleapicalled",e)},XS=function(e){r(this,cr).emit("bindingcalled",e)},pf=function(){if(this.disposed)throw new Error(`Execution context is not available in detached frame or worker "${this.environment.url()}" (are you trying to evaluate?)`);return r(this,Er)},mf=async function(){const e=new Error("Execution context was destroyed");return await it(Ae(r(this,cr),"context").pipe(pt(Ae(r(this,cr),"disposed").pipe(ze(()=>{throw e})),It(this.timeoutSettings.timeout()))))};/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const vr=Symbol("mainWorld"),_h=Symbol("puppeteerWorld");/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const BP=new Map([["load","load"],["domcontentloaded","DOMContentLoaded"],["networkidle0","networkIdle"],["networkidle2","networkAlmostIdle"]]);class xp{constructor(i,e,t,n,a){f(this,Ke);f(this,tl);f(this,Fi);f(this,eo);f(this,Oi,null);f(this,un,new Xe);f(this,rl);f(this,Ni);f(this,il,Ne.create());f(this,sl,Ne.create());f(this,nl,Ne.create());f(this,al);f(this,ol);f(this,Gr);Array.isArray(t)?t=t.slice():typeof t=="string"&&(t=[t]),y(this,rl,e._loaderId),y(this,tl,t.map(l=>{const p=BP.get(l);return te(p,"Unknown value for options.waitUntil: "+l),p})),a==null||a.addEventListener("abort",()=>{r(this,Ni).reject(a.reason)}),y(this,Fi,e),y(this,eo,n),r(this,un).use(new he(e._frameManager)).on(ot.LifecycleEvent,k(this,Ke,Ln).bind(this));const c=r(this,un).use(new he(e));c.on(mt.FrameNavigatedWithinDocument,k(this,Ke,eC).bind(this)),c.on(mt.FrameNavigated,k(this,Ke,tC).bind(this)),c.on(mt.FrameSwapped,k(this,Ke,gf).bind(this)),c.on(mt.FrameSwappedByActivation,k(this,Ke,gf).bind(this)),c.on(mt.FrameDetached,k(this,Ke,ZS).bind(this));const u=r(this,un).use(new he(i));u.on(at.Request,k(this,Ke,JS).bind(this)),u.on(at.Response,k(this,Ke,QS).bind(this)),u.on(at.RequestFailed,k(this,Ke,YS).bind(this)),y(this,Ni,Ne.create({timeout:r(this,eo),message:`Navigation timeout of ${r(this,eo)} ms exceeded`})),k(this,Ke,Ln).call(this)}async navigationResponse(){var i;return await((i=r(this,Gr))==null?void 0:i.valueOrThrow()),r(this,Oi)?r(this,Oi).response():null}sameDocumentNavigationPromise(){return r(this,il).valueOrThrow()}newDocumentNavigationPromise(){return r(this,nl).valueOrThrow()}lifecyclePromise(){return r(this,sl).valueOrThrow()}terminationPromise(){return r(this,Ni).valueOrThrow()}dispose(){r(this,un).dispose(),r(this,Ni).resolve(new Error("LifecycleWatcher disposed"))}}tl=new WeakMap,Fi=new WeakMap,eo=new WeakMap,Oi=new WeakMap,un=new WeakMap,rl=new WeakMap,Ni=new WeakMap,il=new WeakMap,sl=new WeakMap,nl=new WeakMap,al=new WeakMap,ol=new WeakMap,Gr=new WeakMap,Ke=new WeakSet,JS=function(i){var e,t;i.frame()!==r(this,Fi)||!i.isNavigationRequest()||(y(this,Oi,i),(e=r(this,Gr))==null||e.resolve(),y(this,Gr,Ne.create()),i.response()!==null&&((t=r(this,Gr))==null||t.resolve()))},YS=function(i){var e,t;((e=r(this,Oi))==null?void 0:e.id)===i.id&&((t=r(this,Gr))==null||t.resolve())},QS=function(i){var e,t;((e=r(this,Oi))==null?void 0:e.id)===i.request().id&&((t=r(this,Gr))==null||t.resolve())},ZS=function(i){if(r(this,Fi)===i){r(this,Ni).resolve(new Error("Navigating frame was detached"));return}k(this,Ke,Ln).call(this)},eC=function(){y(this,al,!0),k(this,Ke,Ln).call(this)},tC=function(i){if(i==="BackForwardCacheRestore")return k(this,Ke,gf).call(this);k(this,Ke,Ln).call(this)},gf=function(){y(this,ol,!0),k(this,Ke,Ln).call(this)},Ln=function(){if(!i(r(this,Fi),r(this,tl)))return;r(this,sl).resolve(),r(this,al)&&r(this,il).resolve(void 0),(r(this,ol)||r(this,Fi)._loaderId!==r(this,rl))&&r(this,nl).resolve(void 0);function i(e,t){for(const n of t)if(!e._lifecycleEvents.has(n))return!1;for(const n of e.childFrames())if(n._hasStartedLoading&&!i(n,t))return!1;return!0}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var jP=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},bs=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};let ev=(()=>{var l,p,h,d,rC,iC,sC,g;let s=_y,i=[],e,t,n,a,o,c,u;return g=class extends s{constructor(v,C,A,F){super();f(this,d);f(this,l,(jP(this,i),""));f(this,p,!1);f(this,h);W(this,"_frameManager");W(this,"_loaderId","");W(this,"_lifecycleEvents",new Set);W(this,"_id");W(this,"_parentId");W(this,"accessibility");W(this,"worlds");this._frameManager=v,y(this,l,""),this._id=C,this._parentId=A,y(this,p,!1),y(this,h,F),this._loaderId="",this.worlds={[vr]:new Ep(this,this._frameManager.timeoutSettings),[_h]:new Ep(this,this._frameManager.timeoutSettings)},this.accessibility=new Ky(this.worlds[vr],C),this.on(mt.FrameSwappedByActivation,()=>{this._onLoadingStarted(),this._onLoadingStopped()}),this.worlds[vr].emitter.on("consoleapicalled",k(this,d,rC).bind(this)),this.worlds[vr].emitter.on("bindingcalled",k(this,d,iC).bind(this))}_client(){return r(this,h)}updateId(v){this._id=v}updateClient(v){y(this,h,v)}page(){return this._frameManager.page()}async goto(v,C={}){const{referer:A=this._frameManager.networkManager.extraHTTPHeaders().referer,referrerPolicy:F=this._frameManager.networkManager.extraHTTPHeaders()["referer-policy"],waitUntil:R=["load"],timeout:P=this._frameManager.timeoutSettings.navigationTimeout()}=C;let T=!1;const q=new xp(this._frameManager.networkManager,this,R,P);let L=await Ne.race([I(r(this,h),v,A,F,this._id),q.terminationPromise()]);L||(L=await Ne.race([q.terminationPromise(),T?q.newDocumentNavigationPromise():q.sameDocumentNavigationPromise()]));try{if(L)throw L;return await q.navigationResponse()}finally{q.dispose()}async function I(_,K,j,O,D){try{const N=await _.send("Page.navigate",{url:K,referrer:j,frameId:D,referrerPolicy:O});return T=!!N.loaderId,N.errorText==="net::ERR_HTTP_RESPONSE_CODE_FAILURE"?null:N.errorText?new Error(`${N.errorText} at ${K}`):null}catch(N){if(Vt(N))return N;throw N}}}async waitForNavigation(v={}){const{waitUntil:C=["load"],timeout:A=this._frameManager.timeoutSettings.navigationTimeout(),signal:F}=v,R=new xp(this._frameManager.networkManager,this,C,A,F),P=await Ne.race([R.terminationPromise(),...v.ignoreSameDocumentNavigation?[]:[R.sameDocumentNavigationPromise()],R.newDocumentNavigationPromise()]);try{if(P)throw P;const T=await Ne.race([R.terminationPromise(),R.navigationResponse()]);if(T instanceof Error)throw P;return T||null}finally{R.dispose()}}get client(){return r(this,h)}mainRealm(){return this.worlds[vr]}isolatedRealm(){return this.worlds[_h]}async setContent(v,C={}){const{waitUntil:A=["load"],timeout:F=this._frameManager.timeoutSettings.navigationTimeout()}=C;await this.setFrameContent(v);const R=new xp(this._frameManager.networkManager,this,A,F),P=await Ne.race([R.terminationPromise(),R.lifecyclePromise()]);if(R.dispose(),P)throw P}url(){return r(this,l)}parentFrame(){return this._frameManager._frameTree.parentFrame(this._id)||null}childFrames(){return this._frameManager._frameTree.childFrames(this._id)}async addPreloadScript(v){const C=this.parentFrame();if(C&&r(this,h)===C.client||v.getIdForFrame(this))return;const{identifier:A}=await r(this,h).send("Page.addScriptToEvaluateOnNewDocument",{source:v.source});v.setIdForFrame(this,A)}async addExposedFunctionBinding(v){this!==this._frameManager.mainFrame()&&!this._hasStartedLoading||await Promise.all([r(this,h).send("Runtime.addBinding",{name:ra+v.name}),this.evaluate(v.initSource).catch(de)])}async removeExposedFunctionBinding(v){this!==this._frameManager.mainFrame()&&!this._hasStartedLoading||await Promise.all([r(this,h).send("Runtime.removeBinding",{name:ra+v.name}),this.evaluate(C=>{globalThis[C]=void 0},v.name).catch(de)])}async waitForDevicePrompt(v={}){return await k(this,d,sC).call(this).waitForDevicePrompt(v)}_navigated(v){this._name=v.name,y(this,l,`${v.url}${v.urlFragment||""}`)}_navigatedWithinDocument(v){y(this,l,v)}_onLifecycleEvent(v,C){C==="init"&&(this._loaderId=v,this._lifecycleEvents.clear()),this._lifecycleEvents.add(C)}_onLoadingStopped(){this._lifecycleEvents.add("DOMContentLoaded"),this._lifecycleEvents.add("load")}_onLoadingStarted(){this._hasStartedLoading=!0}get detached(){return r(this,p)}[(e=[Se],t=[Se],n=[Se],a=[Se],o=[Se],c=[Se],u=[Se],ge)](){r(this,p)||(y(this,p,!0),this.worlds[vr][ge](),this.worlds[_h][ge]())}exposeFunction(){throw new we}async frameElement(){const v=this.parentFrame();if(!v)return null;const{backendNodeId:C}=await v.client.send("DOM.getFrameOwner",{frameId:this._id});return await v.mainRealm().adoptBackendNode(C)}},l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakSet,rC=function(v){this._frameManager.emit(ot.ConsoleApiCalled,[this.worlds[vr],v])},iC=function(v){this._frameManager.emit(ot.BindingCalled,[this.worlds[vr],v])},sC=function(){return this._frameManager._deviceRequestPromptManager(r(this,h))},(()=>{const v=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;bs(g,null,e,{kind:"method",name:"goto",static:!1,private:!1,access:{has:C=>"goto"in C,get:C=>C.goto},metadata:v},null,i),bs(g,null,t,{kind:"method",name:"waitForNavigation",static:!1,private:!1,access:{has:C=>"waitForNavigation"in C,get:C=>C.waitForNavigation},metadata:v},null,i),bs(g,null,n,{kind:"method",name:"setContent",static:!1,private:!1,access:{has:C=>"setContent"in C,get:C=>C.setContent},metadata:v},null,i),bs(g,null,a,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:C=>"addPreloadScript"in C,get:C=>C.addPreloadScript},metadata:v},null,i),bs(g,null,o,{kind:"method",name:"addExposedFunctionBinding",static:!1,private:!1,access:{has:C=>"addExposedFunctionBinding"in C,get:C=>C.addExposedFunctionBinding},metadata:v},null,i),bs(g,null,c,{kind:"method",name:"removeExposedFunctionBinding",static:!1,private:!1,access:{has:C=>"removeExposedFunctionBinding"in C,get:C=>C.removeExposedFunctionBinding},metadata:v},null,i),bs(g,null,u,{kind:"method",name:"waitForDevicePrompt",static:!1,private:!1,access:{has:C=>"waitForDevicePrompt"in C,get:C=>C.waitForDevicePrompt},metadata:v},null,i),v&&Object.defineProperty(g,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),g})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class qP{constructor(){f(this,ln,new Map);f(this,to,new Map);f(this,Li,new Map);f(this,ro);f(this,io,!1);f(this,cl,new Map)}getMainFrame(){return r(this,ro)}getById(i){return r(this,ln).get(i)}waitForFrame(i){const e=this.getById(i);if(e)return Promise.resolve(e);const t=Ne.create();return(r(this,cl).get(i)||new Set).add(t),t.valueOrThrow()}frames(){return Array.from(r(this,ln).values())}addFrame(i){var e;r(this,ln).set(i._id,i),i._parentId?(r(this,to).set(i._id,i._parentId),r(this,Li).has(i._parentId)||r(this,Li).set(i._parentId,new Set),r(this,Li).get(i._parentId).add(i._id)):(!r(this,ro)||r(this,io))&&(y(this,ro,i),y(this,io,!1)),(e=r(this,cl).get(i._id))==null||e.forEach(t=>t.resolve(i))}removeFrame(i){var e;r(this,ln).delete(i._id),r(this,to).delete(i._id),i._parentId?(e=r(this,Li).get(i._parentId))==null||e.delete(i._id):y(this,io,!0)}childFrames(i){const e=r(this,Li).get(i);return e?Array.from(e).map(t=>this.getById(t)).filter(t=>t!==void 0):[]}parentFrame(i){const e=r(this,to).get(i);return e?this.getById(e):void 0}}ln=new WeakMap,to=new WeakMap,Li=new WeakMap,ro=new WeakMap,io=new WeakMap,cl=new WeakMap;class Pp extends Ch{constructor(e,t,n,a,o,c){super();W(this,"id");f(this,xr);f(this,ul);f(this,ll);f(this,dl);f(this,hl);f(this,fl,!1);f(this,pl);f(this,ml,{});f(this,gl);f(this,wl);y(this,xr,e),this.id=o.requestId,y(this,ul,o.requestId===o.loaderId&&o.type==="Document"),this._interceptionId=n,y(this,ll,o.request.url+(o.request.urlFragment??"")),y(this,dl,(o.type||"other").toLowerCase()),y(this,hl,o.request.method),y(this,pl,o.request.postData),y(this,fl,o.request.hasPostData??!1),y(this,gl,t),this._redirectChain=c,y(this,wl,o.initiator),this.interception.enabled=a;for(const[u,l]of Object.entries(o.request.headers))r(this,ml)[u.toLowerCase()]=l}get client(){return r(this,xr)}set client(e){y(this,xr,e)}url(){return r(this,ll)}resourceType(){return r(this,dl)}method(){return r(this,hl)}postData(){return r(this,pl)}hasPostData(){return r(this,fl)}async fetchPostData(){try{return(await r(this,xr).send("Network.getRequestPostData",{requestId:this.id})).postData}catch(e){de(e);return}}headers(){return r(this,ml)}response(){return this._response}frame(){return r(this,gl)}isNavigationRequest(){return r(this,ul)}initiator(){return r(this,wl)}redirectChain(){return this._redirectChain.slice()}failure(){return this._failureText?{errorText:this._failureText}:null}async _continue(e={}){const{url:t,method:n,postData:a,headers:o}=e;this.interception.handled=!0;const c=a?ay(a):void 0;if(this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.continueRequest");await r(this,xr).send("Fetch.continueRequest",{requestId:this._interceptionId,url:t,method:n,postData:c,headers:o?Ty(o):void 0}).catch(u=>(this.interception.handled=!1,kh(u)))}async _respond(e){this.interception.handled=!0;let t;e.body&&(t=Ch.getResponse(e.body));const n={};if(e.headers)for(const o of Object.keys(e.headers)){const c=e.headers[o];n[o.toLowerCase()]=Array.isArray(c)?c.map(u=>String(u)):String(c)}e.contentType&&(n["content-type"]=e.contentType),t!=null&&t.contentLength&&!("content-length"in n)&&(n["content-length"]=String(t.contentLength));const a=e.status||200;if(this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.fulfillRequest");await r(this,xr).send("Fetch.fulfillRequest",{requestId:this._interceptionId,responseCode:a,responsePhrase:My[a],responseHeaders:Ty(n),body:t==null?void 0:t.base64}).catch(o=>(this.interception.handled=!1,kh(o)))}async _abort(e){if(this.interception.handled=!0,this._interceptionId===void 0)throw new Error("HTTPRequest is missing _interceptionId needed for Fetch.failRequest");await r(this,xr).send("Fetch.failRequest",{requestId:this._interceptionId,errorReason:e||"Failed"}).catch(kh)}}xr=new WeakMap,ul=new WeakMap,ll=new WeakMap,dl=new WeakMap,hl=new WeakMap,fl=new WeakMap,pl=new WeakMap,ml=new WeakMap,gl=new WeakMap,wl=new WeakMap;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class tv{constructor(i){f(this,yl);f(this,vl);f(this,bl);f(this,Sl);f(this,Cl);f(this,kl);y(this,yl,i.subjectName),y(this,vl,i.issuer),y(this,bl,i.validFrom),y(this,Sl,i.validTo),y(this,Cl,i.protocol),y(this,kl,i.sanList)}issuer(){return r(this,vl)}validFrom(){return r(this,bl)}validTo(){return r(this,Sl)}protocol(){return r(this,Cl)}subjectName(){return r(this,yl)}subjectAlternativeNames(){return r(this,kl)}}yl=new WeakMap,vl=new WeakMap,bl=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,kl=new WeakMap;class rv extends Iy{constructor(e,t,n){super();f(this,Qh);f(this,Pr);f(this,so,null);f(this,no,Ne.create());f(this,El);f(this,xl);f(this,Pl);f(this,_l);f(this,Tl);f(this,Ml,{});f(this,Il);f(this,Al);y(this,Pr,e),y(this,El,{ip:t.remoteIPAddress,port:t.remotePort}),y(this,Pl,k(this,Qh,nC).call(this,n)||t.statusText),y(this,_l,!!t.fromDiskCache),y(this,Tl,!!t.fromServiceWorker),y(this,xl,n?n.statusCode:t.status);const a=n?n.headers:t.headers;for(const[o,c]of Object.entries(a))r(this,Ml)[o.toLowerCase()]=c;y(this,Il,t.securityDetails?new tv(t.securityDetails):null),y(this,Al,t.timing||null)}_resolveBody(e){return e?r(this,no).reject(e):r(this,no).resolve()}remoteAddress(){return r(this,El)}url(){return r(this,Pr).url()}status(){return r(this,xl)}statusText(){return r(this,Pl)}headers(){return r(this,Ml)}securityDetails(){return r(this,Il)}timing(){return r(this,Al)}content(){return r(this,so)||y(this,so,r(this,no).valueOrThrow().then(async()=>{try{const e=await r(this,Pr).client.send("Network.getResponseBody",{requestId:r(this,Pr).id});return np(e.body,e.base64Encoded)}catch(e){throw e instanceof ms&&e.originalMessage==="No resource with given identifier found"?new ms("Could not load body for this request. This might happen if the request is a preflight request."):e}})),r(this,so)}request(){return r(this,Pr)}fromCache(){return r(this,_l)||r(this,Pr)._fromMemoryCache}fromServiceWorker(){return r(this,Tl)}frame(){return r(this,Pr).frame()}}Pr=new WeakMap,so=new WeakMap,no=new WeakMap,El=new WeakMap,xl=new WeakMap,Pl=new WeakMap,_l=new WeakMap,Tl=new WeakMap,Ml=new WeakMap,Il=new WeakMap,Al=new WeakMap,Qh=new WeakSet,nC=function(e){if(!e||!e.headersText)return;const t=e.headersText.split("\r",1)[0];if(!t||t.length>1e3)return;const n=t.match(/[^ ]* [^ ]* (.*)/);if(!n)return;const a=n[1];if(a)return a};/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class $P{constructor(){f(this,Bi,new Map);f(this,ji,new Map);f(this,qi,new Map);f(this,$i,new Map);f(this,dn,new Map);f(this,hn,new Map)}forget(i){r(this,Bi).delete(i),r(this,ji).delete(i),r(this,hn).delete(i),r(this,dn).delete(i),r(this,$i).delete(i)}responseExtraInfo(i){return r(this,$i).has(i)||r(this,$i).set(i,[]),r(this,$i).get(i)}queuedRedirectInfo(i){return r(this,dn).has(i)||r(this,dn).set(i,[]),r(this,dn).get(i)}queueRedirectInfo(i,e){this.queuedRedirectInfo(i).push(e)}takeQueuedRedirectInfo(i){return this.queuedRedirectInfo(i).shift()}inFlightRequestsCount(){let i=0;for(const e of r(this,qi).values())e.response()||i++;return i}storeRequestWillBeSent(i,e){r(this,Bi).set(i,e)}getRequestWillBeSent(i){return r(this,Bi).get(i)}forgetRequestWillBeSent(i){r(this,Bi).delete(i)}getRequestPaused(i){return r(this,ji).get(i)}forgetRequestPaused(i){r(this,ji).delete(i)}storeRequestPaused(i,e){r(this,ji).set(i,e)}getRequest(i){return r(this,qi).get(i)}storeRequest(i,e){r(this,qi).set(i,e)}forgetRequest(i){r(this,qi).delete(i)}getQueuedEventGroup(i){return r(this,hn).get(i)}queueEventGroup(i,e){r(this,hn).set(i,e)}forgetQueuedEventGroup(i){r(this,hn).delete(i)}printState(){function i(e,t){return t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t instanceof Pp?{dataType:"CdpHTTPRequest",value:`${t.id}: ${t.url()}`}:t}console.log("httpRequestsMap",JSON.stringify(r(this,qi),i,2)),console.log("requestWillBeSentMap",JSON.stringify(r(this,Bi),i,2)),console.log("requestWillBeSentMap",JSON.stringify(r(this,$i),i,2)),console.log("requestWillBeSentMap",JSON.stringify(r(this,ji),i,2))}}Bi=new WeakMap,ji=new WeakMap,qi=new WeakMap,$i=new WeakMap,dn=new WeakMap,hn=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class KP extends he{constructor(e){super();f(this,oe);f(this,ao);f(this,Pe,new $P);f(this,fn);f(this,Ki,null);f(this,oo,new Set);f(this,_r,!1);f(this,Xr,!1);f(this,Ui);f(this,bt);f(this,co);f(this,Rl);f(this,Zh,[["Fetch.requestPaused",k(this,oe,uC)],["Fetch.authRequired",k(this,oe,cC)],["Network.requestWillBeSent",k(this,oe,oC)],["Network.requestServedFromCache",k(this,oe,dC)],["Network.responseReceived",k(this,oe,fC)],["Network.loadingFinished",k(this,oe,mC)],["Network.loadingFailed",k(this,oe,gC)],["Network.responseReceivedExtraInfo",k(this,oe,pC)],[je.Disconnected,k(this,oe,aC)]]);f(this,Hi,new Map);y(this,ao,e)}async addClient(e){if(r(this,Hi).has(e))return;const t=new Xe;r(this,Hi).set(e,t);const n=t.use(new he(e));for(const[a,o]of r(this,Zh))n.on(a,c=>o.bind(this)(e,c));await Promise.all([e.send("Network.enable"),k(this,oe,Zm).call(this,e),k(this,oe,wf).call(this,e),k(this,oe,Od).call(this,e),k(this,oe,yf).call(this,e),k(this,oe,eg).call(this,e)])}async authenticate(e){y(this,Ki,e);const t=r(this,_r)||!!r(this,Ki);t!==r(this,Xr)&&(y(this,Xr,t),await k(this,oe,cs).call(this,k(this,oe,yf).bind(this)))}async setExtraHTTPHeaders(e){const t={};for(const[n,a]of Object.entries(e))te(Lr(a),`Expected value of header "${n}" to be String, but "${typeof a}" is found.`),t[n.toLowerCase()]=a;y(this,fn,t),await k(this,oe,cs).call(this,k(this,oe,Zm).bind(this))}extraHTTPHeaders(){return Object.assign({},r(this,fn))}inFlightRequestsCount(){return r(this,Pe).inFlightRequestsCount()}async setOfflineMode(e){r(this,bt)||y(this,bt,{offline:!1,upload:-1,download:-1,latency:0}),r(this,bt).offline=e,await k(this,oe,cs).call(this,k(this,oe,wf).bind(this))}async emulateNetworkConditions(e){r(this,bt)||y(this,bt,{offline:!1,upload:-1,download:-1,latency:0}),r(this,bt).upload=e?e.upload:-1,r(this,bt).download=e?e.download:-1,r(this,bt).latency=e?e.latency:0,await k(this,oe,cs).call(this,k(this,oe,wf).bind(this))}async setUserAgent(e,t){y(this,co,e),y(this,Rl,t),await k(this,oe,cs).call(this,k(this,oe,eg).bind(this))}async setCacheEnabled(e){y(this,Ui,!e),await k(this,oe,cs).call(this,k(this,oe,Od).bind(this))}async setRequestInterception(e){y(this,_r,e);const t=r(this,_r)||!!r(this,Ki);t!==r(this,Xr)&&(y(this,Xr,t),await k(this,oe,cs).call(this,k(this,oe,yf).bind(this)))}}ao=new WeakMap,Pe=new WeakMap,fn=new WeakMap,Ki=new WeakMap,oo=new WeakMap,_r=new WeakMap,Xr=new WeakMap,Ui=new WeakMap,bt=new WeakMap,co=new WeakMap,Rl=new WeakMap,Zh=new WeakMap,Hi=new WeakMap,oe=new WeakSet,aC=async function(e){var t;(t=r(this,Hi).get(e))==null||t.dispose(),r(this,Hi).delete(e)},Zm=async function(e){r(this,fn)!==void 0&&await e.send("Network.setExtraHTTPHeaders",{headers:r(this,fn)})},cs=async function(e){await Promise.all(Array.from(r(this,Hi).keys()).map(t=>e(t)))},wf=async function(e){r(this,bt)!==void 0&&await e.send("Network.emulateNetworkConditions",{offline:r(this,bt).offline,latency:r(this,bt).latency,uploadThroughput:r(this,bt).upload,downloadThroughput:r(this,bt).download})},eg=async function(e){r(this,co)!==void 0&&await e.send("Network.setUserAgentOverride",{userAgent:r(this,co),userAgentMetadata:r(this,Rl)})},yf=async function(e){r(this,Ui)===void 0&&y(this,Ui,!1),r(this,Xr)?await Promise.all([k(this,oe,Od).call(this,e),e.send("Fetch.enable",{handleAuthRequests:!0,patterns:[{urlPattern:"*"}]})]):await Promise.all([k(this,oe,Od).call(this,e),e.send("Fetch.disable")])},Od=async function(e){r(this,Ui)!==void 0&&await e.send("Network.setCacheDisabled",{cacheDisabled:r(this,Ui)})},oC=function(e,t){if(r(this,_r)&&!t.request.url.startsWith("data:")){const{requestId:n}=t;r(this,Pe).storeRequestWillBeSent(n,t);const a=r(this,Pe).getRequestPaused(n);if(a){const{requestId:o}=a;k(this,oe,tg).call(this,t,a),k(this,oe,Uo).call(this,e,t,o),r(this,Pe).forgetRequestPaused(n)}return}k(this,oe,Uo).call(this,e,t,void 0)},cC=function(e,t){let n="Default";r(this,oo).has(t.requestId)?n="CancelAuth":r(this,Ki)&&(n="ProvideCredentials",r(this,oo).add(t.requestId));const{username:a,password:o}=r(this,Ki)||{username:void 0,password:void 0};e.send("Fetch.continueWithAuth",{requestId:t.requestId,authChallengeResponse:{response:n,username:a,password:o}}).catch(de)},uC=function(e,t){!r(this,_r)&&r(this,Xr)&&e.send("Fetch.continueRequest",{requestId:t.requestId}).catch(de);const{networkId:n,requestId:a}=t;if(!n){k(this,oe,lC).call(this,e,t);return}const o=(()=>{const c=r(this,Pe).getRequestWillBeSent(n);if(c&&(c.request.url!==t.request.url||c.request.method!==t.request.method)){r(this,Pe).forgetRequestWillBeSent(n);return}return c})();o?(k(this,oe,tg).call(this,o,t),k(this,oe,Uo).call(this,e,o,a)):r(this,Pe).storeRequestPaused(n,t)},tg=function(e,t){e.request.headers={...e.request.headers,...t.request.headers}},lC=function(e,t){const n=t.frameId?r(this,ao).frame(t.frameId):null,a=new Pp(e,n,t.requestId,r(this,_r),t,[]);this.emit(at.Request,a),a.finalizeInterceptions()},Uo=function(e,t,n,a=!1){let o=[];if(t.redirectResponse){let l=null;if(t.redirectHasExtraInfo&&(l=r(this,Pe).responseExtraInfo(t.requestId).shift(),!l)){r(this,Pe).queueRedirectInfo(t.requestId,{event:t,fetchRequestId:n});return}const p=r(this,Pe).getRequest(t.requestId);p&&(k(this,oe,hC).call(this,e,p,t.redirectResponse,l),o=p._redirectChain)}const c=t.frameId?r(this,ao).frame(t.frameId):null,u=new Pp(e,c,n,r(this,_r),t,o);u._fromMemoryCache=a,r(this,Pe).storeRequest(t.requestId,u),this.emit(at.Request,u),u.finalizeInterceptions()},dC=function(e,t){const n=r(this,Pe).getRequestWillBeSent(t.requestId);let a=r(this,Pe).getRequest(t.requestId);if(a&&(a._fromMemoryCache=!0),!a&&n&&(k(this,oe,Uo).call(this,e,n,void 0,!0),a=r(this,Pe).getRequest(t.requestId)),!a){de(new Error(`Request ${t.requestId} was served from cache but we could not find the corresponding request object`));return}this.emit(at.RequestServedFromCache,a)},hC=function(e,t,n,a){const o=new rv(t,n,a);t._response=o,t._redirectChain.push(t),o._resolveBody(new Error("Response body is unavailable for redirect responses")),k(this,oe,vf).call(this,t,!1),this.emit(at.Response,o),this.emit(at.RequestFinished,t)},rg=function(e,t,n){const a=r(this,Pe).getRequest(t.requestId);if(!a)return;r(this,Pe).responseExtraInfo(t.requestId).length&&de(new Error("Unexpected extraInfo events for request "+t.requestId)),t.response.fromDiskCache&&(n=null);const c=new rv(a,t.response,n);a._response=c,this.emit(at.Response,c)},fC=function(e,t){const n=r(this,Pe).getRequest(t.requestId);let a=null;if(n&&!n._fromMemoryCache&&t.hasExtraInfo&&(a=r(this,Pe).responseExtraInfo(t.requestId).shift(),!a)){r(this,Pe).queueEventGroup(t.requestId,{responseReceivedEvent:t});return}k(this,oe,rg).call(this,e,t,a)},pC=function(e,t){const n=r(this,Pe).takeQueuedRedirectInfo(t.requestId);if(n){r(this,Pe).responseExtraInfo(t.requestId).push(t),k(this,oe,Uo).call(this,e,n.event,n.fetchRequestId);return}const a=r(this,Pe).getQueuedEventGroup(t.requestId);if(a){r(this,Pe).forgetQueuedEventGroup(t.requestId),k(this,oe,rg).call(this,e,a.responseReceivedEvent,t),a.loadingFinishedEvent&&k(this,oe,ig).call(this,e,a.loadingFinishedEvent),a.loadingFailedEvent&&k(this,oe,sg).call(this,e,a.loadingFailedEvent);return}r(this,Pe).responseExtraInfo(t.requestId).push(t)},vf=function(e,t){const n=e.id,a=e._interceptionId;r(this,Pe).forgetRequest(n),a!==void 0&&r(this,oo).delete(a),t&&r(this,Pe).forget(n)},mC=function(e,t){const n=r(this,Pe).getQueuedEventGroup(t.requestId);n?n.loadingFinishedEvent=t:k(this,oe,ig).call(this,e,t)},ig=function(e,t){var a;const n=r(this,Pe).getRequest(t.requestId);n&&(k(this,oe,ng).call(this,e,n),n.response()&&((a=n.response())==null||a._resolveBody()),k(this,oe,vf).call(this,n,!0),this.emit(at.RequestFinished,n))},gC=function(e,t){const n=r(this,Pe).getQueuedEventGroup(t.requestId);n?n.loadingFailedEvent=t:k(this,oe,sg).call(this,e,t)},sg=function(e,t){const n=r(this,Pe).getRequest(t.requestId);if(!n)return;k(this,oe,ng).call(this,e,n),n._failureText=t.errorText;const a=n.response();a&&a._resolveBody(),k(this,oe,vf).call(this,n,!0),this.emit(at.RequestFailed,n)},ng=function(e,t){e!==t.client&&t.isNavigationRequest()&&(t.client=e)};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const UP=100;class HP extends he{constructor(e,t,n){super();f(this,Ce);f(this,Dl);f(this,Wi);f(this,uo);f(this,Fl,new Set);f(this,Yt);f(this,pn,new Map);f(this,lo,new Set);W(this,"_frameTree",new qP);f(this,mn,new Set);f(this,Ol,new WeakMap);f(this,xt);y(this,Yt,e),y(this,Dl,t),y(this,Wi,new KP(this)),y(this,uo,n),this.setupEventListeners(r(this,Yt)),e.once(je.Disconnected,()=>{k(this,Ce,ag).call(this).catch(de)})}get timeoutSettings(){return r(this,uo)}get networkManager(){return r(this,Wi)}get client(){return r(this,Yt)}async swapFrameTree(e){y(this,Yt,e),te(r(this,Yt)instanceof ta,"CDPSession is not an instance of CDPSessionImpl.");const t=this._frameTree.getMainFrame();t&&(r(this,mn).add(r(this,Yt)._target()._targetId),this._frameTree.removeFrame(t),t.updateId(r(this,Yt)._target()._targetId),this._frameTree.addFrame(t),t.updateClient(e)),this.setupEventListeners(e),e.once(je.Disconnected,()=>{k(this,Ce,ag).call(this).catch(de)}),await this.initialize(e,t),await r(this,Wi).addClient(e),t&&t.emit(mt.FrameSwappedByActivation,void 0)}async registerSpeculativeSession(e){await r(this,Wi).addClient(e)}setupEventListeners(e){e.on("Page.frameAttached",async t=>{var n;await((n=r(this,xt))==null?void 0:n.valueOrThrow()),k(this,Ce,cg).call(this,e,t.frameId,t.parentFrameId)}),e.on("Page.frameNavigated",async t=>{var n;r(this,mn).add(t.frame.id),await((n=r(this,xt))==null?void 0:n.valueOrThrow()),k(this,Ce,ug).call(this,t.frame,t.type)}),e.on("Page.navigatedWithinDocument",async t=>{var n;await((n=r(this,xt))==null?void 0:n.valueOrThrow()),k(this,Ce,SC).call(this,t.frameId,t.url)}),e.on("Page.frameDetached",async t=>{var n;await((n=r(this,xt))==null?void 0:n.valueOrThrow()),k(this,Ce,CC).call(this,t.frameId,t.reason)}),e.on("Page.frameStartedLoading",async t=>{var n;await((n=r(this,xt))==null?void 0:n.valueOrThrow()),k(this,Ce,yC).call(this,t.frameId)}),e.on("Page.frameStoppedLoading",async t=>{var n;await((n=r(this,xt))==null?void 0:n.valueOrThrow()),k(this,Ce,vC).call(this,t.frameId)}),e.on("Runtime.executionContextCreated",async t=>{var n;await((n=r(this,xt))==null?void 0:n.valueOrThrow()),k(this,Ce,kC).call(this,t.context,e)}),e.on("Page.lifecycleEvent",async t=>{var n;await((n=r(this,xt))==null?void 0:n.valueOrThrow()),k(this,Ce,wC).call(this,t)})}async initialize(e,t){var n,a;try{(n=r(this,xt))==null||n.resolve(),y(this,xt,Ne.create()),await Promise.all([r(this,Wi).addClient(e),e.send("Page.enable"),e.send("Page.getFrameTree").then(({frameTree:o})=>{var c;k(this,Ce,og).call(this,e,o),(c=r(this,xt))==null||c.resolve()}),e.send("Page.setLifecycleEventsEnabled",{enabled:!0}),e.send("Runtime.enable").then(()=>k(this,Ce,bC).call(this,e,hy)),...(t?Array.from(r(this,pn).values()):[]).map(o=>t==null?void 0:t.addPreloadScript(o)),...(t?Array.from(r(this,lo).values()):[]).map(o=>t==null?void 0:t.addExposedFunctionBinding(o))])}catch(o){if((a=r(this,xt))==null||a.resolve(),Vt(o)&&kp(o))return;throw o}}page(){return r(this,Dl)}mainFrame(){const e=this._frameTree.getMainFrame();return te(e,"Requesting main frame too early!"),e}frames(){return Array.from(this._frameTree.frames())}frame(e){return this._frameTree.getById(e)||null}async addExposedFunctionBinding(e){r(this,lo).add(e),await Promise.all(this.frames().map(async t=>await t.addExposedFunctionBinding(e)))}async removeExposedFunctionBinding(e){r(this,lo).delete(e),await Promise.all(this.frames().map(async t=>await t.removeExposedFunctionBinding(e)))}async evaluateOnNewDocument(e){const{identifier:t}=await this.mainFrame()._client().send("Page.addScriptToEvaluateOnNewDocument",{source:e}),n=new PP(this.mainFrame(),t,e);return r(this,pn).set(t,n),await Promise.all(this.frames().map(async a=>await a.addPreloadScript(n))),{identifier:t}}async removeScriptToEvaluateOnNewDocument(e){const t=r(this,pn).get(e);if(!t)throw new Error(`Script to evaluate on new document with id ${e} not found`);r(this,pn).delete(e),await Promise.all(this.frames().map(n=>{const a=t.getIdForFrame(n);if(a)return n._client().send("Page.removeScriptToEvaluateOnNewDocument",{identifier:a}).catch(de)}))}onAttachedToTarget(e){if(e._getTargetInfo().type!=="iframe")return;const t=this.frame(e._getTargetInfo().targetId);t&&t.updateClient(e._session()),this.setupEventListeners(e._session()),this.initialize(e._session(),t)}_deviceRequestPromptManager(e){let t=r(this,Ol).get(e);return t===void 0&&(t=new MP(e,r(this,uo)),r(this,Ol).set(e,t)),t}}Dl=new WeakMap,Wi=new WeakMap,uo=new WeakMap,Fl=new WeakMap,Yt=new WeakMap,pn=new WeakMap,lo=new WeakMap,mn=new WeakMap,Ol=new WeakMap,xt=new WeakMap,Ce=new WeakSet,ag=async function(){const e=this._frameTree.getMainFrame();if(!e)return;for(const n of e.childFrames())k(this,Ce,Ho).call(this,n);const t=Ne.create({timeout:UP,message:"Frame was not swapped"});e.once(mt.FrameSwappedByActivation,()=>{t.resolve()});try{await t.valueOrThrow()}catch{k(this,Ce,Ho).call(this,e)}},wC=function(e){const t=this.frame(e.frameId);t&&(t._onLifecycleEvent(e.loaderId,e.name),this.emit(ot.LifecycleEvent,t),t.emit(mt.LifecycleEvent,void 0))},yC=function(e){const t=this.frame(e);t&&t._onLoadingStarted()},vC=function(e){const t=this.frame(e);t&&(t._onLoadingStopped(),this.emit(ot.LifecycleEvent,t),t.emit(mt.LifecycleEvent,void 0))},og=function(e,t){if(t.frame.parentId&&k(this,Ce,cg).call(this,e,t.frame.id,t.frame.parentId),r(this,mn).has(t.frame.id)?r(this,mn).delete(t.frame.id):k(this,Ce,ug).call(this,t.frame,"Navigation"),!!t.childFrames)for(const n of t.childFrames)k(this,Ce,og).call(this,e,n)},cg=function(e,t,n){let a=this.frame(t);if(a){const o=this.frame(n);e&&o&&a.client!==(o==null?void 0:o.client)&&a.updateClient(e);return}a=new ev(this,t,n,e),this._frameTree.addFrame(a),this.emit(ot.FrameAttached,a)},ug=async function(e,t){const n=e.id,a=!e.parentId;let o=this._frameTree.getById(n);if(o)for(const c of o.childFrames())k(this,Ce,Ho).call(this,c);a&&(o?(this._frameTree.removeFrame(o),o._id=n):o=new ev(this,n,void 0,r(this,Yt)),this._frameTree.addFrame(o)),o=await this._frameTree.waitForFrame(n),o._navigated(e),this.emit(ot.FrameNavigated,o),o.emit(mt.FrameNavigated,t)},bC=async function(e,t){const n=`${e.id()}:${t}`;r(this,Fl).has(n)||(await e.send("Page.addScriptToEvaluateOnNewDocument",{source:`//# sourceURL=${Ot.INTERNAL_URL}`,worldName:t}),await Promise.all(this.frames().filter(a=>a.client===e).map(a=>e.send("Page.createIsolatedWorld",{frameId:a._id,worldName:t,grantUniveralAccess:!0}).catch(de))),r(this,Fl).add(n))},SC=function(e,t){const n=this.frame(e);n&&(n._navigatedWithinDocument(t),this.emit(ot.FrameNavigatedWithinDocument,n),n.emit(mt.FrameNavigatedWithinDocument,void 0),this.emit(ot.FrameNavigated,n),n.emit(mt.FrameNavigated,"Navigation"))},CC=function(e,t){const n=this.frame(e);if(n)switch(t){case"remove":k(this,Ce,Ho).call(this,n);break;case"swap":this.emit(ot.FrameSwapped,n),n.emit(mt.FrameSwapped,void 0);break}},kC=function(e,t){const n=e.auxData,a=n&&n.frameId,o=typeof a=="string"?this.frame(a):void 0;let c;if(o){if(o.client!==t)return;e.auxData&&e.auxData.isDefault?c=o.worlds[vr]:e.name===hy&&(c=o.worlds[_h])}if(!c)return;const u=new Qy((o==null?void 0:o.client)||r(this,Yt),e,c);c.setContext(u)},Ho=function(e){for(const t of e.childFrames())k(this,Ce,Ho).call(this,t);e[ge](),this._frameTree.removeFrame(e),this.emit(ot.FrameDetached,e),e.emit(mt.FrameDetached,e)};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const iv={0:{keyCode:48,key:"0",code:"Digit0"},1:{keyCode:49,key:"1",code:"Digit1"},2:{keyCode:50,key:"2",code:"Digit2"},3:{keyCode:51,key:"3",code:"Digit3"},4:{keyCode:52,key:"4",code:"Digit4"},5:{keyCode:53,key:"5",code:"Digit5"},6:{keyCode:54,key:"6",code:"Digit6"},7:{keyCode:55,key:"7",code:"Digit7"},8:{keyCode:56,key:"8",code:"Digit8"},9:{keyCode:57,key:"9",code:"Digit9"},Power:{key:"Power",code:"Power"},Eject:{key:"Eject",code:"Eject"},Abort:{keyCode:3,code:"Abort",key:"Cancel"},Help:{keyCode:6,code:"Help",key:"Help"},Backspace:{keyCode:8,code:"Backspace",key:"Backspace"},Tab:{keyCode:9,code:"Tab",key:"Tab"},Numpad5:{keyCode:12,shiftKeyCode:101,key:"Clear",code:"Numpad5",shiftKey:"5",location:3},NumpadEnter:{keyCode:13,code:"NumpadEnter",key:"Enter",text:"\r",location:3},Enter:{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\r":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},"\n":{keyCode:13,code:"Enter",key:"Enter",text:"\r"},ShiftLeft:{keyCode:16,code:"ShiftLeft",key:"Shift",location:1},ShiftRight:{keyCode:16,code:"ShiftRight",key:"Shift",location:2},ControlLeft:{keyCode:17,code:"ControlLeft",key:"Control",location:1},ControlRight:{keyCode:17,code:"ControlRight",key:"Control",location:2},AltLeft:{keyCode:18,code:"AltLeft",key:"Alt",location:1},AltRight:{keyCode:18,code:"AltRight",key:"Alt",location:2},Pause:{keyCode:19,code:"Pause",key:"Pause"},CapsLock:{keyCode:20,code:"CapsLock",key:"CapsLock"},Escape:{keyCode:27,code:"Escape",key:"Escape"},Convert:{keyCode:28,code:"Convert",key:"Convert"},NonConvert:{keyCode:29,code:"NonConvert",key:"NonConvert"},Space:{keyCode:32,code:"Space",key:" "},Numpad9:{keyCode:33,shiftKeyCode:105,key:"PageUp",code:"Numpad9",shiftKey:"9",location:3},PageUp:{keyCode:33,code:"PageUp",key:"PageUp"},Numpad3:{keyCode:34,shiftKeyCode:99,key:"PageDown",code:"Numpad3",shiftKey:"3",location:3},PageDown:{keyCode:34,code:"PageDown",key:"PageDown"},End:{keyCode:35,code:"End",key:"End"},Numpad1:{keyCode:35,shiftKeyCode:97,key:"End",code:"Numpad1",shiftKey:"1",location:3},Home:{keyCode:36,code:"Home",key:"Home"},Numpad7:{keyCode:36,shiftKeyCode:103,key:"Home",code:"Numpad7",shiftKey:"7",location:3},ArrowLeft:{keyCode:37,code:"ArrowLeft",key:"ArrowLeft"},Numpad4:{keyCode:37,shiftKeyCode:100,key:"ArrowLeft",code:"Numpad4",shiftKey:"4",location:3},Numpad8:{keyCode:38,shiftKeyCode:104,key:"ArrowUp",code:"Numpad8",shiftKey:"8",location:3},ArrowUp:{keyCode:38,code:"ArrowUp",key:"ArrowUp"},ArrowRight:{keyCode:39,code:"ArrowRight",key:"ArrowRight"},Numpad6:{keyCode:39,shiftKeyCode:102,key:"ArrowRight",code:"Numpad6",shiftKey:"6",location:3},Numpad2:{keyCode:40,shiftKeyCode:98,key:"ArrowDown",code:"Numpad2",shiftKey:"2",location:3},ArrowDown:{keyCode:40,code:"ArrowDown",key:"ArrowDown"},Select:{keyCode:41,code:"Select",key:"Select"},Open:{keyCode:43,code:"Open",key:"Execute"},PrintScreen:{keyCode:44,code:"PrintScreen",key:"PrintScreen"},Insert:{keyCode:45,code:"Insert",key:"Insert"},Numpad0:{keyCode:45,shiftKeyCode:96,key:"Insert",code:"Numpad0",shiftKey:"0",location:3},Delete:{keyCode:46,code:"Delete",key:"Delete"},NumpadDecimal:{keyCode:46,shiftKeyCode:110,code:"NumpadDecimal",key:"\0",shiftKey:".",location:3},Digit0:{keyCode:48,code:"Digit0",shiftKey:")",key:"0"},Digit1:{keyCode:49,code:"Digit1",shiftKey:"!",key:"1"},Digit2:{keyCode:50,code:"Digit2",shiftKey:"@",key:"2"},Digit3:{keyCode:51,code:"Digit3",shiftKey:"#",key:"3"},Digit4:{keyCode:52,code:"Digit4",shiftKey:"$",key:"4"},Digit5:{keyCode:53,code:"Digit5",shiftKey:"%",key:"5"},Digit6:{keyCode:54,code:"Digit6",shiftKey:"^",key:"6"},Digit7:{keyCode:55,code:"Digit7",shiftKey:"&",key:"7"},Digit8:{keyCode:56,code:"Digit8",shiftKey:"*",key:"8"},Digit9:{keyCode:57,code:"Digit9",shiftKey:"(",key:"9"},KeyA:{keyCode:65,code:"KeyA",shiftKey:"A",key:"a"},KeyB:{keyCode:66,code:"KeyB",shiftKey:"B",key:"b"},KeyC:{keyCode:67,code:"KeyC",shiftKey:"C",key:"c"},KeyD:{keyCode:68,code:"KeyD",shiftKey:"D",key:"d"},KeyE:{keyCode:69,code:"KeyE",shiftKey:"E",key:"e"},KeyF:{keyCode:70,code:"KeyF",shiftKey:"F",key:"f"},KeyG:{keyCode:71,code:"KeyG",shiftKey:"G",key:"g"},KeyH:{keyCode:72,code:"KeyH",shiftKey:"H",key:"h"},KeyI:{keyCode:73,code:"KeyI",shiftKey:"I",key:"i"},KeyJ:{keyCode:74,code:"KeyJ",shiftKey:"J",key:"j"},KeyK:{keyCode:75,code:"KeyK",shiftKey:"K",key:"k"},KeyL:{keyCode:76,code:"KeyL",shiftKey:"L",key:"l"},KeyM:{keyCode:77,code:"KeyM",shiftKey:"M",key:"m"},KeyN:{keyCode:78,code:"KeyN",shiftKey:"N",key:"n"},KeyO:{keyCode:79,code:"KeyO",shiftKey:"O",key:"o"},KeyP:{keyCode:80,code:"KeyP",shiftKey:"P",key:"p"},KeyQ:{keyCode:81,code:"KeyQ",shiftKey:"Q",key:"q"},KeyR:{keyCode:82,code:"KeyR",shiftKey:"R",key:"r"},KeyS:{keyCode:83,code:"KeyS",shiftKey:"S",key:"s"},KeyT:{keyCode:84,code:"KeyT",shiftKey:"T",key:"t"},KeyU:{keyCode:85,code:"KeyU",shiftKey:"U",key:"u"},KeyV:{keyCode:86,code:"KeyV",shiftKey:"V",key:"v"},KeyW:{keyCode:87,code:"KeyW",shiftKey:"W",key:"w"},KeyX:{keyCode:88,code:"KeyX",shiftKey:"X",key:"x"},KeyY:{keyCode:89,code:"KeyY",shiftKey:"Y",key:"y"},KeyZ:{keyCode:90,code:"KeyZ",shiftKey:"Z",key:"z"},MetaLeft:{keyCode:91,code:"MetaLeft",key:"Meta",location:1},MetaRight:{keyCode:92,code:"MetaRight",key:"Meta",location:2},ContextMenu:{keyCode:93,code:"ContextMenu",key:"ContextMenu"},NumpadMultiply:{keyCode:106,code:"NumpadMultiply",key:"*",location:3},NumpadAdd:{keyCode:107,code:"NumpadAdd",key:"+",location:3},NumpadSubtract:{keyCode:109,code:"NumpadSubtract",key:"-",location:3},NumpadDivide:{keyCode:111,code:"NumpadDivide",key:"/",location:3},F1:{keyCode:112,code:"F1",key:"F1"},F2:{keyCode:113,code:"F2",key:"F2"},F3:{keyCode:114,code:"F3",key:"F3"},F4:{keyCode:115,code:"F4",key:"F4"},F5:{keyCode:116,code:"F5",key:"F5"},F6:{keyCode:117,code:"F6",key:"F6"},F7:{keyCode:118,code:"F7",key:"F7"},F8:{keyCode:119,code:"F8",key:"F8"},F9:{keyCode:120,code:"F9",key:"F9"},F10:{keyCode:121,code:"F10",key:"F10"},F11:{keyCode:122,code:"F11",key:"F11"},F12:{keyCode:123,code:"F12",key:"F12"},F13:{keyCode:124,code:"F13",key:"F13"},F14:{keyCode:125,code:"F14",key:"F14"},F15:{keyCode:126,code:"F15",key:"F15"},F16:{keyCode:127,code:"F16",key:"F16"},F17:{keyCode:128,code:"F17",key:"F17"},F18:{keyCode:129,code:"F18",key:"F18"},F19:{keyCode:130,code:"F19",key:"F19"},F20:{keyCode:131,code:"F20",key:"F20"},F21:{keyCode:132,code:"F21",key:"F21"},F22:{keyCode:133,code:"F22",key:"F22"},F23:{keyCode:134,code:"F23",key:"F23"},F24:{keyCode:135,code:"F24",key:"F24"},NumLock:{keyCode:144,code:"NumLock",key:"NumLock"},ScrollLock:{keyCode:145,code:"ScrollLock",key:"ScrollLock"},AudioVolumeMute:{keyCode:173,code:"AudioVolumeMute",key:"AudioVolumeMute"},AudioVolumeDown:{keyCode:174,code:"AudioVolumeDown",key:"AudioVolumeDown"},AudioVolumeUp:{keyCode:175,code:"AudioVolumeUp",key:"AudioVolumeUp"},MediaTrackNext:{keyCode:176,code:"MediaTrackNext",key:"MediaTrackNext"},MediaTrackPrevious:{keyCode:177,code:"MediaTrackPrevious",key:"MediaTrackPrevious"},MediaStop:{keyCode:178,code:"MediaStop",key:"MediaStop"},MediaPlayPause:{keyCode:179,code:"MediaPlayPause",key:"MediaPlayPause"},Semicolon:{keyCode:186,code:"Semicolon",shiftKey:":",key:";"},Equal:{keyCode:187,code:"Equal",shiftKey:"+",key:"="},NumpadEqual:{keyCode:187,code:"NumpadEqual",key:"=",location:3},Comma:{keyCode:188,code:"Comma",shiftKey:"<",key:","},Minus:{keyCode:189,code:"Minus",shiftKey:"_",key:"-"},Period:{keyCode:190,code:"Period",shiftKey:">",key:"."},Slash:{keyCode:191,code:"Slash",shiftKey:"?",key:"/"},Backquote:{keyCode:192,code:"Backquote",shiftKey:"~",key:"`"},BracketLeft:{keyCode:219,code:"BracketLeft",shiftKey:"{",key:"["},Backslash:{keyCode:220,code:"Backslash",shiftKey:"|",key:"\\"},BracketRight:{keyCode:221,code:"BracketRight",shiftKey:"}",key:"]"},Quote:{keyCode:222,code:"Quote",shiftKey:'"',key:"'"},AltGraph:{keyCode:225,code:"AltGraph",key:"AltGraph"},Props:{keyCode:247,code:"Props",key:"CrSel"},Cancel:{keyCode:3,key:"Cancel",code:"Abort"},Clear:{keyCode:12,key:"Clear",code:"Numpad5",location:3},Shift:{keyCode:16,key:"Shift",code:"ShiftLeft",location:1},Control:{keyCode:17,key:"Control",code:"ControlLeft",location:1},Alt:{keyCode:18,key:"Alt",code:"AltLeft",location:1},Accept:{keyCode:30,key:"Accept"},ModeChange:{keyCode:31,key:"ModeChange"}," ":{keyCode:32,key:" ",code:"Space"},Print:{keyCode:42,key:"Print"},Execute:{keyCode:43,key:"Execute",code:"Open"},"\0":{keyCode:46,key:"\0",code:"NumpadDecimal",location:3},a:{keyCode:65,key:"a",code:"KeyA"},b:{keyCode:66,key:"b",code:"KeyB"},c:{keyCode:67,key:"c",code:"KeyC"},d:{keyCode:68,key:"d",code:"KeyD"},e:{keyCode:69,key:"e",code:"KeyE"},f:{keyCode:70,key:"f",code:"KeyF"},g:{keyCode:71,key:"g",code:"KeyG"},h:{keyCode:72,key:"h",code:"KeyH"},i:{keyCode:73,key:"i",code:"KeyI"},j:{keyCode:74,key:"j",code:"KeyJ"},k:{keyCode:75,key:"k",code:"KeyK"},l:{keyCode:76,key:"l",code:"KeyL"},m:{keyCode:77,key:"m",code:"KeyM"},n:{keyCode:78,key:"n",code:"KeyN"},o:{keyCode:79,key:"o",code:"KeyO"},p:{keyCode:80,key:"p",code:"KeyP"},q:{keyCode:81,key:"q",code:"KeyQ"},r:{keyCode:82,key:"r",code:"KeyR"},s:{keyCode:83,key:"s",code:"KeyS"},t:{keyCode:84,key:"t",code:"KeyT"},u:{keyCode:85,key:"u",code:"KeyU"},v:{keyCode:86,key:"v",code:"KeyV"},w:{keyCode:87,key:"w",code:"KeyW"},x:{keyCode:88,key:"x",code:"KeyX"},y:{keyCode:89,key:"y",code:"KeyY"},z:{keyCode:90,key:"z",code:"KeyZ"},Meta:{keyCode:91,key:"Meta",code:"MetaLeft",location:1},"*":{keyCode:106,key:"*",code:"NumpadMultiply",location:3},"+":{keyCode:107,key:"+",code:"NumpadAdd",location:3},"-":{keyCode:109,key:"-",code:"NumpadSubtract",location:3},"/":{keyCode:111,key:"/",code:"NumpadDivide",location:3},";":{keyCode:186,key:";",code:"Semicolon"},"=":{keyCode:187,key:"=",code:"Equal"},",":{keyCode:188,key:",",code:"Comma"},".":{keyCode:190,key:".",code:"Period"},"`":{keyCode:192,key:"`",code:"Backquote"},"[":{keyCode:219,key:"[",code:"BracketLeft"},"\\":{keyCode:220,key:"\\",code:"Backslash"},"]":{keyCode:221,key:"]",code:"BracketRight"},"'":{keyCode:222,key:"'",code:"Quote"},Attn:{keyCode:246,key:"Attn"},CrSel:{keyCode:247,key:"CrSel",code:"Props"},ExSel:{keyCode:248,key:"ExSel"},EraseEof:{keyCode:249,key:"EraseEof"},Play:{keyCode:250,key:"Play"},ZoomOut:{keyCode:251,key:"ZoomOut"},")":{keyCode:48,key:")",code:"Digit0"},"!":{keyCode:49,key:"!",code:"Digit1"},"@":{keyCode:50,key:"@",code:"Digit2"},"#":{keyCode:51,key:"#",code:"Digit3"},$:{keyCode:52,key:"$",code:"Digit4"},"%":{keyCode:53,key:"%",code:"Digit5"},"^":{keyCode:54,key:"^",code:"Digit6"},"&":{keyCode:55,key:"&",code:"Digit7"},"(":{keyCode:57,key:"(",code:"Digit9"},A:{keyCode:65,key:"A",code:"KeyA"},B:{keyCode:66,key:"B",code:"KeyB"},C:{keyCode:67,key:"C",code:"KeyC"},D:{keyCode:68,key:"D",code:"KeyD"},E:{keyCode:69,key:"E",code:"KeyE"},F:{keyCode:70,key:"F",code:"KeyF"},G:{keyCode:71,key:"G",code:"KeyG"},H:{keyCode:72,key:"H",code:"KeyH"},I:{keyCode:73,key:"I",code:"KeyI"},J:{keyCode:74,key:"J",code:"KeyJ"},K:{keyCode:75,key:"K",code:"KeyK"},L:{keyCode:76,key:"L",code:"KeyL"},M:{keyCode:77,key:"M",code:"KeyM"},N:{keyCode:78,key:"N",code:"KeyN"},O:{keyCode:79,key:"O",code:"KeyO"},P:{keyCode:80,key:"P",code:"KeyP"},Q:{keyCode:81,key:"Q",code:"KeyQ"},R:{keyCode:82,key:"R",code:"KeyR"},S:{keyCode:83,key:"S",code:"KeyS"},T:{keyCode:84,key:"T",code:"KeyT"},U:{keyCode:85,key:"U",code:"KeyU"},V:{keyCode:86,key:"V",code:"KeyV"},W:{keyCode:87,key:"W",code:"KeyW"},X:{keyCode:88,key:"X",code:"KeyX"},Y:{keyCode:89,key:"Y",code:"KeyY"},Z:{keyCode:90,key:"Z",code:"KeyZ"},":":{keyCode:186,key:":",code:"Semicolon"},"<":{keyCode:188,key:"<",code:"Comma"},_:{keyCode:189,key:"_",code:"Minus"},">":{keyCode:190,key:">",code:"Period"},"?":{keyCode:191,key:"?",code:"Slash"},"~":{keyCode:192,key:"~",code:"Backquote"},"{":{keyCode:219,key:"{",code:"BracketLeft"},"|":{keyCode:220,key:"|",code:"Backslash"},"}":{keyCode:221,key:"}",code:"BracketRight"},'"':{keyCode:222,key:'"',code:"Quote"},SoftLeft:{key:"SoftLeft",code:"SoftLeft",location:4},SoftRight:{key:"SoftRight",code:"SoftRight",location:4},Camera:{keyCode:44,key:"Camera",code:"Camera",location:4},Call:{key:"Call",code:"Call",location:4},EndCall:{keyCode:95,key:"EndCall",code:"EndCall",location:4},VolumeDown:{keyCode:182,key:"VolumeDown",code:"VolumeDown",location:4},VolumeUp:{keyCode:183,key:"VolumeUp",code:"VolumeUp",location:4}};/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class WP extends Ry{constructor(e){super();f(this,Vi);f(this,zi);f(this,ho,new Set);W(this,"_modifiers",0);y(this,zi,e)}updateClient(e){y(this,zi,e)}async down(e,t={text:void 0,commands:[]}){const n=k(this,Vi,dg).call(this,e),a=r(this,ho).has(n.code);r(this,ho).add(n.code),this._modifiers|=k(this,Vi,lg).call(this,n.key);const o=t.text===void 0?n.text:t.text;await r(this,zi).send("Input.dispatchKeyEvent",{type:o?"keyDown":"rawKeyDown",modifiers:this._modifiers,windowsVirtualKeyCode:n.keyCode,code:n.code,key:n.key,text:o,unmodifiedText:o,autoRepeat:a,location:n.location,isKeypad:n.location===3,commands:t.commands})}async up(e){const t=k(this,Vi,dg).call(this,e);this._modifiers&=~k(this,Vi,lg).call(this,t.key),r(this,ho).delete(t.code),await r(this,zi).send("Input.dispatchKeyEvent",{type:"keyUp",modifiers:this._modifiers,key:t.key,windowsVirtualKeyCode:t.keyCode,code:t.code,location:t.location})}async sendCharacter(e){await r(this,zi).send("Input.insertText",{text:e})}charIsKey(e){return!!iv[e]}async type(e,t={}){const n=t.delay||void 0;for(const a of e)this.charIsKey(a)?await this.press(a,{delay:n}):(n&&await new Promise(o=>setTimeout(o,n)),await this.sendCharacter(a))}async press(e,t={}){const{delay:n=null}=t;await this.down(e,t),n&&await new Promise(a=>setTimeout(a,t.delay)),await this.up(e)}}zi=new WeakMap,ho=new WeakMap,Vi=new WeakSet,lg=function(e){return e==="Alt"?1:e==="Control"?2:e==="Meta"?4:e==="Shift"?8:0},dg=function(e){const t=this._modifiers&8,n={key:"",keyCode:0,code:"",text:"",location:0},a=iv[e];return te(a,`Unknown key: "${e}"`),a.key&&(n.key=a.key),t&&a.shiftKey&&(n.key=a.shiftKey),a.keyCode&&(n.keyCode=a.keyCode),t&&a.shiftKeyCode&&(n.keyCode=a.shiftKeyCode),a.code&&(n.code=a.code),a.location&&(n.location=a.location),n.key.length===1&&(n.text=n.key),a.text&&(n.text=a.text),t&&a.shiftText&&(n.text=a.shiftText),this._modifiers&-9&&(n.text=""),n};const sv=s=>{switch(s){case qe.Left:return 1;case qe.Right:return 2;case qe.Middle:return 4;case qe.Back:return 8;case qe.Forward:return 16}},zP=s=>s&1?qe.Left:s&2?qe.Right:s&4?qe.Middle:s&8?qe.Back:s&16?qe.Forward:"none";class VP extends Dy{constructor(e,t){super();f(this,Ve);f(this,$t);f(this,ur);f(this,fo,{position:{x:0,y:0},buttons:0});f(this,gn,[]);y(this,$t,e),y(this,ur,t)}updateClient(e){y(this,$t,e)}async reset(){const e=[];for(const[t,n]of[[1,qe.Left],[4,qe.Middle],[2,qe.Right],[16,qe.Forward],[8,qe.Back]])r(this,Ve,Ht).buttons&t&&e.push(this.up({button:n}));(r(this,Ve,Ht).position.x!==0||r(this,Ve,Ht).position.y!==0)&&e.push(this.move(0,0)),await Promise.all(e)}async move(e,t,n={}){const{steps:a=1}=n,o=r(this,Ve,Ht).position,c={x:e,y:t};for(let u=1;u<=a;u++)await k(this,Ve,bf).call(this,l=>{l({position:{x:o.x+(c.x-o.x)*(u/a),y:o.y+(c.y-o.y)*(u/a)}});const{buttons:p,position:h}=r(this,Ve,Ht);return r(this,$t).send("Input.dispatchMouseEvent",{type:"mouseMoved",modifiers:r(this,ur)._modifiers,buttons:p,button:zP(p),...h})})}async down(e={}){const{button:t=qe.Left,clickCount:n=1}=e,a=sv(t);if(!a)throw new Error(`Unsupported mouse button: ${t}`);if(r(this,Ve,Ht).buttons&a)throw new Error(`'${t}' is already pressed.`);await k(this,Ve,bf).call(this,o=>{o({buttons:r(this,Ve,Ht).buttons|a});const{buttons:c,position:u}=r(this,Ve,Ht);return r(this,$t).send("Input.dispatchMouseEvent",{type:"mousePressed",modifiers:r(this,ur)._modifiers,clickCount:n,buttons:c,button:t,...u})})}async up(e={}){const{button:t=qe.Left,clickCount:n=1}=e,a=sv(t);if(!a)throw new Error(`Unsupported mouse button: ${t}`);if(!(r(this,Ve,Ht).buttons&a))throw new Error(`'${t}' is not pressed.`);await k(this,Ve,bf).call(this,o=>{o({buttons:r(this,Ve,Ht).buttons&~a});const{buttons:c,position:u}=r(this,Ve,Ht);return r(this,$t).send("Input.dispatchMouseEvent",{type:"mouseReleased",modifiers:r(this,ur)._modifiers,clickCount:n,buttons:c,button:t,...u})})}async click(e,t,n={}){const{delay:a,count:o=1,clickCount:c=o}=n;if(o<1)throw new Error("Click must occur a positive number of times.");const u=[this.move(e,t)];if(c===o)for(let l=1;l<o;++l)u.push(this.down({...n,clickCount:l}),this.up({...n,clickCount:l}));u.push(this.down({...n,clickCount:c})),typeof a=="number"&&(await Promise.all(u),u.length=0,await new Promise(l=>{setTimeout(l,a)})),u.push(this.up({...n,clickCount:c})),await Promise.all(u)}async wheel(e={}){const{deltaX:t=0,deltaY:n=0}=e,{position:a,buttons:o}=r(this,Ve,Ht);await r(this,$t).send("Input.dispatchMouseEvent",{type:"mouseWheel",pointerType:"mouse",modifiers:r(this,ur)._modifiers,deltaY:n,deltaX:t,buttons:o,...a})}async drag(e,t){const n=new Promise(a=>{r(this,$t).once("Input.dragIntercepted",o=>a(o.data))});return await this.move(e.x,e.y),await this.down(),await this.move(t.x,t.y),await n}async dragEnter(e,t){await r(this,$t).send("Input.dispatchDragEvent",{type:"dragEnter",x:e.x,y:e.y,modifiers:r(this,ur)._modifiers,data:t})}async dragOver(e,t){await r(this,$t).send("Input.dispatchDragEvent",{type:"dragOver",x:e.x,y:e.y,modifiers:r(this,ur)._modifiers,data:t})}async drop(e,t){await r(this,$t).send("Input.dispatchDragEvent",{type:"drop",x:e.x,y:e.y,modifiers:r(this,ur)._modifiers,data:t})}async dragAndDrop(e,t,n={}){const{delay:a=null}=n,o=await this.drag(e,t);await this.dragEnter(t,o),await this.dragOver(t,o),a&&await new Promise(c=>setTimeout(c,a)),await this.drop(t,o),await this.up()}}$t=new WeakMap,ur=new WeakMap,fo=new WeakMap,Ve=new WeakSet,Ht=function(){return Object.assign({...r(this,fo)},...r(this,gn))},gn=new WeakMap,EC=function(){const e={};r(this,gn).push(e);const t=()=>{r(this,gn).splice(r(this,gn).indexOf(e),1)};return{update:n=>{Object.assign(e,n)},commit:()=>{y(this,fo,{...r(this,fo),...e}),t()},rollback:t}},bf=async function(e){const{update:t,commit:n,rollback:a}=k(this,Ve,EC).call(this);try{await e(t),n()}catch(o){throw a(),o}};class GP{constructor(i,e,t,n){f(this,Nl,!1);f(this,Ll);f(this,Jr);f(this,Gi);f(this,wn);y(this,Gi,i),y(this,Ll,e),y(this,wn,t),y(this,Jr,n)}updateClient(i){y(this,Gi,i)}async start(){if(r(this,Nl))throw new ah("Touch has already started");await r(this,Gi).send("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:[r(this,Jr)],modifiers:r(this,wn)._modifiers}),y(this,Nl,!0)}move(i,e){return r(this,Jr).x=Math.round(i),r(this,Jr).y=Math.round(e),r(this,Gi).send("Input.dispatchTouchEvent",{type:"touchMove",touchPoints:[r(this,Jr)],modifiers:r(this,wn)._modifiers})}async end(){await r(this,Gi).send("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[r(this,Jr)],modifiers:r(this,wn)._modifiers}),r(this,Ll).removeHandle(this)}}Nl=new WeakMap,Ll=new WeakMap,Jr=new WeakMap,Gi=new WeakMap,wn=new WeakMap;class XP extends Fy{constructor(e,t){super();f(this,po);f(this,Bl);y(this,po,e),y(this,Bl,t)}updateClient(e){y(this,po,e),this.touches.forEach(t=>{t.updateClient(e)})}async touchStart(e,t){const n=this.idGenerator(),a={x:Math.round(e),y:Math.round(t),radiusX:.5,radiusY:.5,force:.5,id:n},o=new GP(r(this,po),this,r(this,Bl),a);return await o.start(),this.touches.push(o),o}}po=new WeakMap,Bl=new WeakMap;class nv{constructor(i){f(this,Yr);f(this,mo,!1);f(this,jl);y(this,Yr,i)}updateClient(i){y(this,Yr,i)}async start(i={}){te(!r(this,mo),"Cannot start recording trace while already recording trace.");const e=["-*","devtools.timeline","v8.execute","disabled-by-default-devtools.timeline","disabled-by-default-devtools.timeline.frame","toplevel","blink.console","blink.user_timing","latencyInfo","disabled-by-default-devtools.timeline.stack","disabled-by-default-v8.cpu_profiler"],{path:t,screenshots:n=!1,categories:a=e}=i;n&&a.push("disabled-by-default-devtools.screenshot");const o=a.filter(u=>u.startsWith("-")).map(u=>u.slice(1)),c=a.filter(u=>!u.startsWith("-"));y(this,jl,t),y(this,mo,!0),await r(this,Yr).send("Tracing.start",{transferMode:"ReturnAsStream",traceConfig:{excludedCategories:o,includedCategories:c}})}async stop(){const i=Ne.create();return r(this,Yr).once("Tracing.tracingComplete",async e=>{try{te(e.stream,'Missing "stream"');const t=await dy(r(this,Yr),e.stream),n=await ly(t,r(this,jl));i.resolve(n??void 0)}catch(t){Vt(t)?i.reject(t):i.reject(new Error(`Unknown error: ${t}`))}}),await r(this,Yr).send("Tracing.end"),y(this,mo,!1),await i.valueOrThrow()}}Yr=new WeakMap,mo=new WeakMap,jl=new WeakMap;class av extends $y{constructor(e,t,n,a,o,c){super(t);f(this,Tr);f(this,Qr);f(this,ql);f(this,$l);y(this,ql,n),y(this,Qr,e),y(this,$l,a),y(this,Tr,new Ep(this,new yp)),r(this,Qr).once("Runtime.executionContextCreated",async u=>{r(this,Tr).setContext(new Qy(e,u.context,r(this,Tr)))}),r(this,Tr).emitter.on("consoleapicalled",async u=>{try{return o(u.type,u.args.map(l=>new xh(r(this,Tr),l)),u.stackTrace)}catch(l){de(l)}}),r(this,Qr).on("Runtime.exceptionThrown",c),r(this,Qr).once(je.Disconnected,()=>{r(this,Tr).dispose()}),r(this,Qr).send("Runtime.enable").catch(de)}mainRealm(){return r(this,Tr)}get client(){return r(this,Qr)}async close(){var e,t;switch(r(this,$l)){case gt.SERVICE_WORKER:case gt.SHARED_WORKER:{await((e=this.client.connection())==null?void 0:e.send("Target.closeTarget",{targetId:r(this,ql)})),await((t=this.client.connection())==null?void 0:t.send("Target.detachFromTarget",{sessionId:this.client.id()}));break}default:await this.evaluate(()=>{self.close()})}}}Tr=new WeakMap,Qr=new WeakMap,ql=new WeakMap,$l=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var _p=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},Tp=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});function Mp(s){switch(s){case"warning":return"warn";default:return s}}const gm=class gm extends Ly{constructor(e,t){super();f(this,ye);f(this,Kl,!1);f(this,Xi);f(this,Te);f(this,lr);f(this,Ji);f(this,yn);f(this,Yi);f(this,go);f(this,wo);f(this,Be);f(this,Ye);f(this,yo);f(this,Qi,new Map);f(this,vo,new Map);f(this,bo);f(this,So);f(this,vn,new Map);f(this,Zr,new Set);f(this,ef,Ne.create());f(this,Ul,!1);f(this,Hl,!1);f(this,Wl,e=>{var a;const t=(a=e._session())==null?void 0:a.id(),n=r(this,vn).get(t);n&&(r(this,vn).delete(t),this.emit("workerdestroyed",n))});f(this,Co,e=>{if(te(e instanceof ta),r(this,Be).onAttachedToTarget(e._target()),e._target()._getTargetInfo().type==="worker"){const t=new av(e,e._target().url(),e._target()._targetId,e._target().type(),k(this,ye,mg).bind(this),k(this,ye,pg).bind(this));r(this,vn).set(e.id(),t),this.emit("workercreated",t)}e.on(je.Ready,r(this,Co))});y(this,Te,e),y(this,Ji,e.parentSession()),te(r(this,Ji),"Tab target session is not defined."),y(this,yn,r(this,Ji)._target()),te(r(this,yn),"Tab target is not defined."),y(this,lr,t),y(this,Xi,t._targetManager()),y(this,Yi,new WP(e)),y(this,go,new VP(e,r(this,Yi))),y(this,wo,new XP(e,r(this,Yi))),y(this,Be,new HP(e,this,this._timeoutSettings)),y(this,Ye,new zy(e)),y(this,yo,new nv(e)),y(this,bo,new Hy(e)),y(this,So,null);const n=new he(r(this,Be));n.on(ot.FrameAttached,o=>{this.emit("frameattached",o)}),n.on(ot.FrameDetached,o=>{this.emit("framedetached",o)}),n.on(ot.FrameNavigated,o=>{this.emit("framenavigated",o)}),n.on(ot.ConsoleApiCalled,([o,c])=>{k(this,ye,DC).call(this,o,c)}),n.on(ot.BindingCalled,([o,c])=>{k(this,ye,FC).call(this,o,c)});const a=new he(r(this,Be).networkManager);a.on(at.Request,o=>{this.emit("request",o)}),a.on(at.RequestServedFromCache,o=>{this.emit("requestservedfromcache",o)}),a.on(at.Response,o=>{this.emit("response",o)}),a.on(at.RequestFailed,o=>{this.emit("requestfailed",o)}),a.on(at.RequestFinished,o=>{this.emit("requestfinished",o)}),r(this,Ji).on(je.Swapped,k(this,ye,PC).bind(this)),r(this,Ji).on(je.Ready,k(this,ye,_C).bind(this)),r(this,Xi).on("targetGone",r(this,Wl)),r(this,yn)._isClosedDeferred.valueOrThrow().then(()=>{r(this,Xi).off("targetGone",r(this,Wl)),this.emit("close",void 0),y(this,Kl,!0)}).catch(de),k(this,ye,hg).call(this),k(this,ye,xC).call(this)}static async _create(e,t,n){var o;const a=new gm(e,t);if(await k(o=a,ye,TC).call(o),n)try{await a.setViewport(n)}catch(c){if(Vt(c)&&kp(c))de(c);else throw c}return a}_client(){return r(this,Te)}isServiceWorkerBypassed(){return r(this,Ul)}isDragInterceptionEnabled(){return r(this,Hl)}isJavaScriptEnabled(){return r(this,Ye).javascriptEnabled}async waitForFileChooser(e={}){const t=r(this,Zr).size===0,{timeout:n=this._timeoutSettings.timeout()}=e,a=Ne.create({message:`Waiting for \`FileChooser\` failed: ${n}ms exceeded`,timeout:n});e.signal&&e.signal.addEventListener("abort",()=>{var c;a.reject((c=e.signal)==null?void 0:c.reason)},{once:!0}),r(this,Zr).add(a);let o;t&&(o=r(this,Te).send("Page.setInterceptFileChooserDialog",{enabled:!0}));try{const[c]=await Promise.all([a.valueOrThrow(),o]);return c}catch(c){throw r(this,Zr).delete(a),c}}async setGeolocation(e){return await r(this,Ye).setGeolocation(e)}target(){return r(this,lr)}browser(){return r(this,lr).browser()}browserContext(){return r(this,lr).browserContext()}mainFrame(){return r(this,Be).mainFrame()}get keyboard(){return r(this,Yi)}get touchscreen(){return r(this,wo)}get coverage(){return r(this,bo)}get tracing(){return r(this,yo)}frames(){return r(this,Be).frames()}workers(){return Array.from(r(this,vn).values())}async setRequestInterception(e){return await r(this,Be).networkManager.setRequestInterception(e)}async setBypassServiceWorker(e){return y(this,Ul,e),await r(this,Te).send("Network.setBypassServiceWorker",{bypass:e})}async setDragInterception(e){return y(this,Hl,e),await r(this,Te).send("Input.setInterceptDrags",{enabled:e})}async setOfflineMode(e){return await r(this,Be).networkManager.setOfflineMode(e)}async emulateNetworkConditions(e){return await r(this,Be).networkManager.emulateNetworkConditions(e)}setDefaultNavigationTimeout(e){this._timeoutSettings.setDefaultNavigationTimeout(e)}setDefaultTimeout(e){this._timeoutSettings.setDefaultTimeout(e)}getDefaultTimeout(){return this._timeoutSettings.timeout()}getDefaultNavigationTimeout(){return this._timeoutSettings.navigationTimeout()}async queryObjects(e){te(!e.disposed,"Prototype JSHandle is disposed!"),te(e.id,"Prototype JSHandle must not be referencing primitive value");const t=await this.mainFrame().client.send("Runtime.queryObjects",{prototypeObjectId:e.id});return this.mainFrame().mainRealm().createCdpHandle(t.objects)}async cookies(...e){const t=(await r(this,Te).send("Network.getCookies",{urls:e.length?e:[this.url()]})).cookies,n=["sourcePort"],a=o=>{for(const c of n)delete o[c];return o};return t.map(a).map(o=>({...o,partitionKey:o.partitionKey?o.partitionKey.topLevelSite:void 0}))}async deleteCookie(...e){const t=this.url();for(const n of e){const a={...n,partitionKey:Ip(n.partitionKey)};if(!n.url&&t.startsWith("http")&&(a.url=t),await r(this,Te).send("Network.deleteCookies",a),t.startsWith("http")&&!a.partitionKey){const o=new URL(t);await r(this,Te).send("Network.deleteCookies",{...a,partitionKey:{topLevelSite:o.origin.replace(`:${o.port}`,""),hasCrossSiteAncestor:!1}})}}}async setCookie(...e){const t=this.url(),n=t.startsWith("http"),a=e.map(o=>{const c=Object.assign({},o);return!c.url&&n&&(c.url=t),te(c.url!=="about:blank",`Blank page can not have cookie "${c.name}"`),te(!String.prototype.startsWith.call(c.url||"","data:"),`Data URL page can not have cookie "${c.name}"`),c});await this.deleteCookie(...a),a.length&&await r(this,Te).send("Network.setCookies",{cookies:a.map(o=>({...o,partitionKey:Ip(o.partitionKey)}))})}async exposeFunction(e,t){if(r(this,Qi).has(e))throw new Error(`Failed to add page binding with name ${e}: window['${e}'] already exists!`);const n=AP("exposedFun",e);let a;switch(typeof t){case"function":a=new Eh(e,t,n);break;default:a=new Eh(e,t.default,n);break}r(this,Qi).set(e,a);const[{identifier:o}]=await Promise.all([r(this,Be).evaluateOnNewDocument(n),r(this,Be).addExposedFunctionBinding(a)]);r(this,vo).set(e,o)}async removeExposedFunction(e){const t=r(this,vo).get(e);if(!t)throw new Error(`Function with name "${e}" does not exist`);const n=r(this,Qi).get(e);r(this,vo).delete(e),r(this,Qi).delete(e),await Promise.all([r(this,Be).removeScriptToEvaluateOnNewDocument(t),r(this,Be).removeExposedFunctionBinding(n)])}async authenticate(e){return await r(this,Be).networkManager.authenticate(e)}async setExtraHTTPHeaders(e){return await r(this,Be).networkManager.setExtraHTTPHeaders(e)}async setUserAgent(e,t){return await r(this,Be).networkManager.setUserAgent(e,t)}async metrics(){const e=await r(this,Te).send("Performance.getMetrics");return k(this,ye,fg).call(this,e.metrics)}async reload(e){const[t]=await Promise.all([this.waitForNavigation({...e,ignoreSameDocumentNavigation:!0}),r(this,Te).send("Page.reload")]);return t}async createCDPSession(){return await this.target().createCDPSession()}async goBack(e={}){return await k(this,ye,gg).call(this,-1,e)}async goForward(e={}){return await k(this,ye,gg).call(this,1,e)}async bringToFront(){await r(this,Te).send("Page.bringToFront")}async setJavaScriptEnabled(e){return await r(this,Ye).setJavaScriptEnabled(e)}async setBypassCSP(e){await r(this,Te).send("Page.setBypassCSP",{enabled:e})}async emulateMediaType(e){return await r(this,Ye).emulateMediaType(e)}async emulateCPUThrottling(e){return await r(this,Ye).emulateCPUThrottling(e)}async emulateMediaFeatures(e){return await r(this,Ye).emulateMediaFeatures(e)}async emulateTimezone(e){return await r(this,Ye).emulateTimezone(e)}async emulateIdleState(e){return await r(this,Ye).emulateIdleState(e)}async emulateVisionDeficiency(e){return await r(this,Ye).emulateVisionDeficiency(e)}async setViewport(e){const t=await r(this,Ye).emulateViewport(e);y(this,So,e),t&&await this.reload()}viewport(){return r(this,So)}async evaluateOnNewDocument(e,...t){const n=op(e,...t);return await r(this,Be).evaluateOnNewDocument(n)}async removeScriptToEvaluateOnNewDocument(e){return await r(this,Be).removeScriptToEvaluateOnNewDocument(e)}async setCacheEnabled(e=!0){await r(this,Be).networkManager.setCacheEnabled(e)}async _screenshot(e){const t={stack:[],error:void 0,hasError:!1};try{const{fromSurface:n,omitBackground:a,optimizeForSpeed:o,quality:c,clip:u,type:l,captureBeyondViewport:p}=e,h=_p(t,new ih,!0);a&&(l==="png"||l==="webp")&&(await r(this,Ye).setTransparentBackgroundColor(),h.defer(async()=>{await r(this,Ye).resetDefaultBackgroundColor().catch(de)}));let d=u;if(d&&!p){const b=await this.mainFrame().isolatedRealm().evaluate(()=>{const{height:w,pageLeft:g,pageTop:S,width:E}=window.visualViewport;return{x:g,y:S,height:w,width:E}});d=YP(d,b)}const{data:m}=await r(this,Te).send("Page.captureScreenshot",{format:l,optimizeForSpeed:o,fromSurface:n,...c!==void 0?{quality:Math.round(c)}:{},...d?{clip:{...d,scale:d.scale??1}}:{},captureBeyondViewport:p});return m}catch(n){t.error=n,t.hasError=!0}finally{const n=Tp(t);n&&await n}}async createPDFStream(e={}){const{timeout:t=this._timeoutSettings.timeout()}=e,{landscape:n,displayHeaderFooter:a,headerTemplate:o,footerTemplate:c,printBackground:u,scale:l,width:p,height:h,margin:d,pageRanges:m,preferCSSPageSize:b,omitBackground:w,tagged:g,outline:S,waitForFonts:E}=py(e);w&&await r(this,Ye).setTransparentBackgroundColor(),E&&await it(ke(this.mainFrame().isolatedRealm().evaluate(()=>document.fonts.ready)).pipe(pt(It(t))));const v=r(this,Te).send("Page.printToPDF",{transferMode:"ReturnAsStream",landscape:n,displayHeaderFooter:a,headerTemplate:o,footerTemplate:c,printBackground:u,scale:l,paperWidth:p,paperHeight:h,marginTop:d.top,marginBottom:d.bottom,marginLeft:d.left,marginRight:d.right,pageRanges:m,preferCSSPageSize:b,generateTaggedPDF:g,generateDocumentOutline:S}),C=await it(ke(v).pipe(pt(It(t))));return w&&await r(this,Ye).resetDefaultBackgroundColor(),te(C.stream,"`stream` is missing from `Page.printToPDF"),await dy(r(this,Te),C.stream)}async pdf(e={}){const{path:t=void 0}=e,n=await this.createPDFStream(e),a=await ly(n,t);return te(a,"Could not create typed array"),a}async close(e={runBeforeUnload:void 0}){const t={stack:[],error:void 0,hasError:!1};try{const n=_p(t,await this.browserContext().waitForScreenshotOperations(),!1),a=r(this,Te).connection();te(a,"Protocol error: Connection closed. Most likely the page has been closed."),!!e.runBeforeUnload?await r(this,Te).send("Page.close"):(await a.send("Target.closeTarget",{targetId:r(this,lr)._targetId}),await r(this,yn)._isClosedDeferred.valueOrThrow())}catch(n){t.error=n,t.hasError=!0}finally{Tp(t)}}isClosed(){return r(this,Kl)}get mouse(){return r(this,go)}async waitForDevicePrompt(e={}){return await this.mainFrame().waitForDevicePrompt(e)}};Kl=new WeakMap,Xi=new WeakMap,Te=new WeakMap,lr=new WeakMap,Ji=new WeakMap,yn=new WeakMap,Yi=new WeakMap,go=new WeakMap,wo=new WeakMap,Be=new WeakMap,Ye=new WeakMap,yo=new WeakMap,Qi=new WeakMap,vo=new WeakMap,bo=new WeakMap,So=new WeakMap,vn=new WeakMap,Zr=new WeakMap,ef=new WeakMap,Ul=new WeakMap,Hl=new WeakMap,ye=new WeakSet,xC=function(){const e=[];for(const n of r(this,Xi).getChildTargets(r(this,lr)))e.push(n);let t=0;for(;t<e.length;){const n=e[t];t++;const a=n._session();a&&r(this,Co).call(this,a);for(const o of r(this,Xi).getChildTargets(n))e.push(o)}},PC=async function(e){y(this,Te,e),te(r(this,Te)instanceof ta,"CDPSession is not instance of CDPSessionImpl"),y(this,lr,r(this,Te)._target()),te(r(this,lr),"Missing target on swap"),r(this,Yi).updateClient(e),r(this,go).updateClient(e),r(this,wo).updateClient(e),r(this,Ye).updateClient(e),r(this,yo).updateClient(e),r(this,bo).updateClient(e),await r(this,Be).swapFrameTree(e),k(this,ye,hg).call(this)},_C=async function(e){te(e instanceof ta),e._target()._subtype()==="prerender"&&(r(this,Be).registerSpeculativeSession(e).catch(de),r(this,Ye).registerSpeculativeSession(e).catch(de))},hg=function(){const e=new he(r(this,Te));e.on(je.Ready,r(this,Co)),e.on(je.Disconnected,()=>{r(this,ef).reject(new tr("Target closed"))}),e.on("Page.domContentEventFired",()=>{this.emit("domcontentloaded",void 0)}),e.on("Page.loadEventFired",()=>{this.emit("load",void 0)}),e.on("Page.javascriptDialogOpening",k(this,ye,OC).bind(this)),e.on("Runtime.exceptionThrown",k(this,ye,pg).bind(this)),e.on("Inspector.targetCrashed",k(this,ye,IC).bind(this)),e.on("Performance.metrics",k(this,ye,RC).bind(this)),e.on("Log.entryAdded",k(this,ye,AC).bind(this)),e.on("Page.fileChooserOpened",k(this,ye,MC).bind(this))},Wl=new WeakMap,Co=new WeakMap,TC=async function(){try{await Promise.all([r(this,Be).initialize(r(this,Te)),r(this,Te).send("Performance.enable"),r(this,Te).send("Log.enable")])}catch(e){if(Vt(e)&&kp(e))de(e);else throw e}},MC=async function(e){const t={stack:[],error:void 0,hasError:!1};try{if(!r(this,Zr).size)return;const n=r(this,Be).frame(e.frameId);te(n,"This should never happen.");const a=_p(t,await n.worlds[vr].adoptBackendNode(e.backendNodeId),!1),o=new yP(a.move(),e);for(const c of r(this,Zr))c.resolve(o);r(this,Zr).clear()}catch(n){t.error=n,t.hasError=!0}finally{Tp(t)}},IC=function(){this.emit("error",new Error("Page crashed!"))},AC=function(e){const{level:t,text:n,args:a,source:o,url:c,lineNumber:u}=e.entry;a&&a.map(l=>{Jy(r(this,Te),l)}),o!=="worker"&&this.emit("console",new Sp(Mp(t),n,[],[{url:c,lineNumber:u}]))},RC=function(e){this.emit("metrics",{title:e.title,metrics:k(this,ye,fg).call(this,e.metrics)})},fg=function(e){const t={};for(const n of e||[])JP.has(n.name)&&(t[n.name]=n.value);return t},pg=function(e){this.emit("pageerror",IP(e.exceptionDetails))},DC=function(e,t){const n=t.args.map(a=>e.createCdpHandle(a));k(this,ye,mg).call(this,Mp(t.type),n,t.stackTrace)},FC=async function(e,t){let n;try{n=JSON.parse(t.payload)}catch{return}const{type:a,name:o,seq:c,args:u,isTrivial:l}=n;if(a!=="exposedFun")return;const p=e.context;if(!p)return;const h=r(this,Qi).get(o);await(h==null?void 0:h.run(p,c,u,l))},mg=function(e,t,n){if(!this.listenerCount("console")){t.forEach(u=>u.dispose());return}const a=[];for(const u of t){const l=u.remoteObject();l.objectId?a.push(u.toString()):a.push(vs(l))}const o=[];if(n)for(const u of n.callFrames)o.push({url:u.url,lineNumber:u.lineNumber,columnNumber:u.columnNumber});const c=new Sp(Mp(e),a.join(" "),t,o);this.emit("console",c)},OC=function(e){const t=xx(e.type),n=new EP(r(this,Te),t,e.message,e.defaultPrompt);this.emit("dialog",n)},gg=async function(e,t){const n=await r(this,Te).send("Page.getNavigationHistory"),a=n.entries[n.currentIndex+e];return a?(await Promise.all([this.waitForNavigation(t),r(this,Te).send("Page.navigateToHistoryEntry",{entryId:a.id})]))[0]:null};let lc=gm;const JP=new Set(["Timestamp","Documents","Frames","JSEventListeners","Nodes","LayoutCount","RecalcStyleCount","LayoutDuration","RecalcStyleDuration","ScriptDuration","TaskDuration","JSHeapUsedSize","JSHeapTotalSize"]);function YP(s,i){const e=Math.max(s.x,i.x),t=Math.max(s.y,i.y);return{x:e,y:t,width:Math.max(Math.min(s.x+s.width,i.x+i.width)-e,0),height:Math.max(Math.min(s.y+s.height,i.y+i.height)-t,0)}}function Ip(s){if(s!==void 0)return typeof s=="string"?{topLevelSite:s,hasCrossSiteAncestor:!1}:{topLevelSite:s.sourceOrigin,hasCrossSiteAncestor:s.hasCrossSiteAncestor??!1}}/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var QP=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},ZP=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});class Ap extends gy{constructor(e,t,n){super();f(this,ei);f(this,ti);f(this,Kt);y(this,ei,e),y(this,ti,t),y(this,Kt,n)}get id(){return r(this,Kt)}targets(){return r(this,ti).targets().filter(e=>e.browserContext()===this)}async pages(){return(await Promise.all(this.targets().filter(t=>{var n;return t.type()==="page"||t.type()==="other"&&((n=r(this,ti)._getIsPageTargetCallback())==null?void 0:n(t))}).map(t=>t.page()))).filter(t=>!!t)}async overridePermissions(e,t){const n=t.map(a=>{const o=up.get(a);if(!o)throw new Error("Unknown permission: "+a);return o});await r(this,ei).send("Browser.grantPermissions",{origin:e,browserContextId:r(this,Kt)||void 0,permissions:n})}async clearPermissionOverrides(){await r(this,ei).send("Browser.resetPermissions",{browserContextId:r(this,Kt)||void 0})}async newPage(){const e={stack:[],error:void 0,hasError:!1};try{const t=QP(e,await this.waitForScreenshotOperations(),!1);return await r(this,ti)._createPageInContext(r(this,Kt))}catch(t){e.error=t,e.hasError=!0}finally{ZP(e)}}browser(){return r(this,ti)}async close(){te(r(this,Kt),"Default BrowserContext cannot be closed!"),await r(this,ti)._disposeContext(r(this,Kt))}async cookies(){const{cookies:e}=await r(this,ei).send("Storage.getCookies",{browserContextId:r(this,Kt)});return e.map(t=>({...t,partitionKey:t.partitionKey?{sourceOrigin:t.partitionKey.topLevelSite,hasCrossSiteAncestor:t.partitionKey.hasCrossSiteAncestor}:void 0}))}async setCookie(...e){return await r(this,ei).send("Storage.setCookies",{browserContextId:r(this,Kt),cookies:e.map(t=>({...t,partitionKey:Ip(t.partitionKey)}))})}async setDownloadBehavior(e){await r(this,ei).send("Browser.setDownloadBehavior",{behavior:e.policy,downloadPath:e.downloadPath,browserContextId:r(this,Kt)})}}ei=new WeakMap,ti=new WeakMap,Kt=new WeakMap;/**
 * @license
 * Copyright 2019 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Gt;(function(s){s.SUCCESS="success",s.ABORTED="aborted"})(Gt||(Gt={}));let Th=(mS=class extends uc{constructor(e,t,n,a,o){super();f(this,Zi);f(this,es);f(this,Mr);f(this,ko);f(this,ts);f(this,Eo,new Set);W(this,"_initializedDeferred",Ne.create());W(this,"_isClosedDeferred",Ne.create());W(this,"_targetId");y(this,es,t),y(this,ko,a),y(this,Mr,e),y(this,Zi,n),this._targetId=e.targetId,y(this,ts,o),r(this,es)&&r(this,es)instanceof ta&&r(this,es)._setTarget(this)}async asPage(){const e=this._session();return e?await lc._create(e,this,null):await this.createCDPSession().then(t=>lc._create(t,this,null))}_subtype(){return r(this,Mr).subtype}_session(){return r(this,es)}_addChildTarget(e){r(this,Eo).add(e)}_removeChildTarget(e){r(this,Eo).delete(e)}_childTargets(){return r(this,Eo)}_sessionFactory(){if(!r(this,ts))throw new Error("sessionFactory is not initialized");return r(this,ts)}createCDPSession(){if(!r(this,ts))throw new Error("sessionFactory is not initialized");return r(this,ts).call(this,!1).then(e=>(e._setTarget(this),e))}url(){return r(this,Mr).url}type(){switch(r(this,Mr).type){case"page":return gt.PAGE;case"background_page":return gt.BACKGROUND_PAGE;case"service_worker":return gt.SERVICE_WORKER;case"shared_worker":return gt.SHARED_WORKER;case"browser":return gt.BROWSER;case"webview":return gt.WEBVIEW;case"tab":return gt.TAB;default:return gt.OTHER}}_targetManager(){if(!r(this,ko))throw new Error("targetManager is not initialized");return r(this,ko)}_getTargetInfo(){return r(this,Mr)}browser(){if(!r(this,Zi))throw new Error("browserContext is not initialized");return r(this,Zi).browser()}browserContext(){if(!r(this,Zi))throw new Error("browserContext is not initialized");return r(this,Zi)}opener(){const{openerId:e}=r(this,Mr);if(e)return this.browser().targets().find(t=>t._targetId===e)}_targetInfoChanged(e){y(this,Mr,e),this._checkIfInitialized()}_initialize(){this._initializedDeferred.resolve(Gt.SUCCESS)}_isTargetExposed(){return this.type()!==gt.TAB&&!this._subtype()}_checkIfInitialized(){this._initializedDeferred.resolved()||this._initializedDeferred.resolve(Gt.SUCCESS)}},Zi=new WeakMap,es=new WeakMap,Mr=new WeakMap,ko=new WeakMap,ts=new WeakMap,Eo=new WeakMap,mS);const wm=class wm extends Th{constructor(e,t,n,a,o,c){super(e,t,n,a,o);f(this,zl);W(this,"pagePromise");y(this,zl,c??void 0)}_initialize(){this._initializedDeferred.valueOrThrow().then(async e=>{if(e===Gt.ABORTED)return;const t=this.opener();if(!(t instanceof wm))return;if(!t||!t.pagePromise||this.type()!=="page")return!0;const n=await t.pagePromise;if(!n.listenerCount("popup"))return!0;const a=await this.page();return n.emit("popup",a),!0}).catch(de),this._checkIfInitialized()}async page(){if(!this.pagePromise){const e=this._session();this.pagePromise=(e?Promise.resolve(e):this._sessionFactory()(!1)).then(t=>lc._create(t,this,r(this,zl)??null))}return await this.pagePromise??null}_checkIfInitialized(){this._initializedDeferred.resolved()||this._getTargetInfo().url!==""&&this._initializedDeferred.resolve(Gt.SUCCESS)}};zl=new WeakMap;let Mh=wm;class e_ extends Mh{}class t_ extends Th{constructor(){super(...arguments);f(this,xo)}async worker(){if(!r(this,xo)){const e=this._session();y(this,xo,(e?Promise.resolve(e):this._sessionFactory()(!1)).then(t=>new av(t,this._getTargetInfo().url,this._targetId,this.type(),()=>{},()=>{})))}return await r(this,xo)}}xo=new WeakMap;class r_ extends Th{}/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function i_(s,i){return!!s._subtype()&&!i.subtype}class s_ extends he{constructor(e,t,n,a=!0){super();f(this,Ft);f(this,ct);f(this,rs,new Map);f(this,ut,new Map);f(this,bn,new Map);f(this,Vl,new Set);f(this,is);f(this,Sn);f(this,Cn,new WeakMap);f(this,ss,new WeakMap);f(this,Gl,Ne.create());f(this,kn,new Set);f(this,Xl,!0);f(this,Po,[{}]);f(this,tf,()=>{if(r(this,Xl))for(const[e,t]of r(this,rs).entries()){const n=new Th(t,void 0,void 0,this,void 0),a=t.type==="page"||t.type==="iframe",o=t.url.startsWith("chrome-extension://");(!r(this,is)||r(this,is).call(this,n))&&a&&!o&&r(this,kn).add(e)}});f(this,Jl,e=>{k(this,Ft,yg).call(this,e)});f(this,Yl,async e=>{if(r(this,rs).set(e.targetInfo.targetId,e.targetInfo),this.emit("targetDiscovered",e.targetInfo),e.targetInfo.type==="browser"&&e.targetInfo.attached){if(r(this,ut).has(e.targetInfo.targetId))return;const t=r(this,Sn).call(this,e.targetInfo,void 0);t._initialize(),r(this,ut).set(e.targetInfo.targetId,t)}});f(this,Ql,e=>{const t=r(this,rs).get(e.targetId);if(r(this,rs).delete(e.targetId),k(this,Ft,Wo).call(this,e.targetId),(t==null?void 0:t.type)==="service_worker"&&r(this,ut).has(e.targetId)){const n=r(this,ut).get(e.targetId);n&&(this.emit("targetGone",n),r(this,ut).delete(e.targetId))}});f(this,Zl,e=>{var o;if(r(this,rs).set(e.targetInfo.targetId,e.targetInfo),r(this,Vl).has(e.targetInfo.targetId)||!r(this,ut).has(e.targetInfo.targetId)||!e.targetInfo.attached)return;const t=r(this,ut).get(e.targetInfo.targetId);if(!t)return;const n=t.url(),a=t._initializedDeferred.value()===Gt.SUCCESS;if(i_(t,e.targetInfo)){const c=t==null?void 0:t._session();te(c,"Target that is being activated is missing a CDPSession."),(o=c.parentSession())==null||o.emit(je.Swapped,c)}t._targetInfoChanged(e.targetInfo),a&&n!==t.url()&&this.emit("targetChanged",{target:t,wasInitialized:a,previousURL:n})});f(this,rf,async(e,t)=>{const n=t.targetInfo,a=r(this,ct).session(t.sessionId);if(!a)throw new Error(`Session ${t.sessionId} was not created.`);const o=async()=>{await a.send("Runtime.runIfWaitingForDebugger").catch(de),await e.send("Target.detachFromTarget",{sessionId:a.id()}).catch(de)};if(!r(this,ct).isAutoAttached(n.targetId))return;if(n.type==="service_worker"){if(k(this,Ft,Wo).call(this,n.targetId),await o(),r(this,ut).has(n.targetId))return;const p=r(this,Sn).call(this,n);p._initialize(),r(this,ut).set(n.targetId,p),this.emit("targetAvailable",p);return}const c=r(this,ut).has(n.targetId),u=c?r(this,ut).get(n.targetId):r(this,Sn).call(this,n,a,e instanceof sc?e:void 0);if(r(this,is)&&!r(this,is).call(this,u)){r(this,Vl).add(n.targetId),k(this,Ft,Wo).call(this,n.targetId),await o();return}k(this,Ft,wg).call(this,a),c?(a._setTarget(u),r(this,bn).set(a.id(),r(this,ut).get(n.targetId))):(u._initialize(),r(this,ut).set(n.targetId,u),r(this,bn).set(a.id(),u));const l=e instanceof sc?e._target():null;l==null||l._addChildTarget(u),e.emit(je.Ready,a),r(this,kn).delete(u._targetId),c||this.emit("targetAvailable",u),k(this,Ft,Wo).call(this),await Promise.all([a.send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0,filter:r(this,Po)}),a.send("Runtime.runIfWaitingForDebugger")]).catch(de)});f(this,sf,(e,t)=>{const n=r(this,bn).get(t.sessionId);r(this,bn).delete(t.sessionId),n&&(e instanceof sc&&e._target()._removeChildTarget(n),r(this,ut).delete(n._targetId),this.emit("targetGone",n))});y(this,ct,e),y(this,is,n),y(this,Sn,t),y(this,Xl,a),r(this,ct).on("Target.targetCreated",r(this,Yl)),r(this,ct).on("Target.targetDestroyed",r(this,Ql)),r(this,ct).on("Target.targetInfoChanged",r(this,Zl)),r(this,ct).on(je.SessionDetached,r(this,Jl)),k(this,Ft,wg).call(this,r(this,ct))}async initialize(){await r(this,ct).send("Target.setDiscoverTargets",{discover:!0,filter:r(this,Po)}),r(this,tf).call(this),await r(this,ct).send("Target.setAutoAttach",{waitForDebuggerOnStart:!0,flatten:!0,autoAttach:!0,filter:[{type:"page",exclude:!0},...r(this,Po)]}),k(this,Ft,Wo).call(this),await r(this,Gl).valueOrThrow()}getChildTargets(e){return e._childTargets()}dispose(){r(this,ct).off("Target.targetCreated",r(this,Yl)),r(this,ct).off("Target.targetDestroyed",r(this,Ql)),r(this,ct).off("Target.targetInfoChanged",r(this,Zl)),r(this,ct).off(je.SessionDetached,r(this,Jl)),k(this,Ft,yg).call(this,r(this,ct))}getAvailableTargets(){return r(this,ut)}}ct=new WeakMap,rs=new WeakMap,ut=new WeakMap,bn=new WeakMap,Vl=new WeakMap,is=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,ss=new WeakMap,Gl=new WeakMap,kn=new WeakMap,Xl=new WeakMap,Po=new WeakMap,tf=new WeakMap,Ft=new WeakSet,wg=function(e){const t=a=>{r(this,rf).call(this,e,a)};te(!r(this,Cn).has(e)),r(this,Cn).set(e,t),e.on("Target.attachedToTarget",t);const n=a=>r(this,sf).call(this,e,a);te(!r(this,ss).has(e)),r(this,ss).set(e,n),e.on("Target.detachedFromTarget",n)},yg=function(e){const t=r(this,Cn).get(e);t&&(e.off("Target.attachedToTarget",t),r(this,Cn).delete(e)),r(this,ss).has(e)&&(e.off("Target.detachedFromTarget",r(this,ss).get(e)),r(this,ss).delete(e))},Jl=new WeakMap,Yl=new WeakMap,Ql=new WeakMap,Zl=new WeakMap,rf=new WeakMap,Wo=function(e){e!==void 0&&r(this,kn).delete(e),r(this,kn).size===0&&r(this,Gl).resolve()},sf=new WeakMap;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const ym=class ym extends my{constructor(e,t,n,a,o,c,u,l=!0){super();f(this,En);W(this,"protocol","cdp");f(this,_o);f(this,ed);f(this,lt);f(this,td);f(this,rd);f(this,To);f(this,ri);f(this,ii,new Map);f(this,Qe);f(this,id,()=>{this.emit("disconnected",void 0)});f(this,nf,(e,t)=>{var u;const{browserContextId:n}=e,a=n&&r(this,ii).has(n)?r(this,ii).get(n):r(this,ri);if(!a)throw new Error("Missing browser context");const o=l=>r(this,lt)._createSession(e,l),c=new r_(e,t,a,r(this,Qe),o);return(u=e.url)!=null&&u.startsWith("devtools://")?new e_(e,t,a,r(this,Qe),o,r(this,_o)??null):r(this,To).call(this,c)?new Mh(e,t,a,r(this,Qe),o,r(this,_o)??null):e.type==="service_worker"||e.type==="shared_worker"?new t_(e,t,a,r(this,Qe),o):c});f(this,sd,async e=>{e._isTargetExposed()&&await e._initializedDeferred.valueOrThrow()===Gt.SUCCESS&&(this.emit("targetcreated",e),e.browserContext().emit("targetcreated",e))});f(this,nd,async e=>{e._initializedDeferred.resolve(Gt.ABORTED),e._isClosedDeferred.resolve(),e._isTargetExposed()&&await e._initializedDeferred.valueOrThrow()===Gt.SUCCESS&&(this.emit("targetdestroyed",e),e.browserContext().emit("targetdestroyed",e))});f(this,ad,({target:e})=>{this.emit("targetchanged",e),e.browserContext().emit("targetchanged",e)});f(this,od,e=>{this.emit("targetdiscovered",e)});y(this,_o,n),y(this,ed,a),y(this,lt,e),y(this,td,o||(()=>{})),y(this,rd,c||(()=>!0)),k(this,En,NC).call(this,u),y(this,Qe,new s_(e,r(this,nf),r(this,rd),l)),y(this,ri,new Ap(r(this,lt),this));for(const p of t)r(this,ii).set(p,new Ap(r(this,lt),this,p))}static async _create(e,t,n,a,o,c,u,l,p,h=!0){const d=new ym(e,t,a,c,u,l,p,h);return n&&await e.send("Security.setIgnoreCertificateErrors",{ignore:!0}),await d._attach(o),d}async _attach(e){r(this,lt).on(je.Disconnected,r(this,id)),e&&await r(this,ri).setDownloadBehavior(e),r(this,Qe).on("targetAvailable",r(this,sd)),r(this,Qe).on("targetGone",r(this,nd)),r(this,Qe).on("targetChanged",r(this,ad)),r(this,Qe).on("targetDiscovered",r(this,od)),await r(this,Qe).initialize()}_detach(){r(this,lt).off(je.Disconnected,r(this,id)),r(this,Qe).off("targetAvailable",r(this,sd)),r(this,Qe).off("targetGone",r(this,nd)),r(this,Qe).off("targetChanged",r(this,ad)),r(this,Qe).off("targetDiscovered",r(this,od))}process(){return r(this,ed)??null}_targetManager(){return r(this,Qe)}_getIsPageTargetCallback(){return r(this,To)}async createBrowserContext(e={}){const{proxyServer:t,proxyBypassList:n,downloadBehavior:a}=e,{browserContextId:o}=await r(this,lt).send("Target.createBrowserContext",{proxyServer:t,proxyBypassList:n&&n.join(",")}),c=new Ap(r(this,lt),this,o);return a&&await c.setDownloadBehavior(a),r(this,ii).set(o,c),c}browserContexts(){return[r(this,ri),...Array.from(r(this,ii).values())]}defaultBrowserContext(){return r(this,ri)}async _disposeContext(e){e&&(await r(this,lt).send("Target.disposeBrowserContext",{browserContextId:e}),r(this,ii).delete(e))}wsEndpoint(){return r(this,lt).url()}async newPage(){return await r(this,ri).newPage()}async _createPageInContext(e){const{targetId:t}=await r(this,lt).send("Target.createTarget",{url:"about:blank",browserContextId:e||void 0}),n=await this.waitForTarget(c=>c._targetId===t);if(!n)throw new Error(`Missing target for page (id = ${t})`);if(!(await n._initializedDeferred.valueOrThrow()===Gt.SUCCESS))throw new Error(`Failed to create target for page (id = ${t})`);const o=await n.page();if(!o)throw new Error(`Failed to create a page for context (id = ${e})`);return o}targets(){return Array.from(r(this,Qe).getAvailableTargets().values()).filter(e=>e._isTargetExposed()&&e._initializedDeferred.value()===Gt.SUCCESS)}target(){const e=this.targets().find(t=>t.type()==="browser");if(!e)throw new Error("Browser target is not found");return e}async version(){return(await k(this,En,vg).call(this)).product}async userAgent(){return(await k(this,En,vg).call(this)).userAgent}async close(){await r(this,td).call(null),await this.disconnect()}disconnect(){return r(this,Qe).dispose(),r(this,lt).dispose(),this._detach(),Promise.resolve()}get connected(){return!r(this,lt)._closed}get debugInfo(){return{pendingProtocolErrors:r(this,lt).getPendingProtocolErrors()}}};_o=new WeakMap,ed=new WeakMap,lt=new WeakMap,td=new WeakMap,rd=new WeakMap,To=new WeakMap,ri=new WeakMap,ii=new WeakMap,Qe=new WeakMap,id=new WeakMap,En=new WeakSet,NC=function(e){y(this,To,e||(t=>t.type()==="page"||t.type()==="background_page"||t.type()==="webview"))},nf=new WeakMap,sd=new WeakMap,nd=new WeakMap,ad=new WeakMap,od=new WeakMap,vg=function(){return r(this,lt).send("Browser.getVersion")};let Rp=ym;/**
 * @license
 * Copyright 2020 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */async function n_(s,i,e){const{acceptInsecureCerts:t=!1,defaultViewport:n=cy,downloadBehavior:a,targetFilter:o,_isPageTarget:c,slowMo:u=0,protocolTimeout:l}=e,p=new Uy(i,s,u,l),{browserContextIds:h}=await p.send("Target.getBrowserContexts");return await Rp._create(p,h,t,n,a,void 0,()=>p.send("Browser.close").catch(de),o,c)}const ov={targetId:"tabTargetId",type:"tab",title:"tab",url:"about:blank",attached:!1,canAccessOpener:!1},cv={targetId:"pageTargetId",type:"page",title:"page",url:"about:blank",attached:!1,canAccessOpener:!1},vm=class vm{constructor(i){f(this,Pt);W(this,"onmessage");W(this,"onclose");f(this,xn);f(this,cd,(i,e,t)=>{i.tabId===r(this,xn)&&k(this,Pt,Wt).call(this,{sessionId:i.sessionId??"pageTargetSessionId",method:e,params:t})});y(this,xn,i),chrome.debugger.onEvent.addListener(r(this,cd))}static async connectTab(i){return await chrome.debugger.attach({tabId:i},"1.3"),new vm(i)}send(i){const e=JSON.parse(i);switch(e.method){case"Browser.getVersion":{k(this,Pt,Wt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{protocolVersion:"1.3",product:"chrome",revision:"unknown",userAgent:"chrome",jsVersion:"unknown"}});return}case"Target.getBrowserContexts":{k(this,Pt,Wt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{browserContextIds:[]}});return}case"Target.setDiscoverTargets":{k(this,Pt,Wt).call(this,{method:"Target.targetCreated",params:{targetInfo:ov}}),k(this,Pt,Wt).call(this,{method:"Target.targetCreated",params:{targetInfo:cv}}),k(this,Pt,Wt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{}});return}case"Target.setAutoAttach":if(e.sessionId==="tabTargetSessionId"){k(this,Pt,Wt).call(this,{method:"Target.attachedToTarget",params:{targetInfo:cv,sessionId:"pageTargetSessionId"}}),k(this,Pt,Wt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{}});return}else if(!e.sessionId){k(this,Pt,Wt).call(this,{method:"Target.attachedToTarget",params:{targetInfo:ov,sessionId:"tabTargetSessionId"}}),k(this,Pt,Wt).call(this,{id:e.id,sessionId:e.sessionId,method:e.method,result:{}});return}}e.sessionId==="pageTargetSessionId"&&delete e.sessionId,chrome.debugger.sendCommand({tabId:r(this,xn),sessionId:e.sessionId},e.method,e.params).then(t=>{k(this,Pt,Wt).call(this,{id:e.id,sessionId:e.sessionId??"pageTargetSessionId",method:e.method,result:t})}).catch(t=>{k(this,Pt,Wt).call(this,{id:e.id,sessionId:e.sessionId??"pageTargetSessionId",method:e.method,error:{code:t==null?void 0:t.code,data:t==null?void 0:t.data,message:(t==null?void 0:t.message)??"CDP error had no message"}})})}close(){chrome.debugger.onEvent.removeListener(r(this,cd)),chrome.debugger.detach({tabId:r(this,xn)})}};xn=new WeakMap,cd=new WeakMap,Pt=new WeakSet,Wt=function(i){var e;(e=this.onmessage)==null||e.call(this,JSON.stringify(i))};let Dp=vm;const bm=class bm{constructor(i){f(this,si);W(this,"onmessage");W(this,"onclose");y(this,si,i),r(this,si).addEventListener("message",e=>{this.onmessage&&this.onmessage.call(null,e.data)}),r(this,si).addEventListener("close",()=>{this.onclose&&this.onclose.call(null)}),r(this,si).addEventListener("error",()=>{})}static create(i){return new Promise((e,t)=>{const n=new WebSocket(i);n.addEventListener("open",()=>e(new bm(n))),n.addEventListener("error",t)})}send(i){r(this,si).send(i)}close(){r(this,si).close()}};si=new WeakMap;let Fp=bm;const a_=Object.freeze(Object.defineProperty({__proto__:null,BrowserWebSocketTransport:Fp},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const o_=[{name:"Blackberry PlayBook",userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:600,height:1024,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Blackberry PlayBook landscape",userAgent:"Mozilla/5.0 (PlayBook; U; RIM Tablet OS 2.1.0; en-US) AppleWebKit/536.2+ (KHTML like Gecko) Version/7.2.1.0 Safari/536.2+",viewport:{width:1024,height:600,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"BlackBerry Z30",userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"BlackBerry Z30 landscape",userAgent:"Mozilla/5.0 (BB10; Touch) AppleWebKit/537.10+ (KHTML, like Gecko) Version/10.0.9.2372 Mobile Safari/537.10+",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Note 3",userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Note 3 landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.3; en-us; SM-N900T Build/JSS15J) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Note II",userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Note II landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.1; en-us; GT-N7100 Build/JRO03C) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S III",userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:360,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S III landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.0; en-us; GT-I9300 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) Version/4.0 Mobile Safari/534.30",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S5",userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S8",userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36",viewport:{width:360,height:740,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S8 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.0; SM-G950U Build/NRD90M) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.84 Mobile Safari/537.36",viewport:{width:740,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy S9+",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36",viewport:{width:320,height:658,deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy S9+ landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; SM-G965U Build/R16NW) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.111 Mobile Safari/537.36",viewport:{width:658,height:320,deviceScaleFactor:4.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Galaxy Tab S4",userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36",viewport:{width:712,height:1138,deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Galaxy Tab S4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.1.0; SM-T837A) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.80 Safari/537.36",viewport:{width:1138,height:712,deviceScaleFactor:2.25,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad (gen 6)",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad (gen 6) landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad (gen 7)",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:810,height:1080,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad (gen 7) landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1080,height:810,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Mini",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:768,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Mini landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:768,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Pro",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1024,height:1366,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Pro landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 11_0 like Mac OS X) AppleWebKit/604.1.34 (KHTML, like Gecko) Version/11.0 Mobile/15A5341f Safari/604.1",viewport:{width:1366,height:1024,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPad Pro 11",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:834,height:1194,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPad Pro 11 landscape",userAgent:"Mozilla/5.0 (iPad; CPU OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:1194,height:834,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 4",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53",viewport:{width:320,height:480,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 4 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 7_1_2 like Mac OS X) AppleWebKit/537.51.2 (KHTML, like Gecko) Version/7.0 Mobile/11D257 Safari/9537.53",viewport:{width:480,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 5",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 5 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 6",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 6 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 6 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 6 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 7",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 7 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 7 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 7 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 8",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:667,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 8 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:667,height:375,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 8 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:414,height:736,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 8 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:736,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone SE",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:320,height:568,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone SE landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Version/10.0 Mobile/14E304 Safari/602.1",viewport:{width:568,height:320,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone X",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone X landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone XR",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone XR landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:414,height:828,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:828,height:414,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 11 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:414,height:896,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 11 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 13_7 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.1 Mobile/15E148 Safari/604.1",viewport:{width:896,height:414,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:428,height:926,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:926,height:428,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 12 Mini",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 12 Mini landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:390,height:844,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:844,height:390,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:428,height:926,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:926,height:428,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 13 Mini",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:375,height:812,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 13 Mini landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.4 Mobile/15E148 Safari/604.1",viewport:{width:812,height:375,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:390,height:663,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:750,height:340,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:428,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:832,height:378,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 14 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 14 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Plus",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Plus landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Pro",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:393,height:659,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Pro landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:734,height:343,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"iPhone 15 Pro Max",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:430,height:739,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"iPhone 15 Pro Max landscape",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 17_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.5 Mobile/15E148 Safari/604.1",viewport:{width:814,height:380,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"JioPhone 2",userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:240,height:320,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"JioPhone 2 landscape",userAgent:"Mozilla/5.0 (Mobile; LYF/F300B/LYF-F300B-001-01-15-130718-i;Android; rv:48.0) Gecko/48.0 Firefox/48.0 KAIOS/2.5",viewport:{width:320,height:240,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Kindle Fire HDX",userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:800,height:1280,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Kindle Fire HDX landscape",userAgent:"Mozilla/5.0 (Linux; U; en-us; KFAPWI Build/JDQ39) AppleWebKit/535.19 (KHTML, like Gecko) Silk/3.13 Safari/535.19 Silk-Accelerated=true",viewport:{width:1280,height:800,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"LG Optimus L70",userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640,deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"LG Optimus L70 landscape",userAgent:"Mozilla/5.0 (Linux; U; Android 4.4.2; en-us; LGMS323 Build/KOT49I.MS32310c) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384,deviceScaleFactor:1.25,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Microsoft Lumia 550",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 550) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Microsoft Lumia 950",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:360,height:640,deviceScaleFactor:4,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Microsoft Lumia 950 landscape",userAgent:"Mozilla/5.0 (Windows Phone 10.0; Android 4.2.1; Microsoft; Lumia 950) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Mobile Safari/537.36 Edge/14.14263",viewport:{width:640,height:360,deviceScaleFactor:4,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 10",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:800,height:1280,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 10 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 10 Build/MOB31T) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:1280,height:800,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 4",userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:384,height:640,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 4.4.2; Nexus 4 Build/KOT49H) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:384,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 5",userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 5X",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 5X landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 5X Build/OPR4.170623.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 6",userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 6 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.1.1; Nexus 6 Build/N6F26U) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 6P",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:412,height:732,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 6P landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Nexus 6P Build/OPP3.170518.006) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:732,height:412,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nexus 7",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:600,height:960,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nexus 7 landscape",userAgent:"Mozilla/5.0 (Linux; Android 6.0.1; Nexus 7 Build/MOB30X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Safari/537.36",viewport:{width:960,height:600,deviceScaleFactor:2,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nokia Lumia 520",userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:320,height:533,deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nokia Lumia 520 landscape",userAgent:"Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 520)",viewport:{width:533,height:320,deviceScaleFactor:1.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Nokia N9",userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:480,height:854,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Nokia N9 landscape",userAgent:"Mozilla/5.0 (MeeGo; NokiaN9) AppleWebKit/534.13 (KHTML, like Gecko) NokiaBrowser/8.5.0 Mobile Safari/534.13",viewport:{width:854,height:480,deviceScaleFactor:1,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 2",userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:731,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 2 landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0; Pixel 2 Build/OPD3.170816.012) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:731,height:411,deviceScaleFactor:2.625,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 2 XL",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:411,height:823,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 2 XL landscape",userAgent:"Mozilla/5.0 (Linux; Android 8.0.0; Pixel 2 XL Build/OPD1.170816.004) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3765.0 Mobile Safari/537.36",viewport:{width:823,height:411,deviceScaleFactor:3.5,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 3",userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36",viewport:{width:393,height:786,deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 3 landscape",userAgent:"Mozilla/5.0 (Linux; Android 9; Pixel 3 Build/PQ1A.181105.017.A1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.158 Mobile Safari/537.36",viewport:{width:786,height:393,deviceScaleFactor:2.75,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 4",userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36",viewport:{width:353,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 10; Pixel 4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.138 Mobile Safari/537.36",viewport:{width:745,height:353,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 4a (5G)",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:353,height:745,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 4a (5G) landscape",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 4a (5G)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:745,height:353,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Pixel 5",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:393,height:851,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Pixel 5 landscape",userAgent:"Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:851,height:393,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}},{name:"Moto G4",userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:360,height:640,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!1}},{name:"Moto G4 landscape",userAgent:"Mozilla/5.0 (Linux; Android 7.0; Moto G (4)) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4812.0 Mobile Safari/537.36",viewport:{width:640,height:360,deviceScaleFactor:3,isMobile:!0,hasTouch:!0,isLandscape:!0}}],uv={};for(const s of o_)uv[s.name]=s;Object.freeze(uv);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */async function c_(s,i,e){const{acceptInsecureCerts:t=!1,defaultViewport:n=cy}=e,{bidiConnection:a,cdpConnection:o,closeCallback:c}=await u_(s,i,e);return await(await Promise.resolve().then(()=>aS)).BidiBrowser.create({connection:a,cdpConnection:o,closeCallback:c,process:void 0,defaultViewport:n,acceptInsecureCerts:t,capabilities:e.capabilities})}async function u_(s,i,e){const t=await Promise.resolve().then(()=>aS),{slowMo:n=0,protocolTimeout:a}=e,o=new t.BidiConnection(i,s,n,a);try{const p=await o.send("session.status",{});if("type"in p&&p.type==="success")return{bidiConnection:o,closeCallback:async()=>{await o.send("browser.close",{}).catch(de)}}}catch(p){if(!(p instanceof ms))throw p}o.unbind();const c=new Uy(i,s,n,a,!0);if((await c.send("Browser.getVersion")).product.toLowerCase().includes("firefox"))throw new we("Firefox is not supported in BiDi over CDP mode.");const l=await t.connectBidiOverCdp(c);return{cdpConnection:c,bidiConnection:l,closeCallback:async()=>{await c.send("Browser.close").catch(de)}}}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const lv=async()=>sy?(await Promise.resolve().then(()=>NT)).NodeWebSocketTransport:(await Promise.resolve().then(()=>a_)).BrowserWebSocketTransport;async function l_(s){const{connectionTransport:i,endpointUrl:e}=await d_(s);return s.protocol==="webDriverBiDi"?await c_(i,e,s):await n_(i,e,s)}async function d_(s){const{browserWSEndpoint:i,browserURL:e,transport:t,headers:n={}}=s;if(te(+!!i+ +!!e+ +!!t==1,"Exactly one of browserWSEndpoint, browserURL or transport must be passed to puppeteer.connect"),t)return{connectionTransport:t,endpointUrl:""};if(i)return{connectionTransport:await(await lv()).create(i,n),endpointUrl:i};if(e){const a=await h_(e);return{connectionTransport:await(await lv()).create(a),endpointUrl:a}}throw new Error("Invalid connection options")}async function h_(s){const i=new URL("/json/version",s);try{const e=await globalThis.fetch(i.toString(),{method:"GET"});if(!e.ok)throw new Error(`HTTP ${e.statusText}`);return(await e.json()).webSocketDebuggerUrl}catch(e){throw Vt(e)&&(e.message=`Failed to fetch browser webSocket URL from ${i}: `+e.message),e}}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class dv{constructor(i){W(this,"_isPuppeteerCore");W(this,"_changedBrowsers",!1);this._isPuppeteerCore=i.isPuppeteerCore,this.connect=this.connect.bind(this)}static registerCustomQueryHandler(i,e){return this.customQueryHandlers.register(i,e)}static unregisterCustomQueryHandler(i){return this.customQueryHandlers.unregister(i)}static customQueryHandlerNames(){return this.customQueryHandlers.names()}static clearCustomQueryHandlers(){return this.customQueryHandlers.clear()}connect(i){return l_(i)}}W(dv,"customQueryHandlers",hp);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const f_=new dv({isPuppeteerCore:!0}),{connect:p_}=f_,m_="YYYY-MM-DD HH:mm:ss.SSS",g_={automateFetchJobItemData:async function(s,i){try{let e=await w_(i);pi(s,e)}catch(e){Zt(s,"[background] automateFetchJobItemData error : "+e.message)}}},ia=new Map;ia.set(Oe,y_),ia.set(be,v_),ia.set(us,S_),ia.set($d,C_),ia.set(rw,b_);async function w_({url:s,platform:i,delay:e,delayRandomRange:t,maxPage:n}){if(i==Oe){Mt(`[puppeteer] clear cookies platform = ${Oe} start`),Mt(`[puppeteer] clear cookies url = ${s}`);let l=await chrome.cookies.getAll({url:s});Mt(`[puppeteer] cookies length = ${l.length}`),l.forEach(async p=>{await chrome.cookies.remove({name:p.name,url:s,storeId:p.storeId})}),l=await chrome.cookies.getAll({url:s}),Mt("[puppeteer] clear cookies"),Mt(`[puppeteer] cookies length = ${l.length}`),Mt(`[puppeteer] clear cookies platform = ${Oe} end`)}let a=await chrome.windows.create({url:s,width:800,height:600});const o=a.tabs[0];Mt(`[puppeteer] create tab id = ${o.id}`);const c=await p_({transport:await Dp.connectTab(o.id)}),[u]=await c.pages();try{const l=ia.get(i);if(Mt(`[puppeteer] get job item page handle function platform = ${i}`),l){const p=new Date,h=await l(o,c,u,i,e,t,n);return h.startDatetime=p,h.endDatetime=new Date,h}else throw`not support platform = ${i}`}finally{u&&u.close(),a&&chrome.windows.remove(a.id)}}function xe(s,i){Mt(i),s.push(`${Kf(new Date).format(m_)} ${i}`)}async function y_(s,i,e,t,n,a,o){const c=[],u=[];let l=null,p=1;try{if(xe(c,`[puppeteer] [${t}] handle _51jobHandle`),await e.waitForSelector(".btn-next",{timeout:5e3})){for(;;){await e.waitForSelector(".__status_job_render_finish");let d=await e.waitForSelector(".btn-next");if(u.push(await e.screenshot({encoding:"base64",fullPage:!0})),p++,o&&o>0&&p>o){xe(c,`[puppeteer] [${t}] page(${p}) over maxPage(${o})`);break}if(await(await d.getProperty("disabled")).jsonValue()){xe(c,`[puppeteer] [${t}] is last page`),xe(c,`[puppeteer] [${t}] close page tab id = ${s.id}`);break}else xe(c,`[puppeteer] [${t}] has next page tab id = ${s.id}`),xe(c,`[puppeteer] [${t}] will go to page no = ${p}`),await Qo(n,a),await d.click(),xe(c,`[puppeteer] [${t}] go to page no = ${p}`)}return{logList:c,count:p,error:l,screenshotList:u}}else await chrome.tabs.reload(s.id)}catch(h){return Or(h),xe(c,`[puppeteer] [${t}] handle has error`),l=await sa(t,e)?fi:Kd,u.push(await e.screenshot({encoding:"base64",fullPage:!0})),{logList:c,count:p,error:l,screenshotList:u}}}async function v_(s,i,e,t,n,a,o){const c=[],u=[];let l=null,p=1;try{if(xe(c,`[puppeteer] [${t}] handle _bossHandle`),await e.waitForNavigation(),l=await sa(t,e)?fi:null,l==fi)throw"navigate to human valid page";try{await e.waitForSelector(".__status_job_render_finish",{timeout:5e3})}catch{await chrome.tabs.reload(s.id),await e.waitForSelector(".__status_job_render_finish")}for(;;){await e.waitForSelector(".__status_job_render_finish");let h=await e.waitForSelector(".ui-icon-arrow-right");if(u.push(await e.screenshot({encoding:"base64",fullPage:!0})),p++,o&&o>0&&p>o){xe(c,`[puppeteer] [${t}] page(${p}) over maxPage(${o})`);break}if(await e.evaluate(()=>{var b;const m=(b=document.querySelector(".ui-icon-arrow-right"))==null?void 0:b.parentElement;return(m==null?void 0:m.className)=="disabled"})){xe(c,`[puppeteer] [${t}] is last page`),xe(c,`[puppeteer] [${t}] close page tab id = ${s.id}`);break}else xe(c,`[puppeteer] [${t}] has next page tab id = ${s.id}`),xe(c,`[puppeteer] [${t}] will go to page no = ${p}`),await Qo(n,a),await e.evaluate(m=>{m.click()},h),xe(c,`[puppeteer] [${t}] go to page no = ${p}`)}return{logList:c,count:p,error:l,screenshotList:u}}catch(h){return Or(h),xe(c,`[puppeteer] [${t}] handle has error`),l=await sa(t,e)?fi:Kd,u.push(await e.screenshot({encoding:"base64",fullPage:!0})),{logList:c,count:p,error:l,screenshotList:u}}}async function b_(s,i,e,t,n,a,o){const c=[],u=[];let l=null,p=1;try{if(xe(c,`[puppeteer] [${t}] handle _liepinHandle`),await e.waitForNavigation(),l=await sa(t,e)?fi:null,l==fi)throw"navigate to human valid page";for(await e.waitForSelector(".__status_job_render_finish");;){await e.waitForSelector(".__status_job_render_finish");let h=await e.waitForSelector(".anticon-right");if(u.push(await e.screenshot({encoding:"base64",fullPage:!0})),p++,o&&o>0&&p>o){xe(c,`[puppeteer] [${t}] page(${p}) over maxPage(${o})`);break}if(await e.evaluate(()=>document.querySelector(".anticon-right").parentElement.disabled)){xe(c,`[puppeteer] [${t}] is last page`),xe(c,`[puppeteer] [${t}] close page tab id = ${s.id}`);break}else xe(c,`[puppeteer] [${t}] has next page tab id = ${s.id}`),xe(c,`[puppeteer] [${t}] will go to page no = ${p}`),await Qo(n,a),await h.click(),xe(c,`[puppeteer] [${t}] go to page no = ${p}`)}return{logList:c,count:p,error:l,screenshotList:u}}catch(h){return Or(h),xe(c,`[puppeteer] [${t}] handle has error`),l=await sa(t,e)?fi:Kd,u.push(await e.screenshot({encoding:"base64",fullPage:!0})),{logList:c,count:p,error:l,screenshotList:u}}}async function S_(s,i,e,t,n,a,o){return hv(s,i,e,t,n,a,o,{nextButtonSelector:".btn ::-p-text(下一页)",lastPageButtonSelector:"a.btn.soupager__btn.soupager__btn--disable"})}async function C_(s,i,e,t,n,a,o){return hv(s,i,e,t,n,a,o,{nextButtonSelector:".lg-pagination-next",lastPageButtonSelector:"li.lg-pagination-next.lg-pagination-disabled"})}async function hv(s,i,e,t,n,a,o,{nextButtonSelector:c,lastPageButtonSelector:u}){const l=[],p=[];let h=null,d=1;try{xe(l,`[puppeteer] [${t}] handle _handle`);try{await e.waitForNavigation({timeout:5e3})}catch{xe(l,`[puppeteer] [${t}] waitForNavigation error`)}for(;;){await e.waitForSelector(".__status_job_render_finish");let m=await e.waitForSelector(`${c}`);if(p.push(await e.screenshot({encoding:"base64",fullPage:!0})),d++,o&&o>0&&d>o){xe(l,`[puppeteer] [${t}] page(${d}) over maxPage(${o})`);break}if(m.remoteObject().description==`${u}`){xe(l,`[puppeteer] [${t}] is last page`),xe(l,`[puppeteer] [${t}] close page tab id = ${s.id}`);break}else xe(l,`[puppeteer] [${t}] has next page tab id = ${s.id}`),xe(l,`[puppeteer] [${t}] will go to page no = ${d}`),m=await e.waitForSelector(`${c}`),await Qo(n,a),await m.click(),xe(l,`[puppeteer] [${t}] go to page no = ${d}`)}return{logList:l,count:d,error:h,screenshotList:p}}catch(m){return Or(m),xe(l,`[puppeteer] [${t}] handle has error`),h=await sa(t,e)?fi:Kd,p.push(await e.screenshot({encoding:"base64",fullPage:!0})),{logList:l,count:d,error:h,screenshotList:p}}}async function sa(s,i){try{if(s==be)return i.url().startsWith("https://www.zhipin.com/web/user/safe/verify-slider");if(s==Oe)return!!await i.waitForSelector(".waf-nc-wrapper",{timeout:5e3});if(s==us)return!!await i.waitForSelector(".__status_job_render_error",{timeout:5e3});if(s==$d)return!1;if(s==rw)return!1;throw`checkValidHuman unknow platform ${s}`}catch{return!1}}const k_={emitterEmit:async function(s,i){try{await chrome.storage.local.set(i),pi(s,{})}catch(e){Zt(s,"[background] emitterEmit error : "+e.message)}}},E_={systemTabCreate:async function(s,i){try{pi(s,await chrome.tabs.create(i))}catch(e){Zt(s,"[background] userGet error : "+e.message)}}},x_={userGet:async function(s,i){try{pi(s,await P_())}catch(e){Zt(s,"[background] userGet error : "+e.message)}},userSet:async function(s,i){try{await fv(i),pi(s,{})}catch(e){Zt(s,"[background] userSet error : "+e.message)}}};async function fv(s){let i=new kw;return i.key=nw,i.value=JSON.stringify(s),Hd.addOrUpdateConfig(i)}async function P_(){let s=new yw,i=await Hd.getConfigByKey(nw);if(i){let e=JSON.parse(i.value);if(e)return Object.assign(s,e),s}return null}const __=_e(()=>{chrome.runtime.onInstalled.addListener(async()=>{const h=[{id:1,action:{type:chrome.declarativeNetRequest.RuleActionType.MODIFY_HEADERS,requestHeaders:[{header:"Referer",operation:chrome.declarativeNetRequest.HeaderOperation.SET,value:"https://creditbj.jxj.beijing.gov.cn/credit-portal/credit_service/publicity/record/black"}]},condition:{initiatorDomains:[chrome.runtime.id],urlFilter:"|https://creditbj.jxj.beijing.gov.cn/credit-portal/api/publicity/record/BLACK/0",resourceTypes:[chrome.declarativeNetRequest.ResourceType.XMLHTTPREQUEST]}}];await chrome.declarativeNetRequest.updateDynamicRules({removeRuleIds:h.map(d=>d.id),addRules:h})});const s=()=>setInterval(chrome.runtime.getPlatformInfo,2e4);chrome.runtime.onStartup.addListener(s),s(),chrome.action.onClicked.addListener(()=>{chrome.tabs.create({url:"admin.html"})});const i=new Map,e=new Map;chrome.tabs.onUpdated.addListener(async(h,d,m)=>{let b=m.url;if(b!=null&&b.startsWith(Nk)&&!t(b)){let w=cE();n(b);let g=new URL(b);if(g.searchParams.has("error"))w.keys().forEach(S=>{Zt(S)}),w.clear();else{let S=g.searchParams.get("code");try{const E=new URLSearchParams({client_id:sw,client_secret:Ak,code:S});let v=`${Fk}?${E.toString()}`,C=await Jk(v,L=>{}),A=new URLSearchParams(C);const F=aE(A);let R=Cw(new mw,F);await Ew(R);let P=await Yk({url:Ok,headers:{Authorization:`Bearer ${R.accessToken}`}},L=>{}),T=Cw(new yw,P);await fv(T);let q=await xw();w.keys().forEach(L=>{pi(L,q)}),chrome.tabs.remove(h),w.clear()}catch(E){Or(E),w.keys().forEach(v=>{Zt(v)})}}return}if((d==null?void 0:d.status)=="complete"&&!a(m.id)&&m.url){let w=nE(m.url),g=await gw.getJobByDetailUrl(w);g&&(Mt(`save jobBrowseDetailHistory start jobId = ${g.jobId}`),await gw.addJobBrowseDetailHistory(g.jobId),Mt(`save jobBrowseDetailHistory success jobId = ${g.jobId}`),o(m.id))}});function t(h){return e.has(h)}function n(h){e.set(h,null)}function a(h){return i.has(h)}function o(h){i.set(h,null)}const c=new Map,{mergeServiceMethod:u}=Gk();u(c,oE),u(c,x_),u(c,E_),u(c,g_),u(c,k_);let l;async function p(h){var d,m;if(!await((m=(d=chrome.offscreen).hasDocument)==null?void 0:m.call(d))){if(l)await l;else{l=chrome.offscreen.createDocument({url:chrome.runtime.getURL(h),reasons:[chrome.offscreen.Reason.WORKERS||chrome.offscreen.Reason.BLOBS],justification:"To run database in web worker"}),await l,l=null;let b=0,w=!1;const g=async()=>{if(!w){w=!0;try{b+=1,Mt(`[Task] Task run seq = < ${b} >`),await Xk.appBackgroundTaskRun({})}catch(S){Or(S)}w=!1,await Qo(Lk,0),g()}};g()}chrome.runtime.onMessage.addListener(async function(b,w,g){Vk(b,w,c)})}}p("offscreen.html")});function zT(){}((wS=(gS=globalThis.browser)==null?void 0:gS.runtime)==null?void 0:wS.id)==null?globalThis.chrome:globalThis.browser;function Ih(s,...i){}const T_={debug:(...s)=>Ih(console.debug,...s),log:(...s)=>Ih(console.log,...s),warn:(...s)=>Ih(console.warn,...s),error:(...s)=>Ih(console.error,...s)};let Op;try{Op=__.main(),Op instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(s){throw T_.error("The background crashed on startup!"),s}const M_=Op;var Ah={exports:{}},Np,pv;function I_(){if(pv)return Np;pv=1;var s=1e3,i=s*60,e=i*60,t=e*24,n=t*7,a=t*365.25;Np=function(p,h){h=h||{};var d=typeof p;if(d==="string"&&p.length>0)return o(p);if(d==="number"&&isFinite(p))return h.long?u(p):c(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function o(p){if(p=String(p),!(p.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(h){var d=parseFloat(h[1]),m=(h[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return d*a;case"weeks":case"week":case"w":return d*n;case"days":case"day":case"d":return d*t;case"hours":case"hour":case"hrs":case"hr":case"h":return d*e;case"minutes":case"minute":case"mins":case"min":case"m":return d*i;case"seconds":case"second":case"secs":case"sec":case"s":return d*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function c(p){var h=Math.abs(p);return h>=t?Math.round(p/t)+"d":h>=e?Math.round(p/e)+"h":h>=i?Math.round(p/i)+"m":h>=s?Math.round(p/s)+"s":p+"ms"}function u(p){var h=Math.abs(p);return h>=t?l(p,h,t,"day"):h>=e?l(p,h,e,"hour"):h>=i?l(p,h,i,"minute"):h>=s?l(p,h,s,"second"):p+" ms"}function l(p,h,d,m){var b=h>=d*1.5;return Math.round(p/d)+" "+m+(b?"s":"")}return Np}var Lp,mv;function A_(){if(mv)return Lp;mv=1;function s(i){t.debug=t,t.default=t,t.coerce=l,t.disable=c,t.enable=a,t.enabled=u,t.humanize=I_(),t.destroy=p,Object.keys(i).forEach(h=>{t[h]=i[h]}),t.names=[],t.skips=[],t.formatters={};function e(h){let d=0;for(let m=0;m<h.length;m++)d=(d<<5)-d+h.charCodeAt(m),d|=0;return t.colors[Math.abs(d)%t.colors.length]}t.selectColor=e;function t(h){let d,m=null,b,w;function g(...S){if(!g.enabled)return;const E=g,v=Number(new Date),C=v-(d||v);E.diff=C,E.prev=d,E.curr=v,d=v,S[0]=t.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let A=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(R,P)=>{if(R==="%%")return"%";A++;const T=t.formatters[P];if(typeof T=="function"){const q=S[A];R=T.call(E,q),S.splice(A,1),A--}return R}),t.formatArgs.call(E,S),(E.log||t.log).apply(E,S)}return g.namespace=h,g.useColors=t.useColors(),g.color=t.selectColor(h),g.extend=n,g.destroy=t.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(b!==t.namespaces&&(b=t.namespaces,w=t.enabled(h)),w),set:S=>{m=S}}),typeof t.init=="function"&&t.init(g),g}function n(h,d){const m=t(this.namespace+(typeof d>"u"?":":d)+h);return m.log=this.log,m}function a(h){t.save(h),t.namespaces=h,t.names=[],t.skips=[];const d=(typeof h=="string"?h:"").trim().replace(" ",",").split(",").filter(Boolean);for(const m of d)m[0]==="-"?t.skips.push(m.slice(1)):t.names.push(m)}function o(h,d){let m=0,b=0,w=-1,g=0;for(;m<h.length;)if(b<d.length&&(d[b]===h[m]||d[b]==="*"))d[b]==="*"?(w=b,g=m,b++):(m++,b++);else if(w!==-1)b=w+1,g++,m=g;else return!1;for(;b<d.length&&d[b]==="*";)b++;return b===d.length}function c(){const h=[...t.names,...t.skips.map(d=>"-"+d)].join(",");return t.enable(""),h}function u(h){for(const d of t.skips)if(o(h,d))return!1;for(const d of t.names)if(o(h,d))return!0;return!1}function l(h){return h instanceof Error?h.stack||h.message:h}function p(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}return Lp=s,Lp}var gv;function R_(){return gv||(gv=1,function(s,i){i.formatArgs=t,i.save=n,i.load=a,i.useColors=e,i.storage=o(),i.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),i.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function t(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;u.splice(1,0,l,"color: inherit");let p=0,h=0;u[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(p++,d==="%c"&&(h=p))}),u.splice(h,0,l)}i.log=console.debug||console.log||(()=>{});function n(u){try{u?i.storage.setItem("debug",u):i.storage.removeItem("debug")}catch{}}function a(){let u;try{u=i.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=process.env.DEBUG),u}function o(){try{return localStorage}catch{}}s.exports=A_()(i);const{formatters:c}=s.exports;c.j=function(u){try{return JSON.stringify(u)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}}(Ah,Ah.exports)),Ah.exports}var D_=R_();const F_=Object.freeze(Object.defineProperty({__proto__:null,default:$f(D_)},Symbol.toStringTag,{value:"Module"}));var Bp={},dc={},na={};function O_(s){return{all:s=s||new Map,on:function(i,e){var t=s.get(i);t?t.push(e):s.set(i,[e])},off:function(i,e){var t=s.get(i);t&&(e?t.splice(t.indexOf(e)>>>0,1):s.set(i,[]))},emit:function(i,e){var t=s.get(i);t&&t.slice().map(function(n){n(e)}),(t=s.get("*"))&&t.slice().map(function(n){n(i,e)})}}}const N_=ow(Object.freeze(Object.defineProperty({__proto__:null,default:O_},Symbol.toStringTag,{value:"Module"})));var wv;function aa(){var t,n;if(wv)return na;wv=1;var s=na.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(na,"__esModule",{value:!0}),na.EventEmitter=void 0;const i=s(N_);let e=(n=class{constructor(){f(this,t,(0,i.default)())}on(o,c){return r(this,t).on(o,c),this}once(o,c){const u=l=>{c(l),this.off(o,u)};return this.on(o,u)}off(o,c){return r(this,t).off(o,c),this}emit(o,c){r(this,t).emit(o,c)}removeAllListeners(o){return o?r(this,t).all.delete(o):r(this,t).all.clear(),this}},t=new WeakMap,n);return na.EventEmitter=e,na}var hc={},yv;function Xt(){if(yv)return hc;yv=1,Object.defineProperty(hc,"__esModule",{value:!0}),hc.LogType=void 0;var s;return function(i){i.bidi="bidi",i.cdp="cdp",i.debug="debug",i.debugError="debug:error",i.debugInfo="debug:info"}(s||(hc.LogType=s={})),hc}var fc={},vv;function L_(){var t,n,a,o,c,u,LC;if(vv)return fc;vv=1;var s;Object.defineProperty(fc,"__esModule",{value:!0}),fc.ProcessingQueue=void 0;const i=Xt();let e=(t=class{constructor(h,d){f(this,u);f(this,n);f(this,a);f(this,o,[]);f(this,c,!1);y(this,a,h),y(this,n,d)}add(h,d){r(this,o).push([h,d]),k(this,u,LC).call(this)}},n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakSet,LC=async function(){var h;if(!r(this,c)){for(y(this,c,!0);r(this,o).length>0;){const d=r(this,o).shift();if(!d)continue;const[m,b]=d;(h=r(this,n))==null||h.call(this,s.LOGGER_PREFIX,"Processing event:",b),await m.then(w=>{var g;if(w.kind==="error"){(g=r(this,n))==null||g.call(this,i.LogType.debugError,"Event threw before sending:",w.error.message,w.error.stack);return}return r(this,a).call(this,w.value)}).catch(w=>{var g;(g=r(this,n))==null||g.call(this,i.LogType.debugError,"Event was not processed:",w==null?void 0:w.message)})}y(this,c,!1)}},W(t,"LOGGER_PREFIX",`${i.LogType.debug}:queue`),t);return fc.ProcessingQueue=e,s=e,fc}var pc={},Ss={},jp={},bv;function B_(){return bv||(bv=1,Object.defineProperty(jp,"__esModule",{value:!0})),jp}var wt={},Sv;function Cv(){if(Sv)return wt;Sv=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.EVENT_NAMES=wt.Bluetooth=wt.Network=wt.BrowsingContext=wt.Log=wt.Script=wt.BiDiModule=void 0;var s;(function(o){o.Bluetooth="bluetooth",o.Browser="browser",o.BrowsingContext="browsingContext",o.Cdp="goog:cdp",o.DeprecatedCdp="cdp",o.Input="input",o.Log="log",o.Network="network",o.Script="script",o.Session="session"})(s||(wt.BiDiModule=s={}));var i;(function(o){(function(c){c.Message="script.message",c.RealmCreated="script.realmCreated",c.RealmDestroyed="script.realmDestroyed"})(o.EventNames||(o.EventNames={}))})(i||(wt.Script=i={}));var e;(function(o){(function(c){c.LogEntryAdded="log.entryAdded"})(o.EventNames||(o.EventNames={}))})(e||(wt.Log=e={}));var t;(function(o){(function(c){c.ContextCreated="browsingContext.contextCreated",c.ContextDestroyed="browsingContext.contextDestroyed",c.DomContentLoaded="browsingContext.domContentLoaded",c.DownloadWillBegin="browsingContext.downloadWillBegin",c.FragmentNavigated="browsingContext.fragmentNavigated",c.HistoryUpdated="browsingContext.historyUpdated",c.Load="browsingContext.load",c.NavigationAborted="browsingContext.navigationAborted",c.NavigationFailed="browsingContext.navigationFailed",c.NavigationStarted="browsingContext.navigationStarted",c.UserPromptClosed="browsingContext.userPromptClosed",c.UserPromptOpened="browsingContext.userPromptOpened"})(o.EventNames||(o.EventNames={}))})(t||(wt.BrowsingContext=t={}));var n;(function(o){(function(c){c.AuthRequired="network.authRequired",c.BeforeRequestSent="network.beforeRequestSent",c.FetchError="network.fetchError",c.ResponseCompleted="network.responseCompleted",c.ResponseStarted="network.responseStarted"})(o.EventNames||(o.EventNames={}))})(n||(wt.Network=n={}));var a;return function(o){(function(c){c.RequestDevicePromptUpdated="bluetooth.requestDevicePromptUpdated"})(o.EventNames||(o.EventNames={}))}(a||(wt.Bluetooth=a={})),wt.EVENT_NAMES=new Set([...Object.values(s),...Object.values(t.EventNames),...Object.values(e.EventNames),...Object.values(n.EventNames),...Object.values(i.EventNames)]),wt}var qp={},kv;function j_(){return kv||(kv=1,Object.defineProperty(qp,"__esModule",{value:!0})),qp}var me={},Ev;function xv(){if(Ev)return me;Ev=1,Object.defineProperty(me,"__esModule",{value:!0}),me.NoSuchWebExtensionException=me.InvalidWebExtensionException=me.UnderspecifiedStoragePartitionException=me.UnableToSetFileInputException=me.UnableToSetCookieException=me.NoSuchStoragePartitionException=me.UnsupportedOperationException=me.UnableToCloseBrowserException=me.UnableToCaptureScreenException=me.UnknownErrorException=me.UnknownCommandException=me.SessionNotCreatedException=me.NoSuchUserContextException=me.NoSuchScriptException=me.NoSuchRequestException=me.NoSuchNodeException=me.NoSuchInterceptException=me.NoSuchHistoryEntryException=me.NoSuchHandleException=me.NoSuchFrameException=me.NoSuchElementException=me.NoSuchAlertException=me.MoveTargetOutOfBoundsException=me.InvalidSessionIdException=me.InvalidSelectorException=me.InvalidArgumentException=me.Exception=void 0;class s extends Error{constructor(_,K,j){super();W(this,"error");W(this,"message");W(this,"stacktrace");this.error=_,this.message=K,this.stacktrace=j}toErrorResponse(_){return{type:"error",id:_,error:this.error,message:this.message,stacktrace:this.stacktrace}}}me.Exception=s;class i extends s{constructor(I,_){super("invalid argument",I,_)}}me.InvalidArgumentException=i;class e extends s{constructor(I,_){super("invalid selector",I,_)}}me.InvalidSelectorException=e;class t extends s{constructor(I,_){super("invalid session id",I,_)}}me.InvalidSessionIdException=t;class n extends s{constructor(I,_){super("move target out of bounds",I,_)}}me.MoveTargetOutOfBoundsException=n;class a extends s{constructor(I,_){super("no such alert",I,_)}}me.NoSuchAlertException=a;class o extends s{constructor(I,_){super("no such element",I,_)}}me.NoSuchElementException=o;class c extends s{constructor(I,_){super("no such frame",I,_)}}me.NoSuchFrameException=c;class u extends s{constructor(I,_){super("no such handle",I,_)}}me.NoSuchHandleException=u;class l extends s{constructor(I,_){super("no such history entry",I,_)}}me.NoSuchHistoryEntryException=l;class p extends s{constructor(I,_){super("no such intercept",I,_)}}me.NoSuchInterceptException=p;class h extends s{constructor(I,_){super("no such node",I,_)}}me.NoSuchNodeException=h;class d extends s{constructor(I,_){super("no such request",I,_)}}me.NoSuchRequestException=d;class m extends s{constructor(I,_){super("no such script",I,_)}}me.NoSuchScriptException=m;class b extends s{constructor(I,_){super("no such user context",I,_)}}me.NoSuchUserContextException=b;class w extends s{constructor(I,_){super("session not created",I,_)}}me.SessionNotCreatedException=w;class g extends s{constructor(I,_){super("unknown command",I,_)}}me.UnknownCommandException=g;class S extends s{constructor(I,_=new Error().stack){super("unknown error",I,_)}}me.UnknownErrorException=S;class E extends s{constructor(I,_){super("unable to capture screen",I,_)}}me.UnableToCaptureScreenException=E;class v extends s{constructor(I,_){super("unable to close browser",I,_)}}me.UnableToCloseBrowserException=v;class C extends s{constructor(I,_){super("unsupported operation",I,_)}}me.UnsupportedOperationException=C;class A extends s{constructor(I,_){super("no such storage partition",I,_)}}me.NoSuchStoragePartitionException=A;class F extends s{constructor(I,_){super("unable to set cookie",I,_)}}me.UnableToSetCookieException=F;class R extends s{constructor(I,_){super("unable to set file input",I,_)}}me.UnableToSetFileInputException=R;class P extends s{constructor(I,_){super("underspecified storage partition",I,_)}}me.UnderspecifiedStoragePartitionException=P;class T extends s{constructor(I,_){super("invalid web extension",I,_)}}me.InvalidWebExtensionException=T;class q extends s{constructor(I,_){super("no such web extension",I,_)}}return me.NoSuchWebExtensionException=q,me}var $p={},Pv;function q_(){return Pv||(Pv=1,Object.defineProperty($p,"__esModule",{value:!0})),$p}var Kp={},_v;function $_(){return _v||(_v=1,Object.defineProperty(Kp,"__esModule",{value:!0})),Kp}var Tv;function Le(){return Tv||(Tv=1,function(s){var i=Ss.__createBinding||(Object.create?function(a,o,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(o,c);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(a,u,l)}:function(a,o,c,u){u===void 0&&(u=c),a[u]=o[c]}),e=Ss.__setModuleDefault||(Object.create?function(a,o){Object.defineProperty(a,"default",{enumerable:!0,value:o})}:function(a,o){a.default=o}),t=Ss.__importStar||function(){var a=function(o){return a=Object.getOwnPropertyNames||function(c){var u=[];for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&(u[u.length]=l);return u},a(o)};return function(o){if(o&&o.__esModule)return o;var c={};if(o!=null)for(var u=a(o),l=0;l<u.length;l++)u[l]!=="default"&&i(c,o,u[l]);return e(c,o),c}}(),n=Ss.__exportStar||function(a,o){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&i(o,a,c)};Object.defineProperty(s,"__esModule",{value:!0}),s.ChromiumBidi=s.Cdp=void 0,s.Cdp=t(B_()),s.ChromiumBidi=t(Cv()),n(j_(),s),n(xv(),s),n(q_(),s),n($_(),s)}(Ss)),Ss}var mc={},Mv;function K_(){if(Mv)return mc;Mv=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.BidiNoOpParser=void 0;let s=class{parseHandleRequestDevicePromptParams(e){return e}parseSimulateAdapterParameters(e){return e}parseSimulateAdvertisementParameters(e){return e}parseSimulatePreconnectedPeripheralParameters(e){return e}parseRemoveUserContextParams(e){return e}parseActivateParams(e){return e}parseCaptureScreenshotParams(e){return e}parseCloseParams(e){return e}parseCreateParams(e){return e}parseGetTreeParams(e){return e}parseHandleUserPromptParams(e){return e}parseLocateNodesParams(e){return e}parseNavigateParams(e){return e}parsePrintParams(e){return e}parseReloadParams(e){return e}parseSetViewportParams(e){return e}parseTraverseHistoryParams(e){return e}parseGetSessionParams(e){return e}parseResolveRealmParams(e){return e}parseSendCommandParams(e){return e}parseAddPreloadScriptParams(e){return e}parseCallFunctionParams(e){return e}parseDisownParams(e){return e}parseEvaluateParams(e){return e}parseGetRealmsParams(e){return e}parseRemovePreloadScriptParams(e){return e}parsePerformActionsParams(e){return e}parseReleaseActionsParams(e){return e}parseSetFilesParams(e){return e}parseAddInterceptParams(e){return e}parseContinueRequestParams(e){return e}parseContinueResponseParams(e){return e}parseContinueWithAuthParams(e){return e}parseFailRequestParams(e){return e}parseProvideResponseParams(e){return e}parseRemoveInterceptParams(e){return e}parseSetCacheBehavior(e){return e}parseSetPermissionsParams(e){return e}parseSubscribeParams(e){return e}parseDeleteCookiesParams(e){return e}parseGetCookiesParams(e){return e}parseSetCookieParams(e){return e}};return mc.BidiNoOpParser=s,mc}var gc={},Iv;function U_(){var e,t,n,BC,o;if(Iv)return gc;Iv=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.BrowserProcessor=void 0;const s=Le();let i=(o=class{constructor(u,l){f(this,n);f(this,e);f(this,t);y(this,e,u),y(this,t,l)}close(){return setTimeout(()=>r(this,e).sendCommand("Browser.close"),0),{}}async createUserContext(u){const l={proxyServer:u["goog:proxyServer"]??void 0},p=u["goog:proxyBypassList"]??void 0;return p&&(l.proxyBypassList=p.join(",")),{userContext:(await r(this,e).sendCommand("Target.createBrowserContext",l)).browserContextId}}async removeUserContext(u){const l=u.userContext;if(l==="default")throw new s.InvalidArgumentException("`default` user context cannot be removed");try{await r(this,e).sendCommand("Target.disposeBrowserContext",{browserContextId:l})}catch(p){throw p.message.startsWith("Failed to find context with id")?new s.NoSuchUserContextException(p.message):p}return{}}async getUserContexts(){const u=await r(this,e).sendCommand("Target.getBrowserContexts");return{userContexts:[{userContext:"default"},...u.browserContextIds.map(l=>({userContext:l}))]}}async getClientWindows(){const u=r(this,t).getTopLevelContexts().map(d=>d.cdpTarget.id),l=await Promise.all(u.map(async d=>await k(this,n,BC).call(this,d))),p=new Set,h=new Array;for(const d of l)p.has(d.clientWindow)||(p.add(d.clientWindow),h.push(d));return{clientWindows:h}}},e=new WeakMap,t=new WeakMap,n=new WeakSet,BC=async function(u){const l=await r(this,e).sendCommand("Browser.getWindowForTarget",{targetId:u});return{active:!1,clientWindow:`${l.windowId}`,state:l.bounds.windowState??"normal",height:l.bounds.height??0,width:l.bounds.width??0,x:l.bounds.left??0,y:l.bounds.top??0}},o);return gc.BrowserProcessor=i,gc}var wc={},Av;function H_(){var e,t,n,a,o;if(Av)return wc;Av=1,Object.defineProperty(wc,"__esModule",{value:!0}),wc.CdpProcessor=void 0;const s=Le();let i=(o=class{constructor(u,l,p,h){f(this,e);f(this,t);f(this,n);f(this,a);y(this,e,u),y(this,t,l),y(this,n,p),y(this,a,h)}getSession(u){const l=u.context,p=r(this,e).getContext(l).cdpTarget.cdpSessionId;return p===void 0?{}:{session:p}}resolveRealm(u){const l=u.realm,p=r(this,t).getRealm({realmId:l});if(p===void 0)throw new s.UnknownErrorException(`Could not find realm ${u.realm}`);return{executionContextId:p.executionContextId}}async sendCommand(u){return{result:await(u.session?r(this,n).getCdpClient(u.session):r(this,a)).sendCommand(u.method,u.params),session:u.session}}},e=new WeakMap,t=new WeakMap,n=new WeakMap,a=new WeakMap,o);return wc.CdpProcessor=i,wc}var yc={},Rv;function W_(){var e,t,n,a,jC,c;if(Rv)return yc;Rv=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.BrowsingContextProcessor=void 0;const s=Le();let i=(c=class{constructor(l,p,h){f(this,a);f(this,e);f(this,t);f(this,n);y(this,e,l),y(this,t,p),y(this,n,h),r(this,n).addSubscribeHook(s.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,k(this,a,jC).bind(this))}getTree(l){return{contexts:(l.root===void 0?r(this,t).getTopLevelContexts():[r(this,t).getContext(l.root)]).map(h=>h.serializeToBidiValue(l.maxDepth??Number.MAX_VALUE))}}async create(l){let p,h="default";if(l.referenceContext!==void 0){if(p=r(this,t).getContext(l.referenceContext),!p.isTopLevelContext())throw new s.InvalidArgumentException("referenceContext should be a top-level context");h=p.userContext}l.userContext!==void 0&&(h=l.userContext);const d=r(this,t).getAllContexts().filter(g=>g.userContext===h);let m=!1;switch(l.type){case"tab":m=!1;break;case"window":m=!0;break}d.length||(m=!0);let b;try{b=await r(this,e).sendCommand("Target.createTarget",{url:"about:blank",newWindow:m,browserContextId:h==="default"?void 0:h,background:l.background===!0})}catch(g){throw g.message.startsWith("Failed to find browser context with id")||g.message==="browserContextId"?new s.NoSuchUserContextException(`The context ${h} was not found`):g}const w=await r(this,t).waitForContext(b.targetId);return await w.lifecycleLoaded(),{context:w.id}}navigate(l){return r(this,t).getContext(l.context).navigate(l.url,l.wait??"none")}reload(l){return r(this,t).getContext(l.context).reload(l.ignoreCache??!1,l.wait??"none")}async activate(l){const p=r(this,t).getContext(l.context);if(!p.isTopLevelContext())throw new s.InvalidArgumentException("Activation is only supported on the top-level context");return await p.activate(),{}}async captureScreenshot(l){return await r(this,t).getContext(l.context).captureScreenshot(l)}async print(l){return await r(this,t).getContext(l.context).print(l)}async setViewport(l){const p=r(this,t).getContext(l.context);if(!p.isTopLevelContext())throw new s.InvalidArgumentException("Emulating viewport is only supported on the top-level context");return await p.setViewport(l.viewport,l.devicePixelRatio),{}}async traverseHistory(l){const p=r(this,t).getContext(l.context);if(!p)throw new s.InvalidArgumentException(`No browsing context with id ${l.context}`);if(!p.isTopLevelContext())throw new s.InvalidArgumentException("Traversing history is only supported on the top-level context");return await p.traverseHistory(l.delta),{}}async handleUserPrompt(l){var h;const p=r(this,t).getContext(l.context);try{await p.handleUserPrompt(l.accept,l.userText)}catch(d){throw(h=d.message)!=null&&h.includes("No dialog is showing")?new s.NoSuchAlertException("No dialog is showing"):d}return{}}async close(l){const p=r(this,t).getContext(l.context);if(!p.isTopLevelContext())throw new s.InvalidArgumentException(`Non top-level browsing context ${p.id} cannot be closed.`);const h=p.cdpTarget.parentCdpClient;try{const d=new Promise(m=>{const b=w=>{w.targetId===l.context&&(h.off("Target.detachedFromTarget",b),m())};h.on("Target.detachedFromTarget",b)});try{l.promptUnload?await p.close():await h.sendCommand("Target.closeTarget",{targetId:l.context})}catch(m){if(!h.isCloseError(m))throw m}await d}catch(d){if(!(d.code===-32e3&&d.message==="Not attached to an active page"))throw d}return{}}async locateNodes(l){return await r(this,t).getContext(l.context).locateNodes(l)}},e=new WeakMap,t=new WeakMap,n=new WeakMap,a=new WeakSet,jC=function(l){return[r(this,t).getContext(l),...r(this,t).getContext(l).allChildren].forEach(d=>{r(this,n).registerEvent({type:"event",method:s.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,params:d.serializeToBidiValue()},d.id)}),Promise.resolve()},c);return yc.BrowsingContextProcessor=i,yc}var vc={},Rh={},Dv;function Cs(){if(Dv)return Rh;Dv=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.assert=s;function s(i,e){if(!i)throw new Error(e??"Internal assertion failed.")}return Rh}var bc={},Sc={},Fv;function z_(){if(Fv)return Sc;Fv=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.isSingleComplexGrapheme=s,Sc.isSingleGrapheme=i;function s(e){return i(e)&&e.length>1}function i(e){return[...new Intl.Segmenter("en",{granularity:"grapheme"}).segment(e)].length===1}return Sc}var ir={},Ov;function Nv(){var n,a,Nd,c,u,l,p,h,d,m;if(Ov)return ir;Ov=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.WheelSource=ir.PointerSource=ir.KeySource=ir.NoneSource=void 0;class s{constructor(){W(this,"type","none")}}ir.NoneSource=s;class i{constructor(){f(this,a);W(this,"type","key");W(this,"pressed",new Set);f(this,n,0)}get modifiers(){return r(this,n)}get alt(){return(r(this,n)&1)===1}set alt(w){k(this,a,Nd).call(this,w,1)}get ctrl(){return(r(this,n)&2)===2}set ctrl(w){k(this,a,Nd).call(this,w,2)}get meta(){return(r(this,n)&4)===4}set meta(w){k(this,a,Nd).call(this,w,4)}get shift(){return(r(this,n)&8)===8}set shift(w){k(this,a,Nd).call(this,w,8)}}n=new WeakMap,a=new WeakSet,Nd=function(w,g){w?y(this,n,r(this,n)|g):y(this,n,r(this,n)&~g)},ir.KeySource=i;class e{constructor(w,g){W(this,"type","pointer");W(this,"subtype");W(this,"pointerId");W(this,"pressed",new Set);W(this,"x",0);W(this,"y",0);W(this,"radiusX");W(this,"radiusY");W(this,"force");f(this,m,new Map);this.pointerId=w,this.subtype=g}get buttons(){let w=0;for(const g of this.pressed)switch(g){case 0:w|=1;break;case 1:w|=4;break;case 2:w|=2;break;case 3:w|=8;break;case 4:w|=16;break}return w}setClickCount(w,g){let S=r(this,m).get(w);return(!S||S.compare(g))&&(S=g),++S.count,r(this,m).set(w,S),S.count}getClickCount(w){var g;return((g=r(this,m).get(w))==null?void 0:g.count)??0}}m=new WeakMap,W(e,"ClickContext",(c=class{constructor(g,S,E){W(this,"count",0);f(this,p);f(this,h);f(this,d);y(this,p,g),y(this,h,S),y(this,d,E)}compare(g){return r(g,d)-r(this,d)>r(c,u)||Math.abs(r(g,p)-r(this,p))>r(c,l)||Math.abs(r(g,h)-r(this,h))>r(c,l)}},u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakMap,f(c,u,500),f(c,l,2),c)),ir.PointerSource=e;class t{constructor(){W(this,"type","wheel")}}return ir.WheelSource=t,ir}var oa={},Lv;function V_(){if(Lv)return oa;Lv=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.getNormalizedKey=s,oa.getKeyCode=i,oa.getKeyLocation=e;function s(t){switch(t){case"":return"Unidentified";case"":return"Cancel";case"":return"Help";case"":return"Backspace";case"":return"Tab";case"":return"Clear";case"":case"":return"Enter";case"":return"Shift";case"":return"Control";case"":return"Alt";case"":return"Pause";case"":return"Escape";case"":return" ";case"":return"PageUp";case"":return"PageDown";case"":return"End";case"":return"Home";case"":return"ArrowLeft";case"":return"ArrowUp";case"":return"ArrowRight";case"":return"ArrowDown";case"":return"Insert";case"":return"Delete";case"":return";";case"":return"=";case"":return"0";case"":return"1";case"":return"2";case"":return"3";case"":return"4";case"":return"5";case"":return"6";case"":return"7";case"":return"8";case"":return"9";case"":return"*";case"":return"+";case"":return",";case"":return"-";case"":return".";case"":return"/";case"":return"F1";case"":return"F2";case"":return"F3";case"":return"F4";case"":return"F5";case"":return"F6";case"":return"F7";case"":return"F8";case"":return"F9";case"":return"F10";case"":return"F11";case"":return"F12";case"":return"Meta";case"":return"ZenkakuHankaku";case"":return"Shift";case"":return"Control";case"":return"Alt";case"":return"Meta";case"":return"PageUp";case"":return"PageDown";case"":return"End";case"":return"Home";case"":return"ArrowLeft";case"":return"ArrowUp";case"":return"ArrowRight";case"":return"ArrowDown";case"":return"Insert";case"":return"Delete";default:return t}}function i(t){switch(t){case"`":case"~":return"Backquote";case"\\":case"|":return"Backslash";case"":return"Backspace";case"[":case"{":return"BracketLeft";case"]":case"}":return"BracketRight";case",":case"<":return"Comma";case"0":case")":return"Digit0";case"1":case"!":return"Digit1";case"2":case"@":return"Digit2";case"3":case"#":return"Digit3";case"4":case"$":return"Digit4";case"5":case"%":return"Digit5";case"6":case"^":return"Digit6";case"7":case"&":return"Digit7";case"8":case"*":return"Digit8";case"9":case"(":return"Digit9";case"=":case"+":return"Equal";case">":return"IntlBackslash";case"a":case"A":return"KeyA";case"b":case"B":return"KeyB";case"c":case"C":return"KeyC";case"d":case"D":return"KeyD";case"e":case"E":return"KeyE";case"f":case"F":return"KeyF";case"g":case"G":return"KeyG";case"h":case"H":return"KeyH";case"i":case"I":return"KeyI";case"j":case"J":return"KeyJ";case"k":case"K":return"KeyK";case"l":case"L":return"KeyL";case"m":case"M":return"KeyM";case"n":case"N":return"KeyN";case"o":case"O":return"KeyO";case"p":case"P":return"KeyP";case"q":case"Q":return"KeyQ";case"r":case"R":return"KeyR";case"s":case"S":return"KeyS";case"t":case"T":return"KeyT";case"u":case"U":return"KeyU";case"v":case"V":return"KeyV";case"w":case"W":return"KeyW";case"x":case"X":return"KeyX";case"y":case"Y":return"KeyY";case"z":case"Z":return"KeyZ";case"-":case"_":return"Minus";case".":return"Period";case"'":case'"':return"Quote";case";":case":":return"Semicolon";case"/":case"?":return"Slash";case"":return"AltLeft";case"":return"AltRight";case"":return"ControlLeft";case"":return"ControlRight";case"":return"Enter";case"":return"Pause";case"":return"MetaLeft";case"":return"MetaRight";case"":return"ShiftLeft";case"":return"ShiftRight";case" ":case"":return"Space";case"":return"Tab";case"":return"Delete";case"":return"End";case"":return"Help";case"":return"Home";case"":return"Insert";case"":return"PageDown";case"":return"PageUp";case"":return"ArrowDown";case"":return"ArrowLeft";case"":return"ArrowRight";case"":return"ArrowUp";case"":return"Escape";case"":return"F1";case"":return"F2";case"":return"F3";case"":return"F4";case"":return"F5";case"":return"F6";case"":return"F7";case"":return"F8";case"":return"F9";case"":return"F10";case"":return"F11";case"":return"F12";case"":return"NumpadEqual";case"":case"":return"Numpad0";case"":case"":return"Numpad1";case"":case"":return"Numpad2";case"":case"":return"Numpad3";case"":case"":return"Numpad4";case"":return"Numpad5";case"":case"":return"Numpad6";case"":case"":return"Numpad7";case"":case"":return"Numpad8";case"":case"":return"Numpad9";case"":return"NumpadAdd";case"":return"NumpadComma";case"":case"":return"NumpadDecimal";case"":return"NumpadDivide";case"":return"NumpadEnter";case"":return"NumpadMultiply";case"":return"NumpadSubtract";default:return}}function e(t){switch(t){case"":case"":case"":case"":case"":return 1;case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":return 3;case"":case"":case"":case"":return 2;default:return 0}}return oa}var Cc={},Bv;function G_(){return Bv||(Bv=1,Object.defineProperty(Cc,"__esModule",{value:!0}),Cc.KeyToKeyCode=void 0,Cc.KeyToKeyCode={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,Abort:3,Help:6,Backspace:8,Tab:9,Numpad5:12,NumpadEnter:13,Enter:13,"\\r":13,"\\n":13,ShiftLeft:16,ShiftRight:16,ControlLeft:17,ControlRight:17,AltLeft:18,AltRight:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Space:32,Numpad9:33,PageUp:33,Numpad3:34,PageDown:34,End:35,Numpad1:35,Home:36,Numpad7:36,ArrowLeft:37,Numpad4:37,Numpad8:38,ArrowUp:38,ArrowRight:39,Numpad6:39,Numpad2:40,ArrowDown:40,Select:41,Open:43,PrintScreen:44,Insert:45,Numpad0:45,Delete:46,NumpadDecimal:46,Digit0:48,Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,MetaLeft:91,MetaRight:92,ContextMenu:93,NumpadMultiply:106,NumpadAdd:107,NumpadSubtract:109,NumpadDivide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,AudioVolumeMute:173,AudioVolumeDown:174,AudioVolumeUp:175,MediaTrackNext:176,MediaTrackPrevious:177,MediaStop:178,MediaPlayPause:179,Semicolon:186,Equal:187,NumpadEqual:187,Comma:188,Minus:189,Period:190,Slash:191,Backquote:192,BracketLeft:219,Backslash:220,BracketRight:221,Quote:222,AltGraph:225,Props:247,Cancel:3,Clear:12,Shift:16,Control:17,Alt:18,Accept:30,ModeChange:31," ":32,Print:42,Execute:43,"\\u0000":46,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,Meta:91,"*":106,"+":107,"-":109,"/":111,";":186,"=":187,",":188,".":190,"`":192,"[":219,"\\\\":220,"]":221,"'":222,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251,")":48,"!":49,"@":50,"#":51,$:52,"%":53,"^":54,"&":55,"(":57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,":":186,"<":188,_:189,">":190,"?":191,"~":192,"{":219,"|":220,"}":221,'"':222,Camera:44,EndCall:95,VolumeDown:182,VolumeUp:183}),Cc}var jv;function X_(){var w,g,S,E,v,C,A,qC,$C,KC,UC,HC,bg,WC,zC,VC;if(jv)return bc;jv=1,Object.defineProperty(bc,"__esModule",{value:!0}),bc.ActionDispatcher=void 0;const s=Le(),i=Cs(),e=z_(),t=Nv(),n=V_(),a=G_(),o=(j=>{const O=j.getClientRects()[0],D=Math.max(0,Math.min(O.x,O.x+O.width)),N=Math.min(window.innerWidth,Math.max(O.x,O.x+O.width)),$=Math.max(0,Math.min(O.y,O.y+O.height)),B=Math.min(window.innerHeight,Math.max(O.y,O.y+O.height));return[D+(N-D>>1),$+(B-$>>1)]}).toString(),c=(()=>navigator.platform.toLowerCase().includes("mac")).toString();async function u(j,O){var X,Y,le,V;const N=await(await j.getOrCreateSandbox(void 0)).callFunction(o,!1,{type:"undefined"},[O]);if(N.type==="exception")throw new s.NoSuchElementException(`Origin element ${O.sharedId} was not found`);(0,i.assert)(N.result.type==="array"),(0,i.assert)(((Y=(X=N.result.value)==null?void 0:X[0])==null?void 0:Y.type)==="number"),(0,i.assert)(((V=(le=N.result.value)==null?void 0:le[1])==null?void 0:V.type)==="number");const{result:{value:[{value:$},{value:B}]}}=N;return{x:$,y:B}}let l=(w=class{constructor(O,D,N){f(this,A);f(this,g,0);f(this,S,0);f(this,E);f(this,v);f(this,C);y(this,E,O),y(this,v,D),y(this,C,N)}async dispatchActions(O){await r(this,E).queue.run(async()=>{for(const D of O)await this.dispatchTickActions(D)})}async dispatchTickActions(O){y(this,g,performance.now()),y(this,S,0);for(const{action:N}of O)"duration"in N&&N.duration!==void 0&&y(this,S,Math.max(r(this,S),N.duration));const D=[new Promise(N=>setTimeout(N,r(this,S)))];for(const N of O)D.push(k(this,A,qC).call(this,N));await Promise.all(D)}},g=new WeakMap,S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,A=new WeakSet,qC=async function({id:O,action:D}){const N=r(this,E).get(O),$=r(this,E).getGlobalKeyState();switch(D.type){case"keyDown":{await k(this,A,zC).call(this,N,D),r(this,E).cancelList.push({id:O,action:{...D,type:"keyUp"}});break}case"keyUp":{await k(this,A,VC).call(this,N,D);break}case"pause":break;case"pointerDown":{await k(this,A,$C).call(this,N,$,D),r(this,E).cancelList.push({id:O,action:{...D,type:"pointerUp"}});break}case"pointerMove":{await k(this,A,UC).call(this,N,$,D);break}case"pointerUp":{await k(this,A,KC).call(this,N,$,D);break}case"scroll":{await k(this,A,WC).call(this,N,$,D);break}}},$C=async function(O,D,N){const{button:$}=N;if(O.pressed.has($))return;O.pressed.add($);const{x:B,y:X,subtype:Y}=O,{width:le,height:V,pressure:z,twist:ne,tangentialPressure:fe}=N,{tiltX:ce,tiltY:Me}=m(N),{modifiers:ae}=D,{radiusX:x,radiusY:M}=b(le??1,V??1);switch(Y){case"mouse":case"pen":await r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mousePressed",x:B,y:X,modifiers:ae,button:d($),buttons:O.buttons,clickCount:O.setClickCount($,new t.PointerSource.ClickContext(B,X,performance.now())),pointerType:Y,tangentialPressure:fe,tiltX:ce,tiltY:Me,twist:ne,force:z});break;case"touch":await r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchStart",touchPoints:[{x:B,y:X,radiusX:x,radiusY:M,tangentialPressure:fe,tiltX:ce,tiltY:Me,twist:ne,force:z,id:O.pointerId}],modifiers:ae});break}O.radiusX=x,O.radiusY=M,O.force=z},KC=function(O,D,N){const{button:$}=N;if(!O.pressed.has($))return;O.pressed.delete($);const{x:B,y:X,force:Y,radiusX:le,radiusY:V,subtype:z}=O,{modifiers:ne}=D;switch(z){case"mouse":case"pen":return r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseReleased",x:B,y:X,modifiers:ne,button:d($),buttons:O.buttons,clickCount:O.getClickCount($),pointerType:z});case"touch":return r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchEnd",touchPoints:[{x:B,y:X,id:O.pointerId,force:Y,radiusX:le,radiusY:V}],modifiers:ne})}},UC=async function(O,D,N){const{x:$,y:B,subtype:X}=O,{width:Y,height:le,pressure:V,twist:z,tangentialPressure:ne,x:fe,y:ce,origin:Me="viewport",duration:ae=r(this,S)}=N,{tiltX:x,tiltY:M}=m(N),{radiusX:H,radiusY:G}=b(Y??1,le??1),{targetX:J,targetY:Z}=await k(this,A,bg).call(this,Me,fe,ce,$,B);if(J<0||Z<0)throw new s.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${J}, y: ${Z})`);let ie;do{const ue=ae>0?(performance.now()-r(this,g))/ae:1;ie=ue>=1;let U,Q;if(ie?(U=J,Q=Z):(U=Math.round(ue*(J-$)+$),Q=Math.round(ue*(Z-B)+B)),O.x!==U||O.y!==Q){const{modifiers:ee}=D;switch(X){case"mouse":await r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseMoved",x:U,y:Q,modifiers:ee,clickCount:0,button:d(O.pressed.values().next().value??5),buttons:O.buttons,pointerType:X,tangentialPressure:ne,tiltX:x,tiltY:M,twist:z,force:V});break;case"pen":O.pressed.size!==0&&await r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseMoved",x:U,y:Q,modifiers:ee,clickCount:0,button:d(O.pressed.values().next().value??5),buttons:O.buttons,pointerType:X,tangentialPressure:ne,tiltX:x,tiltY:M,twist:z,force:V??.5});break;case"touch":O.pressed.size!==0&&await r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchTouchEvent",{type:"touchMove",touchPoints:[{x:U,y:Q,radiusX:H,radiusY:G,tangentialPressure:ne,tiltX:x,tiltY:M,twist:z,force:V,id:O.pointerId}],modifiers:ee});break}O.x=U,O.y=Q,O.radiusX=H,O.radiusY=G,O.force=V}}while(!ie)},HC=async function(){if(r(this,v).id===r(this,v).cdpTarget.id)return{x:0,y:0};const{backendNodeId:O}=await r(this,v).cdpTarget.cdpClient.sendCommand("DOM.getFrameOwner",{frameId:r(this,v).id}),{model:D}=await r(this,v).cdpTarget.cdpClient.sendCommand("DOM.getBoxModel",{backendNodeId:O});return{x:D.content[0],y:D.content[1]}},bg=async function(O,D,N,$,B){let X,Y;const le=await k(this,A,HC).call(this);switch(O){case"viewport":X=D+le.x,Y=N+le.y;break;case"pointer":X=$+D+le.x,Y=B+N+le.y;break;default:{const{x:V,y:z}=await u(r(this,v),O.element);X=V+D+le.x,Y=z+N+le.y;break}}return{targetX:X,targetY:Y}},WC=async function(O,D,N){const{deltaX:$,deltaY:B,x:X,y:Y,origin:le="viewport",duration:V=r(this,S)}=N;if(le==="pointer")throw new s.InvalidArgumentException('"pointer" origin is invalid for scrolling.');const{targetX:z,targetY:ne}=await k(this,A,bg).call(this,le,X,Y,0,0);if(z<0||ne<0)throw new s.MoveTargetOutOfBoundsException(`Cannot move beyond viewport (x: ${z}, y: ${ne})`);let fe=0,ce=0,Me;do{const ae=V>0?(performance.now()-r(this,g))/V:1;Me=ae>=1;let x,M;if(Me?(x=$-fe,M=B-ce):(x=Math.round(ae*$-fe),M=Math.round(ae*B-ce)),x!==0||M!==0){const{modifiers:H}=D;await r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchMouseEvent",{type:"mouseWheel",deltaX:x,deltaY:M,x:z,y:ne,modifiers:H}),fe+=x,ce+=M}}while(!Me)},zC=async function(O,D){const N=D.value;if(!(0,e.isSingleGrapheme)(N))throw new s.InvalidArgumentException(`Invalid key value: ${N}`);const $=(0,e.isSingleComplexGrapheme)(N),B=(0,n.getNormalizedKey)(N),X=O.pressed.has(B),Y=(0,n.getKeyCode)(N),le=(0,n.getKeyLocation)(N);switch(B){case"Alt":O.alt=!0;break;case"Shift":O.shift=!0;break;case"Control":O.ctrl=!0;break;case"Meta":O.meta=!0;break}O.pressed.add(B);const{modifiers:V}=O,z=p(B,O,$),ne=h(Y??"",O)??z;let fe;if(r(this,C)&&O.meta)switch(Y){case"KeyA":fe="SelectAll";break;case"KeyC":fe="Copy";break;case"KeyV":fe=O.shift?"PasteAndMatchStyle":"Paste";break;case"KeyX":fe="Cut";break;case"KeyZ":fe=O.shift?"Redo":"Undo";break}const ce=[r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchKeyEvent",{type:ne?"keyDown":"rawKeyDown",windowsVirtualKeyCode:a.KeyToKeyCode[B],key:B,code:Y,text:ne,unmodifiedText:z,autoRepeat:X,isSystemKey:O.alt||void 0,location:le<3?le:void 0,isKeypad:le===3,modifiers:V,commands:fe?[fe]:void 0})];B==="Escape"&&!O.alt&&(r(this,C)&&!O.ctrl&&!O.meta||!r(this,C))&&ce.push(r(this,v).cdpTarget.cdpClient.sendCommand("Input.cancelDragging")),await Promise.all(ce)},VC=function(O,D){const N=D.value;if(!(0,e.isSingleGrapheme)(N))throw new s.InvalidArgumentException(`Invalid key value: ${N}`);const $=(0,e.isSingleComplexGrapheme)(N),B=(0,n.getNormalizedKey)(N);if(!O.pressed.has(B))return;const X=(0,n.getKeyCode)(N),Y=(0,n.getKeyLocation)(N);switch(B){case"Alt":O.alt=!1;break;case"Shift":O.shift=!1;break;case"Control":O.ctrl=!1;break;case"Meta":O.meta=!1;break}O.pressed.delete(B);const{modifiers:le}=O,V=p(B,O,$),z=h(X??"",O)??V;return r(this,v).cdpTarget.cdpClient.sendCommand("Input.dispatchKeyEvent",{type:"keyUp",windowsVirtualKeyCode:a.KeyToKeyCode[B],key:B,code:X,text:z,unmodifiedText:V,location:Y<3?Y:void 0,isSystemKey:O.alt||void 0,isKeypad:Y===3,modifiers:le})},W(w,"isMacOS",async O=>{const D=await(await O.getOrCreateSandbox(void 0)).callFunction(c,!1);return(0,i.assert)(D.type!=="exception"),(0,i.assert)(D.result.type==="boolean"),D.result.value}),w);bc.ActionDispatcher=l;const p=(j,O,D)=>D?j:j==="Enter"?"\r":[...j].length===1?O.shift?j.toLocaleUpperCase("en-US"):j:void 0,h=(j,O)=>{if(O.ctrl){switch(j){case"Digit2":if(O.shift)return"\0";break;case"KeyA":return"";case"KeyB":return"";case"KeyC":return"";case"KeyD":return"";case"KeyE":return"";case"KeyF":return"";case"KeyG":return"\x07";case"KeyH":return"\b";case"KeyI":return"	";case"KeyJ":return`
`;case"KeyK":return"\v";case"KeyL":return"\f";case"KeyM":return"\r";case"KeyN":return"";case"KeyO":return"";case"KeyP":return"";case"KeyQ":return"";case"KeyR":return"";case"KeyS":return"";case"KeyT":return"";case"KeyU":return"";case"KeyV":return"";case"KeyW":return"";case"KeyX":return"";case"KeyY":return"";case"KeyZ":return"";case"BracketLeft":return"\x1B";case"Backslash":return"";case"BracketRight":return"";case"Digit6":if(O.shift)return"";break;case"Minus":return""}return""}if(O.alt)return""};function d(j){switch(j){case 0:return"left";case 1:return"middle";case 2:return"right";case 3:return"back";case 4:return"forward";default:return"none"}}function m(j){const O=j.altitudeAngle??Math.PI/2,D=j.azimuthAngle??0;let N=0,$=0;if(O===0&&((D===0||D===2*Math.PI)&&(N=Math.PI/2),D===Math.PI/2&&($=Math.PI/2),D===Math.PI&&(N=-Math.PI/2),D===3*Math.PI/2&&($=-Math.PI/2),D>0&&D<Math.PI/2&&(N=Math.PI/2,$=Math.PI/2),D>Math.PI/2&&D<Math.PI&&(N=-Math.PI/2,$=Math.PI/2),D>Math.PI&&D<3*Math.PI/2&&(N=-Math.PI/2,$=-Math.PI/2),D>3*Math.PI/2&&D<2*Math.PI&&(N=Math.PI/2,$=-Math.PI/2)),O!==0){const X=Math.tan(O);N=Math.atan(Math.cos(D)/X),$=Math.atan(Math.sin(D)/X)}const B=180/Math.PI;return{tiltX:Math.round(N*B),tiltY:Math.round($*B)}}function b(j,O){return{radiusX:j?j/2:.5,radiusY:O?O/2:.5}}return bc}var kc={},Ec={},xc={},qv;function J_(){var i,e,t,Sg,a;if(qv)return xc;qv=1,Object.defineProperty(xc,"__esModule",{value:!0}),xc.Mutex=void 0;let s=(a=class{constructor(){f(this,t);f(this,i,!1);f(this,e,[])}acquire(){const c={resolved:!1};return r(this,i)?new Promise(u=>{r(this,e).push(()=>u(k(this,t,Sg).bind(this,c)))}):(y(this,i,!0),Promise.resolve(k(this,t,Sg).bind(this,c)))}async run(c){const u=await this.acquire();try{return await c()}finally{u()}}},i=new WeakMap,e=new WeakMap,t=new WeakSet,Sg=function(c){if(c.resolved)throw new Error("Cannot release more than once.");c.resolved=!0;const u=r(this,e).shift();if(!u){y(this,i,!1);return}u()},a);return xc.Mutex=s,xc}var $v;function Y_(){var n,a,o;if($v)return Ec;$v=1,Object.defineProperty(Ec,"__esModule",{value:!0}),Ec.InputState=void 0;const s=Le(),i=J_(),e=Nv();let t=(o=class{constructor(){W(this,"cancelList",[]);f(this,n,new Map);f(this,a,new i.Mutex)}getOrCreate(u,l,p){let h=r(this,n).get(u);if(!h){switch(l){case"none":h=new e.NoneSource;break;case"key":h=new e.KeySource;break;case"pointer":{let d=p==="mouse"?0:2;const m=new Set;for(const[,b]of r(this,n))b.type==="pointer"&&m.add(b.pointerId);for(;m.has(d);)++d;h=new e.PointerSource(d,p);break}case"wheel":h=new e.WheelSource;break;default:throw new s.InvalidArgumentException(`Expected "none", "key", "pointer", or "wheel". Found unknown source type ${l}.`)}return r(this,n).set(u,h),h}if(h.type!==l)throw new s.InvalidArgumentException(`Input source type of ${u} is ${h.type}, but received ${l}.`);return h}get(u){const l=r(this,n).get(u);if(!l)throw new s.UnknownErrorException("Internal error.");return l}getGlobalKeyState(){const u=new e.KeySource;for(const[,l]of r(this,n))if(l.type==="key"){for(const p of l.pressed)u.pressed.add(p);u.alt||(u.alt=l.alt),u.ctrl||(u.ctrl=l.ctrl),u.meta||(u.meta=l.meta),u.shift||(u.shift=l.shift)}return u}get queue(){return r(this,a)}},n=new WeakMap,a=new WeakMap,o);return Ec.InputState=t,Ec}var Kv;function Q_(){if(Kv)return kc;Kv=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.InputStateManager=void 0;const s=Cs(),i=Y_();let e=class extends WeakMap{get(n){return(0,s.assert)(n.isTopLevelContext()),this.has(n)||this.set(n,new i.InputState),super.get(n)}};return kc.InputStateManager=e,kc}var Uv;function Z_(){var a,o,c,GC,l;if(Uv)return vc;Uv=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.InputProcessor=void 0;const s=Le(),i=Cs(),e=X_(),t=Q_();let n=(l=class{constructor(h){f(this,c);f(this,a);f(this,o,new t.InputStateManager);y(this,a,h)}async performActions(h){const d=r(this,a).getContext(h.context),m=r(this,o).get(d.top),b=k(this,c,GC).call(this,h,m);return await new e.ActionDispatcher(m,d,await e.ActionDispatcher.isMacOS(d).catch(()=>!1)).dispatchActions(b),{}}async releaseActions(h){const d=r(this,a).getContext(h.context),m=d.top,b=r(this,o).get(m);return await new e.ActionDispatcher(b,d,await e.ActionDispatcher.isMacOS(d).catch(()=>!1)).dispatchTickActions(b.cancelList.reverse()),r(this,o).delete(m),{}}async setFiles(h){const m=await r(this,a).getContext(h.context).getOrCreateSandbox(void 0);let b;try{b=await m.callFunction(String(function(E){if(!(this instanceof HTMLInputElement))return this instanceof Element?1:0;if(this.type!=="file")return 2;if(this.disabled)return 3;if(E>1&&!this.multiple)return 4}),!1,h.element,[{type:"number",value:h.files.length}])}catch{throw new s.NoSuchNodeException(`Could not find element ${h.element.sharedId}`)}if((0,i.assert)(b.type==="success"),b.result.type==="number")switch(b.result.value){case 0:throw new s.NoSuchElementException(`Could not find element ${h.element.sharedId}`);case 1:throw new s.UnableToSetFileInputException(`Element ${h.element.sharedId} is not a input`);case 2:throw new s.UnableToSetFileInputException(`Input element ${h.element.sharedId} is not a file type`);case 3:throw new s.UnableToSetFileInputException(`Input element ${h.element.sharedId} is disabled`);case 4:throw new s.UnableToSetFileInputException("Cannot set multiple files on a non-multiple input element")}if(h.files.length===0)return await m.callFunction(String(function(){var E;if(((E=this.files)==null?void 0:E.length)===0){this.dispatchEvent(new Event("cancel",{bubbles:!0}));return}this.files=new DataTransfer().files,this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))}),!1,h.element),{};const w=[];for(let S=0;S<h.files.length;++S){const E=await m.callFunction(String(function(F){var R;return(R=this.files)==null?void 0:R.item(F)}),!1,h.element,[{type:"number",value:0}],"root");if((0,i.assert)(E.type==="success"),E.result.type!=="object")break;const{handle:v}=E.result;(0,i.assert)(v!==void 0);const{path:C}=await m.cdpClient.sendCommand("DOM.getFileInfo",{objectId:v});w.push(C),m.disown(v).catch(void 0)}w.sort();const g=[...h.files].sort();if(w.length!==h.files.length||g.some((S,E)=>w[E]!==S)){const{objectId:S}=await m.deserializeForCdp(h.element);(0,i.assert)(S!==void 0),await m.cdpClient.sendCommand("DOM.setFileInputFiles",{files:h.files,objectId:S})}else await m.callFunction(String(function(){this.dispatchEvent(new Event("cancel",{bubbles:!0}))}),!1,h.element);return{}}},a=new WeakMap,o=new WeakMap,c=new WeakSet,GC=function(h,d){var b;const m=[];for(const w of h.actions){switch(w.type){case"pointer":{w.parameters??(w.parameters={pointerType:"mouse"}),(b=w.parameters).pointerType??(b.pointerType="mouse");const S=d.getOrCreate(w.id,"pointer",w.parameters.pointerType);if(S.subtype!==w.parameters.pointerType)throw new s.InvalidArgumentException(`Expected input source ${w.id} to be ${S.subtype}; got ${w.parameters.pointerType}.`);break}default:d.getOrCreate(w.id,w.type)}const g=w.actions.map(S=>({id:w.id,action:S}));for(let S=0;S<g.length;S++)m.length===S&&m.push([]),m[S].push(g[S])}return m},l);return vc.InputProcessor=n,vc}var Pc={},et={},Dh={},Hv;function e1(){if(Hv)return Dh;Hv=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.base64ToString=s;function s(i){return"atob"in globalThis?globalThis.atob(i):Buffer.from(i,"base64").toString("ascii")}return Dh}var Wv;function Fh(){if(Wv)return et;Wv=1,Object.defineProperty(et,"__esModule",{value:!0}),et.computeHeadersSize=e,et.bidiNetworkHeadersFromCdpNetworkHeaders=t,et.bidiNetworkHeadersFromCdpNetworkHeadersEntries=n,et.cdpNetworkHeadersFromBidiNetworkHeaders=a,et.bidiNetworkHeadersFromCdpFetchHeaders=o,et.cdpFetchHeadersFromBidiNetworkHeaders=c,et.networkHeaderFromCookieHeaders=u,et.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction=l,et.cdpToBiDiCookie=p,et.deserializeByteValue=h,et.bidiToCdpCookie=d,et.sameSiteBiDiToCdp=b,et.isSpecialScheme=w,et.matchUrlPattern=S,et.bidiBodySizeFromCdpPostDataEntries=E,et.getTiming=v;const s=xv(),i=e1();function e(C){const A=C.reduce((F,R)=>`${F}${R.name}: ${R.value.value}\r
`,"");return new TextEncoder().encode(A).length}function t(C){return C?Object.entries(C).map(([A,F])=>({name:A,value:{type:"string",value:F}})):[]}function n(C){return C?C.map(({name:A,value:F})=>({name:A,value:{type:"string",value:F}})):[]}function a(C){if(C!==void 0)return C.reduce((A,F)=>(A[F.name]=F.value.value,A),{})}function o(C){return C?C.map(({name:A,value:F})=>({name:A,value:{type:"string",value:F}})):[]}function c(C){if(C!==void 0)return C.map(({name:A,value:F})=>({name:A,value:F.value}))}function u(C){return C===void 0?void 0:{name:"Cookie",value:{type:"string",value:C.reduce((F,R,P)=>{P>0&&(F+=";");const T=R.value.type==="base64"?btoa(R.value.value):R.value.value;return F+=`${R.name}=${T}`,F},"")}}}function l(C){switch(C){case"default":return"Default";case"cancel":return"CancelAuth";case"provideCredentials":return"ProvideCredentials"}}function p(C){const A={name:C.name,value:{type:"string",value:C.value},domain:C.domain,path:C.path,size:C.size,httpOnly:C.httpOnly,secure:C.secure,sameSite:C.sameSite===void 0?"none":m(C.sameSite),...C.expires>=0?{expiry:C.expires}:void 0};return A["goog:session"]=C.session,A["goog:priority"]=C.priority,A["goog:sameParty"]=C.sameParty,A["goog:sourceScheme"]=C.sourceScheme,A["goog:sourcePort"]=C.sourcePort,C.partitionKey!==void 0&&(A["goog:partitionKey"]=C.partitionKey),C.partitionKeyOpaque!==void 0&&(A["goog:partitionKeyOpaque"]=C.partitionKeyOpaque),A}function h(C){return C.type==="base64"?(0,i.base64ToString)(C.value):C.value}function d(C,A){const F=h(C.cookie.value),R={name:C.cookie.name,value:F,domain:C.cookie.domain,path:C.cookie.path??"/",secure:C.cookie.secure??!1,httpOnly:C.cookie.httpOnly??!1,...A.sourceOrigin!==void 0&&{partitionKey:{hasCrossSiteAncestor:!1,topLevelSite:A.sourceOrigin}},...C.cookie.expiry!==void 0&&{expires:C.cookie.expiry},...C.cookie.sameSite!==void 0&&{sameSite:b(C.cookie.sameSite)}};return C.cookie["goog:url"]!==void 0&&(R.url=C.cookie["goog:url"]),C.cookie["goog:priority"]!==void 0&&(R.priority=C.cookie["goog:priority"]),C.cookie["goog:sameParty"]!==void 0&&(R.sameParty=C.cookie["goog:sameParty"]),C.cookie["goog:sourceScheme"]!==void 0&&(R.sourceScheme=C.cookie["goog:sourceScheme"]),C.cookie["goog:sourcePort"]!==void 0&&(R.sourcePort=C.cookie["goog:sourcePort"]),R}function m(C){switch(C){case"Strict":return"strict";case"None":return"none";case"Lax":return"lax";default:return"lax"}}function b(C){switch(C){case"strict":return"Strict";case"lax":return"Lax";case"none":return"None"}throw new s.InvalidArgumentException(`Unknown 'sameSite' value ${C}`)}function w(C){return["ftp","file","http","https","ws","wss"].includes(C.replace(/:$/,""))}function g(C){return C.protocol.replace(/:$/,"")}function S(C,A){const F=new URL(A);return!(C.protocol!==void 0&&C.protocol!==g(F)||C.hostname!==void 0&&C.hostname!==F.hostname||C.port!==void 0&&C.port!==F.port||C.pathname!==void 0&&C.pathname!==F.pathname||C.search!==void 0&&C.search!==F.search)}function E(C){let A=0;for(const F of C)A+=atob(F.bytes??"").length;return A}function v(C){return!C||C<0?0:C}return et}var zv;function Vv(){var n,a,o,Cg,Ld,l;if(zv)return Pc;zv=1,Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.NetworkProcessor=void 0;const s=Le(),i=Fh();let e=(l=class{constructor(h,d){f(this,o);f(this,n);f(this,a);y(this,n,h),y(this,a,d)}async addIntercept(h){r(this,n).verifyTopLevelContextsList(h.contexts);const d=h.urlPatterns??[],m=l.parseUrlPatterns(d),b=r(this,a).addIntercept({urlPatterns:m,phases:h.phases,contexts:h.contexts});return await Promise.all(r(this,n).getAllContexts().map(w=>w.cdpTarget.toggleNetwork())),{intercept:b}}async continueRequest(h){if(h.url!==void 0&&l.parseUrlString(h.url),h.method!==void 0&&!l.isMethodValid(h.method))throw new s.InvalidArgumentException(`Method '${h.method}' is invalid.`);h.headers&&l.validateHeaders(h.headers);const d=k(this,o,Ld).call(this,h.request,["beforeRequestSent"]);try{await d.continueRequest(h)}catch(m){throw l.wrapInterceptionError(m)}return{}}async continueResponse(h){h.headers&&l.validateHeaders(h.headers);const d=k(this,o,Ld).call(this,h.request,["authRequired","responseStarted"]);try{await d.continueResponse(h)}catch(m){throw l.wrapInterceptionError(m)}return{}}async continueWithAuth(h){const d=h.request;return await k(this,o,Ld).call(this,d,["authRequired"]).continueWithAuth(h),{}}async failRequest({request:h}){const d=k(this,o,Cg).call(this,h);if(d.interceptPhase==="authRequired")throw new s.InvalidArgumentException(`Request '${h}' in 'authRequired' phase cannot be failed`);if(!d.interceptPhase)throw new s.NoSuchRequestException(`No blocked request found for network id '${h}'`);return await d.failRequest("Failed"),{}}async provideResponse(h){h.headers&&l.validateHeaders(h.headers);const d=k(this,o,Ld).call(this,h.request,["beforeRequestSent","responseStarted","authRequired"]);try{await d.provideResponse(h)}catch(m){throw l.wrapInterceptionError(m)}return{}}async removeIntercept(h){return r(this,a).removeIntercept(h.intercept),await Promise.all(r(this,n).getAllContexts().map(d=>d.cdpTarget.toggleNetwork())),{}}async setCacheBehavior(h){const d=r(this,n).verifyTopLevelContextsList(h.contexts);if(d.size===0)return r(this,a).defaultCacheBehavior=h.cacheBehavior,await Promise.all(r(this,n).getAllContexts().map(b=>b.cdpTarget.toggleSetCacheDisabled())),{};const m=h.cacheBehavior==="bypass";return await Promise.all([...d.values()].map(b=>b.cdpTarget.toggleSetCacheDisabled(m))),{}}static validateHeaders(h){for(const d of h){let m;if(d.value.type==="string"?m=d.value.value:m=atob(d.value.value),m!==m.trim()||m.includes(`
`)||m.includes("\0"))throw new s.InvalidArgumentException(`Header value '${m}' is not acceptable value`)}}static isMethodValid(h){return/^[!#$%&'*+\-.^_`|~a-zA-Z\d]+$/.test(h)}static parseUrlString(h){try{return new URL(h)}catch(d){throw new s.InvalidArgumentException(`Invalid URL '${h}': ${d}`)}}static parseUrlPatterns(h){return h.map(d=>{let m="",b=!0,w=!0,g=!0,S=!0,E=!0;switch(d.type){case"string":{m=t(d.pattern);break}case"pattern":{if(d.protocol===void 0)b=!1,m+="http";else{if(d.protocol==="")throw new s.InvalidArgumentException("URL pattern must specify a protocol");if(d.protocol=t(d.protocol),!d.protocol.match(/^[a-zA-Z+-.]+$/))throw new s.InvalidArgumentException("Forbidden characters");m+=d.protocol}const C=m.toLocaleLowerCase();if(m+=":",(0,i.isSpecialScheme)(C)&&(m+="//"),d.hostname===void 0)C!=="file"&&(m+="placeholder"),w=!1;else{if(d.hostname==="")throw new s.InvalidArgumentException("URL pattern must specify a hostname");if(d.protocol==="file")throw new s.InvalidArgumentException("URL pattern protocol cannot be 'file'");d.hostname=t(d.hostname);let A=!1;for(const F of d.hostname){if(F==="/"||F==="?"||F==="#")throw new s.InvalidArgumentException("'/', '?', '#' are forbidden in hostname");if(!A&&F===":")throw new s.InvalidArgumentException("':' is only allowed inside brackets in hostname");F==="["&&(A=!0),F==="]"&&(A=!1)}m+=d.hostname}if(d.port===void 0)g=!1;else{if(d.port==="")throw new s.InvalidArgumentException("URL pattern must specify a port");if(d.port=t(d.port),m+=":",!d.port.match(/^\d+$/))throw new s.InvalidArgumentException("Forbidden characters");m+=d.port}if(d.pathname===void 0)S=!1;else{if(d.pathname=t(d.pathname),d.pathname[0]!=="/"&&(m+="/"),d.pathname.includes("#")||d.pathname.includes("?"))throw new s.InvalidArgumentException("Forbidden characters");m+=d.pathname}if(d.search===void 0)E=!1;else{if(d.search=t(d.search),d.search[0]!=="?"&&(m+="?"),d.search.includes("#"))throw new s.InvalidArgumentException("Forbidden characters");m+=d.search}break}}const v=C=>{const A={"ftp:":21,"file:":null,"http:":80,"https:":443,"ws:":80,"wss:":443};if((0,i.isSpecialScheme)(C.protocol)&&A[C.protocol]!==null&&(!C.port||String(A[C.protocol])===C.port))return"";if(C.port)return C.port};try{const C=new URL(m);return{protocol:b?C.protocol.replace(/:$/,""):void 0,hostname:w?C.hostname:void 0,port:g?v(C):void 0,pathname:S&&C.pathname?C.pathname:void 0,search:E?C.search:void 0}}catch(C){throw new s.InvalidArgumentException(`${C.message} '${m}'`)}})}static wrapInterceptionError(h){return h!=null&&h.message.includes("Invalid header")?new s.InvalidArgumentException("Invalid header"):h}},n=new WeakMap,a=new WeakMap,o=new WeakSet,Cg=function(h){const d=r(this,a).getRequestById(h);if(!d)throw new s.NoSuchRequestException(`Network request with ID '${h}' doesn't exist`);return d},Ld=function(h,d){const m=k(this,o,Cg).call(this,h);if(!m.interceptPhase)throw new s.NoSuchRequestException(`No blocked request found for network id '${h}'`);if(m.interceptPhase&&!d.includes(m.interceptPhase))throw new s.InvalidArgumentException(`Blocked request for network id '${h}' is in '${m.interceptPhase}' phase`);return m},l);Pc.NetworkProcessor=e;function t(p){const h=new Set(["(",")","*","{","}"]);let d="",m=!1;for(const b of p){if(!m){if(h.has(b))throw new s.InvalidArgumentException("Forbidden characters");if(b==="\\"){m=!0;continue}}d+=b,m=!1}return d}return Pc}var _c={},Gv;function t1(){var e,t;if(Gv)return _c;Gv=1,Object.defineProperty(_c,"__esModule",{value:!0}),_c.PermissionsProcessor=void 0;const s=Le();let i=(t=class{constructor(a){f(this,e);y(this,e,a)}async setPermissions(a){try{const o=a["goog:userContext"]||a.userContext;await r(this,e).sendCommand("Browser.setPermission",{origin:a.origin,browserContextId:o&&o!=="default"?o:void 0,permission:{name:a.descriptor.name},setting:a.state})}catch(o){if(o.message==="Permission can't be granted to opaque origins.")return{};throw new s.InvalidArgumentException(o.message)}return{}}},e=new WeakMap,t);return _c.PermissionsProcessor=i,_c}var Tc={},Mc={},Oh={},Xv;function Ic(){if(Xv)return Oh;Xv=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.uuidv4=i;function s(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function i(){if("crypto"in globalThis&&"randomUUID"in globalThis.crypto)return globalThis.crypto.randomUUID();const e=new Uint8Array(16);return"crypto"in globalThis&&"getRandomValues"in globalThis.crypto?globalThis.crypto.getRandomValues(e):vw.webcrypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,[s(e.subarray(0,4)),s(e.subarray(4,6)),s(e.subarray(6,8)),s(e.subarray(8,10)),s(e.subarray(10,16))].join("-")}return Oh}var Ac={},Jv;function Yv(){var n,a,o,c,u,kg,XC,JC,d,Eg,YC;if(Jv)return Ac;Jv=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.ChannelProxy=void 0;const s=Le(),i=Xt(),e=Ic();let t=(u=class{constructor(g,S){f(this,d);f(this,n);f(this,a,(0,e.uuidv4)());f(this,o);y(this,n,g),y(this,o,S)}async init(g,S){var C,A;const E=await k(C=u,c,XC).call(C,g),v=await k(A=u,c,JC).call(A,g,E);return k(this,d,Eg).call(this,g,E,S),v}async startListenerFromWindow(g,S){var E;try{const v=await k(this,d,YC).call(this,g);k(this,d,Eg).call(this,g,v,S)}catch(v){(E=r(this,o))==null||E.call(this,i.LogType.debugError,v)}}getEvalInWindowStr(){var E;const g=String((v,C)=>{const A=window;return A[v]===void 0?A[v]=C:(A[v](C),delete A[v]),C.sendMessage}),S=k(E=u,c,kg).call(E);return`(${g})('${r(this,a)}',${S})`}},n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,kg=function(){return`(${String(()=>{const S=[];let E=null;return{async getMessage(){return await(S.length>0?Promise.resolve():new Promise(C=>{E=C})),S.shift()},sendMessage(v){S.push(v),E!==null&&(E(),E=null)}}})})()`},XC=async function(g){const S=await g.cdpClient.sendCommand("Runtime.evaluate",{expression:k(this,c,kg).call(this),contextId:g.executionContextId,serializationOptions:{serialization:"idOnly"}});if(S.exceptionDetails||S.result.objectId===void 0)throw new Error("Cannot create channel");return S.result.objectId},JC=async function(g,S){return(await g.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(v=>v.sendMessage),arguments:[{objectId:S}],executionContextId:g.executionContextId,serializationOptions:{serialization:"idOnly"}})).result.objectId},d=new WeakSet,Eg=async function(g,S,E){var v,C;for(;;)try{const A=await g.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(async F=>await F.getMessage()),arguments:[{objectId:S}],awaitPromise:!0,executionContextId:g.executionContextId,serializationOptions:{serialization:"deep",maxDepth:((v=r(this,n).serializationOptions)==null?void 0:v.maxObjectDepth)??void 0}});if(A.exceptionDetails)throw new Error("Runtime.callFunctionOn in ChannelProxy",{cause:A.exceptionDetails});for(const F of g.associatedBrowsingContexts)E.registerEvent({type:"event",method:s.ChromiumBidi.Script.EventNames.Message,params:{channel:r(this,n).channel,data:g.cdpToBidiValue(A,r(this,n).ownership??"none"),source:g.source}},F.id)}catch(A){(C=r(this,o))==null||C.call(this,i.LogType.debugError,A);break}},YC=async function(g){const S=await g.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(E=>{const v=window;if(v[E]===void 0)return new Promise(A=>v[E]=A);const C=v[E];return delete v[E],C}),arguments:[{value:r(this,a)}],executionContextId:g.executionContextId,awaitPromise:!0,serializationOptions:{serialization:"idOnly"}});if(S.exceptionDetails!==void 0||S.result.objectId===void 0)throw new Error(`ChannelHandle not found in window["${r(this,a)}"]`);return S.result.objectId},f(u,c),u);return Ac.ChannelProxy=t,Ac}var Qv;function r1(){var t,n,a,o,c,u,l,p,QC,d;if(Qv)return Mc;Qv=1,Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.PreloadScript=void 0;const s=Ic(),i=Yv();let e=(d=class{constructor(b,w){f(this,p);f(this,t,(0,s.uuidv4)());f(this,n,[]);f(this,a);f(this,o,new Set);f(this,c);f(this,u);f(this,l);var g;y(this,c,((g=b.arguments)==null?void 0:g.map(S=>new i.ChannelProxy(S.value,w)))??[]),y(this,a,b.functionDeclaration),y(this,u,b.sandbox),y(this,l,b.contexts)}get id(){return r(this,t)}get targetIds(){return r(this,o)}get channels(){return r(this,c)}get contexts(){return r(this,l)}async initInTargets(b,w){await Promise.all(Array.from(b).map(g=>this.initInTarget(g,w)))}async initInTarget(b,w){const g=await b.cdpClient.sendCommand("Page.addScriptToEvaluateOnNewDocument",{source:k(this,p,QC).call(this),worldName:r(this,u),runImmediately:w});r(this,n).push({target:b,preloadScriptId:g.identifier}),r(this,o).add(b.id)}async remove(){await Promise.all([r(this,n).map(async b=>{const w=b.target,g=b.preloadScriptId;return await w.cdpClient.sendCommand("Page.removeScriptToEvaluateOnNewDocument",{identifier:g})})])}dispose(b){y(this,n,r(this,n).filter(w=>{var g;return((g=w.target)==null?void 0:g.id)!==b})),r(this,o).delete(b)}},t=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakSet,QC=function(){const b=`[${this.channels.map(w=>w.getEvalInWindowStr()).join(", ")}]`;return`(()=>{(${r(this,a)})(...${b})})()`},d);return Mc.PreloadScript=e,Mc}var Zv;function i1(){var t,n,a,o,c,u,ZC,Sf,h;if(Zv)return Tc;Zv=1,Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.ScriptProcessor=void 0;const s=Le(),i=r1();let e=(h=class{constructor(m,b,w,g,S){f(this,u);f(this,t);f(this,n);f(this,a);f(this,o);f(this,c);y(this,n,b),y(this,a,w),y(this,o,g),y(this,c,S),y(this,t,m),r(this,t).addSubscribeHook(s.ChromiumBidi.Script.EventNames.RealmCreated,k(this,u,ZC).bind(this))}async addPreloadScript(m){const b=r(this,n).verifyTopLevelContextsList(m.contexts),w=new i.PreloadScript(m,r(this,c));r(this,o).add(w);const g=b.size===0?new Set(r(this,n).getTopLevelContexts().map(S=>S.cdpTarget)):new Set([...b.values()].map(S=>S.cdpTarget));return await w.initInTargets(g,!1),{script:w.id}}async removePreloadScript(m){const{script:b}=m,w=r(this,o).find({id:b});if(w.length===0)throw new s.NoSuchScriptException(`No preload script with id '${b}'`);return await Promise.all(w.map(g=>g.remove())),r(this,o).remove({id:b}),{}}async callFunction(m){return await(await k(this,u,Sf).call(this,m.target)).callFunction(m.functionDeclaration,m.awaitPromise,m.this,m.arguments,m.resultOwnership,m.serializationOptions,m.userActivation)}async evaluate(m){return await(await k(this,u,Sf).call(this,m.target)).evaluate(m.expression,m.awaitPromise,m.resultOwnership,m.serializationOptions,m.userActivation)}async disown(m){const b=await k(this,u,Sf).call(this,m.target);return await Promise.all(m.handles.map(async w=>await b.disown(w))),{}}getRealms(m){return m.context!==void 0&&r(this,n).getContext(m.context),{realms:r(this,a).findRealms({browsingContextId:m.context,type:m.type}).map(w=>w.realmInfo)}}},t=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakSet,ZC=function(m){const b=r(this,n).getContext(m),w=[b,...r(this,n).getContext(m).allChildren],g=new Set;for(const S of w){const E=r(this,a).findRealms({browsingContextId:S.id});for(const v of E)g.add(v)}for(const S of g)r(this,t).registerEvent({type:"event",method:s.ChromiumBidi.Script.EventNames.RealmCreated,params:S.realmInfo},b.id);return Promise.resolve()},Sf=async function(m){return"context"in m?await r(this,n).getContext(m.context).getOrCreateSandbox(m.sandbox):r(this,a).getRealm({realmId:m.realm})},h);return Tc.ScriptProcessor=e,Tc}var Rc={},eb;function s1(){var e,t,n,a,o,e0,t0,l;if(eb)return Rc;eb=1,Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.SessionProcessor=void 0;const s=Le();let i=(l=class{constructor(h,d,m){f(this,o);f(this,e);f(this,t);f(this,n);f(this,a,!1);y(this,e,h),y(this,t,d),y(this,n,m)}status(){return{ready:!1,message:"already connected"}}async new(h){if(r(this,a))throw new Error("Session has been already created.");y(this,a,!0);const d=k(this,o,e0).call(this,h.capabilities);await r(this,n).call(this,d);const m=await r(this,t).sendCommand("Browser.getVersion");return{sessionId:"unknown",capabilities:{...d,acceptInsecureCerts:d.acceptInsecureCerts??!1,browserName:m.product,browserVersion:m.revision,platformName:"",setWindowRect:!1,webSocketUrl:"",userAgent:m.userAgent}}}async subscribe(h,d=null){return await r(this,e).subscribe(h.events,h.contexts??[null],d),{}}async unsubscribe(h,d=null){return await r(this,e).unsubscribe(h.events,h.contexts??[null],d),{}}},e=new WeakMap,t=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakSet,e0=function(h){const d=[];for(const b of h.firstMatch??[{}]){const w={...h.alwaysMatch};for(const g of Object.keys(b)){if(w[g]!==void 0)throw new s.InvalidArgumentException(`Capability ${g} in firstMatch is already defined in alwaysMatch`);w[g]=b[g]}d.push(w)}const m=d.find(b=>b.browserName==="chrome")??d[0]??{};return m.unhandledPromptBehavior=k(this,o,t0).call(this,m.unhandledPromptBehavior),m},t0=function(h){if(h!==void 0){if(typeof h=="object")return h;if(typeof h!="string")throw new s.InvalidArgumentException(`Unexpected 'unhandledPromptBehavior' type: ${typeof h}`);switch(h){case"accept":case"accept and notify":return{default:"accept"};case"dismiss":case"dismiss and notify":return{default:"dismiss"};case"ignore":return{default:"ignore"};default:throw new s.InvalidArgumentException(`Unexpected 'unhandledPromptBehavior' value: ${h}`)}}},l);return Rc.SessionProcessor=i,Rc}var Dc={},tb;function n1(){var o,c,u,l,Cf,Bd,r0,i0,kf,xg,g;if(tb)return Dc;tb=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.StorageProcessor=void 0;const s=Le(),i=Cs(),e=Xt(),t=Vv(),n=Fh();let a=(g=class{constructor(E,v,C){f(this,l);f(this,o);f(this,c);f(this,u);y(this,c,v),y(this,o,E),y(this,u,C)}async deleteCookies(E){const v=k(this,l,kf).call(this,E.partition);let C;try{C=await r(this,o).sendCommand("Storage.getCookies",{browserContextId:k(this,l,Bd).call(this,v)})}catch(F){throw k(this,l,Cf).call(this,F)?new s.NoSuchUserContextException(F.message):F}const A=C.cookies.filter(F=>{var R;return v.sourceOrigin===void 0||((R=F.partitionKey)==null?void 0:R.topLevelSite)===v.sourceOrigin}).filter(F=>{const R=(0,n.cdpToBiDiCookie)(F);return k(this,l,xg).call(this,R,E.filter)}).map(F=>({...F,expires:1}));return await r(this,o).sendCommand("Storage.setCookies",{cookies:A,browserContextId:k(this,l,Bd).call(this,v)}),{partitionKey:v}}async getCookies(E){const v=k(this,l,kf).call(this,E.partition);let C;try{C=await r(this,o).sendCommand("Storage.getCookies",{browserContextId:k(this,l,Bd).call(this,v)})}catch(F){throw k(this,l,Cf).call(this,F)?new s.NoSuchUserContextException(F.message):F}return{cookies:C.cookies.filter(F=>{var R;return v.sourceOrigin===void 0||((R=F.partitionKey)==null?void 0:R.topLevelSite)===v.sourceOrigin}).map(F=>(0,n.cdpToBiDiCookie)(F)).filter(F=>k(this,l,xg).call(this,F,E.filter)),partitionKey:v}}async setCookie(E){var A;const v=k(this,l,kf).call(this,E.partition),C=(0,n.bidiToCdpCookie)(E,v);try{await r(this,o).sendCommand("Storage.setCookies",{cookies:[C],browserContextId:k(this,l,Bd).call(this,v)})}catch(F){throw k(this,l,Cf).call(this,F)?new s.NoSuchUserContextException(F.message):((A=r(this,u))==null||A.call(this,e.LogType.debugError,F),new s.UnableToSetCookieException(F.toString()))}return{partitionKey:v}}},o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakSet,Cf=function(E){var v;return(v=E.message)==null?void 0:v.startsWith("Failed to find browser context for id")},Bd=function(E){return E.userContext==="default"?void 0:E.userContext},r0=function(E){const v=E.context;return{userContext:r(this,c).getContext(v).userContext}},i0=function(E){var F;const v=new Map;let C=E.sourceOrigin;if(C!==void 0){const R=t.NetworkProcessor.parseUrlString(C);R.origin==="null"?C=R.origin:C=`${R.protocol}//${R.hostname}`}for(const[R,P]of Object.entries(E))R!==void 0&&P!==void 0&&!["type","sourceOrigin","userContext"].includes(R)&&v.set(R,P);return v.size>0&&((F=r(this,u))==null||F.call(this,e.LogType.debugInfo,`Unsupported partition keys: ${JSON.stringify(Object.fromEntries(v))}`)),{userContext:E.userContext??"default",...C===void 0?{}:{sourceOrigin:C}}},kf=function(E){return E===void 0?{userContext:"default"}:E.type==="context"?k(this,l,r0).call(this,E):((0,i.assert)(E.type==="storageKey","Unknown partition type"),k(this,l,i0).call(this,E))},xg=function(E,v){return v===void 0?!0:(v.domain===void 0||v.domain===E.domain)&&(v.name===void 0||v.name===E.name)&&(v.value===void 0||(0,n.deserializeByteValue)(v.value)===(0,n.deserializeByteValue)(E.value))&&(v.path===void 0||v.path===E.path)&&(v.size===void 0||v.size===E.size)&&(v.httpOnly===void 0||v.httpOnly===E.httpOnly)&&(v.secure===void 0||v.secure===E.secure)&&(v.sameSite===void 0||v.sameSite===E.sameSite)&&(v.expiry===void 0||v.expiry===E.expiry)},g);return Dc.StorageProcessor=a,Dc}var Fc={},rb;function Up(){var i,e,t;if(rb)return Fc;rb=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.OutgoingMessage=void 0;let s=(t=class{constructor(a,o=null){f(this,i);f(this,e);y(this,i,a),y(this,e,o)}static createFromPromise(a,o){return a.then(c=>c.kind==="success"?{kind:"success",value:new t(c.value,o)}:c)}static createResolved(a,o){return Promise.resolve({kind:"success",value:new t(a,o)})}get message(){return r(this,i)}get channel(){return r(this,e)}},i=new WeakMap,e=new WeakMap,t);return Fc.OutgoingMessage=s,Fc}var ib;function a1(){var w,g,S,E,v,C,A,F,R,P,T,q,L,s0,Ef,K;if(ib)return pc;ib=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.CommandProcessor=void 0;const s=Le(),i=aa(),e=Xt(),t=K_(),n=U_(),a=H_(),o=W_(),c=Z_(),u=Vv(),l=t1(),p=i1(),h=s1(),d=n1(),m=Up();let b=(K=class extends i.EventEmitter{constructor(D,N,$,B,X,Y,le,V,z=new t.BidiNoOpParser,ne,fe){super();f(this,L);f(this,w);f(this,g);f(this,S);f(this,E);f(this,v);f(this,C);f(this,A);f(this,F);f(this,R);f(this,P);f(this,T);f(this,q);y(this,T,z),y(this,q,fe),y(this,w,V),y(this,g,new n.BrowserProcessor(N,B)),y(this,S,new o.BrowsingContextProcessor(N,B,$)),y(this,E,new a.CdpProcessor(B,X,D,N)),y(this,v,new c.InputProcessor(B)),y(this,C,new u.NetworkProcessor(B,le)),y(this,A,new l.PermissionsProcessor(N)),y(this,F,new p.ScriptProcessor($,B,X,Y,fe)),y(this,R,new h.SessionProcessor($,N,ne)),y(this,P,new d.StorageProcessor(N,B,fe))}async processCommand(D){var N;try{const $=await k(this,L,s0).call(this,D),B={type:"success",id:D.id,result:$};this.emit("response",{message:m.OutgoingMessage.createResolved(B,D.channel),event:D.method})}catch($){if($ instanceof s.Exception)this.emit("response",{message:m.OutgoingMessage.createResolved($.toErrorResponse(D.id),D.channel),event:D.method});else{const B=$;(N=r(this,q))==null||N.call(this,e.LogType.bidi,B),this.emit("response",{message:m.OutgoingMessage.createResolved(new s.UnknownErrorException(B.message,B.stack).toErrorResponse(D.id),D.channel),event:D.method})}}}},w=new WeakMap,g=new WeakMap,S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,A=new WeakMap,F=new WeakMap,R=new WeakMap,P=new WeakMap,T=new WeakMap,q=new WeakMap,L=new WeakSet,s0=async function(D){switch(D.method){case"bluetooth.handleRequestDevicePrompt":return await r(this,w).handleRequestDevicePrompt(r(this,T).parseHandleRequestDevicePromptParams(D.params));case"bluetooth.simulateAdapter":return await r(this,w).simulateAdapter(r(this,T).parseSimulateAdapterParameters(D.params));case"bluetooth.simulateAdvertisement":return await r(this,w).simulateAdvertisement(r(this,T).parseSimulateAdvertisementParameters(D.params));case"bluetooth.simulatePreconnectedPeripheral":return await r(this,w).simulatePreconnectedPeripheral(r(this,T).parseSimulatePreconnectedPeripheralParameters(D.params));case"browser.close":return r(this,g).close();case"browser.createUserContext":return await r(this,g).createUserContext(D.params);case"browser.getClientWindows":return await r(this,g).getClientWindows();case"browser.getUserContexts":return await r(this,g).getUserContexts();case"browser.removeUserContext":return await r(this,g).removeUserContext(r(this,T).parseRemoveUserContextParams(D.params));case"browser.setClientWindowState":throw new s.UnknownErrorException(`Method ${D.method} is not implemented.`);case"browsingContext.activate":return await r(this,S).activate(r(this,T).parseActivateParams(D.params));case"browsingContext.captureScreenshot":return await r(this,S).captureScreenshot(r(this,T).parseCaptureScreenshotParams(D.params));case"browsingContext.close":return await r(this,S).close(r(this,T).parseCloseParams(D.params));case"browsingContext.create":return await r(this,S).create(r(this,T).parseCreateParams(D.params));case"browsingContext.getTree":return r(this,S).getTree(r(this,T).parseGetTreeParams(D.params));case"browsingContext.handleUserPrompt":return await r(this,S).handleUserPrompt(r(this,T).parseHandleUserPromptParams(D.params));case"browsingContext.locateNodes":return await r(this,S).locateNodes(r(this,T).parseLocateNodesParams(D.params));case"browsingContext.navigate":return await r(this,S).navigate(r(this,T).parseNavigateParams(D.params));case"browsingContext.print":return await r(this,S).print(r(this,T).parsePrintParams(D.params));case"browsingContext.reload":return await r(this,S).reload(r(this,T).parseReloadParams(D.params));case"browsingContext.setViewport":return await r(this,S).setViewport(r(this,T).parseSetViewportParams(D.params));case"browsingContext.traverseHistory":return await r(this,S).traverseHistory(r(this,T).parseTraverseHistoryParams(D.params));case"goog:cdp.getSession":return r(this,E).getSession(r(this,T).parseGetSessionParams(D.params));case"goog:cdp.resolveRealm":return r(this,E).resolveRealm(r(this,T).parseResolveRealmParams(D.params));case"goog:cdp.sendCommand":return await r(this,E).sendCommand(r(this,T).parseSendCommandParams(D.params));case"cdp.getSession":return r(this,E).getSession(r(this,T).parseGetSessionParams(D.params));case"cdp.resolveRealm":return r(this,E).resolveRealm(r(this,T).parseResolveRealmParams(D.params));case"cdp.sendCommand":return await r(this,E).sendCommand(r(this,T).parseSendCommandParams(D.params));case"input.performActions":return await r(this,v).performActions(r(this,T).parsePerformActionsParams(D.params));case"input.releaseActions":return await r(this,v).releaseActions(r(this,T).parseReleaseActionsParams(D.params));case"input.setFiles":return await r(this,v).setFiles(r(this,T).parseSetFilesParams(D.params));case"network.addIntercept":return await r(this,C).addIntercept(r(this,T).parseAddInterceptParams(D.params));case"network.continueRequest":return await r(this,C).continueRequest(r(this,T).parseContinueRequestParams(D.params));case"network.continueResponse":return await r(this,C).continueResponse(r(this,T).parseContinueResponseParams(D.params));case"network.continueWithAuth":return await r(this,C).continueWithAuth(r(this,T).parseContinueWithAuthParams(D.params));case"network.failRequest":return await r(this,C).failRequest(r(this,T).parseFailRequestParams(D.params));case"network.provideResponse":return await r(this,C).provideResponse(r(this,T).parseProvideResponseParams(D.params));case"network.removeIntercept":return await r(this,C).removeIntercept(r(this,T).parseRemoveInterceptParams(D.params));case"network.setCacheBehavior":return await r(this,C).setCacheBehavior(r(this,T).parseSetCacheBehavior(D.params));case"permissions.setPermission":return await r(this,A).setPermissions(r(this,T).parseSetPermissionsParams(D.params));case"script.addPreloadScript":return await r(this,F).addPreloadScript(r(this,T).parseAddPreloadScriptParams(D.params));case"script.callFunction":return await r(this,F).callFunction(r(this,T).parseCallFunctionParams(k(this,L,Ef).call(this,D.params)));case"script.disown":return await r(this,F).disown(r(this,T).parseDisownParams(k(this,L,Ef).call(this,D.params)));case"script.evaluate":return await r(this,F).evaluate(r(this,T).parseEvaluateParams(k(this,L,Ef).call(this,D.params)));case"script.getRealms":return r(this,F).getRealms(r(this,T).parseGetRealmsParams(D.params));case"script.removePreloadScript":return await r(this,F).removePreloadScript(r(this,T).parseRemovePreloadScriptParams(D.params));case"session.end":throw new s.UnknownErrorException(`Method ${D.method} is not implemented.`);case"session.new":return await r(this,R).new(D.params);case"session.status":return r(this,R).status();case"session.subscribe":return await r(this,R).subscribe(r(this,T).parseSubscribeParams(D.params),D.channel);case"session.unsubscribe":return await r(this,R).unsubscribe(r(this,T).parseSubscribeParams(D.params),D.channel);case"storage.deleteCookies":return await r(this,P).deleteCookies(r(this,T).parseDeleteCookiesParams(D.params));case"storage.getCookies":return await r(this,P).getCookies(r(this,T).parseGetCookiesParams(D.params));case"storage.setCookie":return await r(this,P).setCookie(r(this,T).parseSetCookieParams(D.params));case"webExtension.install":throw new s.UnknownErrorException(`Method ${D.method} is not implemented.`);case"webExtension.uninstall":throw new s.UnknownErrorException(`Method ${D.method} is not implemented.`)}throw new s.UnknownCommandException(`Unknown command '${D==null?void 0:D.method}'.`)},Ef=function(D){return typeof D=="object"&&D&&"target"in D&&typeof D.target=="object"&&D.target&&"context"in D.target&&delete D.target.realm,D},K);return pc.CommandProcessor=b,pc}var Oc={},sb;function o1(){var i,e,t;if(sb)return Oc;sb=1,Object.defineProperty(Oc,"__esModule",{value:!0}),Oc.BluetoothProcessor=void 0;let s=(t=class{constructor(a,o){f(this,i);f(this,e);y(this,i,a),y(this,e,o)}async simulateAdapter(a){const o=r(this,e).getContext(a.context);return await o.cdpTarget.browserCdpClient.sendCommand("BluetoothEmulation.disable"),await o.cdpTarget.browserCdpClient.sendCommand("BluetoothEmulation.enable",{state:a.state}),{}}async simulatePreconnectedPeripheral(a){return await r(this,e).getContext(a.context).cdpTarget.browserCdpClient.sendCommand("BluetoothEmulation.simulatePreconnectedPeripheral",{address:a.address,name:a.name,knownServiceUuids:a.knownServiceUuids,manufacturerData:a.manufacturerData}),{}}async simulateAdvertisement(a){return await r(this,e).getContext(a.context).cdpTarget.browserCdpClient.sendCommand("BluetoothEmulation.simulateAdvertisement",{entry:a.scanEntry}),{}}onCdpTargetCreated(a){a.cdpClient.on("DeviceAccess.deviceRequestPrompted",o=>{r(this,i).registerEvent({type:"event",method:"bluetooth.requestDevicePromptUpdated",params:{context:a.id,prompt:o.id,devices:o.devices}},a.id)})}async handleRequestDevicePrompt(a){const o=r(this,e).getContext(a.context);return a.accept?await o.cdpTarget.cdpClient.sendCommand("DeviceAccess.selectPrompt",{id:a.prompt,deviceId:a.device}):await o.cdpTarget.cdpClient.sendCommand("DeviceAccess.cancelPrompt",{id:a.prompt}),{}}},i=new WeakMap,e=new WeakMap,t);return Oc.BluetoothProcessor=s,Oc}var Nc={},ca={},Lc={},nb;function Nh(){var i,e,t,n,a,o,c;if(nb)return Lc;nb=1,Object.defineProperty(Lc,"__esModule",{value:!0}),Lc.Deferred=void 0;let s=(i=Symbol.toStringTag,c=class{constructor(){f(this,e,!1);f(this,t);f(this,n);f(this,a);f(this,o);W(this,i,"Promise");y(this,t,new Promise((l,p)=>{y(this,a,l),y(this,o,p)})),r(this,t).catch(l=>{})}get isFinished(){return r(this,e)}get result(){if(!r(this,e))throw new Error("Deferred is not finished yet");return r(this,n)}then(l,p){return r(this,t).then(l,p)}catch(l){return r(this,t).catch(l)}resolve(l){y(this,n,l),r(this,e)||(y(this,e,!0),r(this,a).call(this,l))}reject(l){r(this,e)||(y(this,e,!0),r(this,o).call(this,l))}finally(l){return r(this,t).finally(l)}},e=new WeakMap,t=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c);return Lc.Deferred=s,Lc}var Lh={},ab;function ob(){if(ab)return Lh;ab=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.getTimestamp=s;function s(){return new Date().getTime()}return Lh}var Bh={},cb;function c1(){if(cb)return Bh;cb=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.inchesFromCm=s;function s(i){return i/2.54}return Bh}var Bc={},jc={},ub;function lb(){var a,o,c,u,l,p,h,d,Pg,b,n0,_g,Tg,a0,Mg,Ig,o0,c0,Ag;if(ub)return jc;ub=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.Realm=void 0;const s=Le(),i=Xt(),e=Ic(),t=Yv(),P=class P{constructor(q,L,I,_,K,j,O){f(this,d);f(this,a);f(this,o);f(this,c);f(this,u);f(this,l);f(this,p);f(this,h);y(this,a,q),y(this,o,L),y(this,c,I),y(this,u,_),y(this,l,K),y(this,p,j),y(this,h,O),r(this,h).addRealm(this)}cdpToBidiValue(q,L){const I=this.serializeForBiDi(q.result.deepSerializedValue,new Map);if(q.result.objectId){const _=q.result.objectId;L==="root"?(I.handle=_,r(this,h).knownHandlesToRealmMap.set(_,this.realmId)):k(this,d,Ag).call(this,_).catch(K=>{var j;return(j=r(this,u))==null?void 0:j.call(this,i.LogType.debugError,K)})}return I}serializeForBiDi(q,L){if(Object.hasOwn(q,"weakLocalObjectReference")){const _=q.weakLocalObjectReference;L.has(_)||L.set(_,(0,e.uuidv4)()),q.internalId=L.get(_),delete q.weakLocalObjectReference}if(q.type==="node"&&Object.hasOwn(q==null?void 0:q.value,"frameId")&&delete q.value.frameId,q.type==="platformobject")return{type:"object"};const I=q.value;if(I===void 0)return q;if(["array","set","htmlcollection","nodelist"].includes(q.type))for(const _ in I)I[_]=this.serializeForBiDi(I[_],L);if(["object","map"].includes(q.type))for(const _ in I)I[_]=[this.serializeForBiDi(I[_][0],L),this.serializeForBiDi(I[_][1],L)];return q}get realmId(){return r(this,p)}get executionContextId(){return r(this,c)}get origin(){return r(this,l)}get source(){return{realm:this.realmId}}get cdpClient(){return r(this,a)}get baseInfo(){return{realm:this.realmId,origin:this.origin}}async evaluate(q,L,I="none",_={},K=!1,j=!1){var D;const O=await this.cdpClient.sendCommand("Runtime.evaluate",{contextId:this.executionContextId,expression:q,awaitPromise:L,serializationOptions:k(D=P,b,Ig).call(D,"deep",_),userGesture:K,includeCommandLineAPI:j});return O.exceptionDetails?await k(this,d,Mg).call(this,O.exceptionDetails,0,I):{realm:this.realmId,result:this.cdpToBidiValue(O,I),type:"success"}}initialize(){k(this,d,Pg).call(this,{type:"event",method:s.ChromiumBidi.Script.EventNames.RealmCreated,params:this.realmInfo})}async serializeCdpObject(q,L){var K;const I=k(K=P,b,n0).call(K,q),_=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(j=>j),awaitPromise:!1,arguments:[I],serializationOptions:{serialization:"deep"},executionContextId:this.executionContextId});return this.cdpToBidiValue(_,L)}async stringifyObject(q){const{result:L}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String(I=>String(I)),awaitPromise:!1,arguments:[q],returnByValue:!0,executionContextId:this.executionContextId});return L.value}async callFunction(q,L,I={type:"undefined"},_=[],K="none",j={},O=!1){var B;const D=`(...args) => {
      function callFunction(f, args) {
        const deserializedThis = args.shift();
        const deserializedArgs = args;
        return f.apply(deserializedThis, deserializedArgs);
      }
      return callFunction((
        ${q}
      ), args);
    }`,N=[await this.deserializeForCdp(I),...await Promise.all(_.map(async X=>await this.deserializeForCdp(X)))];let $;try{$=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:D,awaitPromise:L,arguments:N,serializationOptions:k(B=P,b,Ig).call(B,"deep",j),executionContextId:this.executionContextId,userGesture:O})}catch(X){throw X.code===-32e3&&["Could not find object with given id","Argument should belong to the same JavaScript world as target object","Invalid remote object id"].includes(X.message)?new s.NoSuchHandleException("Handle was not found."):X}return $.exceptionDetails?await k(this,d,Mg).call(this,$.exceptionDetails,1,K):{type:"success",result:this.cdpToBidiValue($,K),realm:this.realmId}}async deserializeForCdp(q){if("handle"in q&&q.handle)return{objectId:q.handle};if("handle"in q||"sharedId"in q)throw new s.NoSuchHandleException("Handle was not found.");switch(q.type){case"undefined":return{unserializableValue:"undefined"};case"null":return{unserializableValue:"null"};case"string":return{value:q.value};case"number":return q.value==="NaN"?{unserializableValue:"NaN"}:q.value==="-0"?{unserializableValue:"-0"}:q.value==="Infinity"?{unserializableValue:"Infinity"}:q.value==="-Infinity"?{unserializableValue:"-Infinity"}:{value:q.value};case"boolean":return{value:!!q.value};case"bigint":return{unserializableValue:`BigInt(${JSON.stringify(q.value)})`};case"date":return{unserializableValue:`new Date(Date.parse(${JSON.stringify(q.value)}))`};case"regexp":return{unserializableValue:`new RegExp(${JSON.stringify(q.value.pattern)}, ${JSON.stringify(q.value.flags)})`};case"map":{const L=await k(this,d,_g).call(this,q.value),{result:I}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((..._)=>{const K=new Map;for(let j=0;j<_.length;j+=2)K.set(_[j],_[j+1]);return K}),awaitPromise:!1,arguments:L,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:I.objectId}}case"object":{const L=await k(this,d,_g).call(this,q.value),{result:I}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((..._)=>{const K={};for(let j=0;j<_.length;j+=2){const O=_[j];K[O]=_[j+1]}return K}),awaitPromise:!1,arguments:L,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:I.objectId}}case"array":{const L=await k(this,d,Tg).call(this,q.value),{result:I}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((..._)=>_),awaitPromise:!1,arguments:L,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:I.objectId}}case"set":{const L=await k(this,d,Tg).call(this,q.value),{result:I}=await this.cdpClient.sendCommand("Runtime.callFunctionOn",{functionDeclaration:String((..._)=>new Set(_)),awaitPromise:!1,arguments:L,returnByValue:!1,executionContextId:this.executionContextId});return{objectId:I.objectId}}case"channel":return{objectId:await new t.ChannelProxy(q.value,r(this,u)).init(this,r(this,o))}}throw new Error(`Value ${JSON.stringify(q)} is not deserializable.`)}async disown(q){r(this,h).knownHandlesToRealmMap.get(q)===this.realmId&&(await k(this,d,Ag).call(this,q),r(this,h).knownHandlesToRealmMap.delete(q))}dispose(){k(this,d,Pg).call(this,{type:"event",method:s.ChromiumBidi.Script.EventNames.RealmDestroyed,params:{realm:this.realmId}})}};a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakSet,Pg=function(q){if(this.associatedBrowsingContexts.length===0)r(this,o).registerEvent(q,null);else for(const L of this.associatedBrowsingContexts)r(this,o).registerEvent(q,L.id)},b=new WeakSet,n0=function(q){return q.objectId!==void 0?{objectId:q.objectId}:q.unserializableValue!==void 0?{unserializableValue:q.unserializableValue}:{value:q.value}},_g=async function(q){return(await Promise.all(q.map(async([I,_])=>{let K;typeof I=="string"?K={value:I}:K=await this.deserializeForCdp(I);const j=await this.deserializeForCdp(_);return[K,j]}))).flat()},Tg=async function(q){return await Promise.all(q.map(L=>this.deserializeForCdp(L)))},a0=async function(q,L,I){var j;const _=((j=q.stackTrace)==null?void 0:j.callFrames.map(O=>({url:O.url,functionName:O.functionName,lineNumber:O.lineNumber-L,columnNumber:O.columnNumber})))??[],K=q.exception;return{exception:await this.serializeCdpObject(K,I),columnNumber:q.columnNumber,lineNumber:q.lineNumber-L,stackTrace:{callFrames:_},text:await this.stringifyObject(K)||q.text}},Mg=async function(q,L,I){return{exceptionDetails:await k(this,d,a0).call(this,q,L,I),realm:this.realmId,type:"exception"}},Ig=function(q,L){var I,_;return{serialization:q,additionalParameters:k(I=P,b,o0).call(I,L),...k(_=P,b,c0).call(_,L)}},o0=function(q){const L={};return q.maxDomDepth!==void 0&&(L.maxNodeDepth=q.maxDomDepth===null?1e3:q.maxDomDepth),q.includeShadowTree!==void 0&&(L.includeShadowTree=q.includeShadowTree),L},c0=function(q){return q.maxObjectDepth===void 0||q.maxObjectDepth===null?{}:{maxDepth:q.maxObjectDepth}},Ag=async function(q){try{await this.cdpClient.sendCommand("Runtime.releaseObject",{objectId:q})}catch(L){if(!(L.code===-32e3&&L.message==="Invalid remote object id"))throw L}},f(P,b);let n=P;return jc.Realm=n,jc}var qc={},db;function u1(){if(db)return qc;db=1,Object.defineProperty(qc,"__esModule",{value:!0}),qc.getSharedId=i,qc.parseSharedId=t;const s="_element_";function i(n,a,o){return`f.${n}.d.${a}.e.${o}`}function e(n){const a=n.match(new RegExp(`(.*)${s}(.*)`));if(!a)return null;const o=a[1],c=a[2];if(o===void 0||c===void 0)return null;const u=parseInt(c??"");return isNaN(u)?null:{documentId:o,backendNodeId:u}}function t(n){const a=e(n);if(a!==null)return{...a,frameId:void 0};const o=n.match(/f\.(.*)\.d\.(.*)\.e\.([0-9]*)/);if(!o)return null;const c=o[1],u=o[2],l=o[3];if(c===void 0||u===void 0||l===void 0)return null;const p=parseInt(l??"");return isNaN(p)?null:{frameId:c,documentId:u,backendNodeId:p}}return qc}var hb;function fb(){var n,a,o,u0;if(hb)return Bc;hb=1,Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.WindowRealm=void 0;const s=Le(),i=lb(),e=u1();class t extends i.Realm{constructor(p,h,d,m,b,w,g,S,E,v){super(d,m,b,w,g,S,E);f(this,o);f(this,n);f(this,a);W(this,"sandbox");y(this,n,p),y(this,a,h),this.sandbox=v,this.initialize()}get browsingContext(){return r(this,a).getContext(r(this,n))}get associatedBrowsingContexts(){return[this.browsingContext]}get realmType(){return"window"}get realmInfo(){return{...this.baseInfo,type:this.realmType,context:r(this,n),sandbox:this.sandbox}}get source(){return{realm:this.realmId,context:this.browsingContext.id}}serializeForBiDi(p,h){const d=p.value;if(p.type==="node"&&d!==void 0){if(Object.hasOwn(d,"backendNodeId")){let m=this.browsingContext.navigableId??"UNKNOWN";Object.hasOwn(d,"loaderId")&&(m=d.loaderId,delete d.loaderId),p.sharedId=(0,e.getSharedId)(k(this,o,u0).call(this,m),m,d.backendNodeId),delete d.backendNodeId}if(Object.hasOwn(d,"children"))for(const m in d.children)d.children[m]=this.serializeForBiDi(d.children[m],h);Object.hasOwn(d,"shadowRoot")&&d.shadowRoot!==null&&(d.shadowRoot=this.serializeForBiDi(d.shadowRoot,h)),d.namespaceURI===""&&(d.namespaceURI=null)}return super.serializeForBiDi(p,h)}async deserializeForCdp(p){if("sharedId"in p&&p.sharedId){const h=(0,e.parseSharedId)(p.sharedId);if(h===null)throw new s.NoSuchNodeException(`SharedId "${p.sharedId}" was not found.`);const{documentId:d,backendNodeId:m}=h;if(this.browsingContext.navigableId!==d)throw new s.NoSuchNodeException(`SharedId "${p.sharedId}" belongs to different document. Current document is ${this.browsingContext.navigableId}.`);try{const{object:b}=await this.cdpClient.sendCommand("DOM.resolveNode",{backendNodeId:m,executionContextId:this.executionContextId});return{objectId:b.objectId}}catch(b){throw b.code===-32e3&&b.message==="No node with given id found"?new s.NoSuchNodeException(`SharedId "${p.sharedId}" was not found.`):new s.UnknownErrorException(b.message,b.stack)}}return await super.deserializeForCdp(p)}async evaluate(p,h,d,m,b,w){return await r(this,a).getContext(r(this,n)).targetUnblockedOrThrow(),await super.evaluate(p,h,d,m,b,w)}async callFunction(p,h,d,m,b,w,g){return await r(this,a).getContext(r(this,n)).targetUnblockedOrThrow(),await super.callFunction(p,h,d,m,b,w,g)}}return n=new WeakMap,a=new WeakMap,o=new WeakSet,u0=function(p){const h=r(this,a).getAllContexts().find(d=>d.navigableId===p);return(h==null?void 0:h.id)??"UNKNOWN"},Bc.WindowRealm=t,Bc}var ks={},jh={},pb;function l1(){if(pb)return jh;pb=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.urlMatchesAboutBlank=s;function s(i){if(i==="")return!0;try{const e=new URL(i);return e.protocol.replace(/:$/,"").toLowerCase()==="about"&&e.pathname.toLowerCase()==="blank"&&e.username===""&&e.password===""&&e.host===""}catch(e){if(e instanceof TypeError)return!1;throw e}}return jh}var mb;function d1(){var l,p,h,d,m,b,w,xf,S,E,v,C,A,F,R,P,l0,q;if(mb)return ks;mb=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.NavigationTracker=ks.NavigationResult=void 0;const s=Le(),i=Nh(),e=Xt(),t=ob(),n=l1(),a=Ic();class o{constructor(I,_){W(this,"eventName");W(this,"message");this.eventName=I,this.message=_}}ks.NavigationResult=o;class c{constructor(I,_,K,j){f(this,w);W(this,"navigationId",(0,a.uuidv4)());f(this,l);f(this,p,!1);f(this,h,new i.Deferred);W(this,"url");W(this,"loaderId");f(this,d);f(this,m);f(this,b,!1);y(this,l,_),this.url=I,y(this,d,K),y(this,m,j)}get finished(){return r(this,h)}navigationInfo(){return{context:r(this,l),navigation:this.navigationId,timestamp:(0,t.getTimestamp)(),url:this.url}}start(){!r(this,d)&&!r(this,p)&&r(this,m).registerEvent({type:"event",method:s.ChromiumBidi.BrowsingContext.EventNames.NavigationStarted,params:this.navigationInfo()},r(this,l)),y(this,p,!0)}frameNavigated(){y(this,b,!0)}fragmentNavigated(){y(this,b,!0),k(this,w,xf).call(this,new o("browsingContext.fragmentNavigated"))}load(){k(this,w,xf).call(this,new o("browsingContext.load"))}fail(I){k(this,w,xf).call(this,new o(r(this,b)?"browsingContext.navigationAborted":"browsingContext.navigationFailed",I))}}l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakSet,xf=function(I){y(this,p,!0),!r(this,d)&&!r(this,h).isFinished&&I.eventName!=="browsingContext.load"&&r(this,m).registerEvent({type:"event",method:I.eventName,params:this.navigationInfo()},r(this,l)),r(this,h).resolve(I)};let u=(q=class{constructor(I,_,K,j){f(this,P);f(this,S);f(this,E);f(this,v,new Map);f(this,C);f(this,A);f(this,F);f(this,R,!0);W(this,"navigation",{withinDocument:new i.Deferred});y(this,C,_),y(this,S,K),y(this,E,j),y(this,R,!0),y(this,A,new c(I,_,(0,n.urlMatchesAboutBlank)(I),r(this,S)))}get currentNavigationId(){var I;return((I=r(this,F))==null?void 0:I.loaderId)!==void 0?r(this,F).navigationId:r(this,A).navigationId}get isInitialNavigation(){return r(this,R)}get url(){return r(this,A).url}createPendingNavigation(I,_=!1){var j,O;(j=r(this,E))==null||j.call(this,e.LogType.debug,"createCommandNavigation"),y(this,R,_&&r(this,R)&&(0,n.urlMatchesAboutBlank)(I)),(O=r(this,F))==null||O.fail("navigation canceled by concurrent navigation");const K=new c(I,r(this,C),r(this,R),r(this,S));return y(this,F,K),K}dispose(){var I;(I=r(this,F))==null||I.fail("navigation canceled by context disposal"),r(this,A).fail("navigation canceled by context disposal")}onTargetInfoChanged(I){var _;(_=r(this,E))==null||_.call(this,e.LogType.debug,`onTargetInfoChanged ${I}`),r(this,A).url=I}frameNavigated(I,_,K){var O;if((O=r(this,E))==null||O.call(this,e.LogType.debug,`frameNavigated ${I}`),K!==void 0&&!r(this,v).has(_)){const D=r(this,F)??this.createPendingNavigation(K,!0);D.url=K,D.start(),D.fail("the requested url is unreachable");return}const j=k(this,P,l0).call(this,I,_);j.frameNavigated(),j!==r(this,A)&&r(this,A).fail("navigation canceled by concurrent navigation"),j.url=I,j.loaderId=_,r(this,v).set(_,j),j.start(),y(this,A,j),r(this,F)===j&&y(this,F,void 0)}navigatedWithinDocument(I,_){var j;if((j=r(this,E))==null||j.call(this,e.LogType.debug,`navigatedWithinDocument ${I}, ${_}`),r(this,A).url=I,_!=="fragment")return;const K=r(this,F)!==void 0&&r(this,F).loaderId===void 0?r(this,F):new c(I,r(this,C),!1,r(this,S));K.fragmentNavigated(),K===r(this,F)&&y(this,F,void 0)}frameRequestedNavigation(I){var _;(_=r(this,E))==null||_.call(this,e.LogType.debug,`Page.frameRequestedNavigation ${I}`),this.createPendingNavigation(I,!0)}loadPageEvent(I){var _,K;(_=r(this,E))==null||_.call(this,e.LogType.debug,"loadPageEvent"),y(this,R,!1),(K=r(this,v).get(I))==null||K.load()}failNavigation(I,_){var K;(K=r(this,E))==null||K.call(this,e.LogType.debug,"failCommandNavigation"),I.fail(_)}navigationCommandFinished(I,_){var K;(K=r(this,E))==null||K.call(this,e.LogType.debug,`finishCommandNavigation ${I.navigationId}, ${_}`),_!==void 0&&(I.loaderId=_,r(this,v).set(_,I)),!(_===void 0||r(this,A)===I)&&(r(this,A).fail("navigation canceled by concurrent navigation"),I.start(),y(this,A,I),r(this,F)===I&&y(this,F,void 0))}frameStartedNavigating(I,_){var j;if((j=r(this,E))==null||j.call(this,e.LogType.debug,`frameStartedNavigating ${I}, ${_}`),r(this,v).has(_))return;const K=r(this,F)??this.createPendingNavigation(I,!0);K.url=I,K.start(),K.loaderId=_,r(this,v).set(_,K)}beforeunload(){var I,_;if((I=r(this,E))==null||I.call(this,e.LogType.debug,"beforeunload"),r(this,F)===void 0){(_=r(this,E))==null||_.call(this,e.LogType.debugError,"Unexpectedly no pending navigation on beforeunload");return}r(this,F).start()}networkLoadingFailed(I,_){var K;(K=r(this,v).get(I))==null||K.fail(_)}},S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,A=new WeakMap,F=new WeakMap,R=new WeakMap,P=new WeakSet,l0=function(I,_){var K;return r(this,v).has(_)?r(this,v).get(_):r(this,F)!==void 0&&((K=r(this,F))==null?void 0:K.loaderId)===void 0?r(this,F):this.createPendingNavigation(I,!0)},q);return ks.NavigationTracker=u,ks}var gb;function wb(){var g,S,E,v,C,A,F,R,P,T,q,L,I,_,K,j,O,D,Pf,Rg,B,d0,h0,_f,Dg,f0,Fg,p0,m0,g0;if(gb)return ca;gb=1;var s;Object.defineProperty(ca,"__esModule",{value:!0}),ca.BrowsingContextImpl=void 0,ca.serializeOrigin=p;const i=Le(),e=Cs(),t=Nh(),n=Xt(),a=ob(),o=c1(),c=fb(),u=d1();let l=(g=class{constructor(x,M,H,G,J,Z,ie,ue,U,Q,ee){f(this,D);f(this,S,new Set);f(this,E);W(this,"userContext");f(this,v);f(this,C,null);f(this,A,{width:0,height:0});f(this,F);f(this,R,{DOMContentLoaded:new t.Deferred,load:new t.Deferred});f(this,P);f(this,T,new t.Deferred);f(this,q);f(this,L);f(this,I);f(this,_);f(this,K);f(this,j);f(this,O);y(this,P,G),y(this,E,x),y(this,C,M),this.userContext=H,y(this,L,J),y(this,q,Z),y(this,K,ie),y(this,j,Q),y(this,I,ee),y(this,F,U),y(this,_,new u.NavigationTracker(ue,x,J,ee))}static create(x,M,H,G,J,Z,ie,ue,U,Q,ee){var pe;const re=new s(x,M,H,G,J,Z,ie,ue,U,Q,ee);return k(pe=re,D,Rg).call(pe),Z.addContext(re),re.isTopLevelContext()||re.parent.addChild(re.id),J.registerPromiseEvent(re.targetUnblockedOrThrow().then(()=>({kind:"success",value:{type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.ContextCreated,params:{...re.serializeToBidiValue(),url:ue}}}),ve=>({kind:"error",error:ve})),re.id,i.ChromiumBidi.BrowsingContext.EventNames.ContextCreated),re}get navigableId(){return r(this,v)}get navigationId(){return r(this,_).currentNavigationId}dispose(x){r(this,_).dispose(),k(this,D,Pf).call(this),r(this,K).deleteRealms({browsingContextId:this.id}),this.isTopLevelContext()||r(this.parent,S).delete(this.id),k(this,D,f0).call(this),x&&r(this,L).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.ContextDestroyed,params:this.serializeToBidiValue()},this.id),r(this,L).clearBufferedEvents(this.id),r(this,q).deleteContextById(this.id)}get id(){return r(this,E)}get parentId(){return r(this,C)}set parentId(x){var M;if(r(this,C)!==null){(M=r(this,I))==null||M.call(this,n.LogType.debugError,"Parent context already set");return}y(this,C,x),this.isTopLevelContext()||this.parent.addChild(this.id)}get parent(){return this.parentId===null?null:r(this,q).getContext(this.parentId)}get directChildren(){return[...r(this,S)].map(x=>r(this,q).getContext(x))}get allChildren(){const x=this.directChildren;return x.concat(...x.map(M=>M.allChildren))}isTopLevelContext(){return r(this,C)===null}get top(){let x=this,M=x.parent;for(;M;)x=M,M=x.parent;return x}addChild(x){r(this,S).add(x)}get cdpTarget(){return r(this,P)}updateCdpTarget(x){y(this,P,x),k(this,D,Rg).call(this)}get url(){return r(this,_).url}async lifecycleLoaded(){await r(this,R).load}async targetUnblockedOrThrow(){const x=await r(this,P).unblocked;if(x.kind==="error")throw x.error}async getOrCreateSandbox(x){if(x===void 0||x==="")return await r(this,T);let M=r(this,K).findRealms({browsingContextId:this.id,sandbox:x});return M.length===0&&(await r(this,P).cdpClient.sendCommand("Page.createIsolatedWorld",{frameId:this.id,worldName:x}),M=r(this,K).findRealms({browsingContextId:this.id,sandbox:x}),(0,e.assert)(M.length!==0)),M[0]}serializeToBidiValue(x=0,M=!0){return{context:r(this,E),url:this.url,userContext:this.userContext,originalOpener:r(this,F)??null,clientWindow:"",children:x>0?this.directChildren.map(H=>H.serializeToBidiValue(x-1,!1)):null,...M?{parent:r(this,C)}:{}}}onTargetInfoChanged(x){r(this,_).onTargetInfoChanged(x.targetInfo.url)}async navigate(x,M){try{new URL(x)}catch{throw new i.InvalidArgumentException(`Invalid URL: ${x}`)}const H=r(this,_).createPendingNavigation(x),G=(async()=>{const Z=await r(this,P).cdpClient.sendCommand("Page.navigate",{url:x,frameId:this.id});if(Z.errorText)throw r(this,_).failNavigation(H,Z.errorText),new i.UnknownErrorException(Z.errorText);r(this,_).navigationCommandFinished(H,Z.loaderId),k(this,D,_f).call(this,Z.loaderId)})();if(M==="none")return{navigation:H.navigationId,url:x};const J=await Promise.race([k(this,D,Fg).call(this,M,G),H.finished]);if(J instanceof u.NavigationResult&&(J.eventName==="browsingContext.navigationAborted"||J.eventName==="browsingContext.navigationFailed"))throw new i.UnknownErrorException(J.message??"unknown exception");return{navigation:H.navigationId,url:H.url}}async reload(x,M){await this.targetUnblockedOrThrow(),k(this,D,Dg).call(this);const H=r(this,_).createPendingNavigation(r(this,_).url),G=r(this,P).cdpClient.sendCommand("Page.reload",{ignoreCache:x}),J=await Promise.race([k(this,D,Fg).call(this,M,G),H.finished]);if(J instanceof u.NavigationResult&&(J.eventName==="browsingContext.navigationAborted"||J.eventName==="browsingContext.navigationFailed"))throw new i.UnknownErrorException(J.message??"unknown exception");return{navigation:H.navigationId,url:H.url}}async setViewport(x,M){if(x===null&&M===null)await r(this,P).cdpClient.sendCommand("Emulation.clearDeviceMetricsOverride");else try{let H;x===void 0?H=r(this,A):x===null?H={width:0,height:0}:H=x,y(this,A,H),await r(this,P).cdpClient.sendCommand("Emulation.setDeviceMetricsOverride",{width:r(this,A).width,height:r(this,A).height,deviceScaleFactor:M||0,mobile:!1,dontSetVisibleSize:!0})}catch(H){throw H.message.startsWith("Width and height values must be positive")?new i.UnsupportedOperationException("Provided viewport dimensions are not supported"):H}}async handleUserPrompt(x,M){await r(this,P).cdpClient.sendCommand("Page.handleJavaScriptDialog",{accept:x??!0,promptText:M})}async activate(){await r(this,P).cdpClient.sendCommand("Page.bringToFront")}async captureScreenshot(x){if(!this.isTopLevelContext())throw new i.UnsupportedOperationException(`Non-top-level 'context' (${x.context}) is currently not supported`);const M=h(x);let H=!1,G;switch(x.origin??(x.origin="viewport"),x.origin){case"document":{G=String(()=>{const U=document.documentElement;return{x:0,y:0,width:U.scrollWidth,height:U.scrollHeight}}),H=!0;break}case"viewport":{G=String(()=>{const U=window.visualViewport;return{x:U.pageLeft,y:U.pageTop,width:U.width,height:U.height}});break}}const Z=await(await this.getOrCreateSandbox(void 0)).callFunction(G,!1);(0,e.assert)(Z.type==="success");const ie=d(Z.result);(0,e.assert)(ie);let ue=ie;if(x.clip){const U=x.clip;x.origin==="viewport"&&U.type==="box"&&(U.x+=ie.x,U.y+=ie.y),ue=b(await k(this,D,p0).call(this,U),ie)}if(ue.width===0||ue.height===0)throw new i.UnableToCaptureScreenException(`Unable to capture screenshot with zero dimensions: width=${ue.width}, height=${ue.height}`);return await r(this,P).cdpClient.sendCommand("Page.captureScreenshot",{clip:{...ue,scale:1},...M,captureBeyondViewport:H})}async print(x){var H,G,J,Z,ie,ue;if(!this.isTopLevelContext())throw new i.UnsupportedOperationException("Printing of non-top level contexts is not supported");const M={};if(x.background!==void 0&&(M.printBackground=x.background),((H=x.margin)==null?void 0:H.bottom)!==void 0&&(M.marginBottom=(0,o.inchesFromCm)(x.margin.bottom)),((G=x.margin)==null?void 0:G.left)!==void 0&&(M.marginLeft=(0,o.inchesFromCm)(x.margin.left)),((J=x.margin)==null?void 0:J.right)!==void 0&&(M.marginRight=(0,o.inchesFromCm)(x.margin.right)),((Z=x.margin)==null?void 0:Z.top)!==void 0&&(M.marginTop=(0,o.inchesFromCm)(x.margin.top)),x.orientation!==void 0&&(M.landscape=x.orientation==="landscape"),((ie=x.page)==null?void 0:ie.height)!==void 0&&(M.paperHeight=(0,o.inchesFromCm)(x.page.height)),((ue=x.page)==null?void 0:ue.width)!==void 0&&(M.paperWidth=(0,o.inchesFromCm)(x.page.width)),x.pageRanges!==void 0){for(const U of x.pageRanges){if(typeof U=="number")continue;const Q=U.split("-");if(Q.length<1||Q.length>2)throw new i.InvalidArgumentException(`Invalid page range: ${U} is not a valid integer range.`);if(Q.length===1){w(Q[0]??"");continue}let ee,re;const[pe="",ve=""]=Q;if(pe===""?ee=1:ee=w(pe),ve===""?re=Number.MAX_SAFE_INTEGER:re=w(ve),ee>re)throw new i.InvalidArgumentException(`Invalid page range: ${pe} > ${ve}`)}M.pageRanges=x.pageRanges.join(",")}x.scale!==void 0&&(M.scale=x.scale),x.shrinkToFit!==void 0&&(M.preferCSSPageSize=!x.shrinkToFit);try{return{data:(await r(this,P).cdpClient.sendCommand("Page.printToPDF",M)).data}}catch(U){throw U.message==="invalid print parameters: content area is empty"?new i.UnsupportedOperationException(U.message):U}}async close(){await r(this,P).cdpClient.sendCommand("Page.close")}async traverseHistory(x){if(x===0)return;const M=await r(this,P).cdpClient.sendCommand("Page.getNavigationHistory"),H=M.entries[M.currentIndex+x];if(!H)throw new i.NoSuchHistoryEntryException(`No history entry at delta ${x}`);await r(this,P).cdpClient.sendCommand("Page.navigateToHistoryEntry",{entryId:H.id})}async toggleModulesIfNeeded(){await Promise.all([r(this,P).toggleNetworkIfNeeded(),r(this,P).toggleDeviceAccessIfNeeded()])}async locateNodes(x){return await k(this,D,g0).call(this,await r(this,T),x.locator,x.startNodes??[],x.maxNodeCount,x.serializationOptions)}},S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,A=new WeakMap,F=new WeakMap,R=new WeakMap,P=new WeakMap,T=new WeakMap,q=new WeakMap,L=new WeakMap,I=new WeakMap,_=new WeakMap,K=new WeakMap,j=new WeakMap,O=new WeakMap,D=new WeakSet,Pf=function(x=!1){this.directChildren.map(M=>M.dispose(x))},Rg=function(){r(this,P).cdpClient.on("Network.loadingFailed",x=>{r(this,_).networkLoadingFailed(x.requestId,x.errorText)}),r(this,P).cdpClient.on("Page.frameNavigated",x=>{this.id===x.frame.id&&(r(this,_).frameNavigated(x.frame.url+(x.frame.urlFragment??""),x.frame.loaderId,x.frame.unreachableUrl),k(this,D,Pf).call(this),k(this,D,_f).call(this,x.frame.loaderId))}),r(this,P).on("frameStartedNavigating",x=>{var H;(H=r(this,I))==null||H.call(this,n.LogType.debugInfo,"Received frameStartedNavigating event",x),[this.id,...this.cdpTarget.id===this.id?[void 0]:[]].includes(x.frameId)&&r(this,_).frameStartedNavigating(x.url,x.loaderId)}),r(this,P).cdpClient.on("Page.navigatedWithinDocument",x=>{if(this.id===x.frameId&&(r(this,_).navigatedWithinDocument(x.url,x.navigationType),x.navigationType==="historyApi")){r(this,L).registerEvent({type:"event",method:"browsingContext.historyUpdated",params:{context:this.id,url:r(this,_).url}},this.id);return}}),r(this,P).cdpClient.on("Page.frameRequestedNavigation",x=>{this.id===x.frameId&&r(this,_).frameRequestedNavigation(x.url)}),r(this,P).cdpClient.on("Page.lifecycleEvent",x=>{if(this.id===x.frameId){if(x.name==="init"){k(this,D,_f).call(this,x.loaderId);return}if(x.name==="commit"){y(this,v,x.loaderId);return}if(r(this,v)||y(this,v,x.loaderId),x.loaderId===r(this,v))switch(x.name){case"DOMContentLoaded":r(this,_).isInitialNavigation||r(this,L).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.DomContentLoaded,params:{context:this.id,navigation:r(this,_).currentNavigationId,timestamp:(0,a.getTimestamp)(),url:r(this,_).url}},this.id),r(this,R).DOMContentLoaded.resolve();break;case"load":r(this,_).isInitialNavigation||r(this,L).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.Load,params:{context:this.id,navigation:r(this,_).currentNavigationId,timestamp:(0,a.getTimestamp)(),url:r(this,_).url}},this.id),r(this,_).loadPageEvent(x.loaderId),r(this,R).load.resolve();break}}}),r(this,P).cdpClient.on("Runtime.executionContextCreated",x=>{var U;const{auxData:M,name:H,uniqueId:G,id:J}=x.context;if(!M||M.frameId!==this.id)return;let Z,ie;switch(M.type){case"isolated":ie=H,r(this,T).isFinished||(U=r(this,I))==null||U.call(this,n.LogType.debugError,"Unexpectedly, isolated realm created before the default one"),Z=r(this,T).isFinished?r(this,T).result.origin:"";break;case"default":Z=p(x.context.origin);break;default:return}const ue=new c.WindowRealm(this.id,r(this,q),r(this,P).cdpClient,r(this,L),J,r(this,I),Z,G,r(this,K),ie);M.isDefault&&(r(this,T).resolve(ue),Promise.all(r(this,P).getChannels().map(Q=>Q.startListenerFromWindow(ue,r(this,L)))))}),r(this,P).cdpClient.on("Runtime.executionContextDestroyed",x=>{r(this,T).isFinished&&r(this,T).result.executionContextId===x.executionContextId&&y(this,T,new t.Deferred),r(this,K).deleteRealms({cdpSessionId:r(this,P).cdpSessionId,executionContextId:x.executionContextId})}),r(this,P).cdpClient.on("Runtime.executionContextsCleared",()=>{r(this,T).isFinished||r(this,T).reject(new i.UnknownErrorException("execution contexts cleared")),y(this,T,new t.Deferred),r(this,K).deleteRealms({cdpSessionId:r(this,P).cdpSessionId})}),r(this,P).cdpClient.on("Page.javascriptDialogClosed",x=>{var H;const M=x.result;r(this,O)===void 0&&((H=r(this,I))==null||H.call(this,n.LogType.debugError,"Unexpectedly no opening prompt event before closing one")),r(this,L).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.UserPromptClosed,params:{context:this.id,accepted:M,type:r(this,O)??"UNKNOWN",userText:M&&x.userInput?x.userInput:void 0}},this.id),y(this,O,void 0)}),r(this,P).cdpClient.on("Page.javascriptDialogOpening",x=>{var G;const M=k(G=s,B,d0).call(G,x.type);x.type==="beforeunload"&&r(this,_).beforeunload(),y(this,O,M);const H=k(this,D,h0).call(this,M);switch(r(this,L).registerEvent({type:"event",method:i.ChromiumBidi.BrowsingContext.EventNames.UserPromptOpened,params:{context:this.id,handler:H,type:M,message:x.message,...x.type==="prompt"?{defaultValue:x.defaultPrompt}:{}}},this.id),H){case"accept":this.handleUserPrompt(!0);break;case"dismiss":this.handleUserPrompt(!1);break}})},B=new WeakSet,d0=function(x){switch(x){case"alert":return"alert";case"beforeunload":return"beforeunload";case"confirm":return"confirm";case"prompt":return"prompt"}},h0=function(x){var H,G,J,Z,ie,ue,U,Q;const M="dismiss";switch(x){case"alert":return((H=r(this,j))==null?void 0:H.alert)??((G=r(this,j))==null?void 0:G.default)??M;case"beforeunload":return((J=r(this,j))==null?void 0:J.beforeUnload)??((Z=r(this,j))==null?void 0:Z.default)??"accept";case"confirm":return((ie=r(this,j))==null?void 0:ie.confirm)??((ue=r(this,j))==null?void 0:ue.default)??M;case"prompt":return((U=r(this,j))==null?void 0:U.prompt)??((Q=r(this,j))==null?void 0:Q.default)??M}},_f=function(x){x===void 0||r(this,v)===x||(k(this,D,Dg).call(this),y(this,v,x),k(this,D,Pf).call(this,!0))},Dg=function(){var x,M;r(this,R).DOMContentLoaded.isFinished?r(this,R).DOMContentLoaded=new t.Deferred:(x=r(this,I))==null||x.call(this,s.LOGGER_PREFIX,"Document changed (DOMContentLoaded)"),r(this,R).load.isFinished?r(this,R).load=new t.Deferred:(M=r(this,I))==null||M.call(this,s.LOGGER_PREFIX,"Document changed (load)")},f0=function(){r(this,R).DOMContentLoaded.isFinished||r(this,R).DOMContentLoaded.reject(new i.UnknownErrorException("navigation canceled")),r(this,R).load.isFinished||r(this,R).load.reject(new i.UnknownErrorException("navigation canceled"))},Fg=async function(x,M){switch(x){case"none":return;case"interactive":await M,await r(this,R).DOMContentLoaded;return;case"complete":await M,await r(this,R).load;return}},p0=async function(x){switch(x.type){case"box":return{x:x.x,y:x.y,width:x.width,height:x.height};case"element":{const M=await this.getOrCreateSandbox(void 0),H=await M.callFunction(String(G=>G instanceof Element),!1,{type:"undefined"},[x.element]);if(H.type==="exception")throw new i.NoSuchElementException(`Element '${x.element.sharedId}' was not found`);if((0,e.assert)(H.result.type==="boolean"),!H.result.value)throw new i.NoSuchElementException(`Node '${x.element.sharedId}' is not an Element`);{const G=await M.callFunction(String(Z=>{const ie=Z.getBoundingClientRect();return{x:ie.x,y:ie.y,height:ie.height,width:ie.width}}),!1,{type:"undefined"},[x.element]);(0,e.assert)(G.type==="success");const J=d(G.result);if(!J)throw new i.UnableToCaptureScreenException(`Could not get bounding box for Element '${x.element.sharedId}'`);return J}}}},m0=async function(x,M,H,G){switch(M.type){case"css":return{functionDeclaration:String((J,Z,...ie)=>{const ue=Q=>{if(!(Q instanceof HTMLElement||Q instanceof Document||Q instanceof DocumentFragment))throw new Error("startNodes in css selector should be HTMLElement, Document or DocumentFragment");return[...Q.querySelectorAll(J)]};ie=ie.length>0?ie:[document];const U=ie.map(Q=>ue(Q)).flat(1);return Z===0?U:U.slice(0,Z)}),argumentsLocalValues:[{type:"string",value:M.value},{type:"number",value:H??0},...G]};case"xpath":return{functionDeclaration:String((J,Z,...ie)=>{const U=new XPathEvaluator().createExpression(J),Q=re=>{const pe=U.evaluate(re,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE),ve=[];for(let Re=0;Re<pe.snapshotLength;Re++)ve.push(pe.snapshotItem(Re));return ve};ie=ie.length>0?ie:[document];const ee=ie.map(re=>Q(re)).flat(1);return Z===0?ee:ee.slice(0,Z)}),argumentsLocalValues:[{type:"string",value:M.value},{type:"number",value:H??0},...G]};case"innerText":if(M.value==="")throw new i.InvalidSelectorException("innerText locator cannot be empty");return{functionDeclaration:String((J,Z,ie,ue,U,...Q)=>{const ee=ie?J.toUpperCase():J,re=(ve,Re)=>{var os;const We=[];if(ve instanceof DocumentFragment||ve instanceof Document)return[...ve.children].forEach(di=>We.push(...re(di,Re))),We;if(!(ve instanceof HTMLElement))return[];const tt=ve,_t=ie?(os=tt.innerText)==null?void 0:os.toUpperCase():tt.innerText;if(!_t.includes(ee))return[];const St=[];for(const Qt of tt.children)Qt instanceof HTMLElement&&St.push(Qt);if(St.length===0)Z&&_t===ee?We.push(tt):Z||We.push(tt);else{const Qt=Re<=0?[]:St.map(di=>re(di,Re-1)).flat(1);Qt.length===0?(!Z||_t===ee)&&We.push(tt):We.push(...Qt)}return We};Q=Q.length>0?Q:[document];const pe=Q.map(ve=>re(ve,U)).flat(1);return ue===0?pe:pe.slice(0,ue)}),argumentsLocalValues:[{type:"string",value:M.value},{type:"boolean",value:M.matchType!=="partial"},{type:"boolean",value:M.ignoreCase===!0},{type:"number",value:H??0},{type:"number",value:M.maxDepth??1e3},...G]};case"accessibility":{if(!M.value.name&&!M.value.role)throw new i.InvalidSelectorException("Either name or role has to be specified");await Promise.all([r(this,P).cdpClient.sendCommand("Accessibility.enable"),r(this,P).cdpClient.sendCommand("Accessibility.getRootAXNode")]);const J=await x.evaluate("({getAccessibleName, getAccessibleRole})",!1,"root",void 0,!1,!0);if(J.type!=="success")throw new Error("Could not get bindings");if(J.result.type!=="object")throw new Error("Could not get bindings");return{functionDeclaration:String((Z,ie,ue,U,...Q)=>{const ee=[];let re=!1;function pe(ve,Re){if(!re)for(const We of ve){let tt=!0;if(Re.role){const St=ue.getAccessibleRole(We);Re.role!==St&&(tt=!1)}if(Re.name){const St=ue.getAccessibleName(We);Re.name!==St&&(tt=!1)}if(tt){if(U!==0&&ee.length===U){re=!0;break}ee.push(We)}const _t=[];for(const St of We.children)St instanceof HTMLElement&&_t.push(St);pe(_t,Re)}}return Q=Q.length>0?Q:Array.from(document.documentElement.children).filter(ve=>ve instanceof HTMLElement),pe(Q,{role:ie,name:Z}),ee}),argumentsLocalValues:[{type:"string",value:M.value.name||""},{type:"string",value:M.value.role||""},{handle:J.result.handle},{type:"number",value:H??0},...G]}}}},g0=async function(x,M,H,G,J){var U,Q,ee;const Z=await k(this,D,m0).call(this,x,M,G,H);J={...J,maxObjectDepth:1};const ie=await x.callFunction(Z.functionDeclaration,!1,{type:"undefined"},Z.argumentsLocalValues,"none",J);if(ie.type!=="success")throw(U=r(this,I))==null||U.call(this,s.LOGGER_PREFIX,"Failed locateNodesByLocator",ie),(Q=ie.exceptionDetails.text)!=null&&Q.endsWith("is not a valid selector.")||(ee=ie.exceptionDetails.text)!=null&&ee.endsWith("is not a valid XPath expression.")?new i.InvalidSelectorException(`Not valid selector ${typeof M.value=="string"?M.value:JSON.stringify(M.value)}`):ie.exceptionDetails.text==="Error: startNodes in css selector should be HTMLElement, Document or DocumentFragment"?new i.InvalidArgumentException("startNodes in css selector should be HTMLElement, Document or DocumentFragment"):new i.UnknownErrorException(`Unexpected error in selector script: ${ie.exceptionDetails.text}`);if(ie.result.type!=="array")throw new i.UnknownErrorException(`Unexpected selector script result type: ${ie.result.type}`);return{nodes:ie.result.value.map(re=>{if(re.type!=="node")throw new i.UnknownErrorException(`Unexpected selector script result element: ${re.type}`);return re})}},f(g,B),W(g,"LOGGER_PREFIX",`${n.LogType.debug}:browsingContext`),g);ca.BrowsingContextImpl=l,s=l;function p(ae){return["://",""].includes(ae)&&(ae="null"),ae}function h(ae){const{quality:x,type:M}=ae.format??{type:"image/png"};switch(M){case"image/png":return{format:"png"};case"image/jpeg":return{format:"jpeg",...x===void 0?{}:{quality:Math.round(x*100)}};case"image/webp":return{format:"webp",...x===void 0?{}:{quality:Math.round(x*100)}}}throw new i.InvalidArgumentException(`Image format '${M}' is not a supported format`)}function d(ae){var J,Z,ie,ue;if(ae.type!=="object"||ae.value===void 0)return;const x=(J=ae.value.find(([U])=>U==="x"))==null?void 0:J[1],M=(Z=ae.value.find(([U])=>U==="y"))==null?void 0:Z[1],H=(ie=ae.value.find(([U])=>U==="height"))==null?void 0:ie[1],G=(ue=ae.value.find(([U])=>U==="width"))==null?void 0:ue[1];if(!((x==null?void 0:x.type)!=="number"||(M==null?void 0:M.type)!=="number"||(H==null?void 0:H.type)!=="number"||(G==null?void 0:G.type)!=="number"))return{x:x.value,y:M.value,width:G.value,height:H.value}}function m(ae){return{...ae.width<0?{x:ae.x+ae.width,width:-ae.width}:{x:ae.x,width:ae.width},...ae.height<0?{y:ae.y+ae.height,height:-ae.height}:{y:ae.y,height:ae.height}}}function b(ae,x){ae=m(ae),x=m(x);const M=Math.max(ae.x,x.x),H=Math.max(ae.y,x.y);return{x:M,y:H,width:Math.max(Math.min(ae.x+ae.width,x.x+x.width)-M,0),height:Math.max(Math.min(ae.y+ae.height,x.y+x.height)-H,0)}}function w(ae){if(ae=ae.trim(),!/^[0-9]+$/.test(ae))throw new i.InvalidArgumentException(`Invalid integer: ${ae}`);return parseInt(ae)}return ca}var $c={},yb;function h1(){var e,t,n;if(yb)return $c;yb=1,Object.defineProperty($c,"__esModule",{value:!0}),$c.WorkerRealm=void 0;const s=lb();let i=(n=class extends s.Realm{constructor(c,u,l,p,h,d,m,b,w){super(c,u,l,p,h,m,b);f(this,e);f(this,t);y(this,t,d),y(this,e,w),this.initialize()}get associatedBrowsingContexts(){return r(this,t).flatMap(c=>c.associatedBrowsingContexts)}get realmType(){return r(this,e)}get source(){var c;return{realm:this.realmId,context:(c=this.associatedBrowsingContexts[0])==null?void 0:c.id}}get realmInfo(){const c=r(this,t).map(l=>l.realmId),{realmType:u}=this;switch(u){case"dedicated-worker":{const l=c[0];if(l===void 0||c.length!==1)throw new Error("Dedicated worker must have exactly one owner");return{...this.baseInfo,type:u,owners:[l]}}case"service-worker":case"shared-worker":return{...this.baseInfo,type:u}}}},e=new WeakMap,t=new WeakMap,n);return $c.WorkerRealm=i,$c}var Kc={},Uc={},Hc={},vb;function f1(){if(vb)return Hc;vb=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.logMessageFormatter=t,Hc.getRemoteValuesText=o;const s=Cs(),i=["%s","%d","%i","%f","%o","%O","%c"];function e(c){return i.some(u=>c.includes(u))}function t(c){let u="";const l=c[0].value.toString(),p=c.slice(1,void 0),h=l.split(new RegExp(i.map(d=>`(${d})`).join("|"),"g"));for(const d of h)if(!(d===void 0||d===""))if(e(d)){const m=p.shift();(0,s.assert)(m,`Less value is provided: "${o(c,!1)}"`),d==="%s"?u+=a(m):d==="%d"||d==="%i"?m.type==="bigint"||m.type==="number"||m.type==="string"?u+=parseInt(m.value.toString(),10):u+="NaN":d==="%f"?m.type==="bigint"||m.type==="number"||m.type==="string"?u+=parseFloat(m.value.toString()):u+="NaN":u+=n(m)}else u+=d;if(p.length>0)throw new Error(`More value is provided: "${o(c,!1)}"`);return u}function n(c){var u;if(c.type!=="array"&&c.type!=="bigint"&&c.type!=="date"&&c.type!=="number"&&c.type!=="object"&&c.type!=="string")return a(c);if(c.type==="bigint")return`${c.value.toString()}n`;if(c.type==="number")return c.value.toString();if(["date","string"].includes(c.type))return JSON.stringify(c.value);if(c.type==="object")return`{${c.value.map(l=>`${JSON.stringify(l[0])}:${n(l[1])}`).join(",")}}`;if(c.type==="array")return`[${((u=c.value)==null?void 0:u.map(l=>n(l)).join(","))??""}]`;throw Error(`Invalid value type: ${c}`)}function a(c){var u,l,p,h;if(!Object.hasOwn(c,"value"))return c.type;switch(c.type){case"string":case"number":case"boolean":case"bigint":return String(c.value);case"regexp":return`/${c.value.pattern}/${c.value.flags??""}`;case"date":return new Date(c.value).toString();case"object":return`Object(${((u=c.value)==null?void 0:u.length)??""})`;case"array":return`Array(${((l=c.value)==null?void 0:l.length)??""})`;case"map":return`Map(${(p=c.value)==null?void 0:p.length})`;case"set":return`Set(${(h=c.value)==null?void 0:h.length})`;default:return c.type}}function o(c,u){const l=c[0];return l?l.type==="string"&&e(l.value.toString())&&u?t(c):c.map(p=>a(p)).join(" "):""}return Hc}var bb;function p1(){var u,l,p,h,d,w0,y0,w,g,v0;if(bb)return Uc;bb=1;var s;Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.LogManager=void 0;const i=Le(),e=Xt(),t=f1();function n(E){const v=E==null?void 0:E.callFrames.map(C=>({columnNumber:C.columnNumber,functionName:C.functionName,lineNumber:C.lineNumber,url:C.url}));return v?{callFrames:v}:void 0}function a(E){return["error","assert"].includes(E)?"error":["debug","trace"].includes(E)?"debug":["warn","warning"].includes(E)?"warn":"info"}function o(E){switch(E){case"warning":return"warn";case"startGroup":return"group";case"startGroupCollapsed":return"groupCollapsed";case"endGroup":return"groupEnd"}return E}let c=(g=class{constructor(v,C,A,F){f(this,d);f(this,u);f(this,l);f(this,p);f(this,h);y(this,p,v),y(this,l,C),y(this,u,A),y(this,h,F)}static create(v,C,A,F){var P;const R=new s(v,C,A,F);return k(P=R,d,y0).call(P),R}},u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakSet,w0=async function(v,C){switch(v.type){case"undefined":return{type:"undefined"};case"boolean":return{type:"boolean",value:v.value};case"string":return{type:"string",value:v.value};case"number":return{type:"number",value:v.unserializableValue??v.value};case"bigint":if(v.unserializableValue!==void 0&&v.unserializableValue[v.unserializableValue.length-1]==="n")return{type:v.type,value:v.unserializableValue.slice(0,-1)};break;case"object":if(v.subtype==="null")return{type:"null"};break}return await C.serializeCdpObject(v,"none")},y0=function(){r(this,p).cdpClient.on("Runtime.consoleAPICalled",v=>{var F;const C=r(this,l).findRealm({cdpSessionId:r(this,p).cdpSessionId,executionContextId:v.executionContextId});if(C===void 0){(F=r(this,h))==null||F.call(this,e.LogType.cdp,v);return}const A=Promise.all(v.args.map(R=>k(this,d,w0).call(this,R,C)));for(const R of C.associatedBrowsingContexts)r(this,u).registerPromiseEvent(A.then(P=>({kind:"success",value:{type:"event",method:i.ChromiumBidi.Log.EventNames.LogEntryAdded,params:{level:a(v.type),source:C.source,text:(0,t.getRemoteValuesText)(P,!0),timestamp:Math.round(v.timestamp),stackTrace:n(v.stackTrace),type:"console",method:o(v.type),args:P}}}),P=>({kind:"error",error:P})),R.id,i.ChromiumBidi.Log.EventNames.LogEntryAdded)}),r(this,p).cdpClient.on("Runtime.exceptionThrown",v=>{var A,F;const C=r(this,l).findRealm({cdpSessionId:r(this,p).cdpSessionId,executionContextId:v.exceptionDetails.executionContextId});if(C===void 0){(A=r(this,h))==null||A.call(this,e.LogType.cdp,v);return}for(const R of C.associatedBrowsingContexts)r(this,u).registerPromiseEvent(k(F=s,w,v0).call(F,v,C).then(P=>({kind:"success",value:{type:"event",method:i.ChromiumBidi.Log.EventNames.LogEntryAdded,params:{level:"error",source:C.source,text:P,timestamp:Math.round(v.timestamp),stackTrace:n(v.exceptionDetails.stackTrace),type:"javascript"}}}),P=>({kind:"error",error:P})),R.id,i.ChromiumBidi.Log.EventNames.LogEntryAdded)})},w=new WeakSet,v0=async function(v,C){return v.exceptionDetails.exception?C===void 0?JSON.stringify(v.exceptionDetails.exception):await C.stringifyObject(v.exceptionDetails.exception):v.exceptionDetails.text},f(g,w),g);return Uc.LogManager=c,s=c,Uc}var Sb;function m1(){var c,u,l,p,h,d,m,b,w,g,S,E,v,C,A,F,R,b0,Og,Tf,S0,C0,k0,E0,j;if(Sb)return Kc;Sb=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.CdpTarget=void 0;const s=Cv(),i=Nh(),e=aa(),t=Xt(),n=wb(),a=p1();let o=(j=class extends e.EventEmitter{constructor(N,$,B,X,Y,le,V,z,ne,fe,ce,Me){super();f(this,R);f(this,c);f(this,u);f(this,l);f(this,p);f(this,h);f(this,d);f(this,m);f(this,b);f(this,w);f(this,g);f(this,S,new i.Deferred);f(this,E);f(this,v);f(this,C,!1);f(this,A,!1);f(this,F,{request:!1,response:!1,auth:!1});y(this,c,N),y(this,u,$),y(this,l,B),y(this,p,X),y(this,d,Y),y(this,h,le),y(this,m,V),y(this,g,ne),y(this,b,z),y(this,w,fe),y(this,E,ce),y(this,v,Me)}static create(N,$,B,X,Y,le,V,z,ne,fe,ce,Me){var x,M;const ae=new j(N,$,B,X,le,Y,V,z,ne,fe,ce,Me);return a.LogManager.create(ae,Y,le,Me),k(x=ae,R,S0).call(x),k(M=ae,R,b0).call(M),ae}get unblocked(){return r(this,S)}get id(){return r(this,c)}get cdpClient(){return r(this,u)}get parentCdpClient(){return r(this,p)}get browserCdpClient(){return r(this,l)}get cdpSessionId(){return r(this,u).sessionId}async toggleFetchIfNeeded(){const N=r(this,g).getInterceptionStages(this.topLevelId);if(r(this,F).request===N.request&&r(this,F).response===N.response&&r(this,F).auth===N.auth)return;const $=[];if(y(this,F,N),(N.request||N.auth)&&$.push({urlPattern:"*",requestStage:"Request"}),N.response&&$.push({urlPattern:"*",requestStage:"Response"}),$.length)await r(this,u).sendCommand("Fetch.enable",{patterns:$,handleAuthRequests:N.auth});else{const B=r(this,g).getRequestsByTarget(this).filter(X=>X.interceptPhase);Promise.allSettled(B.map(X=>X.waitNextPhase)).then(async()=>r(this,g).getRequestsByTarget(this).filter(Y=>Y.interceptPhase).length?await this.toggleFetchIfNeeded():await r(this,u).sendCommand("Fetch.disable")).catch(X=>{var Y;(Y=r(this,v))==null||Y.call(this,t.LogType.bidi,"Disable failed",X)})}}async toggleNetworkIfNeeded(){var N;try{await Promise.all([this.toggleSetCacheDisabled(),this.toggleFetchIfNeeded()])}catch($){if((N=r(this,v))==null||N.call(this,t.LogType.debugError,$),!k(this,R,Tf).call(this,$))throw $}}async toggleSetCacheDisabled(N){var X;const $=r(this,g).defaultCacheBehavior==="bypass",B=N??$;if(r(this,A)!==B){y(this,A,B);try{await r(this,u).sendCommand("Network.setCacheDisabled",{cacheDisabled:B})}catch(Y){if((X=r(this,v))==null||X.call(this,t.LogType.debugError,Y),y(this,A,!B),!k(this,R,Tf).call(this,Y))throw Y}}}async toggleDeviceAccessIfNeeded(){var $;const N=this.isSubscribedTo(s.BiDiModule.Bluetooth);if(r(this,C)!==N){y(this,C,N);try{await r(this,u).sendCommand(N?"DeviceAccess.enable":"DeviceAccess.disable")}catch(B){if(($=r(this,v))==null||$.call(this,t.LogType.debugError,B),y(this,C,!N),!k(this,R,Tf).call(this,B))throw B}}}async toggleNetwork(){var X;const N=r(this,g).getInterceptionStages(this.topLevelId),$=Object.values(N).some(Y=>Y),B=r(this,F).request!==N.request||r(this,F).response!==N.response||r(this,F).auth!==N.auth;(X=r(this,v))==null||X.call(this,t.LogType.debugInfo,"Toggle Network",`Fetch (${$}) ${B}`),$&&B&&await k(this,R,C0).call(this,N),!$&&B&&await k(this,R,k0).call(this)}getChannels(){return r(this,m).find().flatMap(N=>N.channels)}get topLevelId(){return r(this,b).findTopLevelContextId(this.id)??this.id}isSubscribedTo(N){return r(this,d).subscriptionManager.isSubscribedTo(N,this.topLevelId)}},c=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,A=new WeakMap,F=new WeakMap,R=new WeakSet,b0=async function(){var N;try{await Promise.all([r(this,u).sendCommand("Page.enable"),r(this,u).sendCommand("Page.getFrameTree").then($=>k(this,R,Og).call(this,$.frameTree)),r(this,u).sendCommand("Runtime.enable"),r(this,u).sendCommand("Page.setLifecycleEventsEnabled",{enabled:!0}),r(this,u).sendCommand("Page.setPrerenderingAllowed",{isAllowed:!r(this,w)}).catch(()=>{}),r(this,u).sendCommand("Network.enable").then(()=>this.toggleNetworkIfNeeded()),r(this,u).sendCommand("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}),k(this,R,E0).call(this),r(this,u).sendCommand("Runtime.runIfWaitingForDebugger"),r(this,p).sendCommand("Runtime.runIfWaitingForDebugger"),this.toggleDeviceAccessIfNeeded()])}catch($){if((N=r(this,v))==null||N.call(this,t.LogType.debugError,"Failed to unblock target",$),!r(this,u).isCloseError($)){r(this,S).resolve({kind:"error",error:$});return}}r(this,S).resolve({kind:"success",value:void 0})},Og=function(N){var X;const $=N.frame,B=r(this,b).findContext($.id);if(B!==void 0&&B.parentId===null&&$.parentId!==null&&$.parentId!==void 0&&(B.parentId=$.parentId),B===void 0&&$.parentId!==void 0){const Y=r(this,b).getContext($.parentId);n.BrowsingContextImpl.create($.id,$.parentId,Y.userContext,Y.cdpTarget,r(this,d),r(this,b),r(this,h),$.url,void 0,r(this,E),r(this,v))}(X=N.childFrames)==null||X.map(Y=>k(this,R,Og).call(this,Y))},Tf=function(N){const $=N;return $.code===-32001&&$.message==="Session with given id not found."||r(this,u).isCloseError(N)},S0=function(){r(this,u).on("Network.requestWillBeSent",N=>{N.loaderId===N.requestId&&this.emit("frameStartedNavigating",{loaderId:N.loaderId,url:N.request.url,frameId:N.frameId})}),r(this,u).on("*",(N,$)=>{typeof N=="string"&&(r(this,d).registerEvent({type:"event",method:`goog:cdp.${N}`,params:{event:N,params:$,session:this.cdpSessionId}},this.id),r(this,d).registerEvent({type:"event",method:`cdp.${N}`,params:{event:N,params:$,session:this.cdpSessionId}},this.id))})},C0=async function(N){const $=[];if((N.request||N.auth)&&$.push({urlPattern:"*",requestStage:"Request"}),N.response&&$.push({urlPattern:"*",requestStage:"Response"}),$.length){const B=r(this,F);y(this,F,N);try{await r(this,u).sendCommand("Fetch.enable",{patterns:$,handleAuthRequests:N.auth})}catch{y(this,F,B)}}},k0=async function(){r(this,g).getRequestsByTarget(this).filter($=>$.interceptPhase).length===0&&(y(this,F,{request:!1,response:!1,auth:!1}),await r(this,u).sendCommand("Fetch.disable"))},E0=async function(){await Promise.all(r(this,m).find({targetId:this.topLevelId,global:!0}).map(N=>N.initInTarget(this,!0)))},j);return Kc.CdpTarget=o,Kc}var Cb;function g1(){var o,c,u,l,p,h,d,m,b,w,g,S,E,v,C,Mf,x0,P0,_0,T0,M0,If,I,Ng,I0,A0,R0,D;if(Cb)return Nc;Cb=1,Object.defineProperty(Nc,"__esModule",{value:!0}),Nc.CdpTargetManager=void 0;const s=Xt(),i=wb(),e=h1(),t=m1(),n={service_worker:"service-worker",shared_worker:"shared-worker",worker:"dedicated-worker"};let a=(D=class{constructor($,B,X,Y,le,V,z,ne,fe,ce,Me,ae,x){f(this,C);f(this,o);f(this,c);f(this,u,new Set);f(this,l);f(this,p);f(this,h);f(this,d);f(this,m);f(this,b);f(this,w);f(this,g);f(this,S);f(this,E);f(this,v);f(this,I,new Map);y(this,c,$),y(this,o,B),r(this,u).add(X),y(this,l,X),y(this,p,Y),y(this,h,le),y(this,b,fe),y(this,d,z),y(this,m,ne),y(this,w,V),y(this,g,ce),y(this,v,Me),y(this,E,ae),y(this,S,x),k(this,C,Mf).call(this,B)}},o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakSet,Mf=function($){$.on("Target.attachedToTarget",B=>{k(this,C,T0).call(this,B,$)}),$.on("Target.detachedFromTarget",k(this,C,I0).bind(this)),$.on("Target.targetInfoChanged",k(this,C,A0).bind(this)),$.on("Inspector.targetCrashed",()=>{k(this,C,R0).call(this,$)}),$.on("Page.frameAttached",k(this,C,x0).bind(this)),$.on("Page.frameDetached",k(this,C,P0).bind(this)),$.on("Page.frameSubtreeWillBeDetached",k(this,C,_0).bind(this))},x0=function($){const B=r(this,h).findContext($.parentFrameId);B!==void 0&&i.BrowsingContextImpl.create($.frameId,$.parentFrameId,B.userContext,B.cdpTarget,r(this,p),r(this,h),r(this,w),"about:blank",void 0,r(this,E),r(this,S))},P0=function($){var B;$.reason!=="swap"&&((B=r(this,h).findContext($.frameId))==null||B.dispose(!0))},_0=function($){var B;(B=r(this,h).findContext($.frameId))==null||B.dispose(!0)},T0=function($,B){const{sessionId:X,targetInfo:Y}=$,le=r(this,c).getCdpClient(X),V=async()=>{await le.sendCommand("Runtime.runIfWaitingForDebugger").then(()=>B.sendCommand("Target.detachFromTarget",$)).catch(ne=>{var fe;return(fe=r(this,S))==null?void 0:fe.call(this,s.LogType.debugError,ne)})};if(r(this,l)===Y.targetId){V();return}const z=Y.type==="service_worker"?`${B.sessionId}_${Y.targetId}`:Y.targetId;if(!r(this,u).has(z)){switch(r(this,u).add(z),Y.type){case"tab":k(this,C,Mf).call(this,le),(async()=>await le.sendCommand("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0}))();return;case"page":case"iframe":{const ne=k(this,C,If).call(this,le,B,Y),fe=r(this,h).findContext(Y.targetId);if(fe&&Y.type==="iframe")fe.updateCdpTarget(ne);else{const ce=k(this,C,M0).call(this,Y,B.sessionId),Me=Y.browserContextId&&Y.browserContextId!==r(this,g)?Y.browserContextId:"default";i.BrowsingContextImpl.create(Y.targetId,ce,Me,ne,r(this,p),r(this,h),r(this,w),Y.url===""?"about:blank":Y.url,Y.openerFrameId??Y.openerId,r(this,E),r(this,S))}return}case"service_worker":case"worker":{const ne=r(this,w).findRealm({cdpSessionId:B.sessionId});if(!ne){V();return}const fe=k(this,C,If).call(this,le,B,Y);k(this,C,Ng).call(this,n[Y.type],fe,ne);return}case"shared_worker":{const ne=k(this,C,If).call(this,le,B,Y);k(this,C,Ng).call(this,n[Y.type],ne);return}}V()}},M0=function($,B){var Y;if($.type!=="iframe")return null;const X=$.openerFrameId??$.openerId;return X!==void 0?X:B!==void 0?((Y=r(this,h).findContextBySession(B))==null?void 0:Y.id)??null:null},If=function($,B,X){k(this,C,Mf).call(this,$);const Y=t.CdpTarget.create(X.targetId,$,r(this,o),B,r(this,w),r(this,p),r(this,b),r(this,h),r(this,d),r(this,v),r(this,E),r(this,S));return r(this,d).onCdpTargetCreated(Y),r(this,m).onCdpTargetCreated(Y),Y},I=new WeakMap,Ng=function($,B,X){B.cdpClient.on("Runtime.executionContextCreated",Y=>{const{uniqueId:le,id:V,origin:z}=Y.context,ne=new e.WorkerRealm(B.cdpClient,r(this,p),V,r(this,S),(0,i.serializeOrigin)(z),X?[X]:[],le,r(this,w),$);r(this,I).set(B.cdpSessionId,ne)})},I0=function({sessionId:$,targetId:B}){B&&r(this,b).find({targetId:B}).map(le=>{le.dispose(B)});const X=r(this,h).findContextBySession($);if(X){X.dispose(!0);return}const Y=r(this,I).get($);Y&&r(this,w).deleteRealms({cdpSessionId:Y.cdpClient.sessionId})},A0=function($){const B=r(this,h).findContext($.targetInfo.targetId);B&&B.onTargetInfoChanged($)},R0=function($){const B=r(this,w).findRealms({cdpSessionId:$.sessionId});for(const X of B)X.dispose()},D);return Nc.CdpTargetManager=a,Nc}var Wc={},kb;function w1(){var t,n,a;if(kb)return Wc;kb=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.BrowsingContextStorage=void 0;const s=Le(),i=aa();let e=(a=class{constructor(){f(this,t,new Map);f(this,n,new i.EventEmitter)}getTopLevelContexts(){return this.getAllContexts().filter(c=>c.isTopLevelContext())}getAllContexts(){return Array.from(r(this,t).values())}deleteContextById(c){r(this,t).delete(c)}deleteContext(c){r(this,t).delete(c.id)}addContext(c){r(this,t).set(c.id,c),r(this,n).emit("added",{browsingContext:c})}waitForContext(c){return new Promise(u=>{const l=p=>{p.browsingContext.id===c&&(r(this,n).off("added",l),u(p.browsingContext))};r(this,n).on("added",l)})}hasContext(c){return r(this,t).has(c)}findContext(c){return r(this,t).get(c)}findTopLevelContextId(c){if(c===null)return null;const u=this.findContext(c),l=(u==null?void 0:u.parentId)??null;return l===null?c:this.findTopLevelContextId(l)}findContextBySession(c){for(const u of r(this,t).values())if(u.cdpTarget.cdpSessionId===c)return u}getContext(c){const u=this.findContext(c);if(u===void 0)throw new s.NoSuchFrameException(`Context ${c} not found`);return u}verifyTopLevelContextsList(c){const u=new Set;if(!c)return u;for(const l of c){const p=this.getContext(l);if(p.isTopLevelContext())u.add(p);else throw new s.InvalidArgumentException(`Non top-level context '${l}' given.`)}return u}},t=new WeakMap,n=new WeakMap,a);return Wc.BrowsingContextStorage=e,Wc}var zc={},Vc={},Eb;function y1(){var p,h,d,m,b,w,g,S,E,v,C,A,F,R,P,T,Lg,D0,F0,O0,N0,Af,zo,Bg,L0,B0,j0,jg,Vo,hi,Rf,qg,Go,Xo,Jo,Df,q0,$0,K0,U0,H0,Ff,Z,W0;if(Eb)return Vc;Eb=1;var s;Object.defineProperty(Vc,"__esModule",{value:!0}),Vc.NetworkRequest=void 0;const i=Le(),e=Cs(),t=Nh(),n=Xt(),a=Fh(),o=new RegExp('(?<=realm=").*(?=")');let c=(p=class{constructor(U,Q,ee,re,pe=0,ve){f(this,T);f(this,h);f(this,d);f(this,m);f(this,b,!1);f(this,w);f(this,g,{});f(this,S);f(this,E);f(this,v,{});f(this,C);f(this,A);f(this,F);f(this,R);f(this,P,{[i.ChromiumBidi.Network.EventNames.AuthRequired]:!1,[i.ChromiumBidi.Network.EventNames.BeforeRequestSent]:!1,[i.ChromiumBidi.Network.EventNames.FetchError]:!1,[i.ChromiumBidi.Network.EventNames.ResponseCompleted]:!1,[i.ChromiumBidi.Network.EventNames.ResponseStarted]:!1});W(this,"waitNextPhase",new t.Deferred);y(this,h,U),y(this,C,Q),y(this,A,ee),y(this,F,re),y(this,w,pe),y(this,R,ve)}get id(){return r(this,h)}get fetchId(){return r(this,d)}get interceptPhase(){return r(this,m)}get url(){var ee,re,pe,ve,Re,We,tt,_t;const U=((ee=r(this,g).info)==null?void 0:ee.request.urlFragment)??((re=r(this,g).paused)==null?void 0:re.request.urlFragment)??"";return`${((pe=r(this,v).info)==null?void 0:pe.url)??((ve=r(this,v).paused)==null?void 0:ve.request.url)??((Re=r(this,S))==null?void 0:Re.url)??((We=r(this,g).auth)==null?void 0:We.request.url)??((tt=r(this,g).info)==null?void 0:tt.request.url)??((_t=r(this,g).paused)==null?void 0:_t.request.url)??s.unknownParameter}${U}`}get redirectCount(){return r(this,w)}get cdpTarget(){return r(this,F)}get cdpClient(){return r(this,F).cdpClient}isRedirecting(){return!!r(this,g).info}handleRedirect(U){r(this,v).hasExtraInfo=!1,r(this,v).info=U.redirectResponse,k(this,T,hi).call(this,{wasRedirected:!0})}onRequestWillBeSentEvent(U){r(this,g).info=U,k(this,T,hi).call(this)}onRequestWillBeSentExtraInfoEvent(U){r(this,g).extraInfo=U,k(this,T,hi).call(this)}onResponseReceivedExtraInfoEvent(U){U.statusCode>=300&&U.statusCode<=399&&r(this,g).info&&U.headers.location===r(this,g).info.request.url||(r(this,v).extraInfo=U,k(this,T,hi).call(this))}onResponseReceivedEvent(U){r(this,v).hasExtraInfo=U.hasExtraInfo,r(this,v).info=U.response,k(this,T,hi).call(this)}onServedFromCache(){y(this,b,!0),k(this,T,hi).call(this)}onLoadingFailedEvent(U){k(this,T,hi).call(this,{hasFailed:!0}),k(this,T,Xo).call(this,()=>({method:i.ChromiumBidi.Network.EventNames.FetchError,params:{...k(this,T,Jo).call(this),errorText:U.errorText}}))}async failRequest(U){(0,e.assert)(r(this,d),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.failRequest",{requestId:r(this,d),errorReason:U}),y(this,m,void 0)}onRequestPaused(U){y(this,d,U.requestId),U.responseStatusCode||U.responseErrorReason?(r(this,v).paused=U,k(this,T,Vo).call(this,"responseStarted")&&!r(this,P)[i.ChromiumBidi.Network.EventNames.ResponseStarted]&&r(this,d)!==this.id?y(this,m,"responseStarted"):k(this,T,qg).call(this)):(r(this,g).paused=U,k(this,T,Vo).call(this,"beforeRequestSent")&&!r(this,P)[i.ChromiumBidi.Network.EventNames.BeforeRequestSent]&&r(this,d)!==this.id?y(this,m,"beforeRequestSent"):k(this,T,Rf).call(this)),k(this,T,hi).call(this)}onAuthRequired(U){y(this,d,U.requestId),r(this,g).auth=U,k(this,T,Vo).call(this,"authRequired")&&r(this,d)!==this.id?y(this,m,"authRequired"):k(this,T,Go).call(this,{response:"Default"}),k(this,T,Xo).call(this,()=>({method:i.ChromiumBidi.Network.EventNames.AuthRequired,params:{...k(this,T,Jo).call(this,"authRequired"),response:k(this,T,Df).call(this)}}))}async continueRequest(U={}){const Q=k(this,T,Ff).call(this,U.headers,U.cookies),ee=(0,a.cdpFetchHeadersFromBidiNetworkHeaders)(Q),re=u(U.body);await k(this,T,Rf).call(this,{url:U.url,method:U.method,headers:ee,postData:re}),y(this,S,{url:U.url,method:U.method,headers:U.headers,cookies:U.cookies,bodySize:l(U.body)})}async continueResponse(U={}){var Q,ee,re;if(this.interceptPhase==="authRequired")if(U.credentials)await Promise.all([this.waitNextPhase,await k(this,T,Go).call(this,{response:"ProvideCredentials",username:U.credentials.username,password:U.credentials.password})]);else return await k(this,T,Go).call(this,{response:"ProvideCredentials"});if(r(this,m)==="responseStarted"){const pe=k(this,T,Ff).call(this,U.headers,U.cookies),ve=(0,a.cdpFetchHeadersFromBidiNetworkHeaders)(pe);await k(this,T,qg).call(this,{responseCode:U.statusCode??((Q=r(this,v).paused)==null?void 0:Q.responseStatusCode),responsePhrase:U.reasonPhrase??((ee=r(this,v).paused)==null?void 0:ee.responseStatusText),responseHeaders:ve??((re=r(this,v).paused)==null?void 0:re.responseHeaders)}),y(this,E,{statusCode:U.statusCode,headers:pe})}}async continueWithAuth(U){let Q,ee;if(U.action==="provideCredentials"){const{credentials:pe}=U;Q=pe.username,ee=pe.password}const re=(0,a.cdpAuthChallengeResponseFromBidiAuthContinueWithAuthAction)(U.action);await k(this,T,Go).call(this,{response:re,username:Q,password:ee})}async provideResponse(U){if((0,e.assert)(r(this,d),"Network Interception not set-up."),this.interceptPhase==="authRequired")return await k(this,T,Go).call(this,{response:"ProvideCredentials"});if(!U.body&&!U.headers)return await k(this,T,Rf).call(this);const Q=k(this,T,Ff).call(this,U.headers,U.cookies),ee=(0,a.cdpFetchHeadersFromBidiNetworkHeaders)(Q),re=U.statusCode??r(this,T,zo)??200;await this.cdpClient.sendCommand("Fetch.fulfillRequest",{requestId:r(this,d),responseCode:re,responsePhrase:U.reasonPhrase,responseHeaders:ee,body:u(U.body)}),y(this,m,void 0)}dispose(){this.waitNextPhase.reject(new Error("waitNextPhase disposed"))}},h=new WeakMap,d=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,A=new WeakMap,F=new WeakMap,R=new WeakMap,P=new WeakMap,T=new WeakSet,Lg=function(){return this.url.startsWith("data:")},D0=function(){var U,Q,ee,re,pe;return((U=r(this,S))==null?void 0:U.method)??((Q=r(this,g).info)==null?void 0:Q.request.method)??((ee=r(this,g).paused)==null?void 0:ee.request.method)??((re=r(this,g).auth)==null?void 0:re.request.method)??((pe=r(this,v).paused)==null?void 0:pe.request.method)},F0=function(){return!r(this,g).info||!r(this,g).info.loaderId||r(this,g).info.loaderId!==r(this,g).info.requestId?null:r(this,A).getNavigationId(r(this,T,Af)??void 0)},O0=function(){let U=[];return r(this,g).extraInfo&&(U=r(this,g).extraInfo.associatedCookies.filter(({blockedReasons:Q})=>!Array.isArray(Q)||Q.length===0).map(({cookie:Q})=>(0,a.cdpToBiDiCookie)(Q))),U},N0=function(){var Q,ee;let U=0;return typeof((Q=r(this,S))==null?void 0:Q.bodySize)=="number"?U=r(this,S).bodySize:U=(0,a.bidiBodySizeFromCdpPostDataEntries)(((ee=r(this,g).info)==null?void 0:ee.request.postDataEntries)??[]),U},Af=function(){var U,Q,ee,re;return((U=r(this,v).paused)==null?void 0:U.frameId)??((Q=r(this,g).info)==null?void 0:Q.frameId)??((ee=r(this,g).paused)==null?void 0:ee.frameId)??((re=r(this,g).auth)==null?void 0:re.frameId)??null},zo=function(){var U,Q,ee,re;return((U=r(this,E))==null?void 0:U.statusCode)??((Q=r(this,v).paused)==null?void 0:Q.responseStatusCode)??((ee=r(this,v).extraInfo)==null?void 0:ee.statusCode)??((re=r(this,v).info)==null?void 0:re.status)},Bg=function(){var Q,ee,re;let U=[];return(Q=r(this,S))!=null&&Q.headers?U=r(this,S).headers:U=[...(0,a.bidiNetworkHeadersFromCdpNetworkHeaders)((ee=r(this,g).info)==null?void 0:ee.request.headers),...(0,a.bidiNetworkHeadersFromCdpNetworkHeaders)((re=r(this,g).extraInfo)==null?void 0:re.headers)],U},L0=function(){var ee;if(!r(this,v).info||!(r(this,T,zo)===401||r(this,T,zo)===407))return;const U=r(this,T,zo)===401?"WWW-Authenticate":"Proxy-Authenticate",Q=[];for(const[re,pe]of Object.entries(r(this,v).info.headers))re.localeCompare(U,void 0,{sensitivity:"base"})===0&&Q.push({scheme:pe.split(" ").at(0)??"",realm:((ee=pe.match(o))==null?void 0:ee.at(0))??""});return Q},B0=function(){var U,Q,ee,re,pe,ve,Re,We,tt,_t,St,os,Qt,di,Dd,yS,vS,bS,SS,CS,kS,ES;return{timeOrigin:(0,a.getTiming)((Q=(U=r(this,v).info)==null?void 0:U.timing)==null?void 0:Q.requestTime),requestTime:(0,a.getTiming)((re=(ee=r(this,v).info)==null?void 0:ee.timing)==null?void 0:re.requestTime),redirectStart:0,redirectEnd:0,fetchStart:(0,a.getTiming)((ve=(pe=r(this,v).info)==null?void 0:pe.timing)==null?void 0:ve.requestTime),dnsStart:(0,a.getTiming)((We=(Re=r(this,v).info)==null?void 0:Re.timing)==null?void 0:We.dnsStart),dnsEnd:(0,a.getTiming)((_t=(tt=r(this,v).info)==null?void 0:tt.timing)==null?void 0:_t.dnsEnd),connectStart:(0,a.getTiming)((os=(St=r(this,v).info)==null?void 0:St.timing)==null?void 0:os.connectStart),connectEnd:(0,a.getTiming)((di=(Qt=r(this,v).info)==null?void 0:Qt.timing)==null?void 0:di.connectEnd),tlsStart:(0,a.getTiming)((yS=(Dd=r(this,v).info)==null?void 0:Dd.timing)==null?void 0:yS.sslStart),requestStart:(0,a.getTiming)((bS=(vS=r(this,v).info)==null?void 0:vS.timing)==null?void 0:bS.sendStart),responseStart:(0,a.getTiming)((CS=(SS=r(this,v).info)==null?void 0:SS.timing)==null?void 0:CS.receiveHeadersStart),responseEnd:(0,a.getTiming)((ES=(kS=r(this,v).info)==null?void 0:kS.timing)==null?void 0:ES.receiveHeadersEnd)}},j0=function(){this.waitNextPhase.resolve(),this.waitNextPhase=new t.Deferred},jg=function(U){return r(this,F).isSubscribedTo(`network.${U}`)?r(this,A).getInterceptsForPhase(this,U):new Set},Vo=function(U){return k(this,T,jg).call(this,U).size>0},hi=function(U={}){const Q=U.wasRedirected||U.hasFailed||k(this,T,Lg).call(this)||!!r(this,g).extraInfo||r(this,b)||!!(r(this,v).info&&!r(this,v).hasExtraInfo),ee=k(this,T,Lg).call(this)||r(this,b),re=!ee&&k(this,T,Vo).call(this,"beforeRequestSent"),pe=!re||re&&!!r(this,g).paused;r(this,g).info&&(re?pe:Q)&&k(this,T,Xo).call(this,k(this,T,$0).bind(this));const ve=!!r(this,v).extraInfo||r(this,b)||!!(r(this,v).info&&!r(this,v).hasExtraInfo),Re=!ee&&k(this,T,Vo).call(this,"responseStarted");(r(this,v).info||Re&&r(this,v).paused)&&k(this,T,Xo).call(this,k(this,T,K0).bind(this));const We=!Re||Re&&!!r(this,v).paused;r(this,v).info&&ve&&We&&(k(this,T,Xo).call(this,k(this,T,U0).bind(this)),r(this,A).deleteRequest(this.id))},Rf=async function(U={}){(0,e.assert)(r(this,d),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueRequest",{requestId:r(this,d),url:U.url,method:U.method,headers:U.headers,postData:U.postData}),y(this,m,void 0)},qg=async function({responseCode:U,responsePhrase:Q,responseHeaders:ee}={}){(0,e.assert)(r(this,d),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueResponse",{requestId:r(this,d),responseCode:U,responsePhrase:Q,responseHeaders:ee}),y(this,m,void 0)},Go=async function(U){(0,e.assert)(r(this,d),"Network Interception not set-up."),await this.cdpClient.sendCommand("Fetch.continueWithAuth",{requestId:r(this,d),authChallengeResponse:U}),y(this,m,void 0)},Xo=function(U){var ee;let Q;try{Q=U()}catch(re){(ee=r(this,R))==null||ee.call(this,n.LogType.debugError,re);return}k(this,T,H0).call(this)||r(this,P)[Q.method]&&Q.method!==i.ChromiumBidi.Network.EventNames.AuthRequired||(k(this,T,j0).call(this),r(this,P)[Q.method]=!0,r(this,C).registerEvent(Object.assign(Q,{type:"event"}),r(this,T,Af)))},Jo=function(U){var ee;const Q={isBlocked:!1};if(U){const re=k(this,T,jg).call(this,U);Q.isBlocked=re.size>0,Q.isBlocked&&(Q.intercepts=[...re])}return{context:r(this,T,Af),navigation:r(this,T,F0),redirectCount:r(this,w),request:k(this,T,q0).call(this),timestamp:Math.round((0,a.getTiming)((ee=r(this,g).info)==null?void 0:ee.wallTime)*1e3),...Q}},Df=function(){var re,pe,ve,Re,We,tt,_t,St,os,Qt,di,Dd;(re=r(this,v).info)!=null&&re.fromDiskCache&&(r(this,v).extraInfo=void 0);const U=[...(0,a.bidiNetworkHeadersFromCdpNetworkHeaders)((pe=r(this,v).info)==null?void 0:pe.headers),...(0,a.bidiNetworkHeadersFromCdpNetworkHeaders)((ve=r(this,v).extraInfo)==null?void 0:ve.headers)],Q=r(this,T,L0);return{...{url:this.url,protocol:((Re=r(this,v).info)==null?void 0:Re.protocol)??"",status:r(this,T,zo)??-1,statusText:((We=r(this,v).info)==null?void 0:We.statusText)||((tt=r(this,v).paused)==null?void 0:tt.responseStatusText)||"",fromCache:((_t=r(this,v).info)==null?void 0:_t.fromDiskCache)||((St=r(this,v).info)==null?void 0:St.fromPrefetchCache)||r(this,b),headers:((os=r(this,E))==null?void 0:os.headers)??U,mimeType:((Qt=r(this,v).info)==null?void 0:Qt.mimeType)||"",bytesReceived:((di=r(this,v).info)==null?void 0:di.encodedDataLength)||0,headersSize:(0,a.computeHeadersSize)(U),bodySize:0,content:{size:0},...Q?{authChallenges:Q}:{}},"goog:securityDetails":(Dd=r(this,v).info)==null?void 0:Dd.securityDetails}},q0=function(){var ee,re,pe,ve,Re;const U=r(this,T,Bg);return{...{request:r(this,h),url:this.url,method:r(this,T,D0)??s.unknownParameter,headers:U,cookies:r(this,T,O0),headersSize:(0,a.computeHeadersSize)(U),bodySize:r(this,T,N0),destination:"",initiatorType:null,timings:r(this,T,B0)},"goog:postData":(re=(ee=r(this,g).info)==null?void 0:ee.request)==null?void 0:re.postData,"goog:hasPostData":(ve=(pe=r(this,g).info)==null?void 0:pe.request)==null?void 0:ve.hasPostData,"goog:resourceType":(Re=r(this,g).info)==null?void 0:Re.type}},$0=function(){var U;return(0,e.assert)(r(this,g).info,"RequestWillBeSentEvent is not set"),{method:i.ChromiumBidi.Network.EventNames.BeforeRequestSent,params:{...k(this,T,Jo).call(this,"beforeRequestSent"),initiator:{type:k(U=s,Z,W0).call(U,r(this,g).info.initiator.type),columnNumber:r(this,g).info.initiator.columnNumber,lineNumber:r(this,g).info.initiator.lineNumber,stackTrace:r(this,g).info.initiator.stack,request:r(this,g).info.initiator.requestId}}}},K0=function(){return{method:i.ChromiumBidi.Network.EventNames.ResponseStarted,params:{...k(this,T,Jo).call(this,"responseStarted"),response:k(this,T,Df).call(this)}}},U0=function(){return{method:i.ChromiumBidi.Network.EventNames.ResponseCompleted,params:{...k(this,T,Jo).call(this),response:k(this,T,Df).call(this)}}},H0=function(){var Q,ee;const U="/favicon.ico";return((Q=r(this,g).paused)==null?void 0:Q.request.url.endsWith(U))??((ee=r(this,g).info)==null?void 0:ee.request.url.endsWith(U))??!1},Ff=function(U,Q){if(!U&&!Q)return;let ee=U;const re=(0,a.networkHeaderFromCookieHeaders)(Q);return re&&!ee&&(ee=r(this,T,Bg)),re&&ee&&(ee.filter(pe=>pe.name.localeCompare("cookie",void 0,{sensitivity:"base"})!==0),ee.push(re)),ee},Z=new WeakSet,W0=function(U){switch(U){case"parser":case"script":case"preflight":return U;default:return"other"}},f(p,Z),W(p,"unknownParameter","UNKNOWN"),p);Vc.NetworkRequest=c,s=c;function u(ue){let U;return(ue==null?void 0:ue.type)==="string"?U=btoa(ue.value):(ue==null?void 0:ue.type)==="base64"&&(U=ue.value),U}function l(ue){return(ue==null?void 0:ue.type)==="string"?ue.value.length:(ue==null?void 0:ue.type)==="base64"?atob(ue.value).length:0}return Vc}var xb;function v1(){var a,o,c,u,l,p,h,Fr,m;if(xb)return zc;xb=1,Object.defineProperty(zc,"__esModule",{value:!0}),zc.NetworkStorage=void 0;const s=Le(),i=Ic(),e=y1(),t=Fh();let n=(m=class{constructor(w,g,S,E){f(this,h);f(this,a);f(this,o);f(this,c);f(this,u,new Map);f(this,l,new Map);f(this,p,"default");y(this,a,g),y(this,o,w),S.on("Target.detachedFromTarget",({sessionId:v})=>{this.disposeRequestMap(v)}),y(this,c,E)}onCdpTargetCreated(w){const g=w.cdpClient,S=[["Network.requestWillBeSent",E=>{const v=this.getRequestById(E.requestId);v&&v.isRedirecting()?(v.handleRedirect(E),this.deleteRequest(E.requestId),k(this,h,Fr).call(this,E.requestId,w,v.redirectCount+1).onRequestWillBeSentEvent(E)):k(this,h,Fr).call(this,E.requestId,w).onRequestWillBeSentEvent(E)}],["Network.requestWillBeSentExtraInfo",E=>{k(this,h,Fr).call(this,E.requestId,w).onRequestWillBeSentExtraInfoEvent(E)}],["Network.responseReceived",E=>{k(this,h,Fr).call(this,E.requestId,w).onResponseReceivedEvent(E)}],["Network.responseReceivedExtraInfo",E=>{k(this,h,Fr).call(this,E.requestId,w).onResponseReceivedExtraInfoEvent(E)}],["Network.requestServedFromCache",E=>{k(this,h,Fr).call(this,E.requestId,w).onServedFromCache()}],["Network.loadingFailed",E=>{k(this,h,Fr).call(this,E.requestId,w).onLoadingFailedEvent(E)}],["Fetch.requestPaused",E=>{k(this,h,Fr).call(this,E.networkId??E.requestId,w).onRequestPaused(E)}],["Fetch.authRequired",E=>{let v=this.getRequestByFetchId(E.requestId);v||(v=k(this,h,Fr).call(this,E.requestId,w)),v.onAuthRequired(E)}]];for(const[E,v]of S)g.on(E,v)}getInterceptionStages(w){const g={request:!1,response:!1,auth:!1};for(const S of r(this,l).values())S.contexts&&!S.contexts.includes(w)||(g.request||(g.request=S.phases.includes("beforeRequestSent")),g.response||(g.response=S.phases.includes("responseStarted")),g.auth||(g.auth=S.phases.includes("authRequired")));return g}getInterceptsForPhase(w,g){if(w.url===e.NetworkRequest.unknownParameter)return new Set;const S=new Set;for(const[E,v]of r(this,l).entries())if(!(!v.phases.includes(g)||v.contexts&&!v.contexts.includes(w.cdpTarget.topLevelId))){if(v.urlPatterns.length===0){S.add(E);continue}for(const C of v.urlPatterns)if((0,t.matchUrlPattern)(C,w.url)){S.add(E);break}}return S}disposeRequestMap(w){for(const g of r(this,u).values())g.cdpClient.sessionId===w&&(r(this,u).delete(g.id),g.dispose())}addIntercept(w){const g=(0,i.uuidv4)();return r(this,l).set(g,w),g}removeIntercept(w){if(!r(this,l).has(w))throw new s.NoSuchInterceptException(`Intercept '${w}' does not exist.`);r(this,l).delete(w)}getRequestsByTarget(w){const g=[];for(const S of r(this,u).values())S.cdpTarget===w&&g.push(S);return g}getRequestById(w){return r(this,u).get(w)}getRequestByFetchId(w){for(const g of r(this,u).values())if(g.fetchId===w)return g}addRequest(w){r(this,u).set(w.id,w)}deleteRequest(w){r(this,u).delete(w)}getNavigationId(w){var g;return w===void 0?null:((g=r(this,a).findContext(w))==null?void 0:g.navigationId)??null}set defaultCacheBehavior(w){y(this,p,w)}get defaultCacheBehavior(){return r(this,p)}},a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakSet,Fr=function(w,g,S){let E=this.getRequestById(w);return E||(E=new e.NetworkRequest(w,r(this,o),this,g,S,r(this,c)),this.addRequest(E),E)},m);return zc.NetworkStorage=n,zc}var Gc={},Pb;function b1(){var i,e;if(Pb)return Gc;Pb=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.PreloadScriptStorage=void 0;let s=(e=class{constructor(){f(this,i,new Set)}find(n){return n?[...r(this,i)].filter(a=>!!(n.id!==void 0&&n.id===a.id||n.targetId!==void 0&&a.targetIds.has(n.targetId)||n.global!==void 0&&(n.global&&a.contexts===void 0||!n.global&&a.contexts!==void 0))):[...r(this,i)]}add(n){r(this,i).add(n)}remove(n){for(const a of this.find(n))r(this,i).delete(a)}},i=new WeakMap,e);return Gc.PreloadScriptStorage=s,Gc}var Xc={},_b;function S1(){var t,n,a;if(_b)return Xc;_b=1,Object.defineProperty(Xc,"__esModule",{value:!0}),Xc.RealmStorage=void 0;const s=Le(),i=fb();let e=(a=class{constructor(){f(this,t,new Map);f(this,n,new Map)}get knownHandlesToRealmMap(){return r(this,t)}addRealm(c){r(this,n).set(c.realmId,c)}findRealms(c){return Array.from(r(this,n).values()).filter(u=>!(c.realmId!==void 0&&c.realmId!==u.realmId||c.browsingContextId!==void 0&&!u.associatedBrowsingContexts.map(l=>l.id).includes(c.browsingContextId)||c.sandbox!==void 0&&(!(u instanceof i.WindowRealm)||c.sandbox!==u.sandbox)||c.executionContextId!==void 0&&c.executionContextId!==u.executionContextId||c.origin!==void 0&&c.origin!==u.origin||c.type!==void 0&&c.type!==u.realmType||c.cdpSessionId!==void 0&&c.cdpSessionId!==u.cdpClient.sessionId))}findRealm(c){const u=this.findRealms(c);if(u.length===1)return u[0]}getRealm(c){const u=this.findRealm(c);if(u===void 0)throw new s.NoSuchFrameException(`Realm ${JSON.stringify(c)} not found`);return u}deleteRealms(c){this.findRealms(c).map(u=>{u.dispose(),r(this,n).delete(u.realmId),Array.from(this.knownHandlesToRealmMap.entries()).filter(([,l])=>l===u.realmId).map(([l])=>this.knownHandlesToRealmMap.delete(l))})}},t=new WeakMap,n=new WeakMap,a);return Xc.RealmStorage=e,Xc}var Jc={},Yc={},Tb;function C1(){var i,e,t;if(Tb)return Yc;Tb=1,Object.defineProperty(Yc,"__esModule",{value:!0}),Yc.Buffer=void 0;class s{constructor(a,o){f(this,i);f(this,e,[]);f(this,t);y(this,i,a),y(this,t,o)}get(){return r(this,e)}add(a){var o;for(r(this,e).push(a);r(this,e).length>r(this,i);){const c=r(this,e).shift();c!==void 0&&((o=r(this,t))==null||o.call(this,c))}}}return i=new WeakMap,e=new WeakMap,t=new WeakMap,Yc.Buffer=s,Yc}var Qc={},Mb;function k1(){var i,e;if(Mb)return Qc;Mb=1,Object.defineProperty(Qc,"__esModule",{value:!0}),Qc.DefaultMap=void 0;let s=(e=class extends Map{constructor(a,o){super(o);f(this,i);y(this,i,a)}get(a){return this.has(a)||this.set(a,r(this,i).call(this,a)),super.get(a)}},i=new WeakMap,e);return Qc.DefaultMap=s,Qc}var Zc={},Ib;function E1(){if(Ib)return Zc;Ib=1,Object.defineProperty(Zc,"__esModule",{value:!0}),Zc.distinctValues=s,Zc.deterministicJSONStringify=i;function s(t){const n=new Map;for(const a of t)n.set(i(a),a);return Array.from(n.values())}function i(t){return JSON.stringify(e(t))}function e(t){if(t==null||Array.isArray(t)||typeof t!="object")return t;const n={};for(const a of Object.keys(t).sort()){const o=t[a];n[a]=e(o)}return n}return Zc}var eu={},Ab;function x1(){var i,e,t;if(Ab)return eu;Ab=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.IdWrapper=void 0;let s=(i=class{constructor(){f(this,t);y(this,t,++Nn(i,e)._)}get id(){return r(this,t)}},e=new WeakMap,t=new WeakMap,f(i,e,0),i);return eu.IdWrapper=s,eu}var ua={},Rb;function Db(){if(Rb)return ua;Rb=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.isCdpEvent=i,ua.isDeprecatedCdpEvent=e,ua.assertSupportedEvent=t;const s=Le();function i(n){var a;return((a=n.split(".").at(0))==null?void 0:a.startsWith(s.ChromiumBidi.BiDiModule.Cdp))??!1}function e(n){var a;return((a=n.split(".").at(0))==null?void 0:a.startsWith(s.ChromiumBidi.BiDiModule.DeprecatedCdp))??!1}function t(n){if(!s.ChromiumBidi.EVENT_NAMES.has(n)&&!i(n)&&!e(n))throw new s.InvalidArgumentException(`Unknown event: ${n}`)}return ua}var Es={},Fb;function P1(){var a,o,c,u,z0,V0,h;if(Fb)return Es;Fb=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.SubscriptionManager=void 0,Es.cartesianProduct=e,Es.unrollEvents=t;const s=Le(),i=Db();function e(...d){return d.reduce((m,b)=>m.flatMap(w=>b.map(g=>[w,g].flat())))}function t(d){const m=new Set;function b(w){for(const g of w)m.add(g)}for(const w of d)switch(w){case s.ChromiumBidi.BiDiModule.Bluetooth:b(Object.values(s.ChromiumBidi.Bluetooth.EventNames));break;case s.ChromiumBidi.BiDiModule.BrowsingContext:b(Object.values(s.ChromiumBidi.BrowsingContext.EventNames));break;case s.ChromiumBidi.BiDiModule.Log:b(Object.values(s.ChromiumBidi.Log.EventNames));break;case s.ChromiumBidi.BiDiModule.Network:b(Object.values(s.ChromiumBidi.Network.EventNames));break;case s.ChromiumBidi.BiDiModule.Script:b(Object.values(s.ChromiumBidi.Script.EventNames));break;default:m.add(w)}return[...m.values()]}let n=(h=class{constructor(m){f(this,u);f(this,a,0);f(this,o,new Map);f(this,c);y(this,c,m)}getChannelsSubscribedToEvent(m,b){return Array.from(r(this,o).keys()).map(g=>({priority:k(this,u,z0).call(this,m,b,g),channel:g})).filter(({priority:g})=>g!==null).sort((g,S)=>g.priority-S.priority).map(({channel:g})=>g)}isSubscribedTo(m,b=null){const w=r(this,c).findTopLevelContextId(b);for(const g of r(this,o).values())for(const[S,E]of g.entries())if(!(w!==S&&S!==null)){for(const v of E.keys())if(v===m||v===m.split(".").at(0)||v.split(".").at(0)===m)return!0}return!1}subscribe(m,b,w){switch(b=r(this,c).findTopLevelContextId(b),m){case s.ChromiumBidi.BiDiModule.BrowsingContext:return Object.values(s.ChromiumBidi.BrowsingContext.EventNames).map(v=>this.subscribe(v,b,w)).flat();case s.ChromiumBidi.BiDiModule.Log:return Object.values(s.ChromiumBidi.Log.EventNames).map(v=>this.subscribe(v,b,w)).flat();case s.ChromiumBidi.BiDiModule.Network:return Object.values(s.ChromiumBidi.Network.EventNames).map(v=>this.subscribe(v,b,w)).flat();case s.ChromiumBidi.BiDiModule.Script:return Object.values(s.ChromiumBidi.Script.EventNames).map(v=>this.subscribe(v,b,w)).flat();case s.ChromiumBidi.BiDiModule.Bluetooth:return Object.values(s.ChromiumBidi.Bluetooth.EventNames).map(v=>this.subscribe(v,b,w)).flat()}r(this,o).has(w)||r(this,o).set(w,new Map);const g=r(this,o).get(w);g.has(b)||g.set(b,new Map);const S=g.get(b),E=(b===null?r(this,c).getTopLevelContexts().map(v=>v.id):[b]).filter(v=>!this.isSubscribedTo(m,v));return S.has(m)||S.set(m,Nn(this,a)._++),E.map(v=>({event:m,contextId:v}))}unsubscribeAll(m,b,w){for(const S of b)S!==null&&r(this,c).getContext(S);e(t(m),b).map(([S,E])=>k(this,u,V0).call(this,S,E,w)).forEach(S=>S())}unsubscribe(m,b,w){this.unsubscribeAll([m],[b],w)}},a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakSet,z0=function(m,b,w){const g=r(this,o).get(w);if(g===void 0)return null;const S=r(this,c).findTopLevelContextId(b),v=[...new Set([null,S])].map(C=>{var F,R,P;const A=(F=g.get(C))==null?void 0:F.get(m);if((0,i.isCdpEvent)(m)){const T=(R=g.get(C))==null?void 0:R.get(s.ChromiumBidi.BiDiModule.Cdp);return A&&T?Math.min(A,T):A??T}if((0,i.isDeprecatedCdpEvent)(m)){const T=(P=g.get(C))==null?void 0:P.get(s.ChromiumBidi.BiDiModule.DeprecatedCdp);return A&&T?Math.min(A,T):A??T}return A}).filter(C=>C!==void 0);return v.length===0?null:Math.min(...v)},V0=function(m,b,w){if(b=r(this,c).findTopLevelContextId(b),!r(this,o).has(w))throw new s.InvalidArgumentException(`Cannot unsubscribe from ${m}, ${b===null?"null":b}. No subscription found.`);const g=r(this,o).get(w);if(!g.has(b))throw new s.InvalidArgumentException(`Cannot unsubscribe from ${m}, ${b===null?"null":b}. No subscription found.`);const S=g.get(b);if(!S.has(m))throw new s.InvalidArgumentException(`Cannot unsubscribe from ${m}, ${b===null?"null":b}. No subscription found.`);return()=>{S.delete(m),S.size===0&&g.delete(m),g.size===0&&r(this,o).delete(w)}},h);return Es.SubscriptionManager=n,Es}var Ob;function _1(){var m,b,w,g,S,E,v,C,A,F,R,jd,T,G0,$g,Kg;if(Ob)return Jc;Ob=1;var s;Object.defineProperty(Jc,"__esModule",{value:!0}),Jc.EventManager=void 0;const i=Le(),e=C1(),t=k1(),n=E1(),a=aa(),o=x1(),c=Up(),u=Db(),l=P1();class p{constructor(K,j){f(this,m,new o.IdWrapper);f(this,b);f(this,w);y(this,w,K),y(this,b,j)}get id(){return r(this,m).id}get contextId(){return r(this,b)}get event(){return r(this,w)}}m=new WeakMap,b=new WeakMap,w=new WeakMap;const h=new Map([[i.ChromiumBidi.Log.EventNames.LogEntryAdded,100]]);let d=(R=class extends a.EventEmitter{constructor(j){super();f(this,T);f(this,g,new t.DefaultMap(()=>new Set));f(this,S,new Map);f(this,E,new Map);f(this,v);f(this,C);f(this,A);y(this,C,j),y(this,v,new l.SubscriptionManager(j)),y(this,A,new t.DefaultMap(()=>[]))}get subscriptionManager(){return r(this,v)}addSubscribeHook(j,O){r(this,A).get(j).push(O)}registerEvent(j,O){this.registerPromiseEvent(Promise.resolve({kind:"success",value:j}),O,j.method)}registerPromiseEvent(j,O,D){const N=new p(j,O),$=r(this,v).getChannelsSubscribedToEvent(D,O);k(this,T,G0).call(this,N,D);for(const B of $)this.emit("event",{message:c.OutgoingMessage.createFromPromise(j,B),event:D}),k(this,T,$g).call(this,N,B,D)}async subscribe(j,O,D){for(const $ of j)(0,u.assertSupportedEvent)($);for(const $ of O)$!==null&&r(this,C).getContext($);const N=[];for(const $ of j)for(const B of O){N.push(...r(this,v).subscribe($,B,D));for(const X of k(this,T,Kg).call(this,$,B,D))this.emit("event",{message:c.OutgoingMessage.createFromPromise(X.event,D),event:$}),k(this,T,$g).call(this,X,D,$)}(0,n.distinctValues)(N).forEach(({contextId:$,event:B})=>{r(this,A).get(B).forEach(X=>X($))}),await this.toggleModulesIfNeeded()}async unsubscribe(j,O,D){for(const N of j)(0,u.assertSupportedEvent)(N);r(this,v).unsubscribeAll(j,O,D),await this.toggleModulesIfNeeded()}async toggleModulesIfNeeded(){await Promise.all(r(this,C).getAllContexts().map(async j=>await j.toggleModulesIfNeeded()))}clearBufferedEvents(j){var O;for(const D of h.keys()){const N=k(O=s,F,jd).call(O,D,j);r(this,S).delete(N)}}},g=new WeakMap,S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,A=new WeakMap,F=new WeakSet,jd=function(j,O){return JSON.stringify({eventName:j,browsingContext:O})},T=new WeakSet,G0=function(j,O){var N;if(!h.has(O))return;const D=k(N=s,F,jd).call(N,O,j.contextId);r(this,S).has(D)||r(this,S).set(D,new e.Buffer(h.get(O))),r(this,S).get(D).add(j),r(this,g).get(O).add(j.contextId)},$g=function(j,O,D){var X,Y;if(!h.has(D))return;const N=k(X=s,F,jd).call(X,D,j.contextId),$=Math.max(((Y=r(this,E).get(N))==null?void 0:Y.get(O))??0,j.id),B=r(this,E).get(N);B?B.set(O,$):r(this,E).set(N,new Map([[O,$]]))},Kg=function(j,O,D){var X,Y,le;const N=k(X=s,F,jd).call(X,j,O),$=((Y=r(this,E).get(N))==null?void 0:Y.get(D))??-1/0,B=((le=r(this,S).get(N))==null?void 0:le.get().filter(V=>V.id>$))??[];return O===null&&Array.from(r(this,g).get(j).keys()).filter(V=>V!==null&&r(this,C).hasContext(V)).map(V=>k(this,T,Kg).call(this,j,V,D)).forEach(V=>B.push(...V)),B.sort((V,z)=>V.id-z.id)},f(R,F),R);return Jc.EventManager=d,s=d,Jc}var Nb;function T1(){var d,m,b,w,g,S,E,v,C,A,F,R,X0,T;if(Nb)return dc;Nb=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.BidiServer=void 0;const s=aa(),i=Xt(),e=L_(),t=a1(),n=o1(),a=g1(),o=w1(),c=v1(),u=b1(),l=S1(),p=_1();let h=(T=class extends s.EventEmitter{constructor(I,_,K,j,O,D,N){super();f(this,R);f(this,d);f(this,m);f(this,b);f(this,w);f(this,g,new o.BrowsingContextStorage);f(this,S,new l.RealmStorage);f(this,E,new u.PreloadScriptStorage);f(this,v);f(this,C);f(this,A,I=>{r(this,b).processCommand(I).catch(_=>{var K;(K=r(this,C))==null||K.call(this,i.LogType.debugError,_)})});f(this,F,async I=>{const _=I.message;I.channel!==null&&(_.channel=I.channel),await r(this,m).sendMessage(_)});y(this,C,N),y(this,d,new e.ProcessingQueue(r(this,F),r(this,C))),y(this,m,I),r(this,m).setOnMessage(r(this,A)),y(this,w,new p.EventManager(r(this,g)));const $=new c.NetworkStorage(r(this,w),r(this,g),K,N);y(this,v,new n.BluetoothProcessor(r(this,w),r(this,g))),y(this,b,new t.CommandProcessor(_,K,r(this,w),r(this,g),r(this,S),r(this,E),$,r(this,v),D,async B=>{await K.sendCommand("Security.setIgnoreCertificateErrors",{ignore:B.acceptInsecureCerts??!1}),new a.CdpTargetManager(_,K,j,r(this,w),r(this,g),r(this,S),$,r(this,v),r(this,E),O,(B==null?void 0:B["goog:prerenderingDisabled"])??!1,B==null?void 0:B.unhandledPromptBehavior,N),await K.sendCommand("Target.setDiscoverTargets",{discover:!0}),await K.sendCommand("Target.setAutoAttach",{autoAttach:!0,waitForDebuggerOnStart:!0,flatten:!0,filter:[{type:"page",exclude:!0},{}]}),await k(this,R,X0).call(this)},r(this,C))),r(this,w).on("event",({message:B,event:X})=>{this.emitOutgoingMessage(B,X)}),r(this,b).on("response",({message:B,event:X})=>{this.emitOutgoingMessage(B,X)})}static async createAndStart(I,_,K,j,O,D){const[{browserContextIds:N},{targetInfos:$}]=await Promise.all([K.sendCommand("Target.getBrowserContexts"),K.sendCommand("Target.getTargets")]);let B="default";for(const Y of $)if(Y.browserContextId&&!N.includes(Y.browserContextId)){B=Y.browserContextId;break}return new T(I,_,K,j,B,O,D)}emitOutgoingMessage(I,_){r(this,d).add(I,_)}close(){r(this,m).close()}},d=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakMap,E=new WeakMap,v=new WeakMap,C=new WeakMap,A=new WeakMap,F=new WeakMap,R=new WeakSet,X0=async function(){await Promise.all(r(this,g).getTopLevelContexts().map(I=>I.lifecycleLoaded()))},T);return dc.BidiServer=h,dc}var Lb;function M1(){return Lb||(Lb=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.OutgoingMessage=s.EventEmitter=s.BidiServer=void 0;var i=T1();Object.defineProperty(s,"BidiServer",{enumerable:!0,get:function(){return i.BidiServer}});var e=aa();Object.defineProperty(s,"EventEmitter",{enumerable:!0,get:function(){return e.EventEmitter}});var t=Up();Object.defineProperty(s,"OutgoingMessage",{enumerable:!0,get:function(){return t.OutgoingMessage}})}(Bp)),Bp}var Hp=M1();const Pn=class Pn extends sc{constructor(e,t){super();f(this,Mo,!1);f(this,ns);f(this,ni,Ne.create());W(this,"frame");W(this,"onClose",()=>{Pn.sessions.delete(this.id()),y(this,Mo,!0)});if(this.frame=e,!this.frame.page().browser().cdpSupported)return;const n=this.frame.page().browser().connection;y(this,ns,n),t?(r(this,ni).resolve(t),Pn.sessions.set(t,this)):(async()=>{try{const{result:a}=await n.send("cdp.getSession",{context:e._id});r(this,ni).resolve(a.session),Pn.sessions.set(a.session,this)}catch(a){r(this,ni).reject(a)}})(),Pn.sessions.set(r(this,ni).value(),this)}connection(){}async send(e,t,n){if(r(this,ns)===void 0)throw new we("CDP support is required for this feature. The current browser does not support CDP.");if(r(this,Mo))throw new tr(`Protocol error (${e}): Session closed. Most likely the page has been closed.`);const a=await r(this,ni).valueOrThrow(),{result:o}=await r(this,ns).send("cdp.sendCommand",{method:e,params:t,session:a},n==null?void 0:n.timeout);return o.result}async detach(){if(!(r(this,ns)===void 0||r(this,ns).closed||r(this,Mo)))try{await this.frame.client.send("Target.detachFromTarget",{sessionId:this.id()})}finally{this.onClose()}}id(){const e=r(this,ni).value();return typeof e=="string"?e:""}};Mo=new WeakMap,ns=new WeakMap,ni=new WeakMap,W(Pn,"sessions",new Map);let tu=Pn;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const I1=Gn("puppeteer:webDriverBiDi:SEND ►"),A1=Gn("puppeteer:webDriverBiDi:RECV ◀");class Bb extends he{constructor(e,t,n=0,a){super();f(this,ud);f(this,Ir);f(this,Io);f(this,ld,0);f(this,_n,!1);f(this,ai,new Cp);f(this,dd,[]);y(this,ud,e),y(this,Io,n),y(this,ld,a??18e4),y(this,Ir,t),r(this,Ir).onmessage=this.onMessage.bind(this),r(this,Ir).onclose=this.unbind.bind(this)}get closed(){return r(this,_n)}get url(){return r(this,ud)}pipeTo(e){r(this,dd).push(e)}emit(e,t){for(const n of r(this,dd))n.emit(e,t);return super.emit(e,t)}send(e,t,n){return te(!r(this,_n),"Protocol error: Connection closed."),r(this,ai).create(e,n??r(this,ld),a=>{const o=JSON.stringify({id:a,method:e,params:t});I1(o),r(this,Ir).send(o)})}async onMessage(e){var n;r(this,Io)&&await new Promise(a=>setTimeout(a,r(this,Io))),A1(e);const t=JSON.parse(e);if("type"in t)switch(t.type){case"success":r(this,ai).resolve(t.id,t);return;case"error":if(t.id===null)break;r(this,ai).reject(t.id,R1(t),`${t.error}: ${t.message}`);return;case"event":if(D1(t)){(n=tu.sessions.get(t.params.session))==null||n.emit(t.params.event,t.params.params);return}this.emit(t.method,t.params);return}"id"in t&&r(this,ai).reject(t.id,`Protocol Error. Message is not in BiDi protocol format: '${e}'`,t.message),de(t)}unbind(){r(this,_n)||(y(this,_n,!0),r(this,Ir).onmessage=()=>{},r(this,Ir).onclose=()=>{},r(this,ai).clear())}dispose(){this.unbind(),r(this,Ir).close()}getPendingProtocolErrors(){return r(this,ai).getPendingProtocolErrors()}}ud=new WeakMap,Ir=new WeakMap,Io=new WeakMap,ld=new WeakMap,_n=new WeakMap,ai=new WeakMap,dd=new WeakMap;function R1(s){let i=`${s.error} ${s.message}`;return s.stacktrace&&(i+=` ${s.stacktrace}`),i}function D1(s){return s.method.startsWith("cdp.")}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const F1=(s,...i)=>{Gn(`bidi:${s}`)(i)};async function O1(s){const i=new L1,e=new N1(s),t={send(o){i.emitMessage(JSON.parse(o))},close(){a.close(),e.close(),s.dispose()},onmessage(o){}};i.on("bidiResponse",o=>{t.onmessage(JSON.stringify(o))});const n=new Bb(s.url(),t,s.delay,s.timeout),a=await Hp.BidiServer.createAndStart(i,e,e.browserClient(),"",void 0,F1);return n}class N1{constructor(i){f(this,hd);f(this,Tn,new Map);f(this,Mn);y(this,hd,i),y(this,Mn,new jb(i))}browserClient(){return r(this,Mn)}getCdpClient(i){const e=r(this,hd).session(i);if(!e)throw new Error(`Unknown CDP session with id ${i}`);if(!r(this,Tn).has(e)){const t=new jb(e,i,r(this,Mn));return r(this,Tn).set(e,t),t}return r(this,Tn).get(e)}close(){r(this,Mn).close();for(const i of r(this,Tn).values())i.close()}}hd=new WeakMap,Tn=new WeakMap,Mn=new WeakMap;class jb extends Hp.EventEmitter{constructor(e,t,n){super();f(this,Ao,!1);f(this,In);W(this,"sessionId");f(this,fd);f(this,pd,(e,t)=>{this.emit(e,t)});y(this,In,e),this.sessionId=t,y(this,fd,n),r(this,In).on("*",r(this,pd))}browserClient(){return r(this,fd)}async sendCommand(e,...t){if(!r(this,Ao))try{return await r(this,In).send(e,...t)}catch(n){if(r(this,Ao))return;throw n}}close(){r(this,In).off("*",r(this,pd)),y(this,Ao,!0)}isCloseError(e){return e instanceof tr}}Ao=new WeakMap,In=new WeakMap,fd=new WeakMap,pd=new WeakMap;class L1 extends Hp.EventEmitter{constructor(){super(...arguments);f(this,Ro,async e=>{})}emitMessage(e){r(this,Ro).call(this,e)}setOnMessage(e){y(this,Ro,e)}async sendMessage(e){this.emit("bidiResponse",e)}close(){y(this,Ro,async e=>{})}}Ro=new WeakMap;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var B1=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},j1=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};let q1=(()=>{var t,n,a,o,c,u,J0,Of,Y0,d;let s=he,i=[],e;return d=class extends s{constructor(w){super();f(this,u);f(this,t,B1(this,i));f(this,n);f(this,a);f(this,o,new Xe);f(this,c);y(this,a,w)}static from(w){var S;const g=new d(w);return k(S=g,u,J0).call(S),g}get disposed(){return r(this,o).disposed}get request(){return r(this,t)}get navigation(){return r(this,n)}dispose(){this[ge]()}[(e=[wi],ge)](){r(this,o).dispose(),super[ge]()}},t=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakSet,J0=function(){const w=r(this,o).use(new he(r(this,a)));w.once("closed",()=>{this.emit("failed",{url:r(this,a).url,timestamp:new Date}),this.dispose()}),w.on("request",({request:S})=>{if(S.navigation===void 0||!k(this,u,Of).call(this,S.navigation))return;y(this,t,S),this.emit("request",S),r(this,o).use(new he(r(this,t))).on("redirect",v=>{y(this,t,v)})});const g=r(this,o).use(new he(r(this,u,Y0)));g.on("browsingContext.navigationStarted",S=>{S.context!==r(this,a).id||r(this,n)!==void 0||y(this,n,d.from(r(this,a)))});for(const S of["browsingContext.domContentLoaded","browsingContext.load"])g.on(S,E=>{E.context!==r(this,a).id||E.navigation===null||!k(this,u,Of).call(this,E.navigation)||this.dispose()});for(const[S,E]of[["browsingContext.fragmentNavigated","fragment"],["browsingContext.navigationFailed","failed"],["browsingContext.navigationAborted","aborted"]])g.on(S,v=>{v.context!==r(this,a).id||!k(this,u,Of).call(this,v.navigation)||(this.emit(E,{url:v.url,timestamp:new Date(v.timestamp)}),this.dispose())})},Of=function(w){return r(this,n)!==void 0&&!r(this,n).disposed?!1:r(this,c)===void 0?(y(this,c,w),!0):r(this,c)===w},Y0=function(){return r(this,a).userContext.browser.session},(()=>{const w=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;j1(d,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:g=>"dispose"in g,get:g=>g.dispose},metadata:w},null,i),w&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:w})})(),d})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var $1=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},ru=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},Wp;let zp=(()=>{var c,u;let s=he,i=[],e,t,n,a,o;return u=class extends s{constructor(h,d){super();f(this,c,$1(this,i));W(this,"disposables",new Xe);W(this,"id");W(this,"origin");W(this,"executionContextId");this.id=h,this.origin=d}get disposed(){return r(this,c)!==void 0}get target(){return{realm:this.id}}dispose(h){y(this,c,h),this[ge]()}async disown(h){await this.session.send("script.disown",{target:this.target,handles:h})}async callFunction(h,d,m={}){const{result:b}=await this.session.send("script.callFunction",{functionDeclaration:h,awaitPromise:d,target:this.target,...m});return b}async evaluate(h,d,m={}){const{result:b}=await this.session.send("script.evaluate",{expression:h,awaitPromise:d,target:this.target,...m});return b}async resolveExecutionContextId(){if(!this.executionContextId){const{result:h}=await this.session.connection.send("cdp.resolveRealm",{realm:this.id});this.executionContextId=h.executionContextId}return this.executionContextId}[(e=[wi],t=[se(h=>r(h,c))],n=[se(h=>r(h,c))],a=[se(h=>r(h,c))],o=[se(h=>r(h,c))],ge)](){r(this,c)??y(this,c,"Realm already destroyed, probably because all associated browsing contexts closed."),this.emit("destroyed",{reason:r(this,c)}),this.disposables.dispose(),super[ge]()}},c=new WeakMap,(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;ru(u,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:d=>"dispose"in d,get:d=>d.dispose},metadata:h},null,i),ru(u,null,t,{kind:"method",name:"disown",static:!1,private:!1,access:{has:d=>"disown"in d,get:d=>d.disown},metadata:h},null,i),ru(u,null,n,{kind:"method",name:"callFunction",static:!1,private:!1,access:{has:d=>"callFunction"in d,get:d=>d.callFunction},metadata:h},null,i),ru(u,null,a,{kind:"method",name:"evaluate",static:!1,private:!1,access:{has:d=>"evaluate"in d,get:d=>d.evaluate},metadata:h},null,i),ru(u,null,o,{kind:"method",name:"resolveExecutionContextId",static:!1,private:!1,access:{has:d=>"resolveExecutionContextId"in d,get:d=>d.resolveExecutionContextId},metadata:h},null,i),h&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),u})();const Sm=class Sm extends zp{constructor(e,t){super("","");f(this,af);W(this,"browsingContext");W(this,"sandbox");f(this,md,new Map);this.browsingContext=e,this.sandbox=t}static from(e,t){var a;const n=new Sm(e,t);return k(a=n,af,Q0).call(a),n}get session(){return this.browsingContext.userContext.browser.session}get target(){return{context:this.browsingContext.id,sandbox:this.sandbox}}};md=new WeakMap,af=new WeakSet,Q0=function(){this.disposables.use(new he(this.browsingContext)).on("closed",({reason:n})=>{this.dispose(n)});const t=this.disposables.use(new he(this.session));t.on("script.realmCreated",n=>{n.type!=="window"||n.context!==this.browsingContext.id||n.sandbox!==this.sandbox||(this.id=n.realm,this.origin=n.origin,this.executionContextId=void 0,this.emit("updated",this))}),t.on("script.realmCreated",n=>{if(n.type!=="dedicated-worker"||!n.owners.includes(this.id))return;const a=Gp.from(this,n.realm,n.origin);r(this,md).set(a.id,a);const o=this.disposables.use(new he(a));o.once("destroyed",()=>{o.removeAllListeners(),r(this,md).delete(a.id)}),this.emit("worker",a)})};let Vp=Sm;class Gp extends zp{constructor(e,t,n){super(t,n);f(this,of);f(this,gd,new Map);W(this,"owners");this.owners=new Set([e])}static from(e,t,n){var o;const a=new Wp(e,t,n);return k(o=a,of,Z0).call(o),a}get session(){return this.owners.values().next().value.session}}gd=new WeakMap,of=new WeakSet,Z0=function(){const e=this.disposables.use(new he(this.session));e.on("script.realmDestroyed",t=>{t.realm===this.id&&this.dispose("Realm already destroyed.")}),e.on("script.realmCreated",t=>{if(t.type!=="dedicated-worker"||!t.owners.includes(this.id))return;const n=Wp.from(this,t.realm,t.origin);r(this,gd).set(n.id,n),this.disposables.use(new he(n)).once("destroyed",()=>{r(this,gd).delete(n.id)}),this.emit("worker",n)})},Wp=Gp;const Cm=class Cm extends zp{constructor(e,t,n){super(t,n);f(this,cf);f(this,wd,new Map);W(this,"browser");this.browser=e}static from(e,t,n){var o;const a=new Cm(e,t,n);return k(o=a,cf,ek).call(o),a}get session(){return this.browser.session}};wd=new WeakMap,cf=new WeakSet,ek=function(){const e=this.disposables.use(new he(this.session));e.on("script.realmDestroyed",t=>{t.realm===this.id&&this.dispose("Realm already destroyed.")}),e.on("script.realmCreated",t=>{if(t.type!=="dedicated-worker"||!t.owners.includes(this.id))return;const n=Gp.from(this,t.realm,t.origin);r(this,wd).set(n.id,n),this.disposables.use(new he(n)).once("destroyed",()=>{r(this,wd).delete(n.id)}),this.emit("worker",n)})};let Xp=Cm;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var K1=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},U1=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};let H1=(()=>{var t,n,a,o,c,u,l,tk,Bn,d;let s=he,i=[],e;return d=class extends s{constructor(w,g){super();f(this,l);f(this,t,K1(this,i));f(this,n);f(this,a);f(this,o);f(this,c,new Xe);f(this,u);y(this,o,w),y(this,u,g)}static from(w,g){var E;const S=new d(w,g);return k(E=S,l,tk).call(E),S}get disposed(){return r(this,c).disposed}get error(){return r(this,t)}get headers(){return r(this,u).request.headers}get id(){return r(this,u).request.request}get initiator(){return r(this,u).initiator}get method(){return r(this,u).request.method}get navigation(){return r(this,u).navigation??void 0}get redirect(){return r(this,n)}get lastRedirect(){let w=r(this,n);for(;w;){if(w&&!r(w,n))return w;w=r(w,n)}return w}get response(){return r(this,a)}get url(){return r(this,u).request.url}get isBlocked(){return r(this,u).isBlocked}get resourceType(){return r(this,u).request["goog:resourceType"]??void 0}get postData(){return r(this,u).request["goog:postData"]??void 0}get hasPostData(){return r(this,u).request["goog:hasPostData"]??!1}async continueRequest({url:w,method:g,headers:S,cookies:E,body:v}){await r(this,l,Bn).send("network.continueRequest",{request:this.id,url:w,method:g,headers:S,body:v,cookies:E})}async failRequest(){await r(this,l,Bn).send("network.failRequest",{request:this.id})}async provideResponse({statusCode:w,reasonPhrase:g,headers:S,body:E}){await r(this,l,Bn).send("network.provideResponse",{request:this.id,statusCode:w,reasonPhrase:g,headers:S,body:E})}async continueWithAuth(w){w.action==="provideCredentials"?await r(this,l,Bn).send("network.continueWithAuth",{request:this.id,action:w.action,credentials:w.credentials}):await r(this,l,Bn).send("network.continueWithAuth",{request:this.id,action:w.action})}dispose(){this[ge]()}[(e=[wi],ge)](){r(this,c).dispose(),super[ge]()}timing(){return r(this,u).request.timings}},t=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakSet,tk=function(){r(this,c).use(new he(r(this,o))).once("closed",({reason:S})=>{y(this,t,S),this.emit("error",r(this,t)),this.dispose()});const g=r(this,c).use(new he(r(this,l,Bn)));g.on("network.beforeRequestSent",S=>{S.context!==r(this,o).id||S.request.request!==this.id||S.redirectCount!==r(this,u).redirectCount+1||(y(this,n,d.from(r(this,o),S)),this.emit("redirect",r(this,n)),this.dispose())}),g.on("network.authRequired",S=>{S.context!==r(this,o).id||S.request.request!==this.id||!S.isBlocked||this.emit("authenticate",void 0)}),g.on("network.fetchError",S=>{S.context!==r(this,o).id||S.request.request!==this.id||r(this,u).redirectCount!==S.redirectCount||(y(this,t,S.errorText),this.emit("error",r(this,t)),this.dispose())}),g.on("network.responseCompleted",S=>{S.context!==r(this,o).id||S.request.request!==this.id||r(this,u).redirectCount!==S.redirectCount||(y(this,a,S.response),r(this,u).request.timings=S.request.timings,this.emit("success",r(this,a)),!(r(this,a).status>=300&&r(this,a).status<400)&&this.dispose())})},Bn=function(){return r(this,o).userContext.browser.session},(()=>{const w=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;U1(d,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:g=>"dispose"in g,get:g=>g.dispose},metadata:w},null,i),w&&Object.defineProperty(d,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:w})})(),d})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var W1=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},qb=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};let z1=(()=>{var n,a,o,c,rk,Ug,p;let s=he,i=[],e,t;return p=class extends s{constructor(m,b){super();f(this,c);f(this,n,W1(this,i));f(this,a);f(this,o,new Xe);W(this,"browsingContext");W(this,"info");this.browsingContext=m,this.info=b}static from(m,b){var g;const w=new p(m,b);return k(g=w,c,rk).call(g),w}get closed(){return r(this,n)!==void 0}get disposed(){return this.closed}get handled(){return this.info.handler==="accept"||this.info.handler==="dismiss"?!0:r(this,a)!==void 0}get result(){return r(this,a)}dispose(m){y(this,n,m),this[ge]()}async handle(m={}){return await r(this,c,Ug).send("browsingContext.handleUserPrompt",{...m,context:this.info.context}),r(this,a)}[(e=[wi],t=[se(m=>r(m,n))],ge)](){r(this,n)??y(this,n,"User prompt already closed, probably because the associated browsing context was destroyed."),this.emit("closed",{reason:r(this,n)}),r(this,o).dispose(),super[ge]()}},n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,rk=function(){r(this,o).use(new he(this.browsingContext)).once("closed",({reason:w})=>{this.dispose(`User prompt already closed: ${w}`)}),r(this,o).use(new he(r(this,c,Ug))).on("browsingContext.userPromptClosed",w=>{w.context===this.browsingContext.id&&(y(this,a,w),this.emit("handled",w),this.dispose("User prompt already handled."))})},Ug=function(){return this.browsingContext.userContext.browser.session},(()=>{const m=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;qb(p,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:b=>"dispose"in b,get:b=>b.dispose},metadata:m},null,i),qb(p,null,t,{kind:"method",name:"handle",static:!1,private:!1,access:{has:b=>"handle"in b,get:b=>b.handle},metadata:m},null,i),m&&Object.defineProperty(p,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})})(),p})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var V1=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},Ue=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};let G1=(()=>{var q,L,I,_,K,j,O,D,ik,Ge,Hg,X;let s=he,i=[],e,t,n,a,o,c,u,l,p,h,d,m,b,w,g,S,E,v,C,A,F,R,P,T;return X=class extends s{constructor(V,z,ne,fe,ce){super();f(this,D);f(this,q,V1(this,i));f(this,L);f(this,I);f(this,_,new Map);f(this,K,new Xe);f(this,j,new Map);f(this,O,new Map);W(this,"defaultRealm");W(this,"id");W(this,"parent");W(this,"userContext");W(this,"originalOpener");y(this,I,fe),this.id=ne,this.parent=z,this.userContext=V,this.originalOpener=ce,this.defaultRealm=k(this,D,Hg).call(this)}static from(V,z,ne,fe,ce){var ae;const Me=new X(V,z,ne,fe,ce);return k(ae=Me,D,ik).call(ae),Me}get children(){return r(this,_).values()}get closed(){return r(this,L)!==void 0}get disposed(){return this.closed}get realms(){const V=this;return function*(){yield V.defaultRealm,yield*r(V,j).values()}()}get top(){let V=this;for(let{parent:z}=V;z;{parent:z}=V)V=z;return V}get url(){return r(this,I)}dispose(V){y(this,L,V);for(const z of r(this,_).values())z.dispose("Parent browsing context was disposed");this[ge]()}async activate(){await r(this,D,Ge).send("browsingContext.activate",{context:this.id})}async captureScreenshot(V={}){const{result:{data:z}}=await r(this,D,Ge).send("browsingContext.captureScreenshot",{context:this.id,...V});return z}async close(V){await Promise.all([...r(this,_).values()].map(async z=>{await z.close(V)})),await r(this,D,Ge).send("browsingContext.close",{context:this.id,promptUnload:V})}async traverseHistory(V){await r(this,D,Ge).send("browsingContext.traverseHistory",{context:this.id,delta:V})}async navigate(V,z){await r(this,D,Ge).send("browsingContext.navigate",{context:this.id,url:V,wait:z})}async reload(V={}){await r(this,D,Ge).send("browsingContext.reload",{context:this.id,...V})}async setCacheBehavior(V){await r(this,D,Ge).send("network.setCacheBehavior",{contexts:[this.id],cacheBehavior:V})}async print(V={}){const{result:{data:z}}=await r(this,D,Ge).send("browsingContext.print",{context:this.id,...V});return z}async handleUserPrompt(V={}){await r(this,D,Ge).send("browsingContext.handleUserPrompt",{context:this.id,...V})}async setViewport(V={}){await r(this,D,Ge).send("browsingContext.setViewport",{context:this.id,...V})}async performActions(V){await r(this,D,Ge).send("input.performActions",{context:this.id,actions:V})}async releaseActions(){await r(this,D,Ge).send("input.releaseActions",{context:this.id})}createWindowRealm(V){return k(this,D,Hg).call(this,V)}async addPreloadScript(V,z={}){return await this.userContext.browser.addPreloadScript(V,{...z,contexts:[this]})}async addIntercept(V){const{result:{intercept:z}}=await this.userContext.browser.session.send("network.addIntercept",{...V,contexts:[this.id]});return z}async removePreloadScript(V){await this.userContext.browser.removePreloadScript(V)}async getCookies(V={}){const{result:{cookies:z}}=await r(this,D,Ge).send("storage.getCookies",{...V,partition:{type:"context",context:this.id}});return z}async setCookie(V){await r(this,D,Ge).send("storage.setCookie",{cookie:V,partition:{type:"context",context:this.id}})}async setFiles(V,z){await r(this,D,Ge).send("input.setFiles",{context:this.id,element:V,files:z})}async subscribe(V){await r(this,D,Ge).subscribe(V,[this.id])}async addInterception(V){await r(this,D,Ge).subscribe(V,[this.id])}[(e=[wi],t=[se(V=>r(V,L))],n=[se(V=>r(V,L))],a=[se(V=>r(V,L))],o=[se(V=>r(V,L))],c=[se(V=>r(V,L))],u=[se(V=>r(V,L))],l=[se(V=>r(V,L))],p=[se(V=>r(V,L))],h=[se(V=>r(V,L))],d=[se(V=>r(V,L))],m=[se(V=>r(V,L))],b=[se(V=>r(V,L))],w=[se(V=>r(V,L))],g=[se(V=>r(V,L))],S=[se(V=>r(V,L))],E=[se(V=>r(V,L))],v=[se(V=>r(V,L))],C=[se(V=>r(V,L))],A=[se(V=>r(V,L))],F=[se(V=>r(V,L))],R=[se(V=>r(V,L))],ge)](){r(this,L)??y(this,L,"Browsing context already closed, probably because the user context closed."),this.emit("closed",{reason:r(this,L)}),r(this,K).dispose(),super[ge]()}async deleteCookie(...V){await Promise.all(V.map(async z=>{await r(this,D,Ge).send("storage.deleteCookies",{filter:z,partition:{type:"context",context:this.id}})}))}async locateNodes(V,z){return(await r(this,D,Ge).send("browsingContext.locateNodes",{context:this.id,locator:V,startNodes:z.length?z:void 0})).result.nodes}},q=new WeakMap,L=new WeakMap,I=new WeakMap,_=new WeakMap,K=new WeakMap,j=new WeakMap,O=new WeakMap,D=new WeakSet,ik=function(){r(this,K).use(new he(this.userContext)).once("closed",({reason:ne})=>{this.dispose(`Browsing context already closed: ${ne}`)});const z=r(this,K).use(new he(r(this,D,Ge)));z.on("browsingContext.contextCreated",ne=>{if(ne.parent!==this.id)return;const fe=X.from(this.userContext,this,ne.context,ne.url,ne.originalOpener);r(this,_).set(ne.context,fe);const ce=r(this,K).use(new he(fe));ce.once("closed",()=>{ce.removeAllListeners(),r(this,_).delete(fe.id)}),this.emit("browsingcontext",{browsingContext:fe})}),z.on("browsingContext.contextDestroyed",ne=>{ne.context===this.id&&this.dispose("Browsing context already closed.")}),z.on("browsingContext.historyUpdated",ne=>{ne.context===this.id&&(y(this,I,ne.url),this.emit("historyUpdated",void 0))}),z.on("browsingContext.domContentLoaded",ne=>{ne.context===this.id&&(y(this,I,ne.url),this.emit("DOMContentLoaded",void 0))}),z.on("browsingContext.load",ne=>{ne.context===this.id&&(y(this,I,ne.url),this.emit("load",void 0))}),z.on("browsingContext.navigationStarted",ne=>{if(ne.context!==this.id)return;for(const[ce,Me]of r(this,O))Me.disposed&&r(this,O).delete(ce);if(r(this,q)!==void 0&&!r(this,q).disposed)return;y(this,q,q1.from(this));const fe=r(this,K).use(new he(r(this,q)));for(const ce of["fragment","failed","aborted"])fe.once(ce,({url:Me})=>{fe[ge](),y(this,I,Me)});this.emit("navigation",{navigation:r(this,q)})}),z.on("network.beforeRequestSent",ne=>{if(ne.context!==this.id||r(this,O).has(ne.request.request))return;const fe=H1.from(this,ne);r(this,O).set(fe.id,fe),this.emit("request",{request:fe})}),z.on("log.entryAdded",ne=>{ne.source.context===this.id&&this.emit("log",{entry:ne})}),z.on("browsingContext.userPromptOpened",ne=>{if(ne.context!==this.id)return;const fe=z1.from(this,ne);this.emit("userprompt",{userPrompt:fe})})},Ge=function(){return this.userContext.browser.session},Hg=function(V){const z=Vp.from(this,V);return z.on("worker",ne=>{this.emit("worker",{realm:ne})}),z},(()=>{const V=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;P=[se(z=>r(z,L))],T=[se(z=>r(z,L))],Ue(X,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:z=>"dispose"in z,get:z=>z.dispose},metadata:V},null,i),Ue(X,null,t,{kind:"method",name:"activate",static:!1,private:!1,access:{has:z=>"activate"in z,get:z=>z.activate},metadata:V},null,i),Ue(X,null,n,{kind:"method",name:"captureScreenshot",static:!1,private:!1,access:{has:z=>"captureScreenshot"in z,get:z=>z.captureScreenshot},metadata:V},null,i),Ue(X,null,a,{kind:"method",name:"close",static:!1,private:!1,access:{has:z=>"close"in z,get:z=>z.close},metadata:V},null,i),Ue(X,null,o,{kind:"method",name:"traverseHistory",static:!1,private:!1,access:{has:z=>"traverseHistory"in z,get:z=>z.traverseHistory},metadata:V},null,i),Ue(X,null,c,{kind:"method",name:"navigate",static:!1,private:!1,access:{has:z=>"navigate"in z,get:z=>z.navigate},metadata:V},null,i),Ue(X,null,u,{kind:"method",name:"reload",static:!1,private:!1,access:{has:z=>"reload"in z,get:z=>z.reload},metadata:V},null,i),Ue(X,null,l,{kind:"method",name:"setCacheBehavior",static:!1,private:!1,access:{has:z=>"setCacheBehavior"in z,get:z=>z.setCacheBehavior},metadata:V},null,i),Ue(X,null,p,{kind:"method",name:"print",static:!1,private:!1,access:{has:z=>"print"in z,get:z=>z.print},metadata:V},null,i),Ue(X,null,h,{kind:"method",name:"handleUserPrompt",static:!1,private:!1,access:{has:z=>"handleUserPrompt"in z,get:z=>z.handleUserPrompt},metadata:V},null,i),Ue(X,null,d,{kind:"method",name:"setViewport",static:!1,private:!1,access:{has:z=>"setViewport"in z,get:z=>z.setViewport},metadata:V},null,i),Ue(X,null,m,{kind:"method",name:"performActions",static:!1,private:!1,access:{has:z=>"performActions"in z,get:z=>z.performActions},metadata:V},null,i),Ue(X,null,b,{kind:"method",name:"releaseActions",static:!1,private:!1,access:{has:z=>"releaseActions"in z,get:z=>z.releaseActions},metadata:V},null,i),Ue(X,null,w,{kind:"method",name:"createWindowRealm",static:!1,private:!1,access:{has:z=>"createWindowRealm"in z,get:z=>z.createWindowRealm},metadata:V},null,i),Ue(X,null,g,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:z=>"addPreloadScript"in z,get:z=>z.addPreloadScript},metadata:V},null,i),Ue(X,null,S,{kind:"method",name:"addIntercept",static:!1,private:!1,access:{has:z=>"addIntercept"in z,get:z=>z.addIntercept},metadata:V},null,i),Ue(X,null,E,{kind:"method",name:"removePreloadScript",static:!1,private:!1,access:{has:z=>"removePreloadScript"in z,get:z=>z.removePreloadScript},metadata:V},null,i),Ue(X,null,v,{kind:"method",name:"getCookies",static:!1,private:!1,access:{has:z=>"getCookies"in z,get:z=>z.getCookies},metadata:V},null,i),Ue(X,null,C,{kind:"method",name:"setCookie",static:!1,private:!1,access:{has:z=>"setCookie"in z,get:z=>z.setCookie},metadata:V},null,i),Ue(X,null,A,{kind:"method",name:"setFiles",static:!1,private:!1,access:{has:z=>"setFiles"in z,get:z=>z.setFiles},metadata:V},null,i),Ue(X,null,F,{kind:"method",name:"subscribe",static:!1,private:!1,access:{has:z=>"subscribe"in z,get:z=>z.subscribe},metadata:V},null,i),Ue(X,null,R,{kind:"method",name:"addInterception",static:!1,private:!1,access:{has:z=>"addInterception"in z,get:z=>z.addInterception},metadata:V},null,i),Ue(X,null,P,{kind:"method",name:"deleteCookie",static:!1,private:!1,access:{has:z=>"deleteCookie"in z,get:z=>z.deleteCookie},metadata:V},null,i),Ue(X,null,T,{kind:"method",name:"locateNodes",static:!1,private:!1,access:{has:z=>"locateNodes"in z,get:z=>z.locateNodes},metadata:V},null,i),V&&Object.defineProperty(X,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:V})})(),X})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var X1=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},la=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};let qh=(()=>{var u,l,p,h,d,m,sk,jn;let s=he,i=[],e,t,n,a,o,c;return u=class extends s{constructor(E,v){super();f(this,m);f(this,l,X1(this,i));f(this,p,new Map);f(this,h,new Xe);f(this,d);W(this,"browser");y(this,d,v),this.browser=E}static create(E,v){var A;const C=new u(E,v);return k(A=C,m,sk).call(A),C}get browsingContexts(){return r(this,p).values()}get closed(){return r(this,l)!==void 0}get disposed(){return this.closed}get id(){return r(this,d)}dispose(E){y(this,l,E),this[ge]()}async createBrowsingContext(E,v={}){var F;const{result:{context:C}}=await r(this,m,jn).send("browsingContext.create",{type:E,...v,referenceContext:(F=v.referenceContext)==null?void 0:F.id,userContext:r(this,d)}),A=r(this,p).get(C);return te(A,"The WebDriver BiDi implementation is failing to create a browsing context correctly."),A}async remove(){try{await r(this,m,jn).send("browser.removeUserContext",{userContext:r(this,d)})}finally{this.dispose("User context already closed.")}}async getCookies(E={},v=void 0){const{result:{cookies:C}}=await r(this,m,jn).send("storage.getCookies",{...E,partition:{type:"storageKey",userContext:r(this,d),sourceOrigin:v}});return C}async setCookie(E,v){await r(this,m,jn).send("storage.setCookie",{cookie:E,partition:{type:"storageKey",sourceOrigin:v,userContext:this.id}})}async setPermissions(E,v,C){await r(this,m,jn).send("permissions.setPermission",{origin:E,descriptor:v,state:C,userContext:r(this,d)})}[(e=[wi],t=[se(E=>r(E,l))],n=[se(E=>r(E,l))],a=[se(E=>r(E,l))],o=[se(E=>r(E,l))],c=[se(E=>r(E,l))],ge)](){r(this,l)??y(this,l,"User context already closed, probably because the browser disconnected/closed."),this.emit("closed",{reason:r(this,l)}),r(this,h).dispose(),super[ge]()}},l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakSet,sk=function(){const E=r(this,h).use(new he(this.browser));E.once("closed",({reason:C})=>{this.dispose(`User context was closed: ${C}`)}),E.once("disconnected",({reason:C})=>{this.dispose(`User context was closed: ${C}`)}),r(this,h).use(new he(r(this,m,jn))).on("browsingContext.contextCreated",C=>{if(C.parent||C.userContext!==r(this,d))return;const A=G1.from(this,void 0,C.context,C.url,C.originalOpener);r(this,p).set(A.id,A);const F=r(this,h).use(new he(A));F.on("closed",()=>{F.removeAllListeners(),r(this,p).delete(A.id)}),this.emit("browsingcontext",{browsingContext:A})})},jn=function(){return this.browser.session},(()=>{const E=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;la(u,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:v=>"dispose"in v,get:v=>v.dispose},metadata:E},null,i),la(u,null,t,{kind:"method",name:"createBrowsingContext",static:!1,private:!1,access:{has:v=>"createBrowsingContext"in v,get:v=>v.createBrowsingContext},metadata:E},null,i),la(u,null,n,{kind:"method",name:"remove",static:!1,private:!1,access:{has:v=>"remove"in v,get:v=>v.remove},metadata:E},null,i),la(u,null,a,{kind:"method",name:"getCookies",static:!1,private:!1,access:{has:v=>"getCookies"in v,get:v=>v.getCookies},metadata:E},null,i),la(u,null,o,{kind:"method",name:"setCookie",static:!1,private:!1,access:{has:v=>"setCookie"in v,get:v=>v.setCookie},metadata:E},null,i),la(u,null,c,{kind:"method",name:"setPermissions",static:!1,private:!1,access:{has:v=>"setPermissions"in v,get:v=>v.setPermissions},metadata:E},null,i),E&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:E})})(),W(u,"DEFAULT","default"),u})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class iu{static deserialize(i){var e,t,n,a;if(!i){de("Service did not produce a result.");return}switch(i.type){case"array":return(e=i.value)==null?void 0:e.map(o=>this.deserialize(o));case"set":return(t=i.value)==null?void 0:t.reduce((o,c)=>o.add(this.deserialize(c)),new Set);case"object":return(n=i.value)==null?void 0:n.reduce((o,c)=>{const{key:u,value:l}=k(this,An,Wg).call(this,c);return o[u]=l,o},{});case"map":return(a=i.value)==null?void 0:a.reduce((o,c)=>{const{key:u,value:l}=k(this,An,Wg).call(this,c);return o.set(u,l)},new Map);case"promise":return{};case"regexp":return new RegExp(i.value.pattern,i.value.flags);case"date":return new Date(i.value);case"undefined":return;case"null":return null;case"number":return k(this,An,nk).call(this,i.value);case"bigint":return BigInt(i.value);case"boolean":return!!i.value;case"string":return i.value}de(`Deserialization of type ${i.type} not supported.`)}}An=new WeakSet,nk=function(i){switch(i){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:return i}},Wg=function([i,e]){const t=typeof i=="string"?i:this.deserialize(i),n=this.deserialize(e);return{key:t,value:n}},f(iu,An);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const km=class km extends wy{constructor(e){super(e.info.type,e.info.message,e.info.defaultValue);f(this,yd);y(this,yd,e),this.handled=e.handled}static from(e){return new km(e)}async handle(e){await r(this,yd).handle({accept:e.accept,userText:e.text})}};yd=new WeakMap;let Jp=km;var J1=Le();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Em=class Em extends ys{constructor(e,t){super();f(this,Ar);W(this,"realm");f(this,Do,!1);y(this,Ar,e),this.realm=t}static from(e,t){return new Em(e,t)}get disposed(){return r(this,Do)}async jsonValue(){return await this.evaluate(e=>e)}asElement(){return null}async dispose(){r(this,Do)||(y(this,Do,!0),await this.realm.destroyHandles([this]))}get isPrimitiveValue(){switch(r(this,Ar).type){case"string":case"number":case"bigint":case"boolean":case"undefined":case"null":return!0;default:return!1}}toString(){return this.isPrimitiveValue?"JSHandle:"+iu.deserialize(r(this,Ar)):"JSHandle@"+r(this,Ar).type}get id(){return"handle"in r(this,Ar)?r(this,Ar).handle:void 0}remoteValue(){return r(this,Ar)}remoteObject(){throw new we("Not available in WebDriver BiDi")}};Ar=new WeakMap,Do=new WeakMap;let bi=Em;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Y1=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},$b=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},Q1=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},Z1=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});let su=(()=>{var n,a;let s=xy,i=[],e,t;return a=class extends s{constructor(u,l){super(bi.from(u,l));f(this,n,Y1(this,i))}static from(u,l){return new a(u,l)}get realm(){return this.handle.realm}get frame(){return this.realm.environment}remoteValue(){return this.handle.remoteValue()}async autofill(u){const l=this.frame.client,h=(await l.send("DOM.describeNode",{objectId:this.handle.id})).node.backendNodeId,d=this.frame._id;await l.send("Autofill.trigger",{fieldId:h,frameId:d,card:u.creditCard})}async contentFrame(){const u={stack:[],error:void 0,hasError:!1};try{const p=Q1(u,await this.evaluateHandle(h=>{if(h instanceof HTMLIFrameElement||h instanceof HTMLFrameElement)return h.contentWindow}),!1).remoteValue();return p.type==="window"?this.frame.page().frames().find(h=>h._id===p.value.context)??null:null}catch(l){u.error=l,u.hasError=!0}finally{Z1(u)}}async uploadFile(...u){const l=gi.value.path;l&&(u=u.map(p=>l.win32.isAbsolute(p)||l.posix.isAbsolute(p)?p:l.resolve(p))),await this.frame.setFiles(this,u)}async*queryAXTree(u,l){const p=await this.frame.locateNodes(this,{type:"accessibility",value:{role:l,name:u}});return yield*Yn.map(p,h=>Promise.resolve(a.from(h,this.realm)))}async backendNodeId(){if(!this.frame.page().browser().cdpSupported)throw new we;if(r(this,n))return r(this,n);const{node:u}=await this.frame.client.send("DOM.describeNode",{objectId:this.handle.id});return y(this,n,u.backendNodeId),r(this,n)}},n=new WeakMap,(()=>{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[se()],t=[se(),Ee],$b(a,null,e,{kind:"method",name:"autofill",static:!1,private:!1,access:{has:l=>"autofill"in l,get:l=>l.autofill},metadata:u},null,i),$b(a,null,t,{kind:"method",name:"contentFrame",static:!1,private:!1,access:{has:l=>"contentFrame"in l,get:l=>l.contentFrame},metadata:u},null,i),u&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})})(),a})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Yp=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},eT=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});const xm=class xm{constructor(i,e,t,n=!1){f(this,Rr);f(this,as);W(this,"name");f(this,vd);f(this,Fo);f(this,Oo);f(this,bd,[]);f(this,Sd,new Xe);f(this,uf,async i=>{const e={stack:[],error:void 0,hasError:!1};try{if(i.channel!==r(this,Oo))return;const t=k(this,Rr,ck).call(this,i.source);if(!t)return;const n=Yp(e,bi.from(i.data,t),!1),a=Yp(e,await n.evaluateHandle(([,,l])=>l),!1),o=Yp(e,new Xe,!1),c=[];for(const[l,p]of await a.getProperties()){if(o.use(p),p instanceof su){c[+l]=p,o.use(p);continue}c[+l]=p.jsonValue()}let u;try{u=await r(this,vd).call(this,...await Promise.all(c))}catch(l){try{l instanceof Error?await n.evaluate(([,p],h,d,m)=>{const b=new Error(d);b.name=h,m&&(b.stack=m),p(b)},l.name,l.message,l.stack):await n.evaluate(([,p],h)=>{p(h)},l)}catch(p){de(p)}return}try{await n.evaluate(([l],p)=>{l(p)},u)}catch(l){de(l)}}catch(t){e.error=t,e.hasError=!0}finally{eT(e)}});y(this,as,i),this.name=e,y(this,vd,t),y(this,Fo,n),y(this,Oo,`__puppeteer__${r(this,as)._id}_page_exposeFunction_${this.name}`)}static async from(i,e,t,n=!1){var o;const a=new xm(i,e,t,n);return await k(o=a,Rr,ak).call(o),a}[Symbol.dispose](){this[Symbol.asyncDispose]().catch(de)}async[Symbol.asyncDispose](){r(this,Sd).dispose(),await Promise.all(r(this,bd).map(async([i,e])=>{const t=r(this,Fo)?i.isolatedRealm():i.mainRealm();try{await Promise.all([t.evaluate(n=>{delete globalThis[n]},this.name),...i.childFrames().map(n=>n.evaluate(a=>{delete globalThis[a]},this.name)),i.browsingContext.removePreloadScript(e)])}catch(n){de(n)}}))}};as=new WeakMap,vd=new WeakMap,Fo=new WeakMap,Oo=new WeakMap,bd=new WeakMap,Sd=new WeakMap,Rr=new WeakSet,ak=async function(){const i=r(this,Rr,ok),e={type:"channel",value:{channel:r(this,Oo),ownership:"root"}};r(this,Sd).use(new he(i)).on(J1.ChromiumBidi.Script.EventNames.Message,r(this,uf));const n=fr(Jn(o=>{Object.assign(globalThis,{[PLACEHOLDER("name")]:function(...c){return new Promise((u,l)=>{o([u,l,c])})}})},{name:JSON.stringify(this.name)})),a=[r(this,as)];for(const o of a)a.push(...o.childFrames());await Promise.all(a.map(async o=>{const c=r(this,Fo)?o.isolatedRealm():o.mainRealm();try{const[u]=await Promise.all([o.browsingContext.addPreloadScript(n,{arguments:[e],sandbox:c.sandbox}),c.realm.callFunction(n,!1,{arguments:[e]})]);r(this,bd).push([o,u])}catch(u){de(u)}}))},ok=function(){return r(this,as).page().browser().connection},uf=new WeakMap,ck=function(i){const e=k(this,Rr,uk).call(this,i.context);if(e)return e.realm(i.realm)},uk=function(i){const e=[r(this,as)];for(const t of e){if(t._id===i)return t;e.push(...t.childFrames())}};let nu=xm;var tT=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},rT=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};let Kb=(()=>{var t,n,a,o,c,lk,l;let s=Iy,i=[],e;return l=class extends s{constructor(d,m,b){super();f(this,c);f(this,t,tT(this,i));f(this,n);f(this,a);f(this,o,!1);y(this,t,d),y(this,n,m),y(this,o,b);const w=d["goog:securityDetails"];b&&w&&y(this,a,new tv(w))}static from(d,m,b){var g;const w=new l(d,m,b);return k(g=w,c,lk).call(g),w}remoteAddress(){return{ip:"",port:-1}}url(){return r(this,t).url}status(){return r(this,t).status}statusText(){return r(this,t).statusText}headers(){const d={};for(const m of r(this,t).headers)m.value.type==="string"&&(d[m.name.toLowerCase()]=m.value.value);return d}request(){return r(this,n)}fromCache(){return r(this,t).fromCache}timing(){const d=r(this,n).timing();return{requestTime:d.requestTime,proxyStart:-1,proxyEnd:-1,dnsStart:d.dnsStart,dnsEnd:d.dnsEnd,connectStart:d.connectStart,connectEnd:d.connectEnd,sslStart:d.tlsStart,sslEnd:-1,workerStart:-1,workerReady:-1,workerFetchStart:-1,workerRespondWithSettled:-1,workerRouterEvaluationStart:-1,workerCacheLookupStart:-1,sendStart:d.requestStart,sendEnd:-1,pushStart:-1,pushEnd:-1,receiveHeadersStart:d.responseStart,receiveHeadersEnd:d.responseEnd}}frame(){return r(this,n).frame()}fromServiceWorker(){return!1}securityDetails(){if(!r(this,o))throw new we;return r(this,a)??null}content(){throw new we}},t=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakSet,lk=function(){var d,m;r(this,t).fromCache&&(r(this,n)._fromMemoryCache=!0,(d=r(this,n).frame())==null||d.page().trustedEmitter.emit("requestservedfromcache",r(this,n))),(m=r(this,n).frame())==null||m.page().trustedEmitter.emit("response",this)},(()=>{const d=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[rr],rT(l,null,e,{kind:"method",name:"remoteAddress",static:!1,private:!1,access:{has:m=>"remoteAddress"in m,get:m=>m.remoteAddress},metadata:d},null,i),d&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:d})})(),l})();var Qp;const Zp=new WeakMap;class em extends Ch{constructor(e,t,n){super();f(this,Ut);f(this,Rn);f(this,Cd,null);W(this,"id");f(this,dt);f(this,He);f(this,kd,!1);f(this,lf,async()=>{if(!r(this,dt))return;const e=r(this,dt).page()._credentials;e&&!r(this,kd)?(y(this,kd,!0),r(this,He).continueWithAuth({action:"provideCredentials",credentials:{type:"password",username:e.username,password:e.password}})):r(this,He).continueWithAuth({action:"cancel"})});Zp.set(e,this),this.interception.enabled=e.isBlocked,y(this,He,e),y(this,dt,t),y(this,Rn,n?r(n,Rn):[]),this.id=e.id}static from(e,t,n){var o;const a=new Qp(e,t,n);return k(o=a,Ut,dk).call(o),a}get client(){return r(this,dt).client}url(){return r(this,He).url}resourceType(){if(!r(this,dt).page().browser().cdpSupported)throw new we;return(r(this,He).resourceType||"other").toLowerCase()}method(){return r(this,He).method}postData(){if(!r(this,dt).page().browser().cdpSupported)throw new we;return r(this,He).postData}hasPostData(){if(!r(this,dt).page().browser().cdpSupported)throw new we;return r(this,He).hasPostData}async fetchPostData(){throw new we}headers(){const e={};for(const t of r(this,He).headers)e[t.name.toLowerCase()]=t.value.value;return{...e,...r(this,Ut,Vg),...r(this,Ut,Gg)}}response(){return r(this,Cd)}failure(){return r(this,He).error===void 0?null:{errorText:r(this,He).error}}isNavigationRequest(){return r(this,He).navigation!==void 0}initiator(){var e;return{...r(this,He).initiator,type:((e=r(this,He).initiator)==null?void 0:e.type)??"other"}}redirectChain(){return r(this,Rn).slice()}frame(){return r(this,dt)}async continue(e,t){return await super.continue({headers:r(this,Ut,zg)?this.headers():void 0,...e},t)}async _continue(e={}){const t=Ub(e.headers);return this.interception.handled=!0,await r(this,He).continueRequest({url:e.url,method:e.method,body:e.postData?{type:"base64",value:ay(e.postData)}:void 0,headers:t.length>0?t:void 0}).catch(n=>(this.interception.handled=!1,kh(n)))}async _abort(){return this.interception.handled=!0,await r(this,He).failRequest().catch(e=>{throw this.interception.handled=!1,e})}async _respond(e,t){this.interception.handled=!0;let n;e.body&&(n=Ch.getResponse(e.body));const a=Ub(e.headers),o=a.some(u=>u.name==="content-length");e.contentType&&a.push({name:"content-type",value:{type:"string",value:e.contentType}}),n!=null&&n.contentLength&&!o&&a.push({name:"content-length",value:{type:"string",value:String(n.contentLength)}});const c=e.status||200;return await r(this,He).provideResponse({statusCode:c,headers:a.length>0?a:void 0,reasonPhrase:My[c],body:n!=null&&n.base64?{type:"base64",value:n==null?void 0:n.base64}:void 0}).catch(u=>{throw this.interception.handled=!1,u})}timing(){return r(this,He).timing()}}Rn=new WeakMap,Cd=new WeakMap,dt=new WeakMap,He=new WeakMap,Ut=new WeakSet,dk=function(){r(this,He).on("redirect",e=>{const t=Qp.from(e,r(this,dt),this);r(this,Rn).push(this),e.once("success",()=>{r(this,dt).page().trustedEmitter.emit("requestfinished",t)}),e.once("error",()=>{r(this,dt).page().trustedEmitter.emit("requestfailed",t)}),t.finalizeInterceptions()}),r(this,He).once("success",e=>{y(this,Cd,Kb.from(e,this,r(this,dt).page().browser().cdpSupported))}),r(this,He).on("authenticate",r(this,lf)),r(this,dt).page().trustedEmitter.emit("request",this),r(this,Ut,zg)&&this.interception.handlers.push(async()=>{await this.continue({headers:this.headers()},0)})},zg=function(){return!!(Object.keys(r(this,Ut,Vg)).length||Object.keys(r(this,Ut,Gg)).length)},Vg=function(){var e;return((e=r(this,dt))==null?void 0:e.page()._extraHTTPHeaders)??{}},Gg=function(){var e;return((e=r(this,dt))==null?void 0:e.page()._userAgentHeaders)??{}},kd=new WeakMap,lf=new WeakMap,Qp=em;function Ub(s){const i=[];for(const[e,t]of Object.entries(s??[]))if(!Object.is(t,void 0)){const n=Array.isArray(t)?t:[t];for(const a of n)i.push({name:e.toLowerCase(),value:{type:"string",value:String(a)}})}return i}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Hb extends Error{}class Wb{static serialize(i){switch(typeof i){case"symbol":case"function":throw new Hb(`Unable to serializable ${typeof i}`);case"object":return k(this,No,fk).call(this,i);case"undefined":return{type:"undefined"};case"number":return k(this,No,hk).call(this,i);case"bigint":return{type:"bigint",value:i.toString()};case"string":return{type:"string",value:i};case"boolean":return{type:"boolean",value:i}}}}No=new WeakSet,hk=function(i){let e;return Object.is(i,-0)?e="-0":Object.is(i,1/0)?e="Infinity":Object.is(i,-1/0)?e="-Infinity":Object.is(i,NaN)?e="NaN":e=i,{type:"number",value:e}},fk=function(i){if(i===null)return{type:"null"};if(Array.isArray(i))return{type:"array",value:i.map(t=>this.serialize(t))};if(Cx(i)){try{JSON.stringify(i)}catch(t){throw t instanceof TypeError&&t.message.startsWith("Converting circular structure to JSON")&&(t.message+=" Recursive objects are not allowed."),t}const e=[];for(const t in i)e.push([this.serialize(t),this.serialize(i[t])]);return{type:"object",value:e}}else{if(kx(i))return{type:"regexp",value:{pattern:i.source,flags:i.flags}};if(Ex(i))return{type:"date",value:i.toISOString()}}throw new Hb("Custom object serialization not possible. Use plain objects instead.")},f(Wb,No);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function iT(s){if(s.exception.type!=="error")return iu.deserialize(s.exception);const[i="",...e]=s.text.split(": "),t=e.join(": "),n=new Error(t);n.name=i;const a=[];if(s.stackTrace&&a.length<Error.stackTraceLimit)for(const o of s.stackTrace.callFrames.reverse()){if(Ot.isPuppeteerURL(o.url)&&o.url!==Ot.INTERNAL_URL){const c=Ot.parse(o.url);a.unshift(`    at ${o.functionName||c.functionName} (${c.functionName} at ${c.siteString}, <anonymous>:${o.lineNumber}:${o.columnNumber})`)}else a.push(`    at ${o.functionName||"<anonymous>"} (${o.url}:${o.lineNumber}:${o.columnNumber})`);if(a.length>=Error.stackTraceLimit)break}return n.stack=[s.text,...a].join(`
`),n}function zb(s,i){return e=>{throw e instanceof ms?e.message+=` at ${s}`:e instanceof nh&&(e.message=`Navigation timeout of ${i} ms exceeded`),e}}var sT=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},nT=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});class tm extends qy{constructor(e,t){super(t);f(this,Ed);W(this,"realm");W(this,"internalPuppeteerUtil");this.realm=e}initialize(){this.realm.on("destroyed",({reason:e})=>{this.taskManager.terminateAll(new Error(e)),this.dispose()}),this.realm.on("updated",()=>{this.internalPuppeteerUtil=void 0,this.taskManager.rerunAll()})}get puppeteerUtil(){const e=Promise.resolve();return nc.inject(t=>{this.internalPuppeteerUtil&&this.internalPuppeteerUtil.then(n=>{n.dispose()}),this.internalPuppeteerUtil=e.then(()=>this.evaluateHandle(t))},!this.internalPuppeteerUtil),this.internalPuppeteerUtil}async evaluateHandle(e,...t){return await k(this,Ed,Xg).call(this,!1,e,...t)}async evaluate(e,...t){return await k(this,Ed,Xg).call(this,!0,e,...t)}createHandle(e){return(e.type==="node"||e.type==="window")&&this instanceof Si?su.from(e,this):bi.from(e,this)}async serializeAsync(e){return e instanceof Nt&&(e=await e.get(this)),this.serialize(e)}serialize(e){if(e instanceof bi||e instanceof su){if(e.realm!==this){if(!(e.realm instanceof Si)||!(this instanceof Si))throw new Error("Trying to evaluate JSHandle from different global types. Usually this means you're using a handle from a worker in a page or vice versa.");if(e.realm.environment!==this.environment)throw new Error("Trying to evaluate JSHandle from different frames. Usually this means you're using a handle from a page on a different page.")}if(e.disposed)throw new Error("JSHandle is disposed!");return e.remoteValue()}return Wb.serialize(e)}async destroyHandles(e){if(this.disposed)return;const t=e.map(({id:n})=>n).filter(n=>n!==void 0);t.length!==0&&await this.realm.disown(t).catch(n=>{de(n)})}async adoptHandle(e){return await this.evaluateHandle(t=>t,e)}async transferHandle(e){if(e.realm===this)return e;const t=this.adoptHandle(e);return await e.dispose(),await t}}Ed=new WeakSet,Xg=async function(e,t,...n){var p;const a=fy(((p=uy(t))==null?void 0:p.toString())??Ot.INTERNAL_URL);let o;const c=e?"none":"root",u=e?{}:{maxObjectDepth:0,maxDomDepth:0};if(Lr(t)){const h=ch.test(t)?t:`${t}
${a}
`;o=this.realm.evaluate(h,!0,{resultOwnership:c,userActivation:!0,serializationOptions:u})}else{let h=fr(t);h=ch.test(h)?h:`${h}
${a}
`,o=this.realm.callFunction(h,!0,{arguments:n.some(d=>d instanceof Nt)?await Promise.all(n.map(d=>this.serializeAsync(d))):n.map(d=>this.serialize(d)),resultOwnership:c,userActivation:!0,serializationOptions:u})}const l=await o;if("type"in l&&l.type==="exception")throw iT(l.exceptionDetails);return e?iu.deserialize(l.result):this.createHandle(l.result)};const hf=class hf extends tm{constructor(e,t){super(e,t.timeoutSettings);f(this,df);f(this,Lo);f(this,Bo,!1);y(this,Lo,t)}static from(e,t){var a;const n=new hf(e,t);return k(a=n,df,pk).call(a),n}get puppeteerUtil(){let e=Promise.resolve();return r(this,Bo)||(e=Promise.all([nu.from(this.environment,"__ariaQuerySelector",ws.queryOne,!!this.sandbox),nu.from(this.environment,"__ariaQuerySelectorAll",async(t,n)=>{const a=ws.queryAll(t,n);return await t.realm.evaluateHandle((...o)=>o,...await Yn.collect(a))},!!this.sandbox)]),y(this,Bo,!0)),e.then(()=>super.puppeteerUtil)}get sandbox(){return this.realm.sandbox}get environment(){return r(this,Lo)}async adoptBackendNode(e){const t={stack:[],error:void 0,hasError:!1};try{const{object:n}=await r(this,Lo).client.send("DOM.resolveNode",{backendNodeId:e,executionContextId:await this.realm.resolveExecutionContextId()});return await sT(t,su.from({handle:n.objectId,type:"node"},this),!1).evaluateHandle(o=>o)}catch(n){t.error=n,t.hasError=!0}finally{nT(t)}}};Lo=new WeakMap,df=new WeakSet,pk=function(){xS(hf.prototype,this,"initialize").call(this),this.realm.on("updated",()=>{this.environment.clearDocumentHandle(),y(this,Bo,!1)})},Bo=new WeakMap;let Si=hf;const Pm=class Pm extends tm{constructor(e,t){super(e,t.timeoutSettings);f(this,xd);y(this,xd,t)}static from(e,t){const n=new Pm(e,t);return n.initialize(),n}get environment(){return r(this,xd)}async adoptBackendNode(){throw new Error("Cannot adopt DOM nodes into a worker.")}};xd=new WeakMap;let $h=Pm;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const _m=class _m extends $y{constructor(e,t){super(t.origin);f(this,Pd);f(this,_d);y(this,Pd,e),y(this,_d,$h.from(t,this))}static from(e,t){return new _m(e,t)}get frame(){return r(this,Pd)}mainRealm(){return r(this,_d)}get client(){throw new we}};Pd=new WeakMap,_d=new WeakMap;let rm=_m;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var aT=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},xs=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},Vb=function(s,i,e){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:e?"".concat(e," ",i):i})};function oT(s){switch(s){case"group":return"startGroup";case"groupCollapsed":return"startGroupCollapsed";case"groupEnd":return"endGroup";default:return s}}let Gb=(()=>{var h,d,m,mk,Jg,Nf,S,Lf,Bf,C;let s=_y,i=[],e,t,n,a,o,c,u,l,p;return C=class extends s{constructor(R,P){super();f(this,m);f(this,h,aT(this,i));W(this,"browsingContext");f(this,d,new WeakMap);W(this,"realms");W(this,"_id");W(this,"client");W(this,"accessibility");f(this,S,new Map);y(this,h,R),this.browsingContext=P,this._id=P.id,this.client=new tu(this),this.realms={default:Si.from(this.browsingContext.defaultRealm,this),internal:Si.from(this.browsingContext.createWindowRealm(`__puppeteer_internal_${Math.ceil(Math.random()*1e4)}`),this)},this.accessibility=new Ky(this.realms.default,this._id)}static from(R,P){var q;const T=new C(R,P);return k(q=T,m,mk).call(q),T}get timeoutSettings(){return this.page()._timeoutSettings}mainRealm(){return this.realms.default}isolatedRealm(){return this.realms.internal}realm(R){for(const P of Object.values(this.realms))if(P.realm.id===R)return P}page(){let R=r(this,h);for(;R instanceof C;)R=r(R,h);return R}url(){return this.browsingContext.url}parentFrame(){return r(this,h)instanceof C?r(this,h):null}childFrames(){return[...this.browsingContext.children].map(R=>r(this,d).get(R))}async goto(R,P={}){const[T]=await Promise.all([this.waitForNavigation(P),this.browsingContext.navigate(R,"interactive").catch(q=>{if(!(Vt(q)&&q.message.includes("net::ERR_HTTP_RESPONSE_CODE_FAILURE"))&&!q.message.includes("navigation canceled")&&!q.message.includes("Navigation was aborted by another navigation"))throw q})]).catch(zb(R,P.timeout??this.timeoutSettings.navigationTimeout()));return T}async setContent(R,P={}){await Promise.all([this.setFrameContent(R),it(Yd([r(this,m,Lf).call(this,P),r(this,m,Bf).call(this,P)]))])}async waitForNavigation(R={}){const{timeout:P=this.timeoutSettings.navigationTimeout(),signal:T}=R,q=this.childFrames().map(L=>{var I;return k(I=L,m,Nf).call(I)});return await it(Yd([ty(Ae(this.browsingContext,"navigation"),Ae(this.browsingContext,"historyUpdated").pipe(ze(()=>({navigation:null})))).pipe(Vn()).pipe(th(({navigation:L})=>L===null?hr(null):r(this,m,Lf).call(this,R).pipe(hx(()=>q.length===0?hr(void 0):Yd(q)),pt(Ae(L,"fragment"),Ae(L,"failed"),Ae(L,"aborted").pipe(ze(({url:I})=>{throw new Error(`Navigation aborted: ${I}`)}))),th(()=>{if(L.request){let I=function(_){return L===null?hr(null):_.response||_.error?hr(L):_.redirect?I(_.redirect):Ae(_,"success").pipe(pt(Ae(_,"error")),pt(Ae(_,"redirect"))).pipe(th(()=>I(_)))};return I(L.request)}return hr(L)})))),r(this,m,Bf).call(this,R)]).pipe(ze(([L])=>{if(!L)return null;const I=L.request;if(!I)return null;const _=I.lastRedirect??I;return Zp.get(_).response()}),pt(It(P),gs(T),k(this,m,Nf).call(this).pipe(ze(()=>{throw new tr("Frame detached.")})))))}waitForDevicePrompt(){throw new we}get detached(){return this.browsingContext.closed}async exposeFunction(R,P){if(r(this,S).has(R))throw new Error(`Failed to add page binding with name ${R}: globalThis['${R}'] already exists!`);const T=await nu.from(this,R,P);r(this,S).set(R,T)}async removeExposedFunction(R){const P=r(this,S).get(R);if(!P)throw new Error(`Failed to remove page binding with name ${R}: window['${R}'] does not exists!`);r(this,S).delete(R),await P[Symbol.asyncDispose]()}async createCDPSession(){if(!this.page().browser().cdpSupported)throw new we;return await this.page().browser().cdpConnection._createSession({targetId:this._id})}async setFiles(R,P){await this.browsingContext.setFiles(R.remoteValue(),P)}async locateNodes(R,P){return await this.browsingContext.locateNodes(P,[R.remoteValue()])}},h=new WeakMap,d=new WeakMap,m=new WeakSet,mk=function(){for(const R of this.browsingContext.children)k(this,m,Jg).call(this,R);this.browsingContext.on("browsingcontext",({browsingContext:R})=>{k(this,m,Jg).call(this,R)}),this.browsingContext.on("closed",()=>{for(const R of tu.sessions.values())R.frame===this&&R.onClose();this.page().trustedEmitter.emit("framedetached",this)}),this.browsingContext.on("request",({request:R})=>{const P=em.from(R,this);R.once("success",()=>{this.page().trustedEmitter.emit("requestfinished",P)}),R.once("error",()=>{this.page().trustedEmitter.emit("requestfailed",P)}),P.finalizeInterceptions()}),this.browsingContext.on("navigation",({navigation:R})=>{R.once("fragment",()=>{this.page().trustedEmitter.emit("framenavigated",this)})}),this.browsingContext.on("load",()=>{this.page().trustedEmitter.emit("load",void 0)}),this.browsingContext.on("DOMContentLoaded",()=>{this._hasStartedLoading=!0,this.page().trustedEmitter.emit("domcontentloaded",void 0),this.page().trustedEmitter.emit("framenavigated",this)}),this.browsingContext.on("userprompt",({userPrompt:R})=>{this.page().trustedEmitter.emit("dialog",Jp.from(R))}),this.browsingContext.on("log",({entry:R})=>{if(this._id===R.source.context)if(cT(R)){const P=R.args.map(q=>this.mainRealm().createHandle(q)),T=P.reduce((q,L)=>{const I=L instanceof bi&&L.isPrimitiveValue?iu.deserialize(L.remoteValue()):L.toString();return`${q} ${I}`},"").slice(1);this.page().trustedEmitter.emit("console",new Sp(oT(R.method),T,P,lT(R.stackTrace),this))}else if(uT(R)){const P=new Error(R.text??""),T=P.message.split(`
`).length,q=P.stack.split(`
`).splice(0,T),L=[];if(R.stackTrace){for(const I of R.stackTrace.callFrames)if(L.push(`    at ${I.functionName||"<anonymous>"} (${I.url}:${I.lineNumber+1}:${I.columnNumber+1})`),L.length>=Error.stackTraceLimit)break}P.stack=[...q,...L].join(`
`),this.page().trustedEmitter.emit("pageerror",P)}else de(`Unhandled LogEntry with type "${R.type}", text "${R.text}" and level "${R.level}"`)}),this.browsingContext.on("worker",({realm:R})=>{const P=rm.from(this,R);R.on("destroyed",()=>{this.page().trustedEmitter.emit("workerdestroyed",P)}),this.page().trustedEmitter.emit("workercreated",P)})},Jg=function(R){const P=C.from(this,R);return r(this,d).set(R,P),this.page().trustedEmitter.emit("frameattached",P),R.on("closed",()=>{r(this,d).delete(R)}),P},Nf=function(){return fs(()=>this.detached?hr(this):Ae(this.page().trustedEmitter,"framedetached").pipe(ps(R=>R===this)))},S=new WeakMap,Lf=function(){return o.value},Bf=function(){return u.value},(()=>{const R=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;e=[Se],t=[Se],n=[Se],a=[Se],c=[Se],l=[Se],p=[Se],xs(C,null,e,{kind:"method",name:"goto",static:!1,private:!1,access:{has:P=>"goto"in P,get:P=>P.goto},metadata:R},null,i),xs(C,null,t,{kind:"method",name:"setContent",static:!1,private:!1,access:{has:P=>"setContent"in P,get:P=>P.setContent},metadata:R},null,i),xs(C,null,n,{kind:"method",name:"waitForNavigation",static:!1,private:!1,access:{has:P=>"waitForNavigation"in P,get:P=>P.waitForNavigation},metadata:R},null,i),xs(C,o={value:Vb(function(P={}){let{waitUntil:T="load"}=P;const{timeout:q=this.timeoutSettings.navigationTimeout()}=P;Array.isArray(T)||(T=[T]);const L=new Set;for(const I of T)switch(I){case"load":{L.add("load");break}case"domcontentloaded":{L.add("DOMContentLoaded");break}}return L.size===0?hr(void 0):Yd([...L].map(I=>Ae(this.browsingContext,I))).pipe(ze(()=>{}),Vn(),pt(It(q),k(this,m,Nf).call(this).pipe(ze(()=>{throw new Error("Frame detached.")}))))},"#waitForLoad$")},a,{kind:"method",name:"#waitForLoad$",static:!1,private:!0,access:{has:P=>Tt(m,P),get:P=>r(P,m,Lf)},metadata:R},null,i),xs(C,u={value:Vb(function(P={}){let{waitUntil:T="load"}=P;Array.isArray(T)||(T=[T]);let q=1/0;for(const L of T)switch(L){case"networkidle0":{q=Math.min(0,q);break}case"networkidle2":{q=Math.min(2,q);break}}return q===1/0?hr(void 0):this.page().waitForNetworkIdle$({idleTime:500,timeout:P.timeout??this.timeoutSettings.timeout(),concurrency:q})},"#waitForNetworkIdle$")},c,{kind:"method",name:"#waitForNetworkIdle$",static:!1,private:!0,access:{has:P=>Tt(m,P),get:P=>r(P,m,Bf)},metadata:R},null,i),xs(C,null,l,{kind:"method",name:"setFiles",static:!1,private:!1,access:{has:P=>"setFiles"in P,get:P=>P.setFiles},metadata:R},null,i),xs(C,null,p,{kind:"method",name:"locateNodes",static:!1,private:!1,access:{has:P=>"locateNodes"in P,get:P=>P.locateNodes},metadata:R},null,i),R&&Object.defineProperty(C,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:R})})(),C})();function cT(s){return s.type==="console"}function uT(s){return s.type==="javascript"}function lT(s){const i=[];if(s)for(const e of s.callFrames)i.push({url:e.url,lineNumber:e.lineNumber,columnNumber:e.columnNumber});return i}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var At;(function(s){s.None="none",s.Key="key",s.Pointer="pointer",s.Wheel="wheel"})(At||(At={}));var $e;(function(s){s.Pause="pause",s.KeyDown="keyDown",s.KeyUp="keyUp",s.PointerUp="pointerUp",s.PointerDown="pointerDown",s.PointerMove="pointerMove",s.Scroll="scroll"})($e||($e={}));const au=s=>{switch(s){case"\r":case`
`:s="Enter";break}if([...s].length===1)return s;switch(s){case"Cancel":return"";case"Help":return"";case"Backspace":return"";case"Tab":return"";case"Clear":return"";case"Enter":return"";case"Shift":case"ShiftLeft":return"";case"Control":case"ControlLeft":return"";case"Alt":case"AltLeft":return"";case"Pause":return"";case"Escape":return"";case"PageUp":return"";case"PageDown":return"";case"End":return"";case"Home":return"";case"ArrowLeft":return"";case"ArrowUp":return"";case"ArrowRight":return"";case"ArrowDown":return"";case"Insert":return"";case"Delete":return"";case"NumpadEqual":return"";case"Numpad0":return"";case"Numpad1":return"";case"Numpad2":return"";case"Numpad3":return"";case"Numpad4":return"";case"Numpad5":return"";case"Numpad6":return"";case"Numpad7":return"";case"Numpad8":return"";case"Numpad9":return"";case"NumpadMultiply":return"";case"NumpadAdd":return"";case"NumpadSubtract":return"";case"NumpadDecimal":return"";case"NumpadDivide":return"";case"F1":return"";case"F2":return"";case"F3":return"";case"F4":return"";case"F5":return"";case"F6":return"";case"F7":return"";case"F8":return"";case"F9":return"";case"F10":return"";case"F11":return"";case"F12":return"";case"Meta":case"MetaLeft":return"";case"ShiftRight":return"";case"ControlRight":return"";case"AltRight":return"";case"MetaRight":return"";case"Digit0":return"0";case"Digit1":return"1";case"Digit2":return"2";case"Digit3":return"3";case"Digit4":return"4";case"Digit5":return"5";case"Digit6":return"6";case"Digit7":return"7";case"Digit8":return"8";case"Digit9":return"9";case"KeyA":return"a";case"KeyB":return"b";case"KeyC":return"c";case"KeyD":return"d";case"KeyE":return"e";case"KeyF":return"f";case"KeyG":return"g";case"KeyH":return"h";case"KeyI":return"i";case"KeyJ":return"j";case"KeyK":return"k";case"KeyL":return"l";case"KeyM":return"m";case"KeyN":return"n";case"KeyO":return"o";case"KeyP":return"p";case"KeyQ":return"q";case"KeyR":return"r";case"KeyS":return"s";case"KeyT":return"t";case"KeyU":return"u";case"KeyV":return"v";case"KeyW":return"w";case"KeyX":return"x";case"KeyY":return"y";case"KeyZ":return"z";case"Semicolon":return";";case"Equal":return"=";case"Comma":return",";case"Minus":return"-";case"Period":return".";case"Slash":return"/";case"Backquote":return"`";case"BracketLeft":return"[";case"Backslash":return"\\";case"BracketRight":return"]";case"Quote":return'"';default:throw new Error(`Unknown key: "${s}"`)}};class Xb extends Ry{constructor(e){super();f(this,oi);y(this,oi,e)}async down(e,t){await r(this,oi).mainFrame().browsingContext.performActions([{type:At.Key,id:"__puppeteer_keyboard",actions:[{type:$e.KeyDown,value:au(e)}]}])}async up(e){await r(this,oi).mainFrame().browsingContext.performActions([{type:At.Key,id:"__puppeteer_keyboard",actions:[{type:$e.KeyUp,value:au(e)}]}])}async press(e,t={}){const{delay:n=0}=t,a=[{type:$e.KeyDown,value:au(e)}];n>0&&a.push({type:$e.Pause,duration:n}),a.push({type:$e.KeyUp,value:au(e)}),await r(this,oi).mainFrame().browsingContext.performActions([{type:At.Key,id:"__puppeteer_keyboard",actions:a}])}async type(e,t={}){const{delay:n=0}=t,a=[...e].map(au),o=[];if(n<=0)for(const c of a)o.push({type:$e.KeyDown,value:c},{type:$e.KeyUp,value:c});else for(const c of a)o.push({type:$e.KeyDown,value:c},{type:$e.Pause,duration:n},{type:$e.KeyUp,value:c});await r(this,oi).mainFrame().browsingContext.performActions([{type:At.Key,id:"__puppeteer_keyboard",actions:o}])}async sendCharacter(e){if([...e].length>1)throw new Error("Cannot send more than 1 character.");await(await r(this,oi).focusedFrame()).isolatedRealm().evaluate(async n=>{document.execCommand("insertText",!1,n)},e)}}oi=new WeakMap;const im=s=>{switch(s){case qe.Left:return 0;case qe.Middle:return 1;case qe.Right:return 2;case qe.Back:return 3;case qe.Forward:return 4}};class Jb extends Dy{constructor(e){super();f(this,Dr);f(this,Dn,{x:0,y:0});y(this,Dr,e)}async reset(){y(this,Dn,{x:0,y:0}),await r(this,Dr).mainFrame().browsingContext.releaseActions()}async move(e,t,n={}){const a=r(this,Dn),o={x:Math.round(e),y:Math.round(t)},c=[],u=n.steps??0;for(let l=0;l<u;++l)c.push({type:$e.PointerMove,x:a.x+(o.x-a.x)*(l/u),y:a.y+(o.y-a.y)*(l/u),origin:n.origin});c.push({type:$e.PointerMove,...o,origin:n.origin}),y(this,Dn,o),await r(this,Dr).mainFrame().browsingContext.performActions([{type:At.Pointer,id:"__puppeteer_mouse",actions:c}])}async down(e={}){await r(this,Dr).mainFrame().browsingContext.performActions([{type:At.Pointer,id:"__puppeteer_mouse",actions:[{type:$e.PointerDown,button:im(e.button??qe.Left)}]}])}async up(e={}){await r(this,Dr).mainFrame().browsingContext.performActions([{type:At.Pointer,id:"__puppeteer_mouse",actions:[{type:$e.PointerUp,button:im(e.button??qe.Left)}]}])}async click(e,t,n={}){const a=[{type:$e.PointerMove,x:Math.round(e),y:Math.round(t),origin:n.origin}],o={type:$e.PointerDown,button:im(n.button??qe.Left)},c={type:$e.PointerUp,button:o.button};for(let u=1;u<(n.count??1);++u)a.push(o,c);a.push(o),n.delay&&a.push({type:$e.Pause,duration:n.delay}),a.push(c),await r(this,Dr).mainFrame().browsingContext.performActions([{type:At.Pointer,id:"__puppeteer_mouse",actions:a}])}async wheel(e={}){await r(this,Dr).mainFrame().browsingContext.performActions([{type:At.Wheel,id:"__puppeteer_wheel",actions:[{type:$e.Scroll,...r(this,Dn)??{x:0,y:0},deltaX:e.deltaX??0,deltaY:e.deltaY??0}]}])}drag(){throw new we}dragOver(){throw new we}dragEnter(){throw new we}drop(){throw new we}dragAndDrop(){throw new we}}Dr=new WeakMap,Dn=new WeakMap;class dT{constructor(i,e,t,n,a,o){f(this,Td,!1);f(this,Md);f(this,Id);f(this,Fn);f(this,On);f(this,Ad);f(this,jo);y(this,On,i),y(this,Ad,e),y(this,Md,Math.round(n)),y(this,Id,Math.round(a)),y(this,jo,o),y(this,Fn,`__puppeteer_finger_${t}`)}async start(i={}){if(r(this,Td))throw new ah("Touch has already started");await r(this,On).mainFrame().browsingContext.performActions([{type:At.Pointer,id:r(this,Fn),parameters:{pointerType:"touch"},actions:[{type:$e.PointerMove,x:r(this,Md),y:r(this,Id),origin:i.origin},{...r(this,jo),type:$e.PointerDown,button:0}]}]),y(this,Td,!0)}move(i,e){const t=Math.round(i),n=Math.round(e);return r(this,On).mainFrame().browsingContext.performActions([{type:At.Pointer,id:r(this,Fn),parameters:{pointerType:"touch"},actions:[{...r(this,jo),type:$e.PointerMove,x:t,y:n}]}])}async end(){await r(this,On).mainFrame().browsingContext.performActions([{type:At.Pointer,id:r(this,Fn),parameters:{pointerType:"touch"},actions:[{type:$e.PointerUp,button:0}]}]),r(this,Ad).removeHandle(this)}}Td=new WeakMap,Md=new WeakMap,Id=new WeakMap,Fn=new WeakMap,On=new WeakMap,Ad=new WeakMap,jo=new WeakMap;class Yb extends Fy{constructor(e){super();f(this,Rd);y(this,Rd,e)}async touchStart(e,t,n={}){const a=this.idGenerator(),o={width:.5*2,height:.5*2,pressure:.5,altitudeAngle:Math.PI/2},c=new dT(r(this,Rd),this,a,e,t,o);return await c.start(n),this.touches.push(c),c}}Rd=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var hT=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},Qb=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},Zb=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},eS=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});let ou=(()=>{var n,a,o,c,u,l,p,h,gk,m,b,w,g,S,qd,Yg,Qg,A;let s=Ly,i,e=[],t=[];return A=class extends s{constructor(P,T){super();f(this,h);f(this,n,Qb(this,e,new he));f(this,a,Qb(this,t));f(this,o);f(this,c,null);f(this,u,new Set);W(this,"keyboard");W(this,"mouse");W(this,"touchscreen");W(this,"tracing");W(this,"coverage");f(this,l);f(this,p);W(this,"_userAgentHeaders",{});f(this,m);f(this,b);f(this,w);W(this,"_extraHTTPHeaders",{});f(this,g);W(this,"_credentials",null);f(this,S);y(this,a,P),y(this,o,Gb.from(this,T)),y(this,l,new zy(r(this,o).client)),this.tracing=new nv(r(this,o).client),this.coverage=new Hy(r(this,o).client),this.keyboard=new Xb(this),this.mouse=new Jb(this),this.touchscreen=new Yb(this)}static from(P,T){var L;const q=new A(P,T);return k(L=q,h,gk).call(L),q}get trustedEmitter(){return r(this,n)}set trustedEmitter(P){y(this,n,P)}_client(){return r(this,o).client}async setUserAgent(P,T){if(!r(this,a).browser().cdpSupported&&T)throw new we("Current Browser does not support `userAgentMetadata`");if(r(this,a).browser().cdpSupported&&T)return await this._client().send("Network.setUserAgentOverride",{userAgent:P,userAgentMetadata:T});const q=P!=="";P=P??await r(this,a).browser().userAgent(),this._userAgentHeaders=q?{"User-Agent":P}:{},y(this,m,await k(this,h,qd).call(this,["beforeRequestSent"],r(this,m),q));const L=K=>{Object.defineProperty(navigator,"userAgent",{value:K})},I=[r(this,o)];for(const K of I)I.push(...K.childFrames());r(this,b)&&await this.removeScriptToEvaluateOnNewDocument(r(this,b));const[_]=await Promise.all([q?this.evaluateOnNewDocument(L,P):void 0,I.map(K=>K.evaluate(L,P))]);y(this,b,_==null?void 0:_.identifier)}async setBypassCSP(P){await this._client().send("Page.setBypassCSP",{enabled:P})}async queryObjects(P){te(!P.disposed,"Prototype JSHandle is disposed!"),te(P.id,"Prototype JSHandle must not be referencing primitive value");const T=await r(this,o).client.send("Runtime.queryObjects",{prototypeObjectId:P.id});return r(this,o).mainRealm().createHandle({type:"array",handle:T.objects.objectId})}browser(){return this.browserContext().browser()}browserContext(){return r(this,a)}mainFrame(){return r(this,o)}async focusedFrame(){const P={stack:[],error:void 0,hasError:!1};try{const q=Zb(P,await this.mainFrame().isolatedRealm().evaluateHandle(()=>{let I=window;for(;(I.document.activeElement instanceof I.HTMLIFrameElement||I.document.activeElement instanceof I.HTMLFrameElement)&&I.document.activeElement.contentWindow!==null;)I=I.document.activeElement.contentWindow;return I}),!1).remoteValue();te(q.type==="window");const L=this.frames().find(I=>I._id===q.value.context);return te(L),L}catch(T){P.error=T,P.hasError=!0}finally{eS(P)}}frames(){const P=[r(this,o)];for(const T of P)P.push(...T.childFrames());return P}isClosed(){return r(this,o).detached}async close(P){const T={stack:[],error:void 0,hasError:!1};try{const q=Zb(T,await r(this,a).waitForScreenshotOperations(),!1);try{await r(this,o).browsingContext.close(P==null?void 0:P.runBeforeUnload)}catch{return}}catch(q){T.error=q,T.hasError=!0}finally{eS(T)}}async reload(P={}){const[T]=await Promise.all([r(this,o).waitForNavigation(P),r(this,o).browsingContext.reload()]).catch(zb(this.url(),P.timeout??this._timeoutSettings.navigationTimeout()));return T}setDefaultNavigationTimeout(P){this._timeoutSettings.setDefaultNavigationTimeout(P)}setDefaultTimeout(P){this._timeoutSettings.setDefaultTimeout(P)}getDefaultTimeout(){return this._timeoutSettings.timeout()}getDefaultNavigationTimeout(){return this._timeoutSettings.navigationTimeout()}isJavaScriptEnabled(){return r(this,l).javascriptEnabled}async setGeolocation(P){return await r(this,l).setGeolocation(P)}async setJavaScriptEnabled(P){return await r(this,l).setJavaScriptEnabled(P)}async emulateMediaType(P){return await r(this,l).emulateMediaType(P)}async emulateCPUThrottling(P){return await r(this,l).emulateCPUThrottling(P)}async emulateMediaFeatures(P){return await r(this,l).emulateMediaFeatures(P)}async emulateTimezone(P){return await r(this,l).emulateTimezone(P)}async emulateIdleState(P){return await r(this,l).emulateIdleState(P)}async emulateVisionDeficiency(P){return await r(this,l).emulateVisionDeficiency(P)}async setViewport(P){if(!this.browser().cdpSupported){await r(this,o).browsingContext.setViewport({viewport:P!=null&&P.width&&(P!=null&&P.height)?{width:P.width,height:P.height}:null,devicePixelRatio:P!=null&&P.deviceScaleFactor?P.deviceScaleFactor:null}),y(this,c,P);return}const T=await r(this,l).emulateViewport(P);y(this,c,P),T&&await this.reload()}viewport(){return r(this,c)}async pdf(P={}){const{timeout:T=this._timeoutSettings.timeout(),path:q=void 0}=P,{printBackground:L,margin:I,landscape:_,width:K,height:j,pageRanges:O,scale:D,preferCSSPageSize:N}=py(P,"cm"),$=O?O.split(", "):[];await it(ke(this.mainFrame().isolatedRealm().evaluate(()=>document.fonts.ready)).pipe(pt(It(T))));const B=await it(ke(r(this,o).browsingContext.print({background:L,margin:I,orientation:_?"landscape":"portrait",page:{width:K,height:j},pageRanges:$,scale:D,shrinkToFit:!N})).pipe(pt(It(T)))),X=np(B,!0);return await this._maybeWriteTypedArrayToFile(q,X),X}async createPDFStream(P){const T=await this.pdf(P);return new ReadableStream({start(q){q.enqueue(T),q.close()}})}async _screenshot(P){const{clip:T,type:q,captureBeyondViewport:L,quality:I}=P;if(P.omitBackground!==void 0&&P.omitBackground)throw new we("BiDi does not support 'omitBackground'.");if(P.optimizeForSpeed!==void 0&&P.optimizeForSpeed)throw new we("BiDi does not support 'optimizeForSpeed'.");if(P.fromSurface!==void 0&&!P.fromSurface)throw new we("BiDi does not support 'fromSurface'.");if(T!==void 0&&T.scale!==void 0&&T.scale!==1)throw new we("BiDi does not support 'scale' in 'clip'.");let _;if(T)if(L)_=T;else{const[j,O]=await this.evaluate(()=>{if(!window.visualViewport)throw new Error("window.visualViewport is not supported.");return[window.visualViewport.pageLeft,window.visualViewport.pageTop]});_={...T,x:T.x-j,y:T.y-O}}return await r(this,o).browsingContext.captureScreenshot({origin:L?"document":"viewport",format:{type:`image/${q}`,...I!==void 0?{quality:I/100}:{}},..._?{clip:{type:"box",..._}}:{}})}async createCDPSession(){return await r(this,o).createCDPSession()}async bringToFront(){await r(this,o).browsingContext.activate()}async evaluateOnNewDocument(P,...T){const q=fT(P,...T);return{identifier:await r(this,o).browsingContext.addPreloadScript(q)}}async removeScriptToEvaluateOnNewDocument(P){await r(this,o).browsingContext.removePreloadScript(P)}async exposeFunction(P,T){return await this.mainFrame().exposeFunction(P,"default"in T?T.default:T)}isDragInterceptionEnabled(){return!1}async setCacheEnabled(P){if(!r(this,a).browser().cdpSupported){await r(this,o).browsingContext.setCacheBehavior(P?"default":"bypass");return}await this._client().send("Network.setCacheDisabled",{cacheDisabled:!P})}async cookies(...P){const T=(P.length?P:[this.url()]).map(L=>new URL(L));return(await r(this,o).browsingContext.getCookies()).map(L=>sm(L)).filter(L=>T.some(I=>gT(L,I)))}isServiceWorkerBypassed(){throw new we}target(){throw new we}waitForFileChooser(){throw new we}workers(){return[...r(this,u)]}async setRequestInterception(P){y(this,w,await k(this,h,qd).call(this,["beforeRequestSent"],r(this,w),P))}async setExtraHTTPHeaders(P){const T={};for(const[q,L]of Object.entries(P))te(Lr(L),`Expected value of header "${q}" to be String, but "${typeof L}" is found.`),T[q.toLowerCase()]=L;this._extraHTTPHeaders=T,y(this,g,await k(this,h,qd).call(this,["beforeRequestSent"],r(this,g),!!Object.keys(this._extraHTTPHeaders).length))}async authenticate(P){y(this,S,await k(this,h,qd).call(this,["authRequired"],r(this,S),!!P)),this._credentials=P}setDragInterception(){throw new we}setBypassServiceWorker(){throw new we}async setOfflineMode(P){if(!r(this,a).browser().cdpSupported)throw new we;return r(this,p)||y(this,p,{offline:!1,upload:-1,download:-1,latency:0}),r(this,p).offline=P,await k(this,h,Yg).call(this)}async emulateNetworkConditions(P){if(!r(this,a).browser().cdpSupported)throw new we;return r(this,p)||y(this,p,{offline:!1,upload:-1,download:-1,latency:0}),r(this,p).upload=P?P.upload:-1,r(this,p).download=P?P.download:-1,r(this,p).latency=P?P.latency:0,await k(this,h,Yg).call(this)}async setCookie(...P){const T=this.url(),q=T.startsWith("http");for(const L of P){let I=L.url||"";!I&&q&&(I=T),te(I!=="about:blank",`Blank page can not have cookie "${L.name}"`),te(!String.prototype.startsWith.call(I||"","data:"),`Data URL page can not have cookie "${L.name}"`),te(L.partitionKey===void 0||typeof L.partitionKey=="string","BiDi only allows domain partition keys");const _=URL.canParse(I)?new URL(I):void 0,K=L.domain??(_==null?void 0:_.hostname);te(K!==void 0,"At least one of the url and domain needs to be specified");const j={domain:K,name:L.name,value:{type:"string",value:L.value},...L.path!==void 0?{path:L.path}:{},...L.httpOnly!==void 0?{httpOnly:L.httpOnly}:{},...L.secure!==void 0?{secure:L.secure}:{},...L.sameSite!==void 0?{sameSite:am(L.sameSite)}:{},expiry:om(L.expires),...nm(L,"sameParty","sourceScheme","priority","url")};L.partitionKey!==void 0?await this.browserContext().userContext.setCookie(j,L.partitionKey):await r(this,o).browsingContext.setCookie(j)}}async deleteCookie(...P){await Promise.all(P.map(async T=>{const q=T.url??this.url(),L=URL.canParse(q)?new URL(q):void 0,I=T.domain??(L==null?void 0:L.hostname);te(I!==void 0,"At least one of the url and domain needs to be specified");const _={domain:I,name:T.name,...T.path!==void 0?{path:T.path}:{}};await r(this,o).browsingContext.deleteCookie(_)}))}async removeExposedFunction(P){await r(this,o).removeExposedFunction(P)}metrics(){throw new we}async goBack(P={}){return await k(this,h,Qg).call(this,-1,P)}async goForward(P={}){return await k(this,h,Qg).call(this,1,P)}waitForDevicePrompt(){throw new we}},n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakSet,gk=function(){r(this,o).browsingContext.on("closed",()=>{this.trustedEmitter.emit("close",void 0),this.trustedEmitter.removeAllListeners()}),this.trustedEmitter.on("workercreated",P=>{r(this,u).add(P)}),this.trustedEmitter.on("workerdestroyed",P=>{r(this,u).delete(P)})},m=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakMap,qd=async function(P,T,q){if(q&&!T)return await r(this,o).browsingContext.addIntercept({phases:P});if(!q&&T){await r(this,o).browsingContext.userContext.browser.removeIntercept(T);return}return T},Yg=async function(){r(this,p)&&await this._client().send("Network.emulateNetworkConditions",{offline:r(this,p).offline,latency:r(this,p).latency,uploadThroughput:r(this,p).upload,downloadThroughput:r(this,p).download})},Qg=async function(P,T){const q=new AbortController;try{const[L]=await Promise.all([this.waitForNavigation({...T,signal:q.signal}),r(this,o).browsingContext.traverseHistory(P)]);return L}catch(L){if(q.abort(),Vt(L)&&L.message.includes("no such history entry"))return null;throw L}},(()=>{const P=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;i=[gh()],hT(A,null,i,{kind:"accessor",name:"trustedEmitter",static:!1,private:!1,access:{has:T=>"trustedEmitter"in T,get:T=>T.trustedEmitter,set:(T,q)=>{T.trustedEmitter=q}},metadata:P},e,t),P&&Object.defineProperty(A,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:P})})(),A})();function fT(s,...i){return`() => {${op(s,...i)}}`}function pT(s,i){const e=s.domain.toLowerCase(),t=i.hostname.toLowerCase();return e===t?!0:e.startsWith(".")&&t.endsWith(e)}function mT(s,i){const e=i.pathname,t=s.path;return!!(e===t||e.startsWith(t)&&(t.endsWith("/")||e[t.length]==="/"))}function gT(s,i){const e=new URL(i);return te(s!==void 0),pT(s,e)?mT(s,e):!1}function sm(s,i=!1){const e=s[Kh+"partitionKey"];function t(){return typeof e=="string"?{partitionKey:e}:typeof e=="object"&&e!==null?i?{partitionKey:{sourceOrigin:e.topLevelSite,hasCrossSiteAncestor:e.hasCrossSiteAncestor??!1}}:{partitionKey:e.topLevelSite}:{}}return{name:s.name,value:s.value.value,domain:s.domain,path:s.path,size:s.size,httpOnly:s.httpOnly,secure:s.secure,sameSite:yT(s.sameSite),expires:s.expiry??-1,session:s.expiry===void 0||s.expiry<=0,...wT(s,"sameParty","sourceScheme","partitionKeyOpaque","priority"),...t()}}const Kh="goog:";function wT(s,...i){const e={};for(const t of i)s[Kh+t]!==void 0&&(e[t]=s[Kh+t]);return e}function nm(s,...i){const e={};for(const t of i)s[t]!==void 0&&(e[Kh+t]=s[t]);return e}function yT(s){return s==="strict"?"Strict":s==="lax"?"Lax":"None"}function am(s){return s==="Strict"?"strict":s==="Lax"?"lax":"none"}function om(s){return[void 0,-1].includes(s)?void 0:s}function tS(s){if(s===void 0||typeof s=="string")return s;if(s.hasCrossSiteAncestor)throw new we("WebDriver BiDi does not support `hasCrossSiteAncestor` yet.");return s.sourceOrigin}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class vT extends uc{constructor(e){super();f(this,qo);y(this,qo,e)}asPage(){throw new we}url(){return""}createCDPSession(){throw new we}type(){return gt.BROWSER}browser(){return r(this,qo)}browserContext(){return r(this,qo).defaultBrowserContext()}opener(){throw new we}}qo=new WeakMap;class bT extends uc{constructor(e){super();f(this,ci);y(this,ci,e)}async page(){return r(this,ci)}async asPage(){return ou.from(this.browserContext(),r(this,ci).mainFrame().browsingContext)}url(){return r(this,ci).url()}createCDPSession(){return r(this,ci).createCDPSession()}type(){return gt.PAGE}browser(){return this.browserContext().browser()}browserContext(){return r(this,ci).browserContext()}opener(){throw new we}}ci=new WeakMap;class ST extends uc{constructor(e){super();f(this,ui);f(this,$o);y(this,ui,e)}async page(){return r(this,$o)===void 0&&y(this,$o,ou.from(this.browserContext(),r(this,ui).browsingContext)),r(this,$o)}async asPage(){return ou.from(this.browserContext(),r(this,ui).browsingContext)}url(){return r(this,ui).url()}createCDPSession(){return r(this,ui).createCDPSession()}type(){return gt.PAGE}browser(){return this.browserContext().browser()}browserContext(){return r(this,ui).page().browserContext()}opener(){throw new we}}ui=new WeakMap,$o=new WeakMap;class CT extends uc{constructor(e){super();f(this,Ko);y(this,Ko,e)}async page(){throw new we}async asPage(){throw new we}url(){return r(this,Ko).url()}createCDPSession(){throw new we}type(){return gt.OTHER}browser(){return this.browserContext().browser()}browserContext(){return r(this,Ko).frame.page().browserContext()}opener(){throw new we}}Ko=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var kT=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},rS=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},ET=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},xT=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});let iS=(()=>{var n,a,o,c,u,l,p,wk,Zg,m;let s=gy,i,e=[],t=[];return m=class extends s{constructor(g,S,E){super();f(this,p);f(this,n,rS(this,e,new he));f(this,a,rS(this,t));f(this,o);W(this,"userContext");f(this,c,new WeakMap);f(this,u,new Map);f(this,l,[]);y(this,a,g),this.userContext=S,y(this,o,E.defaultViewport)}static from(g,S,E){var C;const v=new m(g,S,E);return k(C=v,p,wk).call(C),v}get trustedEmitter(){return r(this,n)}set trustedEmitter(g){y(this,n,g)}targets(){return[...r(this,u).values()].flatMap(([g,S])=>[g,...S.values()])}async newPage(){const g={stack:[],error:void 0,hasError:!1};try{const S=ET(g,await this.waitForScreenshotOperations(),!1),E=await this.userContext.createBrowsingContext("tab"),v=r(this,c).get(E);if(!v)throw new Error("Page is not found");if(r(this,o))try{await v.setViewport(r(this,o))}catch{}return v}catch(S){g.error=S,g.hasError=!0}finally{xT(g)}}async close(){te(this.userContext.id!==qh.DEFAULT,"Default BrowserContext cannot be closed!");try{await this.userContext.remove()}catch(g){de(g)}r(this,u).clear()}browser(){return r(this,a)}async pages(){return[...this.userContext.browsingContexts].map(g=>r(this,c).get(g))}async overridePermissions(g,S){const E=new Set(S.map(v=>{if(!up.get(v))throw new Error("Unknown permission: "+v);return v}));await Promise.all(Array.from(up.keys()).map(v=>{const C=this.userContext.setPermissions(g,{name:v},E.has(v)?"granted":"denied");return r(this,l).push({origin:g,permission:v}),E.has(v)?C:C.catch(de)}))}async clearPermissionOverrides(){const g=r(this,l).map(({permission:S,origin:E})=>this.userContext.setPermissions(E,{name:S},"prompt").catch(de));y(this,l,[]),await Promise.all(g)}get id(){if(this.userContext.id!==qh.DEFAULT)return this.userContext.id}async cookies(){return(await this.userContext.getCookies()).map(S=>sm(S,!0))}async setCookie(...g){await Promise.all(g.map(async S=>{const E={domain:S.domain,name:S.name,value:{type:"string",value:S.value},...S.path!==void 0?{path:S.path}:{},...S.httpOnly!==void 0?{httpOnly:S.httpOnly}:{},...S.secure!==void 0?{secure:S.secure}:{},...S.sameSite!==void 0?{sameSite:am(S.sameSite)}:{},expiry:om(S.expires),...nm(S,"sameParty","sourceScheme","priority","url")};return await this.userContext.setCookie(E,tS(S.partitionKey))}))}},n=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,p=new WeakSet,wk=function(){for(const g of this.userContext.browsingContexts)k(this,p,Zg).call(this,g);this.userContext.on("browsingcontext",({browsingContext:g})=>{const S=k(this,p,Zg).call(this,g);if(g.originalOpener)for(const E of this.userContext.browsingContexts)E.id===g.originalOpener&&r(this,c).get(E).trustedEmitter.emit("popup",S)}),this.userContext.on("closed",()=>{this.trustedEmitter.removeAllListeners()})},Zg=function(g){const S=ou.from(this,g);r(this,c).set(g,S),S.trustedEmitter.on("close",()=>{r(this,c).delete(g)});const E=new bT(S),v=new Map;return r(this,u).set(S,[E,v]),S.trustedEmitter.on("frameattached",C=>{const A=C,F=new ST(A);v.set(A,F),this.trustedEmitter.emit("targetcreated",F)}),S.trustedEmitter.on("framenavigated",C=>{const A=C,F=v.get(A);F===void 0?this.trustedEmitter.emit("targetchanged",E):this.trustedEmitter.emit("targetchanged",F)}),S.trustedEmitter.on("framedetached",C=>{const A=C,F=v.get(A);F!==void 0&&(v.delete(A),this.trustedEmitter.emit("targetdestroyed",F))}),S.trustedEmitter.on("workercreated",C=>{const A=C,F=new CT(A);v.set(A,F),this.trustedEmitter.emit("targetcreated",F)}),S.trustedEmitter.on("workerdestroyed",C=>{const A=C,F=v.get(A);F!==void 0&&(v.delete(C),this.trustedEmitter.emit("targetdestroyed",F))}),S.trustedEmitter.on("close",()=>{r(this,u).delete(S),this.trustedEmitter.emit("targetdestroyed",E)}),this.trustedEmitter.emit("targetcreated",E),S},(()=>{const g=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;i=[gh()],kT(m,null,i,{kind:"accessor",name:"trustedEmitter",static:!1,private:!1,access:{has:S=>"trustedEmitter"in S,get:S=>S.trustedEmitter,set:(S,E)=>{S.trustedEmitter=E}},metadata:g},e,t),g&&Object.defineProperty(m,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g})})(),m})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var PT=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},da=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},_T=function(s,i,e){if(i!=null){if(typeof i!="object"&&typeof i!="function")throw new TypeError("Object expected.");var t,n;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=i[Symbol.asyncDispose]}if(t===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=i[Symbol.dispose],e&&(n=t)}if(typeof t!="function")throw new TypeError("Object not disposable.");n&&(t=function(){try{n.call(this)}catch(a){return Promise.reject(a)}}),s.stack.push({value:i,dispose:t,async:e})}else e&&s.stack.push({async:!0});return i},TT=function(s){return function(i){function e(o){i.error=i.hasError?new s(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,n=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&n===1)return n=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return n|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else n|=1}catch(c){e(c)}if(n===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}}(typeof SuppressedError=="function"?SuppressedError:function(s,i,e){var t=new Error(e);return t.name="SuppressedError",t.error=s,t.suppressed=i,t});let MT=(()=>{var u,l,p,h,d,m,yk,vk,bk,ew,E;let s=he,i=[],e,t,n,a,o,c;return E=class extends s{constructor(A){super();f(this,m);f(this,u,(PT(this,i),!1));f(this,l);f(this,p,new Xe);f(this,h,new Map);W(this,"session");f(this,d,new Map);this.session=A}static async from(A){var R;const F=new E(A);return await k(R=F,m,yk).call(R),F}get closed(){return r(this,u)}get defaultUserContext(){return r(this,h).get(qh.DEFAULT)}get disconnected(){return r(this,l)!==void 0}get disposed(){return this.disconnected}get userContexts(){return r(this,h).values()}dispose(A,F=!1){y(this,u,F),y(this,l,A),this[ge]()}async close(){try{await this.session.send("browser.close",{})}finally{this.dispose("Browser already closed.",!0)}}async addPreloadScript(A,F={}){var P;const{result:{script:R}}=await this.session.send("script.addPreloadScript",{functionDeclaration:A,...F,contexts:(P=F.contexts)==null?void 0:P.map(T=>T.id)});return R}async removeIntercept(A){await this.session.send("network.removeIntercept",{intercept:A})}async removePreloadScript(A){await this.session.send("script.removePreloadScript",{script:A})}async createUserContext(){const{result:{userContext:A}}=await this.session.send("browser.createUserContext",{});return k(this,m,ew).call(this,A)}[(e=[wi],t=[se(A=>r(A,l))],n=[se(A=>r(A,l))],a=[se(A=>r(A,l))],o=[se(A=>r(A,l))],c=[se(A=>r(A,l))],ge)](){r(this,l)??y(this,l,"Browser was disconnected, probably because the session ended."),this.closed&&this.emit("closed",{reason:r(this,l)}),this.emit("disconnected",{reason:r(this,l)}),r(this,p).dispose(),super[ge]()}},u=new WeakMap,l=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakSet,yk=async function(){const A=r(this,p).use(new he(this.session));A.once("ended",({reason:F})=>{this.dispose(F)}),A.on("script.realmCreated",F=>{F.type==="shared-worker"&&r(this,d).set(F.realm,Xp.from(this,F.realm,F.origin))}),await k(this,m,vk).call(this),await k(this,m,bk).call(this)},vk=async function(){const{result:{userContexts:A}}=await this.session.send("browser.getUserContexts",{});for(const F of A)k(this,m,ew).call(this,F.userContext)},bk=async function(){const A=new Set;let F;{const R={stack:[],error:void 0,hasError:!1};try{_T(R,new he(this.session),!1).on("browsingContext.contextCreated",q=>{A.add(q.context)});const{result:T}=await this.session.send("browsingContext.getTree",{});F=T.contexts}catch(P){R.error=P,R.hasError=!0}finally{TT(R)}}for(const R of F)A.has(R.context)||this.session.emit("browsingContext.contextCreated",R),R.children&&F.push(...R.children)},ew=function(A){const F=qh.create(this,A);r(this,h).set(F.id,F);const R=r(this,p).use(new he(F));return R.once("closed",()=>{R.removeAllListeners(),r(this,h).delete(F.id)}),F},(()=>{const A=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;da(E,null,e,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:F=>"dispose"in F,get:F=>F.dispose},metadata:A},null,i),da(E,null,t,{kind:"method",name:"close",static:!1,private:!1,access:{has:F=>"close"in F,get:F=>F.close},metadata:A},null,i),da(E,null,n,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:F=>"addPreloadScript"in F,get:F=>F.addPreloadScript},metadata:A},null,i),da(E,null,a,{kind:"method",name:"removeIntercept",static:!1,private:!1,access:{has:F=>"removeIntercept"in F,get:F=>F.removeIntercept},metadata:A},null,i),da(E,null,o,{kind:"method",name:"removePreloadScript",static:!1,private:!1,access:{has:F=>"removePreloadScript"in F,get:F=>F.removePreloadScript},metadata:A},null,i),da(E,null,c,{kind:"method",name:"createUserContext",static:!1,private:!1,access:{has:F=>"createUserContext"in F,get:F=>F.createUserContext},metadata:A},null,i),A&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:A})})(),E})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var cm=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},ha=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0};let IT=(()=>{var p,h,d,m,b,Sk,g;let s=he,i=[],e,t=[],n=[],a,o,c,u,l;return g=class extends s{constructor(v,C){super();f(this,b);f(this,p,cm(this,i));f(this,h,new Xe);f(this,d);W(this,"browser");f(this,m,cm(this,t,void 0));cm(this,n),y(this,d,C),this.connection=v}static async from(v,C){var R;const{result:A}=await v.send("session.new",{capabilities:C}),F=new g(v,A);return await k(R=F,b,Sk).call(R),F}get connection(){return r(this,m)}set connection(v){y(this,m,v)}get capabilities(){return r(this,d).capabilities}get disposed(){return this.ended}get ended(){return r(this,p)!==void 0}get id(){return r(this,d).sessionId}dispose(v){y(this,p,v),this[ge]()}async send(v,C){return await this.connection.send(v,C)}async subscribe(v,C){await this.send("session.subscribe",{events:v,contexts:C})}async addIntercepts(v,C){await this.send("session.subscribe",{events:v,contexts:C})}async end(){try{await this.send("session.end",{})}finally{this.dispose("Session already ended.")}}[(e=[gh()],a=[wi],o=[se(v=>r(v,p))],c=[se(v=>r(v,p))],u=[se(v=>r(v,p))],l=[se(v=>r(v,p))],ge)](){r(this,p)??y(this,p,"Session already destroyed, probably because the connection broke."),this.emit("ended",{reason:r(this,p)}),r(this,h).dispose(),super[ge]()}},p=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakMap,b=new WeakSet,Sk=async function(){this.browser=await MT.from(this),r(this,h).use(this.browser).once("closed",({reason:A})=>{this.dispose(A)});const C=new WeakSet;this.on("browsingContext.fragmentNavigated",A=>{C.has(A)||(C.add(A),this.emit("browsingContext.navigationStarted",A),this.emit("browsingContext.fragmentNavigated",A))})},(()=>{const v=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;ha(g,null,e,{kind:"accessor",name:"connection",static:!1,private:!1,access:{has:C=>"connection"in C,get:C=>C.connection,set:(C,A)=>{C.connection=A}},metadata:v},t,n),ha(g,null,a,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:C=>"dispose"in C,get:C=>C.dispose},metadata:v},null,i),ha(g,null,o,{kind:"method",name:"send",static:!1,private:!1,access:{has:C=>"send"in C,get:C=>C.send},metadata:v},null,i),ha(g,null,c,{kind:"method",name:"subscribe",static:!1,private:!1,access:{has:C=>"subscribe"in C,get:C=>C.subscribe},metadata:v},null,i),ha(g,null,u,{kind:"method",name:"addIntercepts",static:!1,private:!1,access:{has:C=>"addIntercepts"in C,get:C=>C.addIntercepts},metadata:v},null,i),ha(g,null,l,{kind:"method",name:"end",static:!1,private:!1,access:{has:C=>"end"in C,get:C=>C.end},metadata:v},null,i),v&&Object.defineProperty(g,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:v})})(),g})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var AT=function(s,i,e,t,n,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var c=t.kind,u=c==="getter"?"get":c==="setter"?"set":"value",l=!i&&s?t.static?s:s.prototype:null,p=i||(l?Object.getOwnPropertyDescriptor(l,t.name):{}),h,d=!1,m=e.length-1;m>=0;m--){var b={};for(var w in t)b[w]=w==="access"?{}:t[w];for(var w in t.access)b.access[w]=t.access[w];b.addInitializer=function(S){if(d)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var g=(0,e[m])(c==="accessor"?{get:p.get,set:p.set}:p[u],b);if(c==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(h=o(g.get))&&(p.get=h),(h=o(g.set))&&(p.set=h),(h=o(g.init))&&n.unshift(h)}else(h=o(g))&&(c==="field"?n.unshift(h):p[u]=h)}l&&Object.defineProperty(l,t.name,p),d=!0},sS=function(s,i,e){for(var t=arguments.length>2,n=0;n<i.length;n++)e=t?i[n].call(s,e):i[n].call(s);return t?e:void 0},nS=function(s,i,e){return typeof i=="symbol"&&(i=i.description?"[".concat(i.description,"]"):""),Object.defineProperty(s,"name",{configurable:!0,value:e?"".concat(e," ",i):i})};let RT=(()=>{var a,o,c,qn,Ck,p,h,d,m,b,w,g,kk,Ek,xk,tw;let s=my,i,e=[],t=[],n;return a=class extends s{constructor(R,P){super();f(this,c);W(this,"protocol","webDriverBiDi");f(this,o,sS(this,e,new he));f(this,p,sS(this,t));f(this,h);f(this,d);f(this,m);f(this,b,new WeakMap);f(this,w,new vT(this));f(this,g);y(this,p,P.process),y(this,h,P.closeCallback),y(this,d,R),y(this,m,P.defaultViewport),y(this,g,P.cdpConnection)}static async create(R){var q,L,I;const P=await IT.from(R.connection,{firstMatch:(q=R.capabilities)==null?void 0:q.firstMatch,alwaysMatch:{...(L=R.capabilities)==null?void 0:L.alwaysMatch,acceptInsecureCerts:R.acceptInsecureCerts,unhandledPromptBehavior:{default:"ignore"},webSocketUrl:!0,"goog:prerenderingDisabled":!0}});await P.subscribe(P.capabilities.browserName.toLocaleLowerCase().includes("firefox")?a.subscribeModules:[...a.subscribeModules,...a.subscribeCdpEvents]);const T=new a(P.browser,R);return k(I=T,c,kk).call(I),T}get cdpSupported(){return r(this,g)!==void 0}get cdpConnection(){return r(this,g)}async userAgent(){return r(this,d).session.capabilities.userAgent}get connection(){return r(this,d).session.connection}wsEndpoint(){return this.connection.url}async close(){var R;if(!this.connection.closed)try{await r(this,d).close(),await((R=r(this,h))==null?void 0:R.call(null))}catch(P){de(P)}finally{this.connection.dispose()}}get connected(){return!r(this,d).disconnected}process(){return r(this,p)??null}async createBrowserContext(R){const P=await r(this,d).createUserContext();return k(this,c,tw).call(this,P)}async version(){return`${r(this,c,Ek)}/${r(this,c,xk)}`}browserContexts(){return[...r(this,d).userContexts].map(R=>r(this,b).get(R))}defaultBrowserContext(){return r(this,b).get(r(this,d).defaultUserContext)}newPage(){return this.defaultBrowserContext().newPage()}targets(){return[r(this,w),...this.browserContexts().flatMap(R=>R.targets())]}target(){return r(this,w)}async disconnect(){try{await r(this,d).session.end()}catch(R){de(R)}finally{this.connection.dispose()}}get debugInfo(){return{pendingProtocolErrors:this.connection.getPendingProtocolErrors()}}},o=new WeakMap,c=new WeakSet,qn=function(){return n.get.call(this)},Ck=function(R){return n.set.call(this,R)},p=new WeakMap,h=new WeakMap,d=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,g=new WeakMap,kk=function(){var R;for(const P of r(this,d).userContexts)k(this,c,tw).call(this,P);r(this,d).once("disconnected",()=>{r(this,c,qn).emit("disconnected",void 0),r(this,c,qn).removeAllListeners()}),(R=r(this,p))==null||R.once("close",()=>{r(this,d).dispose("Browser process exited.",!0),this.connection.dispose()})},Ek=function(){return r(this,d).session.capabilities.browserName},xk=function(){return r(this,d).session.capabilities.browserVersion},tw=function(R){const P=iS.from(this,R,{defaultViewport:r(this,m)});return r(this,b).set(R,P),P.trustedEmitter.on("targetcreated",T=>{r(this,c,qn).emit("targetcreated",T)}),P.trustedEmitter.on("targetchanged",T=>{r(this,c,qn).emit("targetchanged",T)}),P.trustedEmitter.on("targetdestroyed",T=>{r(this,c,qn).emit("targetdestroyed",T)}),P},(()=>{const R=typeof Symbol=="function"&&Symbol.metadata?Object.create(s[Symbol.metadata]??null):void 0;i=[gh()],AT(a,n={get:nS(function(){return r(this,o)},"#trustedEmitter","get"),set:nS(function(P){y(this,o,P)},"#trustedEmitter","set")},i,{kind:"accessor",name:"#trustedEmitter",static:!1,private:!0,access:{has:P=>Tt(c,P),get:P=>r(P,c,qn),set:(P,T)=>{y(P,c,T,Ck)}},metadata:R},e,t),R&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:R})})(),W(a,"subscribeModules",["browsingContext","network","log","script"]),W(a,"subscribeCdpEvents",["cdp.Debugger.scriptParsed","cdp.CSS.styleSheetAdded","cdp.Runtime.executionContextsCleared","cdp.Tracing.tracingComplete","cdp.Network.requestWillBeSent","cdp.Debugger.scriptParsed","cdp.Page.screencastFrame"]),a})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const aS=Object.freeze(Object.defineProperty({__proto__:null,BidiBrowser:RT,BidiBrowserContext:iS,BidiConnection:Bb,BidiElementHandle:su,BidiFrame:Gb,BidiFrameRealm:Si,BidiHTTPRequest:em,BidiHTTPResponse:Kb,BidiJSHandle:bi,BidiKeyboard:Xb,BidiMouse:Jb,BidiPage:ou,BidiRealm:tm,BidiTouchscreen:Yb,BidiWorkerRealm:$h,bidiToPuppeteerCookie:sm,cdpSpecificCookiePropertiesFromPuppeteerToBidi:nm,connectBidiOverCdp:O1,convertCookiesExpiryCdpToBiDi:om,convertCookiesPartitionKeyFromPuppeteerToBiDi:tS,convertCookiesSameSiteCdpToBiDi:am,requests:Zp},Symbol.toStringTag,{value:"Module"}));var um,oS;function DT(){return oS||(oS=1,um=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),um}var FT=DT();const OT=$f(FT);/**
 * @license
 * Copyright 2018 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Tm=class Tm{constructor(i){f(this,li);W(this,"onmessage");W(this,"onclose");y(this,li,i),r(this,li).addEventListener("message",e=>{this.onmessage&&this.onmessage.call(null,e.data)}),r(this,li).addEventListener("close",()=>{this.onclose&&this.onclose.call(null)}),r(this,li).addEventListener("error",()=>{})}static create(i,e){return new Promise((t,n)=>{const a=new OT(i,[],{followRedirects:!0,perMessageDeflate:!1,allowSynchronousEvents:!1,maxPayload:268435456,headers:{"User-Agent":`Puppeteer ${ny}`,...e}});a.addEventListener("open",()=>t(new Tm(a))),a.addEventListener("error",n)})}send(i){r(this,li).send(i)}close(){r(this,li).close()}};li=new WeakMap;let lm=Tm;const NT=Object.freeze(Object.defineProperty({__proto__:null,NodeWebSocketTransport:lm},Symbol.toStringTag,{value:"Module"}));return M_}();
background;
